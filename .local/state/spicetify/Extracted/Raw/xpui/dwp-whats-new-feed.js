"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4084],{15199:(e,t,i)=>{i.d(t,{e:()=>c});var a=i(30758),n=i(8340),r=i(41170),s=i(82936),l=i(86070);const o=a.memo((function({uri:e,size:t=n.M.md,className:i,onClick:o,showUpsell:c,canDownload:d,condensed:u}){const[m,p]=(0,s.A)(e),g=(0,r.W)(),h=(0,a.useCallback)((()=>{g({targetUri:e,intent:m?"remove-from-library":"add-to-library",type:"click"}),p(!m)}),[g,e,m,p]);return(0,l.jsx)(n.f,{className:i,isFollowing:m,onFollow:h,onClick:o,uri:e,size:t,showUpsell:c,canDownload:d,condensed:u})})),c=a.memo((function(e){return(0,l.jsx)(o,{...e})}))},21973:(e,t,i)=>{i.d(t,{s:()=>y});var a=i(30758),n=i(97500),r=i.n(n),s=i(30485),l=i(56468),o=i(17160),c=i(52153),d=i(50006);const u="IVnoxrO3iL_tz5ULI8g_";var m=i(86070);const p={marginBlockEnd:0,willChange:"transform, opacity"},g=({filterId:e=null,isPrimaryFilter:t,isPlaceholder:i,resetFilterIds:n,toggleFilterId:l,className:o,innerRef:c,onFilterClick:d,index:g=0,...h})=>{const y=h.selected,x=(0,a.useCallback)((()=>{if(!e)return n(),void d(null,!1,g);d(e,!!y,g),l(e)}),[e,n,l,d,y,g]),f=(0,a.useCallback)((e=>{e.detail>1||i||x()}),[i,x]);return(0,m.jsx)(s.v,{...h,className:r()(o,{[u]:i}),onClick:f,selectedColorSet:"invertedLight",secondary:y&&!t,style:p,ref:c,tabIndex:t?0:-1})},h=({filterId:e=null,isPlaceholder:t,resetFilterIds:i,toggleFilterId:n,className:s,innerRef:c,onFilterClick:d,index:g=0,...h})=>{const y=h.selected,x=(0,a.useCallback)((()=>{if(!e)return i(),void d(null,!1,g);d(e,!!y,g),n(e)}),[e,i,n,d,y,g]),f=(0,a.useCallback)((e=>{e.detail>1||t||x()}),[t,x]);return(0,m.jsx)(l.m,{...h,"aria-label":o.Ru.get("web-player.clear-filter"),className:r()(s,{[u]:t}),onClick:f,style:p,ref:c,tabIndex:-1})},y=(0,a.memo)((function({placeholderFilters:e=[],availableFilters:t,selectedFilters:i,toggleFilterId:n,resetFilterIds:r,onFilterClick:s,ariaLabel:l,clearBtnAriaLabel:o,className:u,applyLightThemeControls:p=!1}){const y=!(i||t),x=y?e:[...i??[],...t??[]],f=(0,a.useRef)(null),b=(0,a.useCallback)((()=>{(0,d.MS)(f.current,f.current?.nextElementSibling instanceof HTMLElement?f.current?.nextElementSibling:null),r()}),[r]);return 0===x.length?null:(0,m.jsxs)(c.FN,{className:u,ariaLabel:l,applyLightThemeControls:p,role:"listbox",children:[!!i?.length&&(0,m.jsx)(h,{resetFilterIds:b,toggleFilterId:n,onFilterClick:s,"aria-label":o??l,innerRef:f}),x.map(((e,t)=>{const a=i?.includes(e),l=0===t;return(0,m.jsx)(g,{filterId:e.id,isPrimaryFilter:l,isPlaceholder:y,onFilterClick:s,resetFilterIds:r,toggleFilterId:n,selected:a,index:t,children:e.getName()},e.id)}))]})}))},29646:(e,t,i)=>{i.d(t,{P:()=>a.P});var a=i(42421)},42421:(e,t,i)=>{i.d(t,{P:()=>m});var a=i(40678),n=i(98182),r=i(26316),s=i(34486),l=i(52240),o=i(42024),c=i(37812),d=i(55921),u=i(86070);const m=({episode:e,showVideoBadge:t=!1})=>{const{badges:i}=(0,d.b)((e=>"contentRating"in e)(e)?{contentRating:e?.contentRating?.label,isPaywalled:e.podcastSubscription?.isPaywalled,isVideo:e.mediaTypes?.includes(c.C.Video)}:{isExplicit:e?.isExplicit,isMOGEFRestricted:e?.is19PlusOnly,isPaywalled:e.podcastSubscription?.isPaywalled}),m=e.gatedEntityRelations&&e.gatedEntityRelations.entitiesWithValueProps.at(0),p=(0,r.B)(m,e);return(0,u.jsxs)(u.Fragment,{children:[i.explicit&&(0,u.jsx)(s.U,{}),p?(0,u.jsx)(n.x,{gatedEntityRelations:e.gatedEntityRelations}):i.paid&&(0,u.jsx)(l.y,{}),i.nineteen&&(0,u.jsx)(o.q,{size:16}),t&&i.isVideo&&(0,u.jsx)(a.T,{})]})}},56468:(e,t,i)=>{i.d(t,{m:()=>v});var a=i(62764),n=i(30758),r=i(96964),s=i(10604),l=i(39822),o=i(79458),c=i(30485),d=i(23806),u=i(53611),m=i(87625),p=i(66563),g=i(66415),h=i(65976),y=i(49996),x=i(90198),f=i(86403),b=x.Ay.button.withConfig({displayName:"ChipClear__ChipClearComponent",componentId:"sc-zv5btm-0"})(["",""],(function(e){var t=e.$size,i=e.$isUsingKeyboard,a=e.$useBrowserDefaultFocusStyle;return(0,f.AH)(["",";",";",";border-radius:50%;display:inline-flex;vertical-align:middle;padding:",";transition-property:background-color,color;transition-duration:var(--shortest-3);transition-timing-function:var(--productive);background-color:",";&:hover{background-color:",";transition-duration:var(--shortest-1);}&:active{background-color:",";}&:disabled,&[aria-disabled='true']{background-color:",";opacity:",";cursor:",";}&:not(:last-child){margin-inline-end:",";margin-block-end:",";}"],(0,u.W)(),(0,m.y0)(a),!a&&(0,p.X2)("50%",i),"sm"===t?(0,g.po)("tighter-2","8px"):(0,g.po)("tighter","12px"),(0,h.oj)(h.ZI.backgroundTintedBase),(0,h.oj)(h.ZI.backgroundTintedHighlight),(0,h.oj)(h.ZI.backgroundTintedPress),(0,h.oj)(h.ZI.backgroundTintedBase),y.ok,y.zM,(0,g.po)("tighter-2","8px"),(0,g.po)("tighter-2","8px"))})),w=["size"],v=n.forwardRef((function(e,t){var i=e.size,u=void 0===i?"sm":i,m=(0,a.A)(e,w),p=(0,n.useContext)(l.E).isUsingKeyboard,g=(0,n.useContext)(r.g).useBrowserDefaultFocusStyle,h=(0,n.useContext)(s.i_),y="sm"===u?"small":"medium";return"next"===(0,s.BS)(s.NH.chip,h)?n.createElement(c.v,Object.assign({ref:t,size:u,iconLeading:d.M},m,{"data-encore-id":o.j.ChipClear})):n.createElement(b,Object.assign({ref:t,$size:u,$isUsingKeyboard:p,$useBrowserDefaultFocusStyle:g},m,{"data-encore-id":o.j.ChipClear}),n.createElement(d.M,{size:y,"aria-hidden":"true"}))}))},63473:(e,t,i)=>{i.d(t,{V:()=>s});var a=i(30758),n=i(64871),r=i(89137);function s(e){const t=(0,n.o_h)(e);let i="";return t&&(i=t.toURLPath(!0)),function(e){const t=(0,r.g)();return(0,a.useCallback)((()=>{""!==e&&t(e)}),[e,t])}(i)}},79775:(e,t,i)=>{i.d(t,{R:()=>p});var a=i(30758),n=i(16730),r=i(50006);function s(e,t,i=!1){if(!e)return void console.error("No list element found. Canceling moving focus");if(!(0,r.fk)(e))return;const a=e.querySelector('[tabindex="0"]');t===n.O.UP&&(0,r.MS)(a,l(e,a,n.O.UP,i)),t===n.O.DOWN&&(0,r.MS)(a,l(e,a,n.O.DOWN,i)),t===n.O.RIGHT&&(0,r.MS)(a,o(a,n.O.RIGHT,i)),t===n.O.LEFT&&(0,r.MS)(a,o(a,n.O.LEFT,i)),t===n.O.HOME&&(0,r.MS)(a,c(n.O.HOME,i)??a),t===n.O.END&&(0,r.MS)(a,c(n.O.END,i)??a)}function l(e,t,i,a=!1){const s=t.closest('li[role="row"]');if(!s)return t;let l=s;const c=Array.from(e.querySelectorAll('li[role="row"]')),d=Array.from(s.querySelectorAll(r.nu)),u=c.indexOf(s);if(u<0)return t;const m=(a&&t!==d[0]||!a&&t!==s)&&!(t instanceof HTMLLIElement);if(i===n.O.UP){if(document.activeElement===e){l=c[c.length-1];return(a?l.querySelector(r.nu):l)??t}if(m)return o(t,n.O.LEFT,a);let i=u-1;if(-1===i)return t;l=c[i],i-=1}else if(i===n.O.DOWN){if(document.activeElement===e){l=c[0];return(a?l.querySelector(r.nu):l)??t}if(m)return o(t,n.O.RIGHT,a);let i=u+1;if(i===c.length)return t;l=c[i],i+=1}return(a?l.querySelector(r.nu):l)??t}function o(e,t,i=!1){const a=e.closest('li[role="row"]');if(!a)return e;let s=e;const l=Array.from(a.querySelectorAll(r.nu)),o=l.indexOf(e);let c=0;if(t===n.O.RIGHT&&o-1!==l.length)c=o+1;else{if(t===n.O.LEFT&&-1===o)return a;if(t===n.O.LEFT&&0!==o)c=o-1;else if(t===n.O.LEFT&&0===o){return(i?a.querySelector(r.nu):a)??a}}return s=l.at(c),s??e}function c(e,t=!1){const{currentFocus:i,listEl:a}=function(){const e=document.activeElement,t=e?.closest("ul");return((0,n.I)(e)||e instanceof HTMLLIElement)&&t?{currentFocus:e,listEl:t}:{currentFocus:null,listEl:null}}();if(null===i||null===a)return null;const s=i.closest('li[role="row"]');if(!s)return i;const l=Array.from(a.querySelectorAll('li[role="row"]')),o=Array.from(s.querySelectorAll(r.nu));if(l.indexOf(s)<0)return i;const c=t&&i===o[0]||!t&&i===s;if(e===n.O.HOME){if(c){return(t?l[0].querySelector(r.nu):l[0])??i}return(t?o[1]:o[0])??i}if(e===n.O.END){if(c){return(t?l[l.length-1].querySelector(r.nu):l[l.length-1])??i}return o[o.length-1]??i}return i}var d=i(16995),u=i(50431),m=i(86070);const p=(0,a.forwardRef)((({onKeyDown:e,children:t,firstInteractiveIsWrapper:i=!1,...l},o)=>{const c=(0,u.N)(o);(0,d.R)(c);const p=(0,a.useCallback)((t=>{c.current?.contains(t.target)&&("ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"Home"!==t.key&&"End"!==t.key||t.preventDefault(),"ArrowUp"!==t.key&&"ArrowDown"!==t.key||document.documentElement.classList.remove("no-focus-outline"),"ArrowUp"===t.key&&s(c.current,n.O.UP,i),"ArrowDown"===t.key&&s(c.current,n.O.DOWN,i),"ArrowRight"===t.key&&s(c.current,n.O.RIGHT,i),"ArrowLeft"===t.key&&s(c.current,n.O.LEFT,i),"Home"===t.key&&s(c.current,n.O.HOME,i),"End"===t.key&&s(c.current,n.O.END,i),e?.(t))}),[i,c,e]),g=(0,a.useCallback)((e=>{if(!c.current)return;const t=e.target,i=c.current.querySelector('[tabindex="0"]');t.closest('li[role="row"]')&&t!==i&&(0,r.MS)(i,t,{preventScroll:!0})}),[c]);return(0,m.jsx)("ul",{role:"treegrid",ref:c,onKeyDown:p,onFocus:g,tabIndex:0,...l,children:t})}))},91090:(e,t,i)=>{i.d(t,{WhatsNewFeed:()=>ut});var a=i(30758),n=i(76837),r=i(97500),s=i.n(r),l=i(98715),o=i(12738),c=i(29494),d=i(17160),u=i(79775),m=i(1043),p=i(98691),g=i(91064),h=i(67283),y=i(21973),x=i(38684);const f="q5riNmaoksSuEEvQAurA";var b=i(86070);const w=[{id:"ALBUM",getName:()=>d.Ru.get("web-player.whats-new-feed.filters.music"),ubiId:"Music"},{id:"EPISODE",getName:()=>d.Ru.get("web-player.whats-new-feed.filters.episodes"),ubiId:"Podcast & Shows"},{id:"WHATS_NEW_FEED_NOTIFICATION",getName:()=>d.Ru.get("web-player.whats-new-feed.filters.notifications"),ubiId:"Merch & Events"}],v=(0,a.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:i,resetFilterIds:n,className:r,spec:s}){const l=d.Ru.get("web-player.whats-new-feed.filters.options"),o=(0,x.s)(),c=(0,a.useMemo)((()=>{const t=new Map;return(e||[]).forEach((e=>{t.set(e.id,e)})),t}),[e]),u=(0,a.useCallback)(((e,t,i)=>{let a;if(!e)return a=s.clearFiltersFactory().hitClearFilter(),void o.logInteraction(a);const n=c.get(e);if(!n)return;const r=s.filterChipFactory({identifier:n.ubiId,position:i});a=t?r.hitClearFilter():r.hitFilter(),o.logInteraction(a)}),[s,o,c]);return(0,b.jsx)("div",{className:f,children:(0,b.jsx)(y.s,{placeholderFilters:w,availableFilters:e,selectedFilters:t,toggleFilterId:i,onFilterClick:u,resetFilterIds:n,ariaLabel:l,className:r})})}));var N=i(75808),k=i(53694),j=i(26064),C=i(94118),E=i(73765),I=i(8340),F=i(82410),S=i(14033),R=i(35691),P=i(67785),O=i(99361),L=i(82086);const A="UzbVbHOHQ3xdlESl06nb",B=({dateAdded:e,prefix:t})=>{let i=e.getTime()>0&&d.Ru.formatRelativeDate(e,{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"});return i&&t&&(i=`${t} ${i}`),(0,b.jsx)(l.E,{variant:"bodySmall",className:A,children:i})};var M=i(28156),T=i(63151),U=i(30773);const D=e=>{switch(e){case U.E.LARGE:return T.Qe.SIZE_112;case U.E.MEDIUM:default:return T.Qe.SIZE_64}};var _=i(44256),z=i(83898),V=i(63473),H=i(6001),G=i(8193),W=i(82936),q=i(88399),K=i(4047),Y=i(74610),Z=i(6585),X=i(5408),Q=i(26062),J=i(84450);const $="SjhDNg4bQRQmIJAba47Z",ee="eYvk_xcxVNMwCBkfY3O0",te="TtoLzgGMAU9nkxMbixq9",ie="Rw7qIj58PeAz8p6dejOP",ae="uzhTSuCH_4ojaqifMJRB",ne="D71yL9GnHIYg7PheYlz8",re="KKRyrr7NUJy1VBWydHHH",se="kAYwHqwZ7agHEAGbYN3v",le="XaingSntLq8c8wEfqf81",oe="FDm94lE0xkDYtA1Bk7Jc",ce="TPNGFuTvzNVNHisumnhg";function de({album:e,onLike:t,onMoreButtonClick:i,onDownloadClick:n,spec:r}){const o=(0,G.y)(),c=o===U.E.LARGE,{draggable:u,onDragStart:m}=(0,z.P)({itemUris:[e.uri],dragLabelText:e.name});let p;e.date&&(p=(0,b.jsx)(B,{dateAdded:new Date(e.date.isoString)}));const[g,h]=(0,W.A)(e.uri),y=e.artists?.items.map((e=>e.profile.name)).join(d.Ru.getSeparator())||"",f=(0,x.s)(),w=(0,a.useCallback)((async()=>{try{await h(!g)}catch{}}),[g,h]),{togglePlay:v,isPlaying:A,isActive:T}=(0,Z.P)({uri:e.uri},{featureIdentifier:"whats_new_panel",referrerIdentifier:"whats_new_panel"}),de=(0,a.useCallback)((t=>{let i;t.preventDefault(),T&&!A&&(i=r.playButtonFactory().hitResume({itemToBeResumed:e.uri})),A||T||(i=r.playButtonFactory().hitPlay({itemToBePlayed:e.uri})),A&&(i=r.playButtonFactory().hitPause({itemToBePaused:e.uri})),i&&f.logInteraction(i),v()}),[v,T,A,f,r,e.uri]),ue=(0,V.V)(e.uri),me=(0,K.T)(e.uri),pe=(0,a.useCallback)((()=>{const t=r.hitUiNavigate({destination:e.uri});f.logInteraction(t),ue()}),[e.uri,r,f,ue]),ge=(0,a.useCallback)((i=>{const a=r.saveButtonFactory().hitLike({itemToBeLiked:e.uri}),n=r.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:e.uri});f.logInteraction(i?a:n),t?.(i)}),[r,f,e.uri,t]),he=(0,a.useCallback)(((t,i)=>{let a;i===Y.NV.ADD?a=r.downloadButtonFactory().hitDownload({itemToDownload:e.uri}):i===Y.NV.REMOVE?a=r.downloadButtonFactory().hitUiReveal():i!==Y.NV.NO_PERMISSION&&i!==Y.NV.NO_CAPABILITY||(a=r.downloadButtonFactory().hitUiReveal()),a&&f.logInteraction(a),n?.(t,i)}),[e.uri,f,r,n]),ye=(0,a.useCallback)((e=>{i?.(e)}),[i]),xe=(0,a.useCallback)((()=>{const t=r.titleFactory().hitUiNavigate({destination:e.uri});f.logInteraction(t)}),[e.uri,f,r]),fe=d.Ru.get("tracklist.a11y.play",e.name,y),be=d.Ru.get("tracklist.a11y.pause",e.name,y),we=(0,b.jsx)(N.d,{lineClamp:1,as:"h3",children:(0,b.jsx)(M.N,{to:e.uri,onClick:xe,children:e.name})}),ve=e.artists?e.artists.items.map(((e,t,i)=>{return(0,b.jsxs)(a.Fragment,{children:[(0,b.jsx)(P.h,{menu:(0,b.jsx)(L.t,{uri:e.uri}),children:(0,b.jsx)(M.N,{to:e.uri,className:ae,onClick:(n=e.uri,()=>{const e=r.subtitleFactory().hitUiNavigate({destination:n});f.logInteraction(e)}),children:e.profile.name})}),t<i.length-1&&d.Ru.getSeparator()]},t);var n})):"",Ne=(0,b.jsx)("div",{className:ne,children:(0,b.jsx)(H.b,{className:s()(re,{[se]:c}),type:Q.c.ALBUM,size:D(o),title:e.name,images:e.coverArt?.sources})}),ke=(0,b.jsxs)(l.E,{className:oe,children:[(0,J.C)(e.albumType),(0,b.jsx)("span",{className:ce,children:p})]}),je=c?E.t.sm:E.t.xs,Ce=(0,b.jsxs)("div",{className:le,children:[(0,b.jsxs)("div",{className:ee,children:[(0,b.jsx)(S.b,{onClick:ge,uri:e.uri,size:je,className:te}),(0,b.jsx)(I.f,{onClick:he,className:s()({[te]:(0,q.X)(me)}),uri:e.uri,isFollowing:g,onFollow:w,size:je,condensed:!0}),(0,b.jsx)(X.r,{spec:r,children:(0,b.jsx)(R.b,{menu:(0,b.jsx)(O.h,{uri:e.uri}),children:(0,b.jsx)(F.e,{onClick:ye,size:je})})})]}),(0,b.jsx)("div",{className:ie,children:(0,b.jsx)(_.R,{size:"small",onClick:de,isPlaying:A,ariaPlayLabel:fe,ariaPauseLabel:be,version:_.H.secondary})})]});return(0,b.jsx)(P.h,{menu:(0,b.jsx)(O.h,{uri:e.uri}),children:(0,b.jsx)(k.v,{draggable:u,onDragStart:m,size:"xxl",className:$,media:Ne,title:we,subtitle:(0,b.jsx)(j.j,{lineClamp:1,children:ve}),id:e.uri,variant:"naked",body:ke,footer:Ce,onClick:pe,hoverBackgroundColor:"backgroundHighlight",layout:c?"wide":"regular",horizontalGap:c?C.lT:C.CJ,verticalGap:C.v4,paddingBlockStart:"16px",paddingBlockEnd:"16px"})})}var ue=i(4244),me=i(15199),pe=i(92612),ge=i(84371),he=i(57026),ye=i(34123),xe=i(29646),fe=i(37788),be=i(39583);const we="N3zMh5FMdbBKUvz4uDfe",ve="h0YQcDKdGmWssZyuIcvq",Ne="lMQrLkJVNqZAzT95gQnA";function ke({episode:e,isPlaying:t,isActive:i,isFullyPlayed:n,setIsFullyPlayed:r}){let s;e.release.isoString&&(s=(0,b.jsx)(B,{dateAdded:new Date(e.release.isoString)}));const o=(0,a.useRef)(null),[c]=(0,fe.S)(1e4,(t=>t?.item?.uri===e.uri));(0,a.useEffect)((()=>{t&&(o.current=c)}),[t,c]),(0,a.useEffect)((()=>{!t&&o.current&&e.duration.milliseconds<=o.current&&r(!0)}),[t,e.duration.milliseconds,r]);const u=(0,a.useRef)(e.duration.milliseconds-e.playedState.timeLeft.milliseconds),m=(0,b.jsx)(be.j,{isPlaying:t,fullyPlayed:n,durationMs:e.duration.milliseconds,resumePositionMs:o.current||u.current,position:i?c:void 0,className:ve});return(0,b.jsxs)("div",{className:we,children:[(0,b.jsx)(xe.P,{episode:e}),(0,b.jsx)(l.E,{variant:"bodySmall",children:d.Ru.get("card.tag.episode")}),(0,b.jsx)("span",{className:Ne}),s,(0,b.jsx)("span",{className:Ne}),m]})}var je=i(37812);const Ce="IEDOUN3mwwZhHVziC03a",Ee="Olh4d9g46wryDMTzRRmw",Ie="zyDT2CX7tvGjKxxUnO7D",Fe="TKntS5R19vVI3J9xxwDL",Se="IoTOUob09_0_3kC8ORbu",Re="aKVUno8YrkyvGsg7iS59",Pe="iF91evq0EtvlgCxIRI_6",Oe="VzSICihKBYcgMsSFv8SH",Le="iOxe1erWkyDFY3p4NG8x",Ae="_72TrTBKZHea2vJ2I2BJX";function Be({episode:e,podcastName:t,podcastUri:i,onLike:n,onMoreButtonClick:r,onDownloadClick:o,spec:c,featureIdentifier:u,referrerIdentifier:m,size:p="xxl"}){const g=(0,G.y)(),h=(0,K.T)(e.uri),y=g===U.E.LARGE,{draggable:f,onDragStart:w}=(0,z.P)({itemUris:[e.uri],dragLabelText:`${e.name} • ${t}`}),v=(0,x.s)(),{togglePlay:E,isPlaying:I,isActive:F}=(0,Z.P)({uri:e.uri},{featureIdentifier:u,referrerIdentifier:m}),[S,O]=(0,a.useState)(e.playedState.state===je.M.Completed),L=(0,V.V)(e.uri),A=d.Ru.get("tracklist.a11y.play",e.name,t),B=d.Ru.get("tracklist.a11y.pause",e.name,t),T=(0,a.useCallback)((()=>{const t=c.hitUiNavigate({destination:e.uri});v.logInteraction(t),L()}),[L,v,c,e.uri]),W=(0,a.useCallback)((t=>{const i=c.saveButtonFactory().hitLike({itemToBeLiked:e.uri}),a=c.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:e.uri});v.logInteraction(t?i:a),n?.(t)}),[c,v,e.uri,n]),J=(0,a.useCallback)(((t,i)=>{let a;i===Y.NV.ADD?a=c.downloadButtonFactory().hitDownload({itemToDownload:e.uri}):i===Y.NV.REMOVE?a=c.downloadButtonFactory().hitUiReveal():i!==Y.NV.NO_PERMISSION&&i!==Y.NV.NO_CAPABILITY||(a=c.downloadButtonFactory().hitUiReveal()),a&&v.logInteraction(a),o?.(t,i)}),[v,c,e.uri,o]),$=(0,a.useCallback)((()=>{const t=c.titleFactory().hitUiNavigate({destination:e.uri});v.logInteraction(t)}),[v,c,e.uri]),ee=(0,a.useCallback)((t=>{let i;t.preventDefault(),F&&!I&&(i=c.playButtonFactory().hitResume({itemToBeResumed:e.uri})),I||F||(i=c.playButtonFactory().hitPlay({itemToBePlayed:e.uri})),I&&(i=c.playButtonFactory().hitPause({itemToBePaused:e.uri})),i&&v.logInteraction(i),E()}),[E,v,c,e.uri,I,F]),te=(0,a.useCallback)((e=>{r?.(e)}),[r]),ie=(0,b.jsx)(N.d,{lineClamp:2,as:"h3",children:(0,b.jsx)(M.N,{to:e.uri,onClick:$,children:e.name})}),ae=(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(j.j,{lineClamp:1,paddingBottom:y?"8px":void 0,children:(0,b.jsx)(P.h,{menu:(0,b.jsx)(ye.H,{uri:i}),children:(0,b.jsx)(M.N,{to:i,className:Re,onClick:(ne=i,()=>{const e=c.subtitleFactory().hitUiNavigate({destination:ne});v.logInteraction(e)}),children:(0,b.jsx)(l.E,{as:"span",variant:"bodySmall",children:t})})})})});var ne;const re=(0,b.jsx)("div",{className:Pe,children:(0,b.jsx)(H.b,{className:s()(Oe,{[Le]:y}),type:Q.c.EPISODE,size:D(g),title:e.name,images:e.images})}),se=y?"medium":"small",le=e.podcastSubscription,oe=le.isPaywalled&&!le.isUserSubscribed,ce=!oe,de=(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ke,{episode:e,isPlaying:I,isActive:F,isFullyPlayed:S,setIsFullyPlayed:O}),(0,b.jsxs)("div",{className:Ae,children:[(0,b.jsxs)("div",{className:Ee,children:[(0,b.jsx)(ge.b,{onClick:W,uri:e.uri,size:se,className:Ie,condensed:!0}),(0,b.jsx)(me.e,{className:s()({[Ie]:(0,q.X)(h)}),onClick:J,uri:e.uri,size:se,canDownload:ce,condensed:!0}),(0,b.jsx)(X.r,{spec:c,children:(0,b.jsx)(R.b,{menu:(0,b.jsx)(he.b,{uri:e.uri,onMarkAsPlayed:O,isPlayed:S}),children:(0,b.jsx)(pe.e,{onClick:te,size:se})})})]}),(0,b.jsx)("div",{className:Fe,children:(0,b.jsx)(_.R,{size:"small",onClick:ee,isPlaying:I,ariaPlayLabel:A,ariaPauseLabel:B,version:_.H.secondary,disabled:!e.isPlayable,locked:oe})})]})]}),xe=(0,b.jsx)(ue.v,{lineClamp:2,paddingBottom:y?"4px":void 0,className:Se,children:(0,b.jsx)(l.E,{as:"span",variant:"bodySmall",children:e.description})});return(0,b.jsx)(P.h,{menu:(0,b.jsx)(he.b,{uri:e.uri,onMarkAsPlayed:O,isPlayed:S}),children:(0,b.jsx)(k.v,{draggable:f,onDragStart:w,size:p,className:Ce,media:re,title:ie,subtitle:ae,id:e.uri,variant:"naked",body:xe,footer:de,onClick:T,hoverBackgroundColor:"backgroundHighlight",layout:y?"wide":"regular",horizontalGap:y?C.lT:C.CJ,verticalGap:C.v4,paddingBlockStart:"16px",paddingBlockEnd:"16px"})})}var Me=i(69229),Te=i(7474),Ue=i(63310),De=i(72264),_e=i(98128);function ze({item:e,spec:t}){if("AlbumResponseWrapper"===e.content.__typename){const i=e.content.data;if("Album"===i.__typename)return(0,b.jsx)(de,{album:i,spec:t})}if("EpisodeOrChapterResponseWrapper"===e.content.__typename){const a=e.content.data;if("Chapter"===a.__typename)return(0,b.jsx)(b.Fragment,{});if("Episode"===a.__typename){let e="",n="";return"Podcast"===a.podcastV2.data.__typename&&(e=a.podcastV2.data.name,n=a.podcastV2.data.uri),(0,b.jsx)(Be,{episode:(i=a,{type:Q.c.EPISODE,uri:i.uri,name:i.name,description:i.description??"",duration:{milliseconds:i.duration.totalMilliseconds},playedState:(0,De.fS)(i.duration,i.playedState),images:i.coverArt?.sources.map(_e.m)??[],languages:i.language?[i.language.code]:[],release:(0,Ue.mp)(i.releaseDate),show:"Podcast"===i.podcastV2.data.__typename?(0,De.jM)(i.podcastV2.data):null,podcastSubscription:(0,De.Wx)(i.restrictions,i.playability),gatedEntityRelations:(0,Me.Gv)(i.gatedEntityRelations),isPlayable:i.playability.playable,isExplicit:i.contentRating?.label===Te.x7.Explicit,is19PlusOnly:i.contentRating?.label===Te.x7.NineteenPlus}),podcastName:e,podcastUri:n,spec:t,referrerIdentifier:"whats_new_panel",featureIdentifier:"whats_new_panel"})}}var i;return(0,b.jsx)(b.Fragment,{})}var Ve=i(46147);const He="PNAsPBOgLLv9EX8LZ6xL",Ge="UjEEhwY497frsytmeR9u",We="VQ0BLAewv7Aw5H3hV0YK",qe="pxV6pRWzmVb2_leuWtEG",Ke="G97bWDW7Mp3aZEL19Umr",Ye="p6l0_RUXhei0P7rrQaeg",Ze="erd9k4EG_HWK3UzsLhht",Xe="ap9brNzQxEcx9SV2FksM",Qe="pVVteJIfAdehWU3vX7JR",Je="J_VZoZ53jBtkdyxrt2My",$e="VOGWdrCvz59_A_wAZv58",et="m8V0BPcmce3GusmXkFhM",tt=a.memo((()=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Ve.Y,{as:"h3",variant:"titleSmall",className:Je,charCount:4,isLoading:!0}),(0,b.jsx)("div",{className:Xe,children:[20,50,25].map(((e,t)=>(0,b.jsx)(Ve.Y,{as:"div",variant:"bodySmall",className:Je,charCount:e,isLoading:!0},`${e}-${t}`)))})]})));var it=i(76404),at=i(64720),nt=i(54580),rt=i(47900);const st={offset:0,limit:50,onlyUnPlayedItems:!1};const lt={[Te.tv.Album]:{id:"ALBUM",getName:()=>d.Ru.get("web-player.whats-new-feed.filters.music"),ubiId:"Music",active:!1},[Te.tv.Episode]:{id:"EPISODE",getName:()=>d.Ru.get("web-player.whats-new-feed.filters.episodes"),ubiId:"Podcast & Shows",active:!1}};function ot(e){switch(e){case Te.tv.Album:return Te.tv.Album;case Te.tv.Episode:return Te.tv.Episode;case Te.tv.WhatsNewFeedNotification:return Te.tv.WhatsNewFeedNotification;case Te.tv.Unknown:default:return Te.tv.Unknown}}const ct=({spec:e,items:t})=>{const[i,n]=(0,a.useState)([]),r=e=>{const t=e.state.state;if(!e.state.timestamp?.isoString&&t===Te.GN.New)return!0;if(e.state.timestamp?.isoString){const t=new Date(e.state.timestamp.isoString).getTime();return Date.now()-t<=36e5}return!1},s=t.findIndex((e=>!r(e))),o=(0,a.useCallback)(((t,i)=>{const a=r(t)&&i<s,n=a&&0===i;return(0,b.jsx)("div",{className:et,children:(0,b.jsxs)(m.W,{"aria-posinset":i+1,children:[n&&(0,b.jsx)(l.E,{as:"h2",variant:"titleSmall",className:We,semanticColor:"textBase",children:d.Ru.get("web-player.whats-new-feed.new-section-title")}),!a&&i===s&&(0,b.jsx)(l.E,{as:"h2",variant:"titleSmall",className:We,semanticColor:"textBase",children:d.Ru.get("web-player.whats-new-feed.earlier-section-title")}),(0,b.jsx)("hr",{className:$e,"aria-hidden":!0}),(0,b.jsx)(ze,{item:t,spec:e.notificationItemFactory({identifier:t.id,position:i})})]},t.id)},t.id)}),[s,e]),c=(0,a.useRef)(0),p=(0,a.useCallback)((()=>{const e=t.slice(c.current,c.current+10);n((t=>(c.current=c.current+10,[...t,...e])))}),[t]),{ref:g,breakpoint:h}=(0,at.x)({[U.E.MEDIUM]:0,[U.E.LARGE]:600});return(0,b.jsx)(G.o.Provider,{value:h,children:(0,b.jsx)(u.R,{className:Ze,ref:g,firstInteractiveIsWrapper:!0,"aria-rowcount":i.length,"aria-colcount":6,children:(0,b.jsx)(it._,{onReachBottom:p,triggerOnInitialLoad:!0,children:i.map(o)})})})},dt=({includedContentTypes:e,data:t,handleRetry:i,error:a,spec:n,loading:r})=>{if(r)return(0,b.jsxs)("div",{className:qe,role:"list",children:[(0,b.jsx)(tt,{}),(0,b.jsx)(tt,{})]});if(a)return(0,b.jsxs)("div",{className:Ke,dir:"auto",children:[(0,b.jsx)(l.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:d.Ru.get("error.generic")}),(0,b.jsx)(l.E,{as:"p",variant:"bodyMedium",children:d.Ru.get("web-player.whats-new-feed.panel.error")}),(0,b.jsx)(o.n,{className:Ye,onClick:i,size:"small",children:(0,b.jsx)(l.E,{as:"span",variant:"bodyMediumBold",semanticColor:"textBase",children:d.Ru.get("web-player.whats-new-feed.panel.error.button")})})]});const s=t?.whatsNewFeedItems?.items;if(!s||0===s?.length){const{title:t,message:i}=function(e=[]){return e.includes(Te.tv.Episode)?{title:d.Ru.get("web-player.whats-new-feed.panel.empty-results-podcast.title"),message:d.Ru.get("web-player.whats-new-feed.panel.empty-results-podcast.message")}:e.includes(Te.tv.Album)?{title:d.Ru.get("web-player.whats-new-feed.panel.empty-results-music.title"),message:d.Ru.get("web-player.whats-new-feed.panel.empty-results-music.message")}:{title:d.Ru.get("web-player.whats-new-feed.panel.empty-results-all.title"),message:d.Ru.get("web-player.whats-new-feed.panel.empty-results-all.message")}}(e);return(0,b.jsx)(p.p,{title:t,message:i,renderInline:!0})}return(0,b.jsx)(ct,{items:s,spec:n},e.join(" "))},ut=()=>{const e=(0,n.jE)(),{spec:t,logger:i}=(0,rt.r)(c.q,{}),r=(0,a.useCallback)((()=>{const{name:e}=h.lo;return[e]}),[]),o=(0,a.useCallback)((()=>{e.invalidateQueries({queryKey:r()})}),[e,r]);(0,a.useEffect)((()=>{i.logImpression(t.impression())}),[i,t]);const[u,m]=(0,a.useState)(lt),p=Object.values(u),y=p.filter((e=>e.active)),x=y.length>0?[]:p,f=y.map((e=>e.id)),w=(0,a.useCallback)((e=>{const t=ot(e),i={id:u[t]?.id||Te.tv.Unknown,getName:()=>u[t]?.getName()||"",ubiId:u[t]?.ubiId||"",active:!u[t]?.active},a={...lt,...u,[i.id||"UNKNOWN"]:i};m(a)}),[u,m]),N=(0,a.useCallback)((()=>{m(lt)}),[m]),{data:k,error:j,loading:C}=(0,nt.I)(h.lo,{...st,includedContentTypes:f.map(ot)??[]},{gcTime:30*nt.i}),{getGraphQLLoader:E}=(0,g.mv)(),I=E();return(0,a.useEffect)((()=>{if(!k?.whatsNewFeedItems?.items)return;const e=k?.whatsNewFeedItems?.items.filter((e=>e.state.state===Te.GN.New)).map((e=>({id:e.id,state:Te.GN.Seen})));e.length>0&&async function(e,t){await e(h.BP,{items:t})}(I,{items:e})}),[k?.whatsNewFeedItems?.items,I]),(0,b.jsxs)("section",{className:s()(Qe,"contentSpacing"),children:[(0,b.jsxs)("div",{className:He,children:[(0,b.jsx)(l.E,{as:"h1",semanticColor:"textBase",variant:"titleMedium",className:Ge,children:d.Ru.get("web-player.whats-new-feed.panel.title")}),(0,b.jsx)(l.E,{as:"p",semanticColor:"textSubdued",variant:"bodySmall",children:d.Ru.get("web-player.whats-new-feed.panel.subtitle")})]}),!j&&(0,b.jsx)(v,{availableFilters:x,toggleFilterId:w,selectedFilters:y,resetFilterIds:N,spec:t.filterChipsFactory()}),(0,b.jsx)(dt,{includedContentTypes:f.map(ot),data:k,loading:C,error:j??null,spec:t,handleRetry:o})]})}},98691:(e,t,i)=>{i.d(t,{p:()=>C});var a=i(30758),n=i(97500),r=i.n(n),s=i(98715),l=i(92574),o=i(72045),c=i(51247);const d="(min-width: 0px)",u="(min-width: 0px) and (max-width: 767px)",m="(min-width: 768px)",p="(min-width: 768px) and (max-width: 1023px)",g="(min-width: 1024px)",h="(min-width: 1024px) and (max-width: 1279px)",y="(min-width: 1280px)",x="(min-width: 1280px) and (max-width: 1919px)",f="(min-width: 1920px)",b="FvfvGU3jvHRskUU9v9_8",w="Q9AlbZn2EGzy3MTWXa8X",v="mxmxS0y8LiwSs5nueKPT",N="GXxVAveNFStY3pBI_NO4",k="eHcXC2s97InYP7rMNT0H";var j=i(86070);const C=(0,a.memo)((function(e){const{children:t,message:i,title:a,linkTitle:n,linkTo:C,onClick:E,renderInline:I=!1}=e,{isXSOnly:F,isSMOnly:S}={isXS:(0,c.U)(d),isXSOnly:(0,c.U)(u),isSM:(0,c.U)(m),isSMOnly:(0,c.U)(p),isMD:(0,c.U)(g),isMDOnly:(0,c.U)(h),isLG:(0,c.U)(y),isLGOnly:(0,c.U)(x),isXL:(0,c.U)(f)},R=F||S;return(0,j.jsxs)("section",{className:r()(b,{[w]:I}),children:[t,(0,j.jsx)(s.E,{as:"h1",variant:R?"titleSmall":"titleMedium",className:N,children:a}),(0,j.jsx)(s.E,{variant:R?"bodySmall":"bodyMedium",className:k,children:i}),n&&(C||E)&&(0,j.jsx)(l.$,{colorSet:"invertedLight",className:v,href:C,onClick:E,component:o.v,children:n})]})}))}}]);
//# sourceMappingURL=dwp-whats-new-feed.js.map