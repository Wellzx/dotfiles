"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5853],{3933:(t,e,a)=>{a.d(e,{Q:()=>n});const n=t=>{const[e]=t;if(!("visuals"in e.data))return;const[a]=e.data.visuals.avatarImage?.sources??[];return a?.url}},20579:(t,e,a)=>{a.d(e,{I:()=>d});var n=a(30758),o=a(64871),r=a(17160),i=a(65555),s=a(3933),c=a(67575),l=a(38684);const d=t=>{const e=(0,l.s)(),a=(0,n.useMemo)((()=>{const e=(0,o.o_h)((0,i.$V)(t)?t.data.uri:"");return t.spec?.eventCardFactory({identifier:e?.id,position:t.position,uri:e?.toURI()??""})}),[t]);if(!(0,i.$V)(t))return;return{imageUrl:(0,s.Q)(t.data.artists.items)??"",uri:t.data.uri,title:t.data.title,subTitle:[t.data.location.name,t.data.location.city].join(r.Ru.getSeparator()),date:t.data.startDateIsoString,dateRange:(0,c.Y)(new Date(t.data.startDateIsoString)),handleClick:()=>a&&e.logInteraction(a.hitUiNavigate({destination:t.data.uri}))}}},46798:(t,e,a)=>{a.r(e),a.d(e,{default:()=>D});var n=a(97500),o=a.n(n),r=a(93987),i=a(12738);const s="0.1.0",c="default";function l(t){return new d(t)}class d{constructor(t){this._path=[{name:"desktop-concerts-gallery"}],t?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=t.parentAbsoluteLocation)}eventSectionFactory(t){return new d.EventSectionEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:t})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[c,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[s,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}}!function(t){t.EventSectionEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({...a,name:"event_section"}),e&&(this._parentAbsoluteLocation=e)}eventCardFactory(e){return new t.EventSectionEventFactory.EventCardEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[c,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[s,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}}}(d||(d={})),function(t){!function(t){t.EventCardEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({...a,name:"event_card"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[c,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[s,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:"music",generatorVersion:"16.2.6",interactionType:"hit",specificationMode:c,specificationVersion:s,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(t.EventSectionEventFactory||(t.EventSectionEventFactory={}))}(d||(d={}));var u=a(17160),h=a(50448),p=a(45588),g=a(29299),m=a(50207),y=a(13088),v=a(20297),_=a(75591),x=a(38273),b=a(58244),C=a(30758),j=a(66015),f=a(81594),A=a(20579),L=a(86070);const E=t=>{const e=(0,A.I)({...(a=t.data,"__typename"in a&&"ConcertGalleryConcertCard"===a.__typename?t.data.concert:{}),position:t.position,spec:t.spec});var a;return e?(0,L.jsx)(f.A,{...e,onClick:e.handleClick}):null},S=(t,e)=>{const a={genreForYou:u.Ru.get("concerts.genre_for_you",...e),genreAll:u.Ru.get("concerts.genre_all_events",...e),genreAllNearYou:u.Ru.get("concerts.genre_all_events_near_you",...e)};return null!=(n=t)&&n in a?a[t]:t;var n},N=({position:t,header:e,items:a,spec:n})=>{const o=(0,C.useMemo)((()=>n?.eventSectionFactory({position:t})),[n,t]);return(0,L.jsx)(j.$,{total:a.length,showAll:!0,title:S(e?.title,e?.titleAttributes??[]),withEncoreCards:!1,children:a.map(((t,e)=>(0,L.jsx)(E,{position:e,data:t,spec:o},e)))})};var k=a(44983),G=a(85387),P=a(60749),w=a(44461);a(54580);const F=Spicetify.GraphQL.Definitions["ConcertGallery"]=new w.l("ConcertGallery","query","1f896c5253fb37c7d3dcd3c68d0c865f140722593ee72562be50391ab0f5eb04",null);var M=a(37973),V=a(54658);const I=t=>void 0!==t&&"__typename"in t&&"ConcertGalleryView"===t.__typename,R=({useInfiniteQuery:t=k.q}={})=>{const{request:e}=(0,C.useContext)(M.j),{slug:a}=(0,G.g)(),[n]=(0,P.ok)(),o=`spotify:concert-gallery:${a}${n?`?${n.toString()}`:""}`,r=t({queryKey:["concert-gallery",o],queryFn:({pageParam:t})=>(0,V.c)(e,F,{uri:o,nextPageToken:t}),staleTime:6e4,gcTime:6e4,initialPageParam:"",getNextPageParam:t=>I(t?.data?.concertGallery)?t.data.concertGallery.nextPageToken:void 0}),i=(s=r.data?.pages,s?.reduce(((t,e)=>{const a=I(t.concertGallery)?t.concertGallery:void 0,n=I(e?.data?.concertGallery)?e.data.concertGallery:void 0,o=a?.items??[];return{concertGallery:{...n,...a,items:[...o,...n?.items??[]]}}}),{concertGallery:{}}));var s;if(!I(i?.concertGallery))return{loading:r.isLoading};const c=i.concertGallery.items.reduce(((t,e)=>{if("ConcertGalleryTitle"===e.__typename)return[...t,[e]];const a=t.pop()??[];return[...t,[...a,e]]}),[]);return{data:i.concertGallery,sections:c,loading:r.isLoading,fetchNextPage:r.fetchNextPage}};var T=a(47900);const q="qivAyVC3g48WmEmuzJFu",Q="SmXDRdhHxX2kRPHxvMu9",D=()=>{const{data:t,sections:e,loading:a,fetchNextPage:n}=R(),{spec:s}=(0,T.r)(l,{});return a?(0,L.jsx)(b.LoadingPage,{hasError:!1,errorMessage:""}):t?(0,L.jsxs)("section",{children:[t.header?.title&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.Q,{children:t.header.title}),(0,L.jsxs)(g.z,{size:g.K.SMALL,backgroundColor:t.header.hexColor||r.Ql9,children:[(0,L.jsx)(y.Y,{children:(0,L.jsx)(x.mm,{children:t.header.title})}),t.header.description&&(0,L.jsx)(m.Z,{children:t.header.description}),(0,L.jsx)(v.h,{children:(0,L.jsx)("div",{children:(0,L.jsx)(_.X,{text:t.header.title})})})]})]}),(0,L.jsxs)("div",{children:[(0,L.jsx)(h.K,{backgroundColor:t.header?.hexColor||r.Ql9}),(0,L.jsxs)("div",{className:o()(q,"contentSpacing"),children:[e?.map(((t,e)=>{const[a,...n]=t,o="ConcertGalleryTitle"===a.__typename?a:void 0,r=o?n:t;return(0,L.jsx)(N,{position:e,header:o,items:r,spec:s},e)})),n&&(0,L.jsx)(i.n,{onClick:n,className:Q,children:u.Ru.get("concerts.load_more")})]})]})]}):(0,L.jsx)(b.LoadingPage,{hasError:!0,errorMessage:u.Ru.get("concert.error.concert_not_found_title")})}},81594:(t,e,a)=>{a.d(e,{A:()=>b});var n=a(30758),o=a(1657),r=a(98715),i=a(75005),s=a(28156),c=a(67575),l=a(92399);const d="wedRUk4eiBo9n9vqXLhU",u="hMbtEskyvMbDiwq1EScA",h="HYVIJaYYiCTgSCHie70L",p="SPbe_Q1wtiZQCmo0QKUy",g="TRp4tgG7_cymGIXDevIP",m="tC1Y_nwyyly7cpIGqF5K",y="l93AfoV_qHnMQSQBB5GK",v="DgDBmSR2sbwji2UfqxIf",_="EkGb0ZzhswreSvpZoioY";var x=a(86070);const b=(0,n.memo)((t=>{const{uri:e,title:a,imageUrl:n,date:b,subTitle:C,firstParty:j,onClick:f}=t,A=b?(0,c.l4)(b):void 0;return(0,x.jsx)(s.N,{to:e,className:d,"data-testid":"concert-card",onClick:f,children:(0,x.jsxs)("div",{className:u,children:[(0,x.jsx)(l.b,{children:(0,x.jsx)("div",{role:"img",className:_,style:{backgroundImage:`url(${n})`},children:!n&&(0,x.jsx)(o.r,{role:"img",size:"xxlarge",semanticColor:"textSubdued"})})}),A&&(0,x.jsxs)("time",{className:h,dateTime:b,children:[(0,x.jsx)(r.E,{as:"div",variant:"bodySmall",children:(0,c.tj)(A)}),(0,x.jsx)(r.E,{as:"div",variant:"bodyMediumBold",children:(0,c.Py)(A)})]}),(0,x.jsxs)("div",{className:p,dir:"auto",children:[(0,x.jsx)(r.E,{as:"h3",variant:"bodyMedium",className:g,children:a}),(0,x.jsxs)("div",{className:m,children:[j&&(0,x.jsx)("span",{className:v,children:(0,x.jsx)(i.D,{size:"small"})}),(0,x.jsx)(r.E,{as:"span",className:y,variant:"bodySmall","data-testid":"location-name",semanticColor:"textSubdued",children:C})]})]})]})})}))}}]);
//# sourceMappingURL=xpui-routes-collection-concert-gallery.js.map