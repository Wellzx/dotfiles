"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3862],{55080:(e,a,s)=>{s.d(a,{qb:()=>b});var r=s(69943),i=s(62764),t=s(30758),n=s(79458),o=s(65976),l=s(98715),d=s(79633),c=s(28612),u=s(66415),h=s(49996),m=s(90198),v=s(86403),p=m.Ay.div.withConfig({displayName:"Container",componentId:"sc-eij2zk-0"})(["",""],(function(e){var a=e.$colorSet,s=e.$isVisible;return(0,v.AH)([""," padding-block:",";padding-inline:",";overflow-wrap:break-word;text-align:center;position:fixed;overflow-x:hidden;text-overflow:ellipsis;z-index:",";bottom:48px;.docs-story{position:absolute;}@media (max-width:","){inset-inline:8px;}@media (min-width:","){margin-inline:auto;inset-inline:0;width:max-content;}",""],(0,c.Lw)({maxWidth:"384px",colorSet:a}),(0,u.po)("tighter","12px"),(0,u.po)("looser-2","32px"),h.Bd,d.eA,d.Dg,s?(0,v.AH)(["transition:opacity var(--productive-enter);visibility:visible;opacity:1;"]):(0,v.AH)(["transition:opacity var(--productive-exit),visibility 0s var(--productive-exit-duration);visibility:hidden;opacity:0;"]))})),g=["onExited","colorSet","showSnackbar","className","children"],b=t.forwardRef((function(e,a){var s=e.onExited,d=e.colorSet,c=void 0===d?"base":d,u=e.showSnackbar,h=e.className,m=e.children,v=(0,i.A)(e,g),b=(0,t.useState)(!1),x=(0,r.A)(b,2),j=x[0],f=x[1];return void 0===u&&console.warn('Warning: If you are not conditionally rendering Snackbar within an aria-live region (wrapping element with role="status") the component will be inaccessible on Windows operating systems. Please use the showSnackbar prop to conditionally render Snackbar. For guidance on how to implement this, refer to our Snackbar Accessibility documentation: https://encore-web.spotify.net/?path=/docs/components-snackbar--accessibility'),(0,t.useEffect)((function(){if(void 0===u){f(!0);var e=setTimeout((function(){f(!1),s&&s()}),5e3);return function(){return clearTimeout(e)}}u?f(!0):(f(!1),s&&s())}),[u,s]),t.createElement("div",{role:"status"},t.createElement(p,Object.assign({ref:a,className:(0,o.Ju)(c,h),$colorSet:c,$isVisible:j,"data-encore-id":n.j.Snackbar},v),t.createElement(l.E,{variant:"bodySmall",semanticColor:"textBase"},m)))}))},91481:(e,a,s)=>{s.d(a,{AdDebug:()=>k});s(35945);var r=s(30758),i=s(55080),t=s(98715),n=s(60675),o=s(82953),l=s(30485),d=s(93490),c=s(92574),u=s(39198),h=s(52908),m=s(9843),v=s(31468);const p=(0,m.h)();window.abba={get:async function(e,a){const s=new h.EW((0,v.X)()),r=(await s.getValues(h.kM.fromPartial({}))).pairs;let i={},t="";if(r.abbaOverrides?t=r.abbaOverrides:r.abbaoverrides&&(t=r.abbaoverrides),t)try{i=JSON.parse(t)}catch(e){console.error(`error parsing value=${t}, error=${e}`)}if(Object.prototype.hasOwnProperty.call(i,e))return console.warn(`Abba: Override for ${e} : ${i[e]}`),void setTimeout((()=>a(null,i[e])),0);p.post("sp://abba/v1/flags",{flags:[e]}).then((s=>{const{flags:r=[]}=s,i=r[0]&&r[0].featureName===e&&r[0].cell;a(null,i||null)})).catch((e=>{a(e)}))},getAll:function(e){console.warn("Abba:getAll should only be used by TA tests for logging purposes."),p.get("sp://abba/v1/all_flags").then((a=>{const{flags:s=[]}=a,r=s.reduce(((e,a)=>(e[a.featureName]=a.cell,e)),{});e(null,JSON.stringify(r,null,2))})).catch((a=>{e(a)}))},getRequestedFlagNames:function(e){p.get("sp://abba/v1/requested_flag_names").then((a=>{e(null,JSON.stringify(a.sort(),null,2))})).catch((a=>{e(a)}))}};var g=s(30546);const b=function(){const[e,a]=(0,r.useState)();return{adMocks:e,getAdMocks:(0,r.useCallback)((async()=>g.D.getMocksList().then((e=>{a(e.body.test_cases)}))),[])}},x="rh7v8PDNC0ke2OkkyRhk",j="Kh0jtEAjRK83Z5A_IZRx";var f=s(86070);const k=()=>{const e=e=>60*e,[a,s]=(0,r.useState)(e(20)),[h,m]=(0,r.useState)(""),[v,p]=(0,r.useState)(""),[k,y]=(0,r.useState)(""),[S,C]=(0,r.useState)((new Date).toISOString()),[E,A]=(0,r.useState)({message:"",status:"success"}),[w,$]=(0,r.useState)(!1),{adMocks:N,getAdMocks:M}=b(),T=({message:e,isError:a})=>{A({message:e,status:a?"error":"success"}),$(!0),setTimeout((()=>$(!1)),5e3)},O=(0,r.useCallback)((e=>{g.D.clearSlot(e).then((()=>{T({message:`${e} cleared`,isError:!1})}))}),[]),D=(0,r.useCallback)((e=>{s(e),g.D.increaseStreamTime(e).then((()=>{T({message:`${e} seconds of stream time added`,isError:!1})})).catch((e=>{T({message:`Error increasing stream time: ${e}`,isError:!0})}))}),[]),I=(0,r.useCallback)((e=>{const a=e.currentTarget.value;if(a){const[e,s]=a.split("|");g.D.overrideAdServerEndpoint("leaderboard",`https://admocker.spotify.com/mock/display?test_case=${e}&response_template=${s}&session_id=${S}`),T({message:`Leaderboard override set to ${e} with template ${s}`,isError:!1})}}),[S]);return(0,r.useEffect)((()=>{M().then((()=>{T({message:"Ad mocks fetched",isError:!1})})).catch((()=>{T({message:"Ad mocks fetch failed",isError:!0})}))}),[M]),(0,f.jsxs)("div",{className:x,children:[(0,f.jsx)(i.qb,{colorSet:"error"===E.status?"negative":"brightAccent",showSnackbar:w,children:E.message}),(0,f.jsx)(t.E,{as:"h1",variant:"headlineMedium",paddingBottom:"24px",children:"Ad Debug Tools"}),(0,f.jsx)(t.E,{as:"h2",variant:"titleMedium",paddingBottom:"8px",children:"Increase Stream Time"}),(0,f.jsx)(n.g,{label:"Quick add stream time",children:(0,f.jsx)("div",{className:j,children:(0,f.jsxs)(o.I,{mode:"action",layout:"single-line","aria-label":"Stream time presets",children:[(0,f.jsx)(l.v,{variant:"contrasting",onClick:()=>D(e(1)),children:"Add 1 min"}),(0,f.jsx)(l.v,{variant:"contrasting",onClick:()=>D(e(20)),children:"Add 20 mins"}),(0,f.jsx)(l.v,{variant:"contrasting",onClick:()=>D(e(40)),children:"Add 40 mins"}),(0,f.jsx)(l.v,{variant:"contrasting",onClick:()=>D(e(60)),children:"Add 1 hour"})]})})}),(0,f.jsxs)(n.g,{label:"Custom stream time in seconds",children:[(0,f.jsx)("div",{className:j,children:(0,f.jsx)(d.Z,{onChange:e=>s(e.currentTarget.value),placeholder:"seconds",value:a,type:"number",min:0})}),(0,f.jsx)("div",{className:j,children:(0,f.jsxs)(c.$,{size:"small",onClick:()=>D(a),children:["Add ",a," seconds (~ ",(B=a,Math.round(Number(B)/60))," minutes)"]})})]}),(0,f.jsx)(t.E,{as:"h2",variant:"titleMedium",paddingBottom:"8px",children:"Fetch ad from Ad Mocker"}),(0,f.jsxs)(n.g,{label:"Enqueue ad json directly into pod",children:[(0,f.jsxs)("div",{className:j,children:[(0,f.jsx)(t.E,{as:"label",htmlFor:"adMockerSessionId",variant:"bodyMedium",children:"Session ID"}),(0,f.jsx)(d.Z,{name:"adMockerSessionId",type:"text",value:S,onChange:e=>C(String(e.currentTarget.value))})]}),(0,f.jsx)("div",{className:j,children:(0,f.jsxs)(u.F,{value:k,onChange:e=>{y(e.currentTarget.value)},children:[(0,f.jsx)("option",{disabled:!0,value:"",children:"Choose a mock"}),N?.map((e=>(0,f.jsxs)("option",{value:e.name,children:[e.name," (",e.group,")"]},e.name)))]})}),(0,f.jsx)(c.$,{size:"small",onClick:()=>{g.D.fetchAdAndEnqueue(k,S).then((()=>{T({message:`${k} inserted`,isError:!1})})).catch((e=>{T({message:`Error inserting ${k}: ${e}`,isError:!0})}))},children:"Insert ad directly"})]}),(0,f.jsx)(t.E,{as:"h2",variant:"titleMedium",paddingBottom:"8px",children:"Override Country"}),(0,f.jsxs)(n.g,{label:"Calls testingClient.requestOverride with country key",children:[(0,f.jsx)("div",{className:j,children:(0,f.jsxs)(u.F,{value:v,onChange:e=>{p(e.currentTarget.value)},children:[(0,f.jsx)("option",{disabled:!0,value:"",children:"Choose a country"}),(0,f.jsx)("option",{value:"AU",children:"Australia"}),(0,f.jsx)("option",{value:"BR",children:"Brasil"}),(0,f.jsx)("option",{value:"JP",children:"Japan"}),(0,f.jsx)("option",{value:"SE",children:"Sweden"}),(0,f.jsx)("option",{value:"UK",children:"United Kingdom"}),(0,f.jsx)("option",{value:"US",children:"USA"}),(0,f.jsx)("option",{value:"NZ",children:"New Zealand"}),(0,f.jsx)("option",{value:"",children:"Clear"})]})}),(0,f.jsx)(c.$,{size:"small",onClick:()=>{g.D.overrideCountry(v).then((e=>{0===e.status?T({message:`${v} override successful`,isError:!1}):T({message:`Error overriding country: ${e.status}`,isError:!0})}))},children:"OVERRIDE COUNTRY"})]}),(0,f.jsx)(t.E,{as:"h2",variant:"titleMedium",paddingBottom:"8px",children:"Clear Slot"}),(0,f.jsxs)(n.g,{label:"Calls slotsClient.clearAllAds for the selected slot",children:[(0,f.jsx)("div",{className:j,children:(0,f.jsxs)(u.F,{value:h,onChange:e=>{m(e.currentTarget.value)},children:[(0,f.jsx)("option",{disabled:!0,value:"",children:"Choose a slot"}),(0,f.jsx)("option",{value:"leaderboard",children:"leaderboard"}),(0,f.jsx)("option",{value:"sponsored-playlist",children:"sponsored playlist"}),(0,f.jsx)("option",{value:"billboard",children:"billboard"}),(0,f.jsx)("option",{value:"hpto",children:"hpto"}),(0,f.jsx)("option",{value:"stream",children:"stream"})]})}),(0,f.jsx)(c.$,{size:"small",onClick:()=>{""!==h?O(h):T({message:"Please select a slot",isError:!0})},children:"CLEAR SLOT"})]}),(0,f.jsx)(t.E,{as:"h2",variant:"titleMedium",paddingBottom:"8px",children:"Trigger Stream Slot"}),(0,f.jsx)(n.g,{label:"Calls slotsClient.createSlot, adds 20 mins, puts targeting in focus",children:(0,f.jsx)(c.$,{size:"small",onClick:()=>{g.D.queueVideoAd().then((e=>{const a=e[0];a.error?T({message:`Error queuing video ad: ${a?.error}`,isError:!0}):T({message:"Video queued in stream slot",isError:!1})}))},children:"Queue Video Ad"})}),(0,f.jsx)(t.E,{as:"h2",variant:"titleMedium",paddingBottom:"8px",children:"Override Leaderboard"}),(0,f.jsx)(n.g,{label:"Calls overrideAdServerEndpoint for leaderboard ads",children:(0,f.jsx)("div",{className:j,children:(0,f.jsxs)(u.F,{onChange:I,defaultValue:"",children:[(0,f.jsx)("option",{disabled:!0,value:"",children:"Select override type"}),(0,f.jsx)("option",{value:"html-image-leaderboard|leaderboard-sax",children:"HTML Image Leaderboard (SAX)"}),(0,f.jsx)("option",{value:"valid-leaderboard|leaderboard-v1",children:"Valid Leaderboard"}),(0,f.jsx)("option",{value:"valid-leaderboard-click-ad-page|leaderboard-v1",children:"Valid Leaderboard Click Ad Page"}),(0,f.jsx)("option",{value:"valid-leaderboard-click-playlist|leaderboard-v1",children:"Valid Leaderboard Click Playlist"})]})})})]});var B}}}]);
//# sourceMappingURL=3862.js.map