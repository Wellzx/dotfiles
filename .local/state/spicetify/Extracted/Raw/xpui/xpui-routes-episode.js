"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9528],{21091:(e,t,i)=>{i.d(t,{q:()=>c});var a=i(30758),s=i(97500),n=i.n(s),r=i(50930),o=i(60050),l=i(86070);const c=a.memo(a.forwardRef((function({html:e,onTimeStampClick:t,enableTimestamps:i=!1,enableAutomaticLinkification:s=!1,semanticColor:c="textSubdued",className:d,asTextContent:u=!1},p){const m=(0,a.useMemo)((()=>(0,r.v)(e,t,i,c,s,u)),[i,s,e,t,c,u]);return(0,l.jsx)("div",{ref:p,className:n()(o.A.HTMLDescription,d),children:m})})))},29646:(e,t,i)=>{i.d(t,{P:()=>a.P});var a=i(42421)},50930:(e,t,i)=>{i.d(t,{v:()=>y});var a=i(30758),s=i(6936),n=i.n(s),r=i(98715);const o=/(\((?:[0-9]{1,3}:){1,2}[0-9]{2}\))/g;var l=i(28156),c=i(86070);const d=/((?:(?:https?:\/\/)|www\.)(?:(?:(?:[a-z\u00a1-\uffff0-9][-_]*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?:[/?#][^\s"]*)?)/gi,u=/^https?:\/\//;function p(e){return"string"==typeof e?(0,c.jsx)(c.Fragment,{children:e.split(d).map(((e,t)=>t%2?(0,c.jsx)(l.N,{to:`${u.test(e)?"":"https://"}${e}`,rel:"nofollow",children:e},t):e))}):e}var m=i(18615),h=i(60050);const g=(e=()=>{},t,i,s)=>{let n=0;const o={_:(e,t,r)=>{const o=void 0===t?e:r;return(0,c.jsx)(a.Fragment,{children:i&&!s?p(o):o},"fragment"+n++)}};if(s)return o;return{...o,p:e=>(0,c.jsx)(r.E,{as:"p",variant:"bodyMedium",semanticColor:t,className:h.A.Paragraph,children:i?p(e.children):e.children}),a:t=>t.href?.startsWith("#t=")?(0,c.jsx)(m.D,{onClick:e,children:t.children}):t.href?(0,c.jsx)(l.N,{to:t.href,rel:t.rel,children:t.children}):(0,c.jsx)(c.Fragment,{children:t.children}),ul:e=>(0,c.jsx)("ul",{className:h.A.List,children:e.children}),ol:e=>(0,c.jsx)("ol",{className:h.A.List,children:e.children}),li:e=>(0,c.jsx)(r.E,{as:"li",variant:"bodyMedium",semanticColor:t,className:h.A.ListItem,children:i?p(e.children):e.children}),br:()=>(0,c.jsx)("br",{}),h1:e=>(0,c.jsx)(r.E,{as:"h1",variant:"bodyMediumBold",semanticColor:t,className:h.A.Heading,children:e.children}),h2:e=>(0,c.jsx)(r.E,{as:"h2",variant:"bodyMediumBold",semanticColor:t,className:h.A.Heading,children:e.children}),h3:e=>(0,c.jsx)(r.E,{as:"h3",variant:"bodyMediumBold",semanticColor:t,className:h.A.Heading,children:e.children}),h4:e=>(0,c.jsx)(r.E,{as:"h4",variant:"bodyMediumBold",semanticColor:t,className:h.A.Heading,children:e.children}),h5:e=>(0,c.jsx)(r.E,{as:"h5",variant:"bodyMediumBold",semanticColor:t,className:h.A.Heading,children:e.children}),h6:e=>(0,c.jsx)(r.E,{as:"h6",variant:"bodyMediumBold",semanticColor:t,className:h.A.Heading,children:e.children}),time:t=>(0,c.jsx)(m.D,{onClick:e,children:t.children})}},y=(e,t=()=>{},i=!1,a="textSubdued",s=!1,r=!1)=>{const l=i?e.split(o).map((e=>e.match(o)?`(<time>${e.replace("(","").replace(")","")}</time>)`:e)).join(""):e;let c;try{c=n()(l,{transform:g(t,a,s,r),dangerouslySetChildren:[]})}catch{c=e}return c}},59341:(e,t,i)=>{i.d(t,{o:()=>N});var a=i(30758),s=i(98715),n=i(66415),r=i(90238),o=i(36585),l=i(17160),c=i(53694),d=i(75808),u=i(26064),p=i(51373),m=i(92574),h=i(32874),g=i(28156);const y="c5Ml9BbBuUEHjNkcSwZA";var x=i(86070);const b="70px",f=({adId:e,advertiser:t,tagline:i,displayImage:a,buttonMessage:s,cardOnClick:n,buttonOnClick:r,clickthroughUrl:o})=>(0,x.jsx)(g.N,{to:(0,h.H)(o),className:y,"data-testid":"leavebehind",children:(0,x.jsx)(c.v,{onClick:n,onClickHint:l.Ru.get("ad-formats.learnMore"),layout:"wide",variant:"tinted",id:e,size:"xl",title:(0,x.jsx)(d.d,{weight:"bold",variant:"ballad",lineClamp:1,"data-testid":"leavebehind-advertiser",children:t}),subtitle:(0,x.jsx)(u.j,{as:"div",lineClamp:2,"data-testid":"leavebehind-tagline",children:i}),media:(0,x.jsx)(p.C,{"data-testid":"leavebehind-image",src:a.src,alt:a.alt,imageHeight:b,imageWidth:b,size:"xl"}),trailing:(0,x.jsx)(m.$,{onClick:()=>{r&&r()},"data-testid":"leavebehind-button",colorSet:"invertedLight",size:"small","aria-label":l.Ru.get("ad-formats.learnMore"),children:s})})});var v=i(46265),k=i(57854),j=i(73984),C=i(91064);const P="zlUJfROzFEOsEDWL7ucP",T="Fxvq1Fw7XQdGRDvYokRg",N=({leavebehinds:e,seeAllButton:t,surface:i,uri:c})=>{const d=(0,C.vh)(),u=(0,j.w)(j.P),[p,m]=(0,a.useState)(void 0);(0,a.useEffect)((()=>{e&&e.length>0&&p!==e[0].requestId&&c&&(e.forEach(((e,t)=>{e.uri===c&&(e.trackingEvents?.viewed.forEach((async t=>{try{await u(t)}catch(a){const s=a;d.send((0,r.G)({error_type:"trackingURLFailure",error_message:s.message,http_error_code:422,surface:(0,v.Fh)(i),request_url:t,request_type:"leavebehindAds",lineitem_id:e.lineitemId,ad_content_origin:(0,k.Zl)(i)}))}})),d.send((0,o.x)({leavebehind_lineitem_id:e.lineitemId,leavebehind_request_id:e.requestId,event:"event_viewed",event_reason:`viewed_on_${(0,v.Fh)(i).toLowerCase()}`,surface:(0,v.Fh)(i),surface_position:t+1,uri:c})))})),m(e[0].requestId))}),[d,u,e,c,i,p]);const h=({eventReason:e,lineitemId:t,requestId:a,trackingEvents:s,surfacePosition:n})=>{((e,t)=>{t?.forEach((async t=>{try{await u(t)}catch(a){const s=a;d.send((0,r.G)({error_type:"trackingURLFailure",error_message:s.name,http_error_code:422,surface:(0,v.Fh)(i),request_url:t,request_type:"leavebehindAds",lineitem_id:e,ad_content_origin:(0,k.Zl)(i)}))}}))})(t,s),d.send((0,o.x)({leavebehind_lineitem_id:t,leavebehind_request_id:a,event:"event_clicked",event_reason:e,surface:(0,v.Fh)(i),surface_position:n,uri:c}))};return(0,x.jsxs)("section",{"data-testid":"leavebehinds-wrapper",children:[(0,x.jsxs)("div",{className:T,children:[(0,x.jsx)(s.E,{as:"h2",semanticColor:"textBase",variant:"titleSmall",paddingBottom:(0,n.po)("tighter"),"data-testid":"leavebehinds-title",children:l.Ru.get("podcast-ads.recent_ads")}),t]}),(0,x.jsx)("div",{className:P,"data-testid":"leavebehinds-list-wrapper",children:e.map(((e,t)=>(0,x.jsx)(f,{...e,buttonOnClick:()=>{h({eventReason:"button_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})},cardOnClick:()=>{h({eventReason:"card_clicked",lineitemId:e.lineitemId,trackingEvents:e.trackingEvents?.clicked,requestId:e.requestId,surfacePosition:t+1})}},e.adId)))})]})}},59893:(e,t,i)=>{i.d(t,{W:()=>W});var a=i(97500),s=i.n(a),n=i(64871),r=i(17160),o=i(60542),l=i(44461),c=i(54580);const d=Spicetify.GraphQL.Definitions["internalLinkRecommenderEpisode"]=new l.l("internalLinkRecommenderEpisode","query","5146a0312a2366520b9b43c3b5dd9e54c5b802bd74de3e0bd05f3c6800825c9f",null);var u=i(9263),p=i(30758),m=i(62411),h=i(36866),g=i(89781),y=i(67785),x=i(57026),b=i(85796),f=i(68912),v=i(1068),k=i(83898),j=i(35287),C=i(73967),P=i(34486),T=i(52240),N=i(42024),I=i(87781),A=i(8193),E=i(6585),S=i(37788),R=i(7474),w=i(55921),_=i(86070);const U=e=>`activation-trigger-mme-${e}`,L=p.memo((function({index:e=-1,audio:t,contentInformation:i,coverArt:a,contentRatingLabel:s,description:r,mediaTypes:o,releaseDate:l,name:c,playable:d,playedState:u,podcastSubscription:L,sharingInfo:M,showName:D,showTrailer:O,showTypes:F,showUri:B,totalMilliseconds:q,type:H,uri:z}){const $=u.playPositionMilliseconds,W=(0,p.useRef)(null),[K,G]=(0,p.useState)(u.state===R._w.Completed),{draggable:J,onDragStart:X}=(0,k.P)(),Z=(0,j.V)(),Q=(0,A.y)(),V=(0,m.wA)(),{isActive:Y,isPlaying:ee,togglePlay:te}=(0,E.P)({uri:z},{featureIdentifier:"episode"}),[ie]=(0,S.S)(1e4,(e=>e?.item?.uri===z));(0,p.useEffect)((()=>{ee&&(W.current=ie)}),[ee,ie]),(0,p.useEffect)((()=>{!ee&&W.current&&q<=W.current&&G(!0)}),[ee,q]);const ae=(0,p.useCallback)((e=>{e||(W.current=0),G(e)}),[]),se={uri:B,name:D,trailer:O,showTypes:F},ne=(0,C.C)({audio:t,name:c,uri:z,mediaTypes:o,coverArt:{sources:a}},se),re=(0,p.useCallback)((()=>{H!==R.I_.Episode?Z?ne():te():f.h.set((()=>({triggerId:U(z),triggerAction:null})))}),[H,Z,z,ne,te]),oe=L?.isPaywalled??!1,le=L?.isUserSubscribed??!1,ce=oe&&!le,de=oe&&Z,{badges:ue}=(0,w.b)({contentRating:s,isPaywalled:oe}),pe=(0,p.useCallback)((()=>V((0,h.Tf)(B))),[B,V]),me=(0,p.useCallback)((e=>{let t=e;return(ce||de)&&(t=(0,_.jsx)(v.N,{enabled:!0,showUri:B,children:t})),!d&&ue.nineteen&&(t=(0,_.jsx)("div",{onClick:e=>{e.stopPropagation(),pe()},children:e})),t=(0,_.jsx)(g.k,{id:U(z),targetURI:(0,n.o_h)(z),children:t}),t}),[ce,de,d,ue.nineteen,z,B,pe]);return(0,_.jsx)(I.pZ,{value:"row",index:e,children:(0,_.jsx)(y.h,{menu:(0,_.jsx)(x.b,{uri:z,showUri:B,sharingInfo:M,isPlayed:K,onMarkAsPlayed:ae}),children:(0,_.jsx)(b.k,{requestId:void 0,index:e,uri:z,size:Q,images:a||[],name:c,showName:D,description:r,isPlayable:d||ce,fullyPlayed:K,durationMs:q,releaseDate:l,resumePositionMs:W.current??$,draggable:J,handleDragStart:e=>{if(e.target!==e.currentTarget)return;X(e,{itemUris:[z],dragLabelText:`${c} â€¢ ${D}`,contextUri:B})},handlePlaybackClick:re,isCurrentlyPlaying:Y,isPaywalled:oe,isUserSubscribed:le,isPlaying:ee,position:ee?ie:void 0,episodeSharingInfo:M,onMarkAsPlayed:ae,contentInformation:i,showUri:B,mediaTypes:o??void 0,badges:(0,_.jsxs)(_.Fragment,{children:[ue.explicit&&(0,_.jsx)(P.U,{}),ue.paid&&(0,_.jsx)(T.y,{}),ue.nineteen&&(0,_.jsx)(N.q,{size:16})]}),playButtonWrapper:me})})})}));var M=i(69229),D=i(26062);var O=i(61712),F=i(72264);const B="GgMHVmfXNzteIydSWMIA",q="GcupflQsYyy0IMOsCeD1",H="A4FqrLbXeENogU0IRaPn",z="YCYs0Gv5B5ctDN0f5Zby",$=({uri:e,isFullPage:t=!1})=>{const{data:i}=(a={uri:e},(0,c.I)(d,a,o));var a,o;const l=i?.seoRecommendedEpisode.totalCount,u=i?.seoRecommendedEpisode.items,p=function(e){return(e||[]).filter((e=>(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(e.data)))}(u),m=t?p:p.slice(0,5);if(0===l)return null;const h=(0,n.o_h)(e)?.id,g=`spotify:app:episode:${h}:more-like-this`;return(0,_.jsxs)("section",{className:s()(B,{[q]:!t}),"data-testid":"episode-list",children:[(0,_.jsx)(O.k,{title:r.Ru.get("internal-link-recommender.more-episodes-like-this"),showSeeAll:!t,seeAllUri:g}),m.map((({data:e},t)=>{const i=(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Podcast"===e.__typename;var t})(e.podcastV2.data)?e.podcastV2.data:null;return i?e&&(0,_.jsxs)("div",{className:z,children:[(0,_.jsx)("hr",{className:H,"aria-hidden":!0}),(0,_.jsx)(L,{index:t,audio:e.audio,contentInformation:e.contentInformation,contentRatingLabel:e.contentRating?.label,coverArt:e.coverArt?e.coverArt.sources:void 0,description:e.description,releaseDate:e.releaseDate,mediaTypes:e.mediaTypes,name:e.name,playable:e.playability.playable,playedState:e.playedState,podcastSubscription:(0,F.Wx)(e.restrictions,e.playability),sharingInfo:e.sharingInfo,showTrailer:(a=i.trailerV2?.data,a&&(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"RestrictedContent"!==t?.__typename&&"Episode"===e.__typename;var t})(a)?{type:D.c.EPISODE,uri:a.uri,name:a.name,coverArt:a.coverArt?.sources||[],audio:a.audio,audioPreview:(0,M.xh)(a),sharingInfo:a.sharingInfo,duration:{milliseconds:a.duration.totalMilliseconds},contentRating:a.contentRating,mediaTypes:a.mediaTypes}:null),showName:i.name,showTypes:i.showTypes,showUri:i.uri,totalMilliseconds:e.duration.totalMilliseconds,type:e.type,uri:e.uri},`${e.uri}/${t}`)]},`${t}${e.uri}`):null;var a}))]})},W=e=>{const t=(0,u.D)({entityType:D.c.EPISODE,componentType:"list",uri:e.uri});return(0,_.jsx)(o.s,{onError:t,children:(0,_.jsx)($,{...e})})}},60050:(e,t,i)=>{i.d(t,{A:()=>a});const a={Heading:"playlist-playlist-heading",HTMLDescription:"playlist-playlist-playlistDescription",List:"playlist-playlist-list",ListItem:"playlist-playlist-listItem",Paragraph:"playlist-playlist-paragraph"}},75306:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Si});var a=i(30758),s=i(60749),n=i(85387),r=i(89035),o=i(39705),l=i(64871),c=i(17160),d=i(45588),u=i(68912),p=i(59893),m=i(58244),h=i(48535),g=i(62411),y=i(93672),x=i(36866),b=i(92031),f=i(31619),v=i(15199),k=i(92612),j=i(84371),C=i(35691),P=i(57026),T=i(52945),N=i(22619),I=i(10569),A=i(89781),E=i(1068),S=i(44256),R=i(35287),w=i(66705),_=i(86070);const U="activation-trigger-mme",L=({episodeUri:e,showUri:t,isLocked:i,isPlaying:a,isPlayDisabled:s,playButtonPlayLabel:n,playButtonPauseLabel:r,onClick:o,size:c="large"})=>{const d=(0,w.c)();if((0,R.V)())return(0,_.jsx)(S.R,{size:c,onClick:o,isPlaying:a,disabled:s,locked:i,ariaPlayLabel:n,ariaPauseLabel:r});const u=(0,_.jsx)(E.N,{showUri:t,enabled:i,renderInline:!1,children:(0,_.jsx)(S.R,{size:c,onClick:o,isPlaying:a,disabled:s,locked:i,ariaPlayLabel:n,ariaPauseLabel:r})});return d?(0,_.jsx)(A.k,{id:U,targetURI:(0,l.o_h)(e),fadeOut:!0,children:u}):u};var M=i(29646),D=i(64363),O=i(79664),F=i(34198),B=i(37788),q=i(39750),H=i(38684),z=i(47900),$=i(39583),W=i(55921);const K="ZDeijYE6qPzPqT9vG_2w",G="qEoBuparvnBwiHsPzwEj",J="azmMKgbEFsGjSUnw2Knc",X="oDljdc6tgUKxTeQMyh0D",Z="eCpSFybAW4xJNfuGDJY3",Q="aTeXTpJi_WmakpodeGxX",V="kZWs1d_TjX2JQgmtx90y",Y="JCSifKpPc54eqcTYBj5Q",ee="FlK1APGRiu5DTwm_0kix",te="ahQLeD18bYXcFRWkL_vg",ie="l6peddfW1BiAnd1a_mF3",ae="Xkg0O12dNVwomjL8dzm4",se="OexEjZt7Kf7pFUW701v8",ne="jAY3diSzPfk19oswf8_y",re="F3BJWbXwGSqNOwZHInLz",oe="YjVCpFaOT3LCR64t8jTN",le="Q7HlO_WHb9N8aK8bgOjG",ce="xTENSk0_RmQ8qEeEuhnE",de="qH2Mpq2icGtfNZfwIhiW",ue="W4580vs00yDqFNs7363B",pe="H1jMR2c5kT6qQ7lmTqpF",me=({episode:e,onPlayEpisode:t,isPlaying:i,isActive:s,isFullyPlayed:n,setIsFullyPlayed:r,backgroundColor:o,isLocked:l,spec:d})=>{const{uri:u,playedState:p,contentRating:m,playability:h}=e,A=(0,H.s)(),E=(0,g.wA)(),[S]=(0,B.S)(1e4,(e=>e?.item?.uri===u)),R=(0,q.o)((e=>e?.duration)),{badges:w}=(0,W.b)({contentRating:m?.label}),U=(0,a.useCallback)((e=>{!h.playable&&w.nineteen&&(e.stopPropagation(),E((0,x.Tf)(u||"")))}),[u,h.playable,w.nineteen,E]),K=(0,a.useCallback)((()=>{const e=d.contextMenuButtonFactory().hitUiReveal();A.logInteraction(e)}),[A,d]),G=(0,a.useCallback)(((e,t)=>{(0,O.Qv)(t,d.downloadButtonFactory(),A,u)}),[A,d,u]),J=(0,I.d$)(),{spec:X,logger:Q}=(0,z.r)(y.e,{data:{uri:u}});(0,a.useEffect)((()=>{J&&Q.logImpression(X.impression())}),[J,Q,X]);const V=(0,a.useCallback)((e=>{const t=d.saveButtonFactory();A.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u})),e&&J&&Q.logInteraction(X.hitAddToPlaylist({itemToBeAdded:u,playlist:F.Xn}))}),[A,d,u,J,Q,X]),Y=!l&&!e.playability.playable,ee=c.Ru.get("tracklist.a11y.play",e.name,e.podcast?.name),te=c.Ru.get("tracklist.a11y.pause",e.name,e.podcast?.name),ie=e.podcast?.uri,ae=(0,D.j)(),se=(0,N.v)(e.uri),ne=!l;return(0,_.jsxs)(b.E,{backgroundColor:o,children:[(0,_.jsxs)("div",{className:Z,children:[(0,_.jsx)(M.P,{episode:e,showVideoBadge:!0}),(0,_.jsx)($.j,{fullyPlayed:n,durationMs:s&&R?R:e.duration.milliseconds,releaseDate:e.releaseDate,resumePositionMs:p.playPositionMilliseconds,isPlaying:i,position:s&&S||void 0})]}),(0,_.jsxs)(f.S,{children:[(0,_.jsx)("div",{onClick:U,children:(0,_.jsx)(L,{episodeUri:e.uri,showUri:ie,isLocked:l,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:i,isPlayDisabled:Y,playButtonPlayLabel:ee,playButtonPauseLabel:te,size:ae})}),(0,_.jsx)(v.e,{uri:e.uri,onClick:G,size:ae,canDownload:ne,condensed:!0}),se?(0,_.jsx)(T.g,{uri:e.uri,size:ae}):(0,_.jsx)(j.b,{uri:e.uri,size:ae,onClick:V,condensed:!0}),(0,_.jsx)(C.b,{onShow:K,menu:(0,_.jsx)(P.b,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:ie,contextUri:e.uri,isPlayed:n,onMarkAsPlayed:r}),children:(0,_.jsx)(k.e,{label:c.Ru.get("more.label.context",e.name),size:ae})})]})]})};var he=i(97500),ge=i.n(he),ye=i(12738),xe=i(59341),be=i(83455),fe=i(46265),ve=i(50725),ke=i(55278),je=i(57854),Ce=i(76546),Pe=i(92063),Te=i(26062);const Ne=fe.ui.EPISODE_PAGE,Ie=({leavebehinds:e,uri:t,seeAllPath:i})=>{const s=(0,a.useMemo)((()=>e.slice(0,je.un)),[e]);return(0,_.jsx)(xe.o,{leavebehinds:s,surface:Ne,uri:t,seeAllButton:e.length>je.un?(0,_.jsx)(be.J,{leavebehinds:e,surface:Ne,uri:t,pathname:i,state:{uri:t}}):null})};function Ae(e){const t=(0,Ce.L)(),i=(0,l.o_h)(e.uri)?.id,s=(0,ke.c)(i),{data:n,error:r,getLeavebehinds:o}=(0,ve.A)({surface:Ne,uri:e.uri}),c=(d=t?.item.type,(0,Pe.Z)(d)===Te.c.AD&&d===Te.c.EPISODE);var d;(0,a.useEffect)((()=>{o()}),[o]),(0,a.useEffect)((()=>{c&&o()}),[c]);const u=(0,a.useMemo)((()=>n?(0,je.iT)(n,e.uri):[]),[n?.requestId]);return u.length<1||r?null:(0,_.jsx)(Ie,{uri:e.uri,leavebehinds:u,seeAllPath:s})}var Ee=i(72045),Se=i(98715),Re=i(33100),we=i(10493),_e=i(92574);const Ue=({cardHeaderText:e,cardBodyText:t,buttonText:i,buttonTarget:a})=>(0,_.jsxs)("div",{className:Y,children:[(0,_.jsxs)("div",{className:ee,children:[(0,_.jsx)(Se.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:e}),(0,_.jsx)(Se.E,{semanticColor:"textBase",children:t})]}),(0,_.jsx)(_e.$,{size:"small",colorSet:"invertedLight",href:(0,l.o_h)(a).toURLPath(!0),component:Ee.v,children:i})]});var Le=i(72540);const Me=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:s,htmlDescription:n,onTimeStampClick:r,playability:o,showHeader:l=!0,spec:d})=>{const u=(0,H.s)(),p=(s||t)&&l,m=(0,a.useCallback)((e=>{const t=d.readMoreButtonFactory();u.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[d,u]),h=(0,Re.NC)(Le.ZK8,{loadingValue:!1});return(0,_.jsxs)(_.Fragment,{children:[p&&(0,_.jsx)(Se.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:J,children:c.Ru.get("episode.description-title")}),t&&(0,_.jsx)(Ue,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),s&&(0,_.jsx)(we.N,{className:G,onTimeStampClick:r,maxLines:4,onExpanded:m,content:(i||"").trim(),htmlContent:e&&n?n:void 0,enableTimestamps:o.playable,enableAutomaticLinkification:h&&e&&!!n})]})};var De=i(8335),Oe=i(46932),Fe=i(40696),Be=i(19961),qe=i(85210),He=i(55354),ze=function(e){return e.DESCRIPTION="description",e.TRANSCRIPT="transcript",e}(ze||{});const $e=a.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:i,spec:s}){const n=(0,H.s)(),[r,o]=(0,a.useState)(ze.DESCRIPTION),l=(0,He.SF)(),{ref:d,inView:u}=(0,De.Wx)({threshold:[1],root:l.current,rootMargin:`-${qe.uC+1}px 100000px 0px 100000px`}),p=(0,a.useRef)(null),m=(0,a.useCallback)((e=>{p.current=e,d(e)}),[d]);return(0,a.useEffect)((()=>{const e=p.current?.parentElement?.offsetTop,t=l?.current;if(!e||!t)return;const i=e-qe.uC;t.scrollTop>i&&t.scrollTo({top:i})}),[l,r]),(0,_.jsx)(Oe.j,{list:(0,_.jsxs)(Fe.L,{className:ge()(oe,{[le]:!u}),ref:m,children:[(0,_.jsx)(Be.Y,{label:c.Ru.get("web-player.episode.description"),sentenceCase:!0,active:r===ze.DESCRIPTION,onClick:()=>{const e=s.tabsFactory().descriptionTabButtonFactory().hitUiReveal();n.logInteraction(e),o(ze.DESCRIPTION)},className:ge()(ce,{[te]:r===ze.DESCRIPTION})}),(0,_.jsx)(Be.Y,{label:c.Ru.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:r===ze.TRANSCRIPT,onClick:()=>{const e=s.tabsFactory().transcriptTabButtonFactory().hitUiReveal();n.logInteraction(e),o(ze.TRANSCRIPT)},className:ge()(ce,{[te]:r===ze.TRANSCRIPT})})]}),children:null===e||r===ze.DESCRIPTION?t:i})}));var We=i(9229),Ke=i(6585),Ge=i(31862);const Je=(0,a.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:i}){const{spec:a,logger:s}=(0,z.r)(We.c,{data:{uri:i}}),{isPlaying:n}=(0,Ke.P)({uri:i},{featureIdentifier:"episode"}),r=a.timestampLinkFactory();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:ae,children:(0,_.jsx)(Se.E,{variant:"bodySmall",semanticColor:"textBase",children:c.Ru.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,a)=>{const o=`transcript-section-${a}`;return(0,_.jsxs)("div",{className:ie,children:[(0,_.jsx)("button",{className:se,onClick:()=>{t(e.startMs,o),s.logInteraction(n?r.hitSeekToTime({msToSeekTo:e.startMs}):r.hitPlay({itemToBePlayed:i}))},children:(0,_.jsx)(A.k,{id:o,targetURI:(0,l.o_h)(i),fadeOut:!0,children:(0,_.jsx)(Se.E,{variant:"marginalBold",semanticColor:"textSubdued",className:ne,children:(0,Ge.f)(e.startMs)})})}),e.content.map(((e,t)=>(0,_.jsx)(Se.E,{variant:"bodySmall",semanticColor:"textBase",className:re,dir:"auto",children:e},`transcript-text-${t}`)))]},o)}))]})}));var Xe=i(87372),Ze=i(23107),Qe=i(2772),Ve=i(83920),Ye=i(73036),et=i(75110),tt=i(77532),it=i(59500),at=i(87508),st=i(33756),nt=i(26352),rt=i(16824),ot=i(51766),lt=i(40638),ct=i(54176),dt=i(90955),ut=i(41170),pt=i(25466),mt=i(49762);const ht=({children:e,index:t,ariaRowIndex:i,onTriggerPlay:s,isActive:n,uri:r,spec:o})=>{const l=(0,H.s)(),{pushPopSelected:c,toggleSelected:d,isSelected:u}=(0,a.useContext)(dt.m),p=(0,a.useRef)(null),m=(0,ut.W)(),h=(0,lt.YQ)((e=>{m({intent:"play",type:"double-click"});const t=l.logInteraction(o.doubleHitPlay({itemToBePlayed:r}));s(e,t)}),pt.d,{leading:!0,trailing:!1}),g=(0,a.useCallback)((e=>{d(t,e.shiftKey,e.ctrlKey||e.metaKey)}),[d,t]),y=(0,a.useCallback)((e=>{if(!p.current?.contains(e.target))return;const i="ArrowUp"===e.key?-1:1;["ArrowUp","ArrowDown"].includes(e.key)&&(e.shiftKey?c(t,i):d(t+i,!1,!1))}),[c,d,t]),x=u(t),b=x&&u(t-1),f=x&&u(t+1);return(0,_.jsx)(ct.$,{rowIndex:i,"aria-selected":x,children:(0,_.jsx)("div",{"data-testid":"tracklist-row",className:ge()(mt.A.trackListRow,mt.A.trackListRowGrid,{[mt.A.active]:n,[mt.A.selected]:x,[mt.A.isPreviousRowSelected]:b,[mt.A.isNextRowSelected]:f}),onDoubleClick:h,onClick:g,onKeyDown:y,ref:p,children:e})})};var gt=i(99800),yt=i(87781),xt=i(1110);const bt=({uri:e,title:t="",index:i,subtitle:s="",showName:n="",showUri:r="",duration:o=0,start:l,stop:d})=>{const{isActive:u,isPlaying:p,onClick:m}=(0,gt.L)({episodeUri:e,start:l,stop:d}),h=(0,a.useCallback)(((e,t)=>{m(t)}),[m]),{spec:g}=(0,xt.D)(Qe.i,{data:{position:i,reason:"",uri:e}});return(0,_.jsx)(yt.pZ,{value:"row",index:i,children:(0,_.jsxs)(ht,{index:i,ariaRowIndex:i+1,onTriggerPlay:h,isActive:u,spec:g,uri:e,children:[(0,_.jsxs)(st.U,{ariaColIndex:0,children:[(0,_.jsx)(tt.$,{uri:e,playAriaLabel:c.Ru.get("tracklist.a11y.play",s,n),onClick:h,isPlaying:p,isActive:u,spec:g,children:(0,_.jsx)(it.a,{children:(0,_.jsx)(Ze.M,{className:mt.A.talkIcon,"aria-hidden":!0})})}),(0,_.jsxs)(et.l,{children:[(0,_.jsx)(ot.p,{titleText:t,children:t}),(0,_.jsx)(rt.p,{children:s})]})]}),(0,_.jsx)(nt.o,{ariaColIndex:1,children:(0,_.jsx)(Ve.g,{uri:r,name:n,spec:g,children:(0,_.jsx)("span",{dir:"auto",children:n})})}),(0,_.jsx)(at.l,{ariaColIndex:2,children:(0,_.jsx)(Ye.P,{duration:o,className:mt.A.talkSegmentDuration})})]})})};var ft=i(17568),vt=i(30817),kt=i(55530),jt=i(22248),Ct=i(65574),Pt=i(9440),Tt=i(65619),Nt=i(94353);const It="HRApv65revEcL42QzRjJ",At="HbJqPqSmOY5H3lLnQVzD",Et="DBcCnhHVt7coNqp3wMB4",St=({episodeUri:e,index:t,duration:i,start:s,stop:n,name:r,uri:o,artists:l,album:d,playable:u})=>{const{isActive:p,isPlaying:m,onClick:h}=(0,gt.L)({episodeUri:e,start:s,stop:n}),g=(0,a.useCallback)(((e,t)=>{u&&h(t)}),[h,u]),{spec:y}=(0,xt.D)(Qe.i,{data:{position:t,reason:"",uri:o}});return(0,_.jsx)(kt.t,{trigger:"right-click",action:"open",menu:(0,_.jsx)(jt.P,{uri:o}),children:(0,_.jsxs)(Tt.w,{uri:o,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:l?.[0].name??""},onTriggerPlay:g,isActive:p,isPlayable:u,spec:y,children:[(0,_.jsxs)(st.U,{ariaColIndex:0,children:[(0,_.jsx)(tt.$,{uri:o,playAriaLabel:c.Ru.get("tracklist.a11y.play",r,l?.[0].name),onClick:g,isPlaying:m,isActive:p,spec:y,children:(0,_.jsx)(it.a,{children:(0,_.jsx)("img",{className:At,src:d.image,alt:d.name})})}),(0,_.jsxs)(et.l,{children:[(0,_.jsx)(ot.p,{titleText:r,children:r}),(0,_.jsx)(rt.p,{children:(0,_.jsx)(Ct.l,{artists:l,spec:y})})]})]}),(0,_.jsx)(nt.o,{ariaColIndex:1,children:(0,_.jsx)(Ve.g,{uri:d.uri,name:d.name,spec:y,children:d.name})}),(0,_.jsxs)(at.l,{ariaColIndex:2,children:[(0,_.jsx)(Nt.d,{uri:o,spec:y}),(0,_.jsx)(Ye.P,{duration:i}),(0,_.jsx)(Pt.Y,{spec:y,menu:(0,_.jsx)(jt.P,{uri:o,artists:l}),label:c.Ru.get("more.label.track",r,l?.[0].name)})]})]})})};var Rt=i(78251),wt=i(17554);function _t(e,t,i){return e.reduce(((e,a,s)=>((s>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===a.type?e.push(function(e,t,i){return{type:"MUSIC",index:t,uri:i.uri,episodeUri:e,start:i.start,stop:i.stop,duration:i.duration,name:i.track.name,artists:i.track.artists,album:i.track.album,playable:i.track.playable}}(i,s,a)):"TALK"===a.type&&e.push(function(e,t,i){return{type:"TALK",index:t,uri:e,title:i.title,subtitle:i.subtitle,start:i.start,stop:i.stop,duration:i.duration,showUri:i.show.uri,showName:i.show.name}}(i,s,a)),e)),[])}const Ut=({uri:e,segmentCount:t})=>{const i=(0,Rt.o)(),s=(0,a.useCallback)((async(a,s)=>{const n=Math.ceil(a/2);try{return{items:_t(await i.getSegments(e,n,s),n,e),totalLength:2*t-1}}catch(e){return{items:[],totalLength:0}}}),[t,i,e]),n=(0,a.useCallback)((t=>{switch(t.type){case"SPACER":return(0,_.jsx)("div",{className:Et},t.id);case"MUSIC":return(0,_.jsx)(St,{...t},`${e}-${t.index}`);case"TALK":return(0,_.jsx)(bt,{...t},`${e}-${t.index}`);default:return(0,wt.d)(t)}}),[e]),r=(0,a.useCallback)((e=>({uri:"MUSIC"===e.type?e.uri:""})),[]),o=c.Ru.get("music_and_talk.in_this_episode");return(0,_.jsxs)("div",{children:[(0,_.jsx)(Se.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:It,children:o}),(0,_.jsx)(ft.S4,{ariaLabel:o,hasHeaderRow:!0,rowPlaceholder:Xe.qq,columns:[vt.$.TITLE_AND_ARTIST,vt.$.ALBUM_OR_SHOW,vt.$.DURATION],renderRow:n,fetchTracks:s,resolveItem:r,limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"})]})},Lt=(0,a.lazy)((async()=>{const{CommentsList:e}=await Promise.all([i.e(5627),i.e(2023),i.e(4483)]).then(i.bind(i,98670));return{default:e}}));var Mt=i(19383),Dt=i(30773),Ot=i(8193),Ft=(i(86950),i(86832),i(30248),i(17826),i(42288)),Bt=i(79260),qt=i.n(Bt);let Ht=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});function zt(e){switch(e){case 0:case"UNKNOWN":return Ht.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return Ht.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return Ht.MUSIC_TRACK;default:return Ht.UNRECOGNIZED}}const $t={encode(e,t=qt().Writer.create()){""!==e.version&&t.uint32(10).string(e.version),""!==e.episodeUri&&t.uint32(18).string(e.episodeUri),""!==e.publishedAt&&t.uint32(26).string(e.publishedAt);for(const i of e.sections)Wt.encode(i,t.uint32(34).fork()).ldelim();return""!==e.language&&t.uint32(42).string(e.language),!0===e.curated&&t.uint32(48).bool(e.curated),t},decode(e,t){const i=e instanceof qt().Reader?e:new(qt().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};for(;i.pos<a;){const e=i.uint32();switch(e>>>3){case 1:s.version=i.string();break;case 2:s.episodeUri=i.string();break;case 3:s.publishedAt=i.string();break;case 4:s.sections.push(Wt.decode(i,i.uint32()));break;case 5:s.language=i.string();break;case 6:s.curated=i.bool();break;default:i.skipType(7&e)}}return s},fromJSON:e=>({version:Jt(e.version)?String(e.version):"",episodeUri:Jt(e.episodeUri)?String(e.episodeUri):"",publishedAt:Jt(e.publishedAt)?String(e.publishedAt):"",sections:Array.isArray(e?.sections)?e.sections.map((e=>Wt.fromJSON(e))):[],language:Jt(e.language)?String(e.language):"",curated:!!Jt(e.curated)&&Boolean(e.curated)}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),void 0!==e.episodeUri&&(t.episodeUri=e.episodeUri),void 0!==e.publishedAt&&(t.publishedAt=e.publishedAt),e.sections?t.sections=e.sections.map((e=>e?Wt.toJSON(e):void 0)):t.sections=[],void 0!==e.language&&(t.language=e.language),void 0!==e.curated&&(t.curated=e.curated),t},fromPartial(e){const t={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};return t.version=e.version??"",t.episodeUri=e.episodeUri??"",t.publishedAt=e.publishedAt??"",t.sections=e.sections?.map((e=>Wt.fromPartial(e)))||[],t.language=e.language??"",t.curated=e.curated??!1,t}};const Wt={encode:(e,t=qt().Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&Kt.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&Gt.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&Kt.encode(e.fallback,t.uint32(42).fork()).ldelim(),t),decode(e,t){const i=e instanceof qt().Reader?e:new(qt().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};for(;i.pos<a;){const e=i.uint32();switch(e>>>3){case 1:s.type=i.int32();break;case 2:s.startMs=i.int32();break;case 3:s.plaintextContent=Kt.decode(i,i.uint32());break;case 6:s.musicTrack=Gt.decode(i,i.uint32());break;case 4:s.title=i.string();break;case 5:s.fallback=Kt.decode(i,i.uint32());break;default:i.skipType(7&e)}}return s},fromJSON:e=>({type:Jt(e.type)?zt(e.type):0,startMs:Jt(e.startMs)?Number(e.startMs):0,plaintextContent:Jt(e.plaintextContent)?Kt.fromJSON(e.plaintextContent):void 0,musicTrack:Jt(e.musicTrack)?Gt.fromJSON(e.musicTrack):void 0,title:Jt(e.title)?String(e.title):"",fallback:Jt(e.fallback)?Kt.fromJSON(e.fallback):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case Ht.UNKNOWN:return"UNKNOWN";case Ht.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case Ht.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?Kt.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?Gt.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?Kt.toJSON(e.fallback):void 0),t},fromPartial(e){const t={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return t.type=e.type??0,t.startMs=e.startMs??0,t.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?Kt.fromPartial(e.plaintextContent):void 0,t.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?Gt.fromPartial(e.musicTrack):void 0,t.title=e.title??"",t.fallback=void 0!==e.fallback&&null!==e.fallback?Kt.fromPartial(e.fallback):void 0,t}};const Kt={encode(e,t=qt().Writer.create()){for(const i of e.plaintext)t.uint32(10).string(i);return t},decode(e,t){const i=e instanceof qt().Reader?e:new(qt().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={plaintext:[]};for(;i.pos<a;){const e=i.uint32();if(e>>>3==1)s.plaintext.push(i.string());else i.skipType(7&e)}return s},fromJSON:e=>({plaintext:Array.isArray(e?.plaintext)?e.plaintext.map((e=>String(e))):[]}),toJSON(e){const t={};return e.plaintext?t.plaintext=e.plaintext.map((e=>e)):t.plaintext=[],t},fromPartial(e){const t={plaintext:[]};return t.plaintext=e.plaintext?.map((e=>e))||[],t}};const Gt={encode:(e,t=qt().Writer.create())=>(""!==e.uri&&t.uint32(10).string(e.uri),t),decode(e,t){const i=e instanceof qt().Reader?e:new(qt().Reader)(e);let a=void 0===t?i.len:i.pos+t;const s={uri:""};for(;i.pos<a;){const e=i.uint32();if(e>>>3==1)s.uri=i.string();else i.skipType(7&e)}return s},fromJSON:e=>({uri:Jt(e.uri)?String(e.uri):""}),toJSON(e){const t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial(e){const t={uri:""};return t.uri=e.uri??"",t}};function Jt(e){return null!=e}function Xt(e){return e.type===Ht.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:e.fallback?.plaintext||[],trackUri:e.musicTrack?.uri}:{type:"text",startMs:e.startMs,content:e.plaintextContent?.plaintext||[]}}qt().util.Long!==Ft.A&&(qt().util.Long=Ft.A,qt().configure());var Zt=i(5408);const Qt=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:i,hasDescription:s,hasMusicAndTalkSegments:n,htmlDescription:r,onDescriptionTimestampClick:o,onTranscriptTimestampClick:l,playability:d,segmentCount:u,showUrl:p,transcript:m,uri:h,spec:g})=>{const y=(0,H.s)(),x=(0,Mt.d)(),b=(0,a.useMemo)((()=>g.descriptionSectionFactory()),[g]),f=(0,a.useMemo)((()=>b.trackListFactory()),[b]),[v,k]=(0,a.useState)(null),j=(0,a.useCallback)((async e=>{const t=await async function(e){try{const t=await fetch(e,{});if(t.ok&&t.body){const e=await t.arrayBuffer();return $t.decode(new Uint8Array(e)).sections.map(Xt)}return null}catch(e){return null}}(e);k(t)}),[]);(0,a.useEffect)((()=>{m&&m.length>0&&j(m[0].cdnUrl)}),[j,m]);const C=(0,Ot.y)(),P=l=>(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Me,{hasDescription:s,contentInformation:t,onTimeStampClick:o,description:i,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:d,showHeader:l,spec:b}),n&&(0,_.jsx)(Zt.r,{spec:f,children:(0,_.jsx)(Ut,{segmentCount:u,uri:h})}),p&&(0,_.jsx)(ye.n,{size:"small",className:X,href:p,component:Ee.v,onClick:()=>{y.logInteraction(b.allEpisodesLinkFactory().hitUiNavigate({destination:p}))},children:c.Ru.get("episode.see_all_episodes")}),x&&(0,_.jsx)(a.Suspense,{fallback:null,children:(0,_.jsx)("div",{className:ge()(de,{[ue]:C===Dt.E.LARGE}),children:(0,_.jsx)(Lt,{uri:h,className:pe})})}),(0,_.jsx)(Ae,{uri:h})]}),T=m&&m?.length>0&&d.playable;return(0,_.jsx)(_.Fragment,{children:T?(0,_.jsx)($e,{transcriptSections:v,descriptionContent:P(!1),transcriptContent:(0,_.jsx)(Je,{transcriptSections:v||[],onTimeStampClick:l,episodeUri:h}),spec:g}):P(!0)})};var Vt=i(67785),Yt=i(29299),ei=i(74689),ti=i(13088),ii=i(20297),ai=i(75591),si=i(3278),ni=i(51945),ri=i(4280),oi=i(38273),li=i(28156),ci=i(83758),di=i(6001),ui=i(63151);const pi=({coverArt:e,name:t})=>{const i=(0,Ot.y)(),a=i===Dt.E.SMALL||i===Dt.E.XSMALL;return(0,_.jsx)(di.b,{images:e,type:Te.c.EPISODE,shape:di.u.ROUNDED_CORNERS,title:t,size:a?ui.Qe.SIZE_20:ui.Qe.SIZE_24,className:Q})};var mi=i(7474);const hi=({episode:e,isFullyPlayed:t,setIsFullyPlayed:i,onPlayEpisode:s,isPlaying:n,isLocked:r,backgroundColor:o,spec:d})=>{const{uri:u,name:p,sharingInfo:m,playedState:h,episodeType:g,releaseDate:y,coverArt:x}=e,b=(0,H.s)(),f=function(e,t,i,a,s){const n=t===mi.I_.Episode;return(0,ci.hD)(e,a,i,s)?(0,_.jsx)(ci.Ih,{isMusicAndTalk:n}):n?c.Ru.get("type.showEpisode"):c.Ru.get("type.podcastEpisode")}(u,g||mi.I_.Unknown,h.playPositionMilliseconds,function(e){return e?.replace(/T.*/,"")||""}(y?.isoString),h.state===mi._w.Completed),v=e.podcast?.uri,k=function(e){const t=(0,l.o_h)(e);return`/show/${(0,l.cEw)(t?.id||"")}`}(v),j=(0,a.useCallback)((()=>{b.logInteraction(d.podcastLinkFactory().hitUiNavigate({destination:k}))}),[b,k,d]),C=e.podcast?.coverArt,T=!!(C&&C.length===x.length&&x.every(((e,t)=>e.url===C[t].url))),N=!r&&!e.playability.playable,I=c.Ru.get("tracklist.a11y.play",e.name,e.podcast?.name),A=c.Ru.get("tracklist.a11y.pause",e.name,e.podcast?.name),E=(0,_.jsx)(P.b,{uri:u,sharingInfo:m,showUri:v,contextUri:u,isPlayed:t,onMarkAsPlayed:i});return(0,_.jsxs)(Yt.z,{backgroundColor:o,children:[(0,_.jsxs)(ii.h,{children:[(0,_.jsx)(L,{episodeUri:e.uri,showUri:v,isLocked:r,onClick:()=>{s(h.playPositionMilliseconds)},isPlaying:n,isPlayDisabled:N,playButtonPlayLabel:I,playButtonPauseLabel:A,size:"medium"}),(0,_.jsx)(Vt.h,{menu:E,children:(0,_.jsx)(ai.X,{text:p,dragUri:u,dragLabel:p})})]}),!T&&(0,_.jsx)(ei.X,{children:(0,_.jsx)(Vt.h,{menu:E,children:(0,_.jsx)(si.b,{loading:"eager",name:p,images:x,placeholderType:"episode",shape:si.u.SQUARE})})}),(0,_.jsxs)(ti.Y,{children:[(0,_.jsx)(ni.B,{children:f}),(0,_.jsx)(Vt.h,{menu:E,children:(0,_.jsx)(oi.mm,{dragUri:u,dragLabel:p,scaleAtMinWidth:oi.tw,className:K,children:(0,_.jsx)("span",{"data-testid":"episodeTitle",children:p})})}),(0,_.jsx)(Vt.h,{menu:E,children:(0,_.jsxs)(li.N,{to:k,onClick:j,className:V,children:[T&&(0,_.jsx)(pi,{name:p,coverArt:x}),(0,_.jsx)(ri.g,{children:(0,_.jsx)("span",{"data-testid":"showTitle",children:e.podcast?.name})})]})})]})]})};var gi=i(89137);var yi=i(70127),xi=i(4164),bi=i(65632),fi=i(6413),vi=i(73967),ki=i(41360),ji=i(5056),Ci=i(97959),Pi=i(35902),Ti=i(57736),Ni=i(56539),Ii=i(60164),Ai=i(15213);const Ei=({episode:e})=>{const{uri:t,episodeType:i,description:n,htmlDescription:o,podcastSubscription:c,segmentsCount:m,podcast:g,contentInformation:y,coverArt:x}=e,{spec:b,logger:f}=(0,z.r)(r.g,{data:{uri:t}}),v=(0,fi.n)(),k=(0,a.useMemo)((()=>b.headerFactory()),[b]),j=(0,a.useMemo)((()=>b.actionBarFactory()),[b]),{isActive:C,isPlaying:P}=(0,Pi.te)(t),{isFullyPlayed:T,setIsFullyPlayed:N}=(0,Ti.e)({uri:t,isPlaying:P,durationMs:e.duration.milliseconds,episodePlaybackState:e.playedState?.state}),I=(0,Ci.z)(),A=void 0!==m&&m>0,E=(0,R.V)(),{triggerPlay:S,togglePlay:L,isActive:M}=(0,Ke.P)({uri:t,...v?{}:{pages:[{items:[{type:Te.c.EPISODE,uri:t,uid:null,provider:null}]}]}},{featureIdentifier:"episode"}),D=x.at(0)?.url,O=(0,ki.H)(D||null),F=(0,q.o)((e=>e?.isPaused??void 0)),B=(0,w.c)(),H=c.isPaywalled&&!c.isUserSubscribed,$=C||M,W=e?{name:e.name,uri:e.uri,mediaTypes:e.mediaTypes,audio:{items:e.audio.items.map((e=>({url:e.url})))}}:null,K=g?{name:g.name,uri:g.uri,trailer:g.trailer,showTypes:g.showTypes}:null,G=(0,vi.C)(W,K),J=(0,a.useCallback)(((e,t,a,s)=>{const n=()=>{F?(s?.("resume"),I.resume({featureIdentifier:"episode"})):(s?.("pause"),I.pause({featureIdentifier:"episode"}))};if(!H)if(i===mi.I_.Episode&&B)u.h.set((()=>({triggerId:a||U,triggerAction:null})));else if(M&&!t)E?n():L({loggingParams:s?.()});else if(C&&!t)n();else{const t=s?.("play");E?G({seekTo:e,loggingParams:t}):S({seekTo:e,loggingParams:t})}}),[H,i,B,C,M,E,F,I,L,G,S]),X=(0,a.useCallback)((e=>{J(e,!1,void 0,(e=>{const i=b.actionBarFactory().playButtonFactory();let a;return a="pause"===e||P?i.hitPause({itemToBePaused:t}):"resume"===e||$?i.hitResume({itemToBeResumed:t}):i.hitPlay({itemToBePlayed:t}),f.logInteraction(a)}))}),[J,$,P,f,b,t]),Z=(0,a.useCallback)((e=>{J(e,!0,void 0,(()=>f.logInteraction(b.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[J,f,b,t]),Q=(0,a.useCallback)(((e,t)=>{J(e,!0,t)}),[J]),[V,Y]=(0,s.ok)();(e=>{const t=(0,gi.g)(),[i]=(0,s.ok)(),n=e.gatedEntityRelations?.entitiesWithValueProps.at(0),r=(0,l.o_h)(n?.fallbackNavigation?.uri),o=n?.uri,c=i.has("si");(0,a.useEffect)((()=>{if(!c||!o)return;let i;e.hasGatedEntityRelationAccess&&e.uri!==o?i=(0,l.o_h)(o)?.toURLPath(!0):!e.hasGatedEntityRelationAccess&&r&&(i=r.toURLPath(!0)),i&&t(i,{replace:!0})}),[r,c,t,o,e.hasGatedEntityRelationAccess,e.uri])})(e),(0,a.useEffect)((()=>{if(e&&!$&&V.has("t")){const t=V.get("t")||"0",i=1e3*parseInt(t,10);i<=e.duration.milliseconds&&(V.delete("t"),Y(V,{replace:!0}),J(i,!0))}}),[e,J,$,V,Y]);const ee=!!n||!!o,te=e.podcast?.uri,ie=(0,l.o_h)(te)?.toURLPath(!0);return(0,_.jsxs)("section",{"data-testid":"episode",children:[(0,_.jsx)(d.Q,{children:(0,Ai.L$)({episodeOrChapterName:e.name,showOrAudiobookName:e.podcast?.name??"",type:"Podcast"})}),(0,_.jsx)(h.c,{artistOrShow:e.podcast?.name,title:e.name,uri:t,entityType:h.p.EPISODE}),(0,_.jsx)(hi,{episode:e,onPlayEpisode:X,isPlaying:P,isFullyPlayed:T,setIsFullyPlayed:N,backgroundColor:O,spec:k,isLocked:H}),(0,_.jsx)(me,{episode:e,onPlayEpisode:X,isPlaying:P,isActive:$,isFullyPlayed:T,setIsFullyPlayed:N,backgroundColor:O,isLocked:H,spec:j}),(0,_.jsxs)("div",{className:"contentSpacing",children:[(0,_.jsx)(yi.q,{gatedEntityRelations:e.gatedEntityRelations,upsellExplanation:e.upsellExplanation,hasAccess:e.hasGatedEntityRelationAccess,showValueProps:!1,showCoverArt:!1}),(0,_.jsx)(Qt,{transcript:e.transcript,hasDescription:ee,contentInformation:y,onDescriptionTimestampClick:Z,onTranscriptTimestampClick:Q,description:e.description,areHTMLDescriptionsEnabled:!0,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegments:A,segmentCount:m,uri:e.uri,showUrl:ie,spec:b}),B&&(0,_.jsx)(p.W,{uri:t})]})]})},Si=a.memo((function(){const{episodeId:e=""}=(0,n.g)(),t=(0,l.iMK)(e).toURI(),i=(0,Ni.d)(t);return i?.isError||!i?.episodeOrChapter?(0,_.jsx)(m.LoadingPage,{hasError:i?.isError||!1,errorMessage:c.Ru.get("error.not_found.title.podcast")}):(0,Ii.Gr)(i.episodeOrChapter)?(0,_.jsx)(xi.$,{to:(0,l.o_h)(i.episodeOrChapter.book?.uri).toURLPath(!0)}):(0,_.jsx)(a.Suspense,{fallback:null,children:(0,_.jsx)(bi.u,{pageId:o.$h.PODCAST_EPISODE,uri:t,children:(0,_.jsx)(ji.d,{dynamicColors:i.episodeOrChapter.dynamicColors,children:(0,_.jsx)(Ei,{episode:i.episodeOrChapter})})})})}))},78251:(e,t,i)=>{i.d(t,{o:()=>n});var a=i(17514),s=i(42978);function n(){return(0,s.N)(a.g)}},83455:(e,t,i)=>{i.d(t,{J:()=>u});var a=i(60749),s=i(25748),n=i(36585),r=i(17160),o=i(46265),l=i(57854),c=i(91064),d=i(86070);const u=({leavebehinds:e,surface:t,uri:i,pathname:u,state:p})=>{const m=(0,c.vh)(),h=`${r.Ru.get("view.see-all")} (${e.length<=l.E9?r.Ru.formatNumber(e.length):r.Ru.formatNumber(l.E9)})`;return(0,d.jsx)(a.N_,{to:u,state:p,children:(0,d.jsx)(s.H,{"data-testid":"leavebehinds-see-all",size:"small",onClick:()=>{m.send((0,n.x)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,o.Fh)(t),uri:i}))},children:h})})}},99800:(e,t,i)=>{i.d(t,{L:()=>o});var a=i(30758),s=i(6585),n=i(39750),r=i(64825);function o({episodeUri:e,start:t,stop:i}){const{togglePlay:o,triggerPlay:l,isPlaying:c,isActive:d}=(0,s.P)({uri:e},{featureIdentifier:"episode"}),u=(0,n.o)((e=>(0,r.s)(e)??0)),p=d&&function(e,t,i){return i>=e&&i<t}(t,i,u),m=c&&p;return{onClick:(0,a.useCallback)((e=>{p?o({seekTo:t,loggingParams:e}):l({seekTo:t,loggingParams:e})}),[p,t,o,l]),isPlaying:m,isActive:p}}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map