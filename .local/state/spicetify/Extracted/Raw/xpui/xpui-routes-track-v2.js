"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6863],{16537:(e,t,a)=>{a.d(t,{J:()=>n});var r=a(44461),i=a(54580);const s=Spicetify.GraphQL.Definitions["getTrack"]=new r.l("getTrack","query","26cd58ab86ebba80196c41c3d48a4324c619e9a9d7df26ecca22417e0c50c6a4",null),n=(e,t)=>(0,i.I)(s,e,t)},34483:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Br});var r=a(30758),i=a(97500),s=a.n(i),n=a(85387),o=a(98715),l=a(94118),c=a(25748);const u="music",d="5.1.0",p="default",h="16.2.6";function m(e){return new y(e)}class y{constructor(e){this._path=[{name:"desktop-track",...e.data}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}headerFactory(){return new y.HeaderEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}actionBarFactory(){return new y.ActionBarEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[p,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[d,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}!function(e){e.HeaderEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:a}){this._path=e.concat({name:"header"}),t&&(this._parentAbsoluteLocation=t)}artistLinkFactory(t){return new e.HeaderEventFactory.ArtistLinkEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:t})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[p,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[d,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}}(y||(y={})),function(e){e.ActionBarEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:a}){this._path=e.concat({name:"action_bar"}),t&&(this._parentAbsoluteLocation=t)}playButtonFactory(){return new e.ActionBarEventFactory.PlayButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}saveButtonFactory(){return new e.ActionBarEventFactory.SaveButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}contextButtonFactory(){return new e.ActionBarEventFactory.ContextButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}downloadButtonFactory(){return new e.ActionBarEventFactory.DownloadButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[p,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[d,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}}(y||(y={})),function(e){!function(e){e.ArtistLinkEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:a}){this._path=e.concat({...a,name:"artist_link"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[p,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[d,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:u,generatorVersion:h,interactionType:"hit",specificationMode:p,specificationVersion:d,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(e.HeaderEventFactory||(e.HeaderEventFactory={}))}(y||(y={})),function(e){!function(e){e.PlayButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:a}){this._path=e.concat({name:"play_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[p,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[d,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitPlay({itemToBePlayed:e}){return{actionParameterNames:["item_to_be_played"],actionParameterValues:[e.toString()],actionName:"play",actionVersion:1,app:u,generatorVersion:h,interactionType:"hit",specificationMode:p,specificationVersion:d,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitResume({itemToBeResumed:e}){return{actionParameterNames:["item_to_be_resumed"],actionParameterValues:[e.toString()],actionName:"resume",actionVersion:1,app:u,generatorVersion:h,interactionType:"hit",specificationMode:p,specificationVersion:d,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitPause({itemToBePaused:e}){return{actionParameterNames:["item_to_be_paused"],actionParameterValues:[e.toString()],actionName:"pause",actionVersion:1,app:u,generatorVersion:h,interactionType:"hit",specificationMode:p,specificationVersion:d,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(e.ActionBarEventFactory||(e.ActionBarEventFactory={}))}(y||(y={})),function(e){!function(e){e.SaveButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:a}){this._path=e.concat({name:"save_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[p,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[d,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitLike({itemToBeLiked:e}){return{actionParameterNames:["item_to_be_liked"],actionParameterValues:[e.toString()],actionName:"like",actionVersion:1,app:u,generatorVersion:h,interactionType:"hit",specificationMode:p,specificationVersion:d,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitRemoveLike({itemNoLongerLiked:e}){return{actionParameterNames:["item_no_longer_liked"],actionParameterValues:[e.toString()],actionName:"remove_like",actionVersion:1,app:u,generatorVersion:h,interactionType:"hit",specificationMode:p,specificationVersion:d,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(e.ActionBarEventFactory||(e.ActionBarEventFactory={}))}(y||(y={})),function(e){!function(e){e.ContextButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:a}){this._path=e.concat({name:"context_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[p,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[d,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:u,generatorVersion:h,interactionType:"hit",specificationMode:p,specificationVersion:d,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(e.ActionBarEventFactory||(e.ActionBarEventFactory={}))}(y||(y={})),function(e){!function(e){e.DownloadButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:a}){this._path=e.concat({name:"download_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[p,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[d,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:u,generatorVersion:h,interactionType:"hit",specificationMode:p,specificationVersion:d,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(e.ActionBarEventFactory||(e.ActionBarEventFactory={}))}(y||(y={}));var g=a(64871),x=a(17160),b=a(67785),L=a(22248),v=a(45588),A=a(29299),j=a(17802),k=a(13088),f=a(20297),_=a(75591),C=a(30068),N=a(66156),R=a(23838),I=a(35797),w=a(73883),P=a(38273),E=a(1755),S=a(14397),T=a(41350),B=a(60542),U=a(44461),V=a(54580);const F=Spicetify.GraphQL.Definitions["internalLinkRecommenderTrack"]=new U.l("internalLinkRecommenderTrack","query","c77098ee9d6ee8ad3eb844938722db60570d040b49f41f5ec6e7be9160a7c86b",null);var O=a(56871),M=a(65574),D=a(29512),q=a(73036),G=a(85968),$=a(75110),Z=a(9440),z=a(56332),W=a(87508),Y=a(33756),H=a(26352),X=a(16824),Q=a(51766),J=a(65619),K=a(94353),ee=a(43007),te=a(66705),ae=a(73192),re=a(34486),ie=a(78414),se=a(42024),ne=a(87781),oe=a(4047),le=a(55921);const ce="Z9Dr8PkXFtlO8KnnDcxp",ue="Bm0LUMlhVIcF5qusgdUP",de="GIyB7JDkRwjtVL6PSBbg",pe="whTIka0YYAkqhqrs26Wa";var he=a(86070);const me=r.memo((function({uri:e,name:t,imgUrl:a,artists:r,isExplicit:i,index:s,albumUri:n,contextUri:o,isPlayable:l,isMOGEFRestricted:c,totalMilliseconds:u,playcount:d,usePlayContextItem:p}){const{isActive:h,isPlaying:m,triggerPlay:y,togglePlay:g}=p({uri:e,index:s}),v=(0,oe.T)(e),{isPlayable:A,isAnyArtistBanned:j}=(0,ae.g)(e,{isPlayable:l,isLocal:!1,isOutOfMarket:!1,artistUris:r.map((e=>e.uri))}),{unBanArtists:k}=(0,ee.M)(r.map((e=>e.uri))),f=r.map((e=>e.name)).join(x.Ru.getSeparator()),{badges:_,hasBadges:C}=(0,le.b)({isMOGEFRestricted:c,downloadAvailability:v,isExplicit:i}),N=r.map((e=>e.name)).join(x.Ru.getSeparator()),R=(0,te.c)();return(0,he.jsx)(ne.pZ,{value:"row",index:s,children:(0,he.jsx)(b.h,{menu:(0,he.jsx)(L.P,{uri:e,albumUri:n,artists:r,contextUri:o}),children:(0,he.jsxs)(J.w,{uri:e,contextUri:o,isPlayable:A,isAnyArtistBanned:j,handleArtistBanUndoClick:k,onTriggerPlay:(e,t)=>{y({loggingParams:t})},isActive:h,index:s,ariaRowIndex:s,dragMetadata:{name:t,createdBy:f},isExplicit:i,children:[(0,he.jsxs)(Y.U,{ariaColIndex:0,children:[(0,he.jsx)(G.u,{uri:e,src:a,onClick:(e,t)=>{g({loggingParams:t})},isLocked:!1,isPlaying:m,isActive:h,playAriaLabel:x.Ru.get("tracklist.a11y.play",t,f)}),(0,he.jsxs)($.l,{children:[(0,he.jsx)(O.R,{uri:e,enabled:R,className:de,children:(0,he.jsx)(Q.p,{titleText:t,children:t})}),C&&(0,he.jsxs)(D.P,{children:[_.download&&(0,he.jsx)(ie._,{}),_.explicit&&(0,he.jsx)(re.U,{}),_.nineteen&&(0,he.jsx)(se.q,{className:pe,size:16})]}),(0,he.jsx)(X.p,{children:(0,he.jsx)(M.l,{artists:r})})]})]}),(0,he.jsx)(H.o,{ariaColIndex:1,children:(0,he.jsx)(z.Y,{playcount:d})}),(0,he.jsxs)(W.l,{ariaColIndex:2,children:[(0,he.jsx)(K.d,{uri:e}),(0,he.jsx)(q.P,{duration:u}),(0,he.jsx)(Z.Y,{menu:(0,he.jsx)(L.P,{uri:e,albumUri:n,contextUri:o,artists:r}),label:x.Ru.get("more.label.track",t,N)})]})]})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index));var ye=a(87372),ge=a(17568),xe=a(30817),be=a(6585),Le=a(44849),ve=a(7474),Ae=a(26062);const je=r.memo((function({subtitle:e,uri:t}){const{data:a}=(i={uri:t,limit:5},(0,V.I)(F,i,s));var i,s;const n=function(e){return(e||[]).filter((e=>(e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"Track"===e.__typename;var t})(e.data))).map((e=>e.data))}(a?.seoRecommendedTrack.items),c=(0,r.useMemo)((()=>n?.slice(0,Math.min(n.length,5))),[n]),u=(0,r.useCallback)((e=>({uri:"uri"in e?e.uri:""})),[]),d=(0,r.useMemo)((()=>[xe.$.TITLE_AND_ARTIST,xe.$.ALBUM,xe.$.DURATION]),[]),{usePlayContextItem:p}=(0,be.P)({uri:"spotify:internal:recs:track-ilr",pages:[{items:n?.map((e=>({uri:e.uri,uid:null,type:Ae.c.TRACK,provider:null})))}]},{featureIdentifier:"ilr"}),h=(0,r.useCallback)(((e,a)=>(0,he.jsx)(me,{index:a,contextUri:t,uri:e.uri,name:e.name,totalMilliseconds:e.duration.totalMilliseconds,imgUrl:e.albumOfTrack?.coverArt?.sources[0]?.url,isPlayable:e.playability.playable,artists:e.artists.items.map((e=>({uri:e.uri,id:e.id,name:e.profile.name}))),albumUri:e?.albumOfTrack?.uri||"",isExplicit:e.contentRating?.label===ve.x7.Explicit,isMOGEFRestricted:e.contentRating?.label===ve.x7.NineteenPlus,playcount:parseInt(e.playcount||"0",10),usePlayContextItem:p},`${a}-${e.uri}`)),[t,p]);return n?.length?(0,he.jsxs)("div",{className:ce,children:[(0,he.jsxs)("div",{className:ue,children:[(0,he.jsx)(o.E,{variant:"titleSmall",semanticColor:"textBase",children:x.Ru.get("playlist.extender.recommended.title")}),(0,he.jsx)(o.E,{variant:"bodySmall",paddingBottom:l.CD,children:e})]}),(0,he.jsx)(ge.S4,{ariaLabel:x.Ru.get("playlist.extender.recommended.title"),nrTracks:c.length,rowPlaceholder:ye.qq,tracks:c,renderRow:h,resolveItem:u,columns:d},"internal-link-recommender-track-list")]}):null})),ke=e=>{const{entityType:t}=e;return(0,he.jsx)(B.s,{onError:()=>{(0,Le.fE)({metric_type:T.MetricTypes.COUNTER,what:"dwp-ilr-component-error",value:1,tags:{entityType:t}})},children:(0,he.jsx)(je,{...e})})};var fe=a(28156),_e=a(58244),Ce=a(96159),Ne=a(10995),Re=a(66015),Ie=a(92854);const we=({albums:e,artistName:t,artistId:a,artistUri:r,className:i})=>e?(0,he.jsx)(ne.pZ,{value:"shelf/albums",children:(0,he.jsx)(Re.$,{total:e.totalCount,title:x.Ru.get("rich-page.popular-albums-by-artist",{artist:t}),seeAllUri:`${(0,Ie.Dh)(a)}:discography:${ve._m.Album.toLowerCase()}`,seeAllLabel:x.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:i,children:(0,Ie.Ey)(e.items).map(((e,t)=>(0,he.jsx)(Ne.K,{album:e,index:t,artistURI:r},e.uri)))})}):null;var Pe=a(2330);const Ee=({artistId:e,className:t,fansAlsoLike:a,title:r})=>(0,he.jsx)(ne.pZ,{value:"shelf/fans-also-like",children:(0,he.jsx)(Re.$,{total:a.length,title:r??x.Ru.get("rich-page.fans-also-like"),seeAllUri:`${(0,Ie.Dh)(e)}:related`,className:t,children:a.map(((e,t)=>(0,he.jsx)(ne.pZ,{value:"card",index:t,children:(0,he.jsx)(Pe.a,{index:t,uri:e.uri,name:e.profile.name,images:e.visuals.avatarImage?.sources||[]})},e.uri)))})});var Se=a(25433);const Te="ERm7dIKbVoqGwPb_lXPH",Be=({artistName:e,artistUri:t,headerClassName:a,rowClassName:i,topTracks:s,topTracksTransformer:n,uri:l})=>{const c=(0,r.useMemo)((()=>s?.items.map((e=>n(e,l)))),[s?.items,n,l]);return c&&c.length>0?(0,he.jsxs)("div",{className:i,children:[(0,he.jsxs)("div",{children:[(0,he.jsx)(o.E,{variant:"bodySmall",className:Te,children:x.Ru.get("rich-page.popular-tracks")}),(0,he.jsx)(o.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:a,children:e})]}),(0,he.jsx)(Se.z,{uri:t,nrTracks:c.length,initialTracks:c})]}):null};var Ue=a(31862);const Ve=({artistName:e,artistId:t,artistUri:a,className:i,releases:s,artistImages:n})=>{const o=(0,r.useMemo)((()=>n?{title:e,pretitle:x.Ru.get("artist-page.popular"),media:(0,Ue.h)(n,{desiredSize:48})||""}:null),[n,e]);return s?(0,he.jsx)(ne.pZ,{value:"shelf/releases",children:(0,he.jsx)(Re.$,{total:10,title:x.Ru.get("rich-page.popular-releases-by-artist",{artist:e}),seeAllUri:`${(0,Ie.Dh)(t)}:discography:${ve._m.Album.toLowerCase()}`,seeAllLabel:x.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:i,...o,children:s.items.map(((e,t)=>(0,he.jsx)(Ne.K,{album:e,index:t,artistURI:a},e.uri)))})}):null},Fe=({artistId:e,artistName:t,artistUri:a,className:r,singles:i})=>i?(0,he.jsx)(ne.pZ,{value:"shelf/singles-and-eps",children:(0,he.jsx)(Re.$,{total:i.totalCount,title:x.Ru.get("rich-page.popular-singles-and-eps-by-artist",{artist:t}),seeAllUri:`${(0,Ie.Dh)(e)}:discography:${ve._m.Single.toLowerCase()}`,seeAllLabel:x.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:r,children:(0,Ie.Ey)(i.items).map(((e,t)=>(0,he.jsx)(Ne.K,{album:e,index:t,artistURI:a},e.uri)))})}):null;var Oe=a(17838),Me=a(48535),De=a(45295),qe=a(18854),Ge=a(16254),$e=a(45889),Ze=a(11624);const ze="VdIaMy6YRQX6cN5B7OVC",We="LjkmarFarmUOq0nmv9iy",Ye="VHigmLQwT1FxkKEbCs4H",He="qX5K6LTMIuXG1gFBXzjZ",Xe="fsH_X6pBkexdxtu19q5k",Qe="sDbr7RxY_jjg1XXq8zU5",Je="MiWZGlZeQCy1tibDTql5",Ke="uci6FedOoLZEL163ZR8k",et="GDA6ugyRoV7ZiqIyOU4d",tt="IUBwxdZXklSkRPTZ9w_Q",at="f7XB243E_dNMV9dkUXV6",rt="gQQC7YFmzffMUaCqbx3o",it="QJVNM_FcLpEHhjDc_FU3",st="Vd2oInYt1Ynz9X6KgL7o",nt="yUA20RYjsLIb7xXNRlfn",ot="MVDvKVX1aJ05U9lmHzaz",lt=({richTrack:e})=>{const{search:t}=(0,n.zy)(),a=(0,r.useCallback)((()=>new URLSearchParams(t.slice(1)).get("highlight")||""),[t])(),{tracklistRef:i}=(0,Ze.h)(),s=e.albumOfTrack,{playUri:o,playOptions:l}=(0,$e.J)(s?.uri||""),{usePlayContextItem:c}=(0,be.P)({uri:o},{featureIdentifier:"album"},l),u=(0,r.useMemo)((()=>({items:[],totalCount:0})),[]),d=(0,Ge.t)();return s?(0,he.jsx)("div",{ref:i,className:Je,children:(0,he.jsx)(De.a,{columns:d,children:(0,he.jsx)(qe.F,{albumName:s.name,nrTracks:s.tracks.totalCount,albumUri:s.uri,highlightUri:a,discs:u,usePlayContextItem:c,hasHeaderRow:!1})})}):null};let ct=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});var ut=a(17554);const dt=(e,t)=>{switch(t.type){case"SEO_LYRICS_LOADING":return{...e,[t.uri]:{status:ct.LOADING}};case"SEO_LYRICS_LOADED":return{...e,[t.uri]:{status:ct.LOADED,data:t.response}};case"SEO_LYRICS_ERROR":return{...e,[t.uri]:{status:ct.UNAVAILABLE}};default:return(0,ut.d)(t,`Unhandled lyrics action with type: ${t.type}`)}};var pt=a(69881),ht=a(78814);var mt=a(34587);const yt=async({api:e,uri:t,isPlayable:a,clientId:r=""})=>{if(!a||!t||!r)return{hasLyrics:!1};try{const a=await(async(e,t,a)=>(await e.build().withHost(ht.Hj).withPath(`/seo/track/${t}`).withEndpointIdentifier("/track/{trackId}").withHeaders([{key:"x-spotify-seolyrics-clientid",value:a}]).send()).body)(e||pt.n.getInstance(),t.id,r);return{hasLyrics:!0,lyrics:a.lyrics.lines,provider:a.lyrics.provider,providerDisplayName:a.lyrics.providerDisplayName,providerLyricsId:a.lyrics.providerLyricsId,isRtlLanguage:a.lyrics.isRtlLanguage}}catch(e){if(e instanceof mt.O&&404===e.status)return{hasLyrics:!1};throw e}},gt={status:ct.LOADING},xt={status:ct.UNAVAILABLE},bt=r.createContext(void 0),Lt=({children:e,initialState:t={}})=>{const a=r.useReducer(dt,t);return(0,he.jsx)(bt.Provider,{value:a,children:e})},vt=({uri:e,isNotPermittedToFetchLyrics:t,isPlayable:a})=>{const i=r.useContext(bt);if(void 0===i)throw new Error("useSeoLyrics must be used within a SeoLyricsProvider");const[s,n]=i,o=e?s[e]:null;return(0,r.useEffect)((()=>{t||!o&&e&&(n({type:"SEO_LYRICS_LOADING",uri:e}),yt({uri:(0,g.o_h)(e)??void 0,isPlayable:a,clientId:"65b708073fc0480ea92a077233ca87bd"}).then((t=>{n({type:"SEO_LYRICS_LOADED",uri:e,response:t})})).catch((()=>{n({type:"SEO_LYRICS_ERROR",uri:e})})))}),[n,t,a,o,e]),e&&(0,g.U_m)(e)&&!t&&a?o||gt:xt};var At=a(10814);const jt="OH5mnpJIVCJozYM3raMt",kt="etw0slM6uVrCi5RR3iDi",ft=({padded:e,providerDisplayName:t})=>t?(0,he.jsx)(At.Z,{as:"p",dir:"auto",variant:"finale",className:`${jt} ${e?kt:""}`,children:x.Ru.get("web-player.lyrics.providedBy",t)}):null,_t=({uri:e,isPlayable:t})=>{const{data:a}=vt({uri:e,isPlayable:t});return a?.hasLyrics?(0,he.jsx)(ft,{providerDisplayName:a.providerDisplayName}):null};var Ct=a(93672),Nt=a(92031),Rt=a(31619),It=a(73765),wt=a(8340),Pt=a(92612),Et=a(35691),St=a(34976),Tt=a(10569),Bt=a(64363),Ut=a(6413),Vt=a(79664),Ft=a(34198),Ot=a(82936),Mt=a(47900);const Dt=r.memo((function({uri:e,togglePlay:t,isPlaying:a,isActive:i,spec:s,logger:n,backgroundColor:o,name:l,isPlayable:c,albumUri:u,artists:d}){const p=(0,Ut.n)(),[h,m]=(0,Ot.A)(e),y=(0,Tt.d$)(),{spec:g,logger:b}=(0,Mt.r)(Ct.e,{data:{uri:e}});(0,r.useEffect)((()=>{y&&b.logImpression(g.impression())}),[y,b,g]);const v=(0,r.useCallback)((async()=>{const t=s.saveButtonFactory();n.logInteraction(h?t.hitRemoveLike({itemNoLongerLiked:e}):t.hitLike({itemToBeLiked:e})),h&&y&&b.logInteraction(g.hitAddToPlaylist({itemToBeAdded:e,playlist:Ft.BP}));try{await m(!h)}catch{}}),[e,h,s,n,m,y,b,g]),A=(0,r.useCallback)((()=>{const r=(0,Vt.$I)({isPlaying:a,isActive:i,spec:s.playButtonFactory(),logger:n,uri:e});t({loggingParams:r})}),[i,a,n,s,t,e]),j=(0,r.useCallback)((()=>{n.logInteraction(s.contextButtonFactory().hitUiReveal())}),[n,s]),k=(0,Bt.j)();return(0,he.jsx)(Nt.E,{backgroundColor:o,children:(0,he.jsxs)(Rt.S,{children:[(0,he.jsx)(St.e,{children:(0,he.jsx)(Ce.D,{onClick:A,isPlaying:a,disabled:!c,size:k,uri:e})}),(0,he.jsx)(St.e,{children:(0,he.jsx)(It.M,{isAdded:h,onClick:v,disabled:!p,size:k,condensed:!0})}),(0,he.jsx)(wt.f,{uri:e,isFollowing:h,onFollow:v,size:k,condensed:!0,onClick:(t,a)=>(0,Vt.Qv)(a,s.downloadButtonFactory(),n,e)}),(0,he.jsx)(Et.b,{menu:(0,he.jsx)(L.P,{uri:e,albumUri:u,artists:d}),onShow:j,children:(0,he.jsx)(Pt.e,{label:x.Ru.get("more.label.context",l),size:k})})]})})}));let qt=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});const Gt=(e,t)=>{switch(t.type){case"LYRICS_LOADING":return{...e,[t.uri]:{status:qt.LOADING}};case"LYRICS_LOADED":return{...e,[t.uri]:{status:qt.LOADED,data:t.response}};case"LYRICS_ERROR":return{...e,[t.uri]:{status:qt.UNAVAILABLE}};default:return(0,ut.d)(t,`Unhandled lyrics action with type: ${t.type}`)}},$t=async({trackUri:e,api:t,imageForLyricsRequest:a,isPlayable:r})=>{if(!r)return{hasLyrics:!1};const i=(0,g.o_h)(e);try{const e=await(async(e,t,a)=>(await e.build().withHost(ht.Hj).withPath(`/track/${encodeURIComponent(t)}/image/${encodeURIComponent(a)}`).withHeaders([{key:"App-Platform",value:"WebPlayer"}]).withQueryParameters({format:"json",vocalRemoval:!1}).withEndpointIdentifier("/track/{trackId}").send()).body)(t||pt.n.getInstance(),i.id,a||"");return{hasLyrics:!0,syncType:e.lyrics.syncType,lyrics:e.lyrics.lines,provider:e.lyrics.provider,providerDisplayName:e.lyrics.providerDisplayName,providerLyricsId:e.lyrics.providerLyricsId,isRtlLanguage:e.lyrics.isRtlLanguage}}catch(e){if(e instanceof mt.O&&404===e.status)return{hasLyrics:!1};throw e}},Zt={status:qt.LOADING},zt={status:qt.UNAVAILABLE},Wt=r.createContext(void 0),Yt=({children:e,initialState:t={}})=>{const a=r.useReducer(Gt,t);return(0,he.jsx)(Wt.Provider,{value:a,children:e})},Ht=({uri:e,isNotPermittedToFetchLyrics:t,imageForLyricsRequest:a,isPlayable:i})=>{const s=r.useContext(Wt);if(void 0===s)throw new Error("useTrackEntityLyrics must be used within a TrackEntityLyricsProvider");const[n,o]=s,l=e?n[e]:null;return(0,r.useEffect)((()=>{t||!l&&e&&(o({type:"LYRICS_LOADING",uri:e}),$t({trackUri:e,imageForLyricsRequest:a,isPlayable:i}).then((t=>{o({type:"LYRICS_LOADED",uri:e,response:t})})).catch((()=>{o({type:"LYRICS_ERROR",uri:e})})))}),[o,a,t,i,l,e]),e&&(0,g.U_m)(e)&&!t&&i?l||Zt:zt},Xt=({uri:e,imageForLyricsRequest:t,isPlayable:a})=>{const{data:r}=Ht({uri:e,imageForLyricsRequest:t,isPlayable:a});return r?.hasLyrics?(0,he.jsx)(ft,{providerDisplayName:r.providerDisplayName}):null};var Qt=a(62411),Jt=a(92574);const Kt="QhDsXG1Gmo7XmQWLggAO",ea="bZgWQj7UxvK8GYKWDA7N",ta="AW61P3tnW5cKJCWtbhFh",aa=({buttonText:e,className:t,onSecondaryButtonClick:a,onPrimaryButtonClick:r,secondaryButtonText:i,text:n})=>(0,he.jsxs)("div",{className:s()(Kt,t),"data-testid":"static-activation-trigger",children:[(0,he.jsx)(o.E,{className:ea,variant:"bodyMediumBold",semanticColor:"textBase",children:n}),(0,he.jsxs)("div",{className:ta,children:[(0,he.jsx)(c.H,{onClick:a,semanticColor:"textBase",children:i}),(0,he.jsx)(Jt.$,{onClick:r,colorSet:"invertedLight",children:e})]})]});var ra=a(91064),ia=a(76358),sa=a(76541),na=a(35287),oa=a(62218),la=a(75028),ca=a(15930),ua=a(24829);const da=e=>{const t=(0,ra.vh)(),a=(0,Qt.d4)(la.F6),r=(0,Qt.d4)(oa.JJ),i=(0,Qt.d4)(la.oo),s=(0,na.V)();return()=>{(0,Le.fE)({metric_type:T.MetricTypes.COUNTER,what:"dwp-lyrics-component-error",value:1});const n={category:"lyrics_render_error",label:"dwp",os:(0,ua.f)(),context:JSON.stringify({uri:e,product:i}),country:a?r:"",sp_t:(0,ca.v8)("sp_t")},o=s?sa.r:ia._;t.send(o(n))}};a(51670);var pa=a(33100),ha=a(72540);var ma=a(30869),ya=a(35014),ga=a(40962);const xa=()=>{const e=(0,te.c)(),t=(0,n.zy)(),{trackId:a=""}=(0,n.g)(),r=(0,ma.o)(ya.P.SeoLyricsReferrer,t),i=(0,ga.sp)(document.referrer)||r,s=(0,ma.o)(ya.P.SeoLyrics,t),o=(0,pa.NC)(ha.gAe)===ha.vh7.Enabled,l=atob((0,ca.v8)("x-unauth-referred")||"");return!((0,ga.w2)(window.navigator.userAgent)||!e||!i||l!==a)&&(s||o)};var ba=a(8335);const La="EaTxqhHk6J4ecKHwpY5m",va="dUQl9yd5x_1oWk4L0Ntm",Aa="xt5C47eHPYNiriMJxGnC";var ja=a(97504),ka=a(90131);const fa=({words:e,onObserve:t,lyricsInView:a,...i})=>{const{ref:s,inView:n}=(0,ba.Wx)({threshold:1}),l=(0,r.useRef)(!1);return(0,r.useEffect)((()=>{a||(l.current=!1)}),[a]),(0,r.useEffect)((()=>{l.current||n&&(t({text:e,outOfView:!1}),l.current=!0)}),[n,t,e]),(0,he.jsx)(o.E,{ref:s,as:"p",dir:"auto",variant:"bodyMedium",className:Aa,"data-testid":i["data-testid"],children:e})},_a="q1JbsdMqX7OImgIFWa6J",Ca="hAGejMh7SncdbJ5wcfUi",Na="IaG9Zc3xGxeYjsn73RAz",Ra="zgSEYVU2gMYxihFVEJPn",Ia=420,wa=280,Pa="expandable-lyrics-container";const Ea=({lyrics:e,lyricsInView:t,onObserve:a,previewCount:i})=>{const[n,l]=(0,r.useState)(!1),{visibleLyrics:c,collapsibleLyrics:u}=function(e,t){let a=0,r=-1;const i=e.filter((e=>!!e.words));for(const[e,s]of i.entries())if(a+=s.words.length,a>t){r=e;break}if(r>-1)return{visibleLyrics:i.slice(0,r),collapsibleLyrics:i.slice(r)};return{visibleLyrics:i,collapsibleLyrics:[]}}(e,i),d=u.length>0,p=n?x.Ru.get("show_less"):`…${x.Ru.get("show_more")}`;return(0,he.jsxs)(he.Fragment,{children:[c.map((({words:e},r)=>(0,he.jsx)(fa,{onObserve:a,words:e,lyricsInView:t,"data-testid":"lyrics-line-always-visible"},`lyrics-seo-line-${r}`))),(0,he.jsx)("span",{"aria-hidden":!n,className:s()(Na,{[Ra]:n}),children:u.map((({words:e},r)=>(0,he.jsx)(fa,{onObserve:n?a:()=>{},words:e,lyricsInView:n&&t},`lyrics-seo-line-${r}`)))}),d&&(0,he.jsx)("button",{className:_a,onClick:()=>{l(!n)},"aria-controls":Pa,"aria-owns":Pa,"aria-label":p,children:(0,he.jsx)(o.E,{variant:"bodyMediumBold",className:Ca,children:p})})]})},Sa=({data:e,eventSender:t,playbackId:a,previewCount:i,uri:s})=>{const{lyrics:n=[],provider:l,providerLyricsId:c,syncType:u}=e,{ref:d,inView:p}=(0,ba.Wx)({threshold:0}),h=function(e){const{trackUri:t,provider:a,providerLyricsId:i,syncType:s,eventSender:n,playbackId:o}=e,l=(0,r.useRef)(null),[c,u]=(0,r.useState)(!1),[d,p]=(0,r.useState)(!1),[h,m]=(0,r.useState)(0),[y,g]=(0,r.useState)(!1),x=(0,r.useMemo)((()=>(0,ja.W)({lyrics_format:"track-page",track_uri:t,provider:a,provider_lyrics_id:i,sync_type:s,playback_id:o})),[t,a,i,s,o]),b=(0,r.useMemo)((()=>(0,ka.X)({track_uri:t,playback_id:o,provider:a,provider_lyrics_id:i,sync_type:s,lyrics_format:"track-page"})),[t,a,i,s,o]);return(0,r.useEffect)((()=>{p(!1),u(!1),m(0),g(!1),l.current=null}),[t]),(0,r.useEffect)((()=>{o&&(c&&u(!1),d&&p(!1))}),[o]),(0,r.useEffect)((()=>{c||(!d&&h>0&&(n?.send(b),p(!0)),h>=140&&y&&(n?.send(x),u(!0)))}),[h,d,b,c,x,n,y]),(0,r.useCallback)((e=>{const{text:t,outOfView:a}=e;t&&t.length>0&&(m((e=>e+t.length)),c||null!==l.current||(l.current=setTimeout((()=>{g(!0)}),1500))),a&&(l.current&&clearTimeout(l.current),l.current=null,m(0))}),[m,c])}({trackUri:s,provider:l,providerLyricsId:c,syncType:u,eventSender:t,playbackId:a});return(0,r.useEffect)((()=>{p||h({outOfView:!0})}),[p,h]),(0,he.jsxs)("div",{className:La,ref:d,children:[(0,he.jsx)(o.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:va,children:x.Ru.get("web-player.lyrics.title")}),(0,he.jsx)(Ea,{lyrics:n,lyricsInView:p,onObserve:h,previewCount:i})]})};function Ta(e){return{name:"SeoLyricsImpressionNonAuth",environments:["browsernonauth"],data:e}}const Ba=({data:e,eventSender:t,isBot:a,previewCount:i,trackTitle:s,trackArtists:n,uri:l})=>{const{ref:c,inView:u}=(0,ba.Wx)({threshold:0}),d=function(e){const{eventSender:t,isBot:a,provider:i,providerLyricsId:s,trackTitle:n,trackArtists:o,trackUri:l}=e,c=(0,r.useRef)(null),[u,d]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),[m,y]=(0,r.useState)(0),[g,x]=(0,r.useState)(!1),b=(0,r.useMemo)((()=>Ta({user_type:a?"bot":"human",sp_t:"undefined"!=typeof document?(0,ca.v8)("sp_t"):void 0,impression_type:"minimumCharactersSeen",lyrics_provider:i,lyrics_provider_id:s,track_title:n,track_artist:o,track_uri:l})),[a,i,s,n,o,l]),L=(0,r.useMemo)((()=>Ta({user_type:a?"bot":"human",sp_t:"undefined"!=typeof document?(0,ca.v8)("sp_t"):void 0,impression_type:"snippet",lyrics_provider:i,lyrics_provider_id:s,track_title:n,track_artist:o,track_uri:l})),[a,i,s,n,o,l]);return(0,r.useEffect)((()=>{h(!1),d(!1),y(0),x(!1),c.current=null}),[l]),(0,r.useEffect)((()=>{u||(!p&&m>0&&(t?.send(L),h(!0)),m>=140&&g&&(t?.send(b),d(!0)))}),[m,p,L,u,b,t,g]),(0,r.useCallback)((e=>{const{text:t,outOfView:a}=e;t&&t.length>0&&(y((e=>e+t.length)),u||null!==c.current||(c.current=setTimeout((()=>{x(!0)}),1500))),a&&(c.current&&clearTimeout(c.current),c.current=null,y(0))}),[y,u])}({eventSender:t,isBot:a,provider:e?.provider||"",providerLyricsId:e?.providerLyricsId||"",trackUri:l,trackArtists:n,trackTitle:s});return(0,r.useEffect)((()=>{u||d({outOfView:!0})}),[u,d]),e?(0,he.jsxs)("div",{className:La,ref:c,children:[(0,he.jsx)(o.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:va,children:x.Ru.get("web-player.lyrics.title")}),(0,he.jsx)(Ea,{lyrics:e.lyrics,lyricsInView:u,onObserve:d,previewCount:i})]}):null};var Ua=a(46255);const Va=({uri:e,isPlayable:t,trackArtists:a,trackTitle:i})=>{const[s,n]=(0,r.useState)(Ia),o=xa(),{data:l}=vt({uri:e,isNotPermittedToFetchLyrics:!o,isPlayable:t}),c=(0,ra.vh)(),u=(0,r.useCallback)((()=>{window.innerWidth<=768?n(wa):window.innerWidth>768&&s===wa&&n(Ia)}),[s]);return(0,r.useEffect)((()=>{u()}),[u]),(0,Ua.s)(u),l&&l?.hasLyrics?(0,he.jsx)(Ba,{data:l,eventSender:c,isBot:(0,ga.w2)(window.navigator.userAgent),previewCount:s,trackArtists:a,trackTitle:i,uri:e}):null},Fa=e=>{const t=da(e.uri);return(0,he.jsx)(B.s,{onError:t,children:(0,he.jsx)(Va,{...e})})};var Oa=a(39750),Ma=a(68871);const Da=({uri:e,imageForLyricsRequest:t,isPlayable:a})=>{const[i,s]=(0,r.useState)(Ia),{data:n}=Ht({uri:e,imageForLyricsRequest:t,isPlayable:a}),o=(0,ra.vh)(),{isPaused:l,currentTrackUri:c,playbackId:u}=(0,Oa.o)((e=>({isPaused:e?.isPaused,currentTrackUri:e?.item?.uri,playbackId:e?.playbackId})),Ma.a),d=!l&&c===e,p=(0,r.useCallback)((()=>{window.innerWidth<=768?s(wa):window.innerWidth>768&&i===wa&&s(Ia)}),[i]);return(0,r.useEffect)((()=>{p()}),[p]),(0,Ua.s)(p),n&&n?.hasLyrics?(0,he.jsx)(Sa,{data:n,uri:e,eventSender:o,playbackId:d?u:void 0,previewCount:i}):null},qa=e=>{const t=da(e.uri);return(0,he.jsx)(B.s,{onError:t,children:(0,he.jsx)(Da,{...e})})};var Ga=a(29753);const $a="T1nqQ4HEh3heHy4RCCKa",Za="L8zjshPVgUMXyZR4FtOk",za="YMn1FWcFmOz9osBrNvhF",Wa="Inbyq3TnvKDOJtcKFTDQ",Ya="lWk5se4WETUOJwaEb8D6",Ha="i8DyQbWCmDV_8N5XGJQT",Xa="t5WPFlGTY6GCd9UOFfLu",Qa="AGQ3wRyMVK1odq860qnT",Ja="ZX_r7uZgPgssaUplfpxT",Ka="qrqctaPu2XBpxsw23nPX",er="XnWidTagai3nQwMPxIMF";var tr=a(6001),ar=a(63151),rr=a(79577),ir=a(27341);let sr=function(e){return e.SMALL="small",e.LARGE="large",e}({});const nr=e=>{const{disabled:t,images:a,LinkComponent:r,name:i,size:o,uri:l,enableI18nAdditionalPages:c}=e,u=o===sr.SMALL,d=(0,n.Zp)(),p=(0,g.o_h)(l),h=p?.type,m=x.Ru.getLocaleForURLPath(),y=(0,rr.p)({entityFeatureFlag:c,urlLocale:m,entity:h,type:"link"});return(0,he.jsxs)("div",{className:s()(Za,{[za]:t}),"data-testid":"track-artist-link-card",children:[(0,he.jsx)(tr.b,{shape:tr.u.CIRCLE,images:a,size:ar.Qe.SIZE_80,title:i,type:Ae.c.ARTIST}),(0,he.jsxs)("div",{className:s()(Ya,{[Ha]:u}),children:[(0,he.jsx)(At.Z,{variant:"mestoBold",className:Wa,children:x.Ru.get("card.tag.artist")}),(0,he.jsx)(r,{to:l,children:(0,he.jsx)(At.Z,{as:"div",dir:"ltr",className:Xa,variant:"balladBold",children:i})})]}),(0,he.jsx)("div",{onClick:()=>{const e=p?.toURL(`/${ir.CT}${m}/`);if(p){const t=y?e:p.toURLPath(!0);d(t)}},className:Qa})]})},or=({size:e=sr.LARGE,disabled:t=!1,enableI18nRoutes:a,enableI18nAdditionalPages:i,...n})=>{const[o,l]=(0,r.useState)(!1),u=(0,r.useCallback)((()=>{l(!o)}),[o]),d=n.artists;return(0,he.jsxs)("div",{"data-testid":"track-artist-link-card-container",children:[(0,he.jsx)("div",{className:$a,children:d.map(((r,l)=>(0,he.jsx)("div",{className:s()({[Ka]:o&&l>5,[Ja]:l>5}),children:(0,he.jsx)(nr,{name:r.name,uri:r.uri,images:r.images,size:e,LinkComponent:n.LinkComponent,disabled:t,enableI18nRoutes:a,enableI18nAdditionalPages:i},r.id)},`${r.uri}-${l}`)))}),d.length>6&&(0,he.jsx)(c.H,{onClick:u,className:er,children:(0,he.jsx)(At.Z,{as:"p",variant:"violaBold",children:o?x.Ru.get("show_less"):x.Ru.get("mwp.search.artists.all")})})]})};var lr=a(26096);const cr=e=>{const{albumArtists:t,columnCount:a,imageForLyricsRequest:i,isPlayable:n,uri:o,title:l}=e,c=a-2,u={"--column-count":a,"--left-column-end":c-2,"--right-column-start":c},{isAnonymous:d}=(0,Qt.d4)(la.Ht),p=(0,Ut.n)(),{data:h,status:m}=Ht({uri:o,isNotPermittedToFetchLyrics:d,imageForLyricsRequest:i,isPlayable:n}),y=!!h?.hasLyrics&&m!==qt.UNAVAILABLE,g=xa(),{data:b,status:L}=vt({uri:o,isPlayable:n,isNotPermittedToFetchLyrics:!g}),v=!!b?.hasLyrics&&L!==ct.UNAVAILABLE,A=y||d&&(!g||v),j=(0,Qt.d4)(Ga.M),k=(0,Qt.d4)(Ga.N),f=(()=>{const e=(0,pa.NC)(ha.gAe),t=(0,ra.vh)(),a=(0,te.c)(),r=(0,na.V)();return({referrer:i,seoLyricsEnabled:s,hasLyrics:n,uri:o})=>{if(!a||!r)return;const l={category:"track_unauth_lyrics_exposure",action:"viewed",variant:e,label:"dwp",os:(0,ua.f)(),context:JSON.stringify({referrer:i,seoLyricsEnabled:s,hasLyrics:n}),destination_url:o,sp_t:(0,ca.v8)("sp_t")};t.send((0,sa.r)(l))}})();(0,r.useEffect)((()=>{f({referrer:document.referrer,seoLyricsEnabled:g,hasLyrics:b?.hasLyrics??!1,uri:o})}),[f,g,v,b?.hasLyrics,o]);return(0,he.jsxs)(r.Suspense,{fallback:null,children:[A&&(0,he.jsx)("div",{className:s()(Ye,{[He]:a>5}),style:{...u},"data-testid":"lyrics-container",children:d?d&&g?(0,he.jsx)(Fa,{uri:o,isPlayable:n,trackArtists:t.map((e=>e.name)).join(x.Ru.getSeparator()),trackTitle:l}):(0,he.jsx)(aa,{buttonText:x.Ru.get("sign_up"),secondaryButtonText:x.Ru.get("login"),text:x.Ru.get("track-page.sign-in-to-view-lyrics"),onPrimaryButtonClick:lr.ie,onSecondaryButtonClick:lr.PW,className:"paywall"}):(0,he.jsx)(qa,{uri:o,imageForLyricsRequest:i,isPlayable:n})}),(0,he.jsx)("div",{className:s()(ze,{[We]:a>5&&A}),style:{...u},children:(0,he.jsx)(or,{artists:t,LinkComponent:fe.N,disabled:!p,enableI18nRoutes:j,enableI18nAdditionalPages:k})})]})};function ur({playcount:e,durationMs:t}){return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(I.q,{children:(0,Ue.f)(t)}),e&&e>0?(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(w.J,{}),(0,he.jsx)(I.q,{variant:"bodySmall","data-testid":"playcount",children:x.Ru.formatNumber(e)})]}):null]})}var dr=a(16537),pr=a(54335),hr=a(97444),mr=a(48492);const yr="o2TlnuNKxRO5RnB9BpHB",gr="q0Ke_aAvTcc4dO4wCHQt",xr="UlKUfS_GcROZmofuafOW",br="I5LORTI1u3A6VoUvRCBf",Lr="TS85Qkpioa31wR0p4kzT",vr="yL1DLXBc05CR_ACv_NhA",Ar="k5kRkUyoz9znqg_SGOVQ";var jr=a(84450),kr=a(51994);let fr=function(e){return e.SMALL="small",e.LARGE="large",e}({});const _r=({art:e,disabled:t=!1,LinkComponent:a,name:r,size:i=fr.SMALL,type:o,uri:l})=>{const c=e?[e]:[],u=i===fr.SMALL?(0,jr.C)(o):function(e){switch(e){case kr.s.SINGLE:return x.Ru.get("track-page.from-the-single");case kr.s.EP:return x.Ru.get("track-page.from-the-ep");case kr.s.COMPILATION:return x.Ru.get("track-page.from-the-compilation");case kr.s.ALBUM:default:return x.Ru.get("track-page.from-the-album")}}(o),d=(0,n.Zp)();return(0,he.jsxs)("div",{className:s()(yr,{[xr]:i===fr.SMALL,[gr]:t}),children:[(0,he.jsx)("div",{className:br,children:(0,he.jsx)(tr.b,{images:c,size:ar.Qe.SIZE_80,title:r,type:Ae.c.ALBUM})}),(0,he.jsxs)("div",{className:Lr,children:[(0,he.jsx)(At.Z,{variant:i===fr.SMALL?"mestoBold":"finale",children:u}),(0,he.jsx)(a,{to:l,children:(0,he.jsx)(At.Z,{as:"div",className:vr,variant:"balladBold",dir:"auto",children:r})})]}),(0,he.jsx)("div",{onClick:()=>{d((0,g.o_h)(l).toURLPath(!0))},className:Ar})]})};var Cr=a(44324),Nr=a(16404),Rr=a(57282),Ir=a(5056),wr=a(15213),Pr=a(27625);const Er=e=>(e.items||[]).map((e=>({name:e.profile.name,images:(e.visuals.avatarImage?.sources||[]).map((e=>({url:e.url,width:e.width,height:e.height}))),uri:e.uri,id:e.id}))),Sr=e=>(e||[]).map((e=>e.profile.name)),Tr=({uri:e,track:t})=>{const a=(0,Ut.n)(),i=(0,na.V)(),n=(0,pr.W)({type:"locale",uri:e}),u=x.Ru.getLocaleForTranslation(),d=parseInt(t.playcount||"0",10),{firstArtist:p,otherArtists:h,albumOfTrack:y,duration:g,name:T}=t,B=y?.coverArt,U=y?.copyright.items,V=y?.courtesyLine,F=y?.date,O=B?.extractedColors?.colorRaw.hex,M=(B?.sources||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),D=Sr(p.items),q=Sr(h.items),G=Er(p),$=Er(h),Z=[...G,...$],z=p.items[0],W=t.albumOfTrack,Y=W?.playability?.playable,H={artistId:z?.id,artistName:z?.profile?.name,artistUri:z?.uri},X=t.albumOfTrack?.coverArt?.sources,Q=(0,Ue.h)(X||void 0,{desiredLabel:"large",desiredSize:600})??X?.[0]?.url??"",[J,K]=(0,r.useState)(!1),ee=(0,r.useCallback)((()=>{K(!J)}),[J]),te=h&&h.items.length>5,{spec:ae,logger:re}=(0,Mt.r)(m,{data:{uri:e}}),ie=t.playability.playable,{togglePlay:se,isPlaying:ne,isActive:oe}=(0,be.P)({uri:e},{featureIdentifier:"track"}),le=(0,r.useCallback)((()=>(0,wr.rO)({i18n:x.Ru,trackArtistsList:[...D,...q].join(x.Ru.getSeparator()),trackName:t.name,shouldLocalize:n})),[D,q,n,t.name]),ce=(0,r.useCallback)(((e,t)=>{re.logInteraction(ae.headerFactory().artistLinkFactory({position:t.position,uri:t.creator.uri}).hitUiNavigate({destination:t.creator.uri}))}),[re,ae]),ue=(0,r.useCallback)((()=>{const t=(0,Vt.$I)({isPlaying:ne,isActive:oe,spec:ae.actionBarFactory().playButtonFactory(),logger:re,uri:e});se({loggingParams:t})}),[oe,ne,re,ae,se,e]),de=W?.uri,pe=(0,r.useMemo)((()=>[...p.items,...h.items].map((e=>({uri:e.uri,name:e.profile.name})))),[p.items,h.items]),me=xa(),ye=(0,he.jsx)(L.P,{uri:e,albumUri:de,artists:pe});return(0,he.jsxs)("section",{"data-testid":"track-page",children:[(0,he.jsx)(v.Q,{children:le()}),(0,he.jsx)(Me.c,{artistOrShow:pe.map((e=>e.name)).join(x.Ru.getSeparator()),title:T,uri:e,entityType:Me.p.TRACK}),(0,he.jsxs)(A.z,{backgroundColor:O,children:[(0,he.jsxs)(f.h,{children:[(0,he.jsx)(Ce.D,{size:"medium",onClick:ue,disabled:!ie,isPlaying:ne,uri:e}),(0,he.jsx)(b.h,{menu:ye,children:(0,he.jsx)(_.X,{text:T,dragUri:e,dragLabel:T})})]}),(0,he.jsx)(b.h,{menu:ye,children:(0,he.jsx)(j.K,{dragUri:e,images:M,name:T,placeholderType:"album"})}),(0,he.jsxs)(k.Y,{children:[(0,he.jsx)(o.E,{variant:"bodySmallBold",children:x.Ru.get("song")}),(0,he.jsx)(b.h,{menu:ye,children:(0,he.jsx)(P.mm,{dragUri:e,dragLabel:T,children:T})}),(0,he.jsxs)(C.X,{children:[(0,he.jsx)(N.j,{creators:G,onCreatorClick:ce}),W&&(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(w.J,{}),(0,he.jsx)(I.q,{children:(0,he.jsx)(fe.N,{to:W.uri,children:W.name})})]}),(0,he.jsx)(w.J,{}),(0,he.jsx)(R.H,{releaseDate:F}),(0,he.jsx)(w.J,{}),(0,he.jsx)(ur,{playcount:d,durationMs:g.totalMilliseconds})]})]})]}),(0,he.jsx)(Dt,{uri:e,togglePlay:se,isPlaying:ne,isActive:oe,spec:(0,r.useMemo)((()=>ae.actionBarFactory()),[ae]),logger:re,backgroundColor:O,name:T,isPlayable:ie,albumUri:de,artists:pe}),(0,he.jsx)(Lt,{children:(0,he.jsxs)(Yt,{children:[(0,he.jsxs)("div",{className:"contentSpacing",children:[(0,he.jsx)("div",{className:Xe,children:(0,he.jsx)(mr.E,{render:({columnCount:a})=>(0,he.jsx)(cr,{imageForLyricsRequest:Q,albumArtists:Z,columnCount:a,uri:e,isPlayable:ie,title:t.name}),rowGap:l.lT})}),(0,he.jsx)(E.N$,{renderInVariant:ha.ssn.AboveRecommendedBasedOnThisSong,uri:e}),(0,he.jsx)(ke,{subtitle:x.Ru.get("internal-link-recommender.based-on-this-song"),uri:t.uri,entityType:Ae.c.TRACK}),(0,he.jsx)(Be,{artistName:z.profile.name,artistUri:z.uri,headerClassName:et,rowClassName:Xe,topTracks:z.discography.topTracks,topTracksTransformer:Oe.fX,uri:t.uri}),(0,he.jsx)(E.N$,{renderInVariant:ha.ssn.AbovePopularReleases,uri:e}),(0,he.jsx)(Ve,{className:Ke,releases:z?.discography?.popularReleasesAlbums,...H}),(0,he.jsx)(we,{albums:z?.discography?.albums,className:Ke,...H}),(0,he.jsx)(Fe,{className:Ke,singles:z?.discography?.singles,...H}),h.items.length>0&&(0,he.jsx)("div",{className:at,children:h.items.map(((e,t)=>(0,he.jsx)(Ve,{className:s()(tt,{[it]:t>4,[st]:J&&t>4}),releases:e.discography.popularReleasesAlbums,artistName:e.profile.name,artistId:e.id,artistUri:e.uri,artistImages:e.visuals.avatarImage?.sources},e.id)))}),te&&(0,he.jsx)(c.H,{onClick:ee,className:nt,children:(0,he.jsx)(o.E,{as:"h2",variant:"bodySmallBold",children:J?x.Ru.get("show_less"):x.Ru.get("mwp.search.artists.all")})}),(0,he.jsx)(S.b,{uri:e,className:Ke}),(0,he.jsx)(E.N$,{renderInVariant:ha.ssn.AboveFansAlsoLike,uri:e}),(0,he.jsx)(Ee,{artistId:z.id,className:s()(Ke,{[rt]:h.items.length>0}),fansAlsoLike:z.relatedContent.relatedArtists.items,title:x.Ru.get("artist-page.fansalsolike")}),W&&(0,he.jsx)(_r,{art:W.coverArt?.sources[0],disabled:!Y||!a,LinkComponent:fe.N,name:W.name,type:W.type,size:fr.LARGE,uri:W.uri}),(0,he.jsx)(lt,{richTrack:t})]}),(0,he.jsx)("div",{className:"contentSpacing",children:(0,he.jsxs)("div",{className:Qe,children:[F?.isoString&&(0,he.jsx)(o.E,{as:"p",variant:"bodySmall",className:ot,children:(0,Pr.rh)((0,Pr.ad)(F.isoString),u,{year:"numeric",month:"long",day:"numeric"},(0,Pr.rk)(F.precision))}),(0,he.jsx)(hr.Z,{copyrights:U||[],courtesyLine:V}),!i&&(0,he.jsx)(Xt,{uri:e,imageForLyricsRequest:Q,isPlayable:ie}),i&&me&&(0,he.jsx)(_t,{uri:e,isPlayable:ie})]})})]})})]})},Br=(0,r.memo)((function(){const{trackId:e=""}=(0,n.g)(),t=(0,g.Mce)(e).toURI(),a=(0,dr.J)({uri:t}),r="Track"===a.data?.trackUnion?.__typename&&a.data?.trackUnion?.visualIdentity?.squareCoverImage?.extractedColorSet?(0,Rr.V)(a.data?.trackUnion?.visualIdentity.squareCoverImage.extractedColorSet):null;return a.loading||a.error||"Track"!==a.data?.trackUnion?.__typename?(0,he.jsx)(_e.LoadingPage,{hasError:!a.loading,errorMessage:x.Ru.get("track-page.error")}):(0,he.jsx)(Nr.P,{surface:Cr.u.TRACK,uris:[t,a.data.trackUnion.albumOfTrack?.uri??null],children:(0,he.jsx)(Ir.d,{dynamicColors:r,children:(0,he.jsx)(Tr,{uri:t,track:a.data.trackUnion})})})}))},56871:(e,t,a)=>{a.d(t,{R:()=>s});var r=a(28156),i=a(86070);const s=({uri:e,enabled:t,className:a,children:s,onClick:n})=>t?(0,i.jsx)(r.N,{to:e,className:a,onClick:n,children:s}):(0,i.jsx)(i.Fragment,{children:s})},66156:(e,t,a)=>{a.d(t,{j:()=>R});var r=a(30758),i=a(97500),s=a.n(i),n=a(98715),o=a(75005),l=a(64871),c=a(17160),u=a(17473),d=a(67785),p=a(82086),h=a(38223),m=a(28156);var y=a(33026),g=a(30773),x=a(8193),b=a(60995),L=a(86070);function v(e){return e.displayName||e.name||""}const A=e=>{let t=null;return(0,l.ecE)(e)&&(t=(0,L.jsx)(p.t,{uri:e})),(0,l.APS)(e)&&(t=(0,L.jsx)(h.B,{uri:e})),t},j=({creator:e,onClick:t,position:a=0})=>{const i=(0,r.useCallback)((r=>{t?.(r,{position:a,creator:e})}),[e,t,a]);return(0,y.s)(e)?(0,L.jsx)(d.h,{menu:A(e.uri),children:(0,L.jsx)(n.E,{variant:"bodySmallBold",children:(0,L.jsx)(m.N,{"data-testid":"creator-link",to:e.uri,onClick:i,children:v(e)})})}):(0,L.jsx)(n.E,{variant:"bodySmall",children:v(e)})},k=({creator:e,onClick:t,isSmallIcon:a})=>{const[r,i]=c.Ru.get("playlist.header.made-for","USER").split("USER");return(0,L.jsxs)("div",{className:s()(b.A.metaDataText,b.A.creatorWrapper,{[b.A.smallMadeForIcon]:a}),children:[(0,L.jsx)(o.D,{semanticColor:"textBrightAccent"}),(0,L.jsx)(n.E,{variant:"bodySmall",children:r}),(0,L.jsx)(j,{creator:e,onClick:t}),i&&(0,L.jsx)(n.E,{variant:"bodySmall",children:i})]})},f=({creator:e,onClick:t,isSmallIcon:a,prefix:r})=>(0,L.jsxs)("div",{className:s()(b.A.metaDataText,b.A.creatorWrapper),children:[e.images.length>0&&(0,L.jsx)(u.e,{label:v(e),images:e.images.map((e=>({url:e.url,width:e.width||null,height:e.height||null}))),width:a?20:24,userIconSize:a?"xsmall":"small"}),r&&(0,L.jsx)(n.E,{variant:"bodySmall",children:r}),(0,L.jsx)(j,{creator:e,onClick:t})]}),_=({creators:e,onPiledCreatorsClick:t,isSmallIcon:a})=>{const r=(0,L.jsx)("div",{className:b.A.piled,children:e.slice(0,3).map(((e,t)=>(0,L.jsx)(u.e,{label:v(e),images:e.images.map((e=>({url:e.url,width:e.width||null,height:e.height||null}))),width:a?20:24,userIconSize:a?"xsmall":"small",piled:t>0},e.uri)))});let i=c.Ru.get("playlist.header.creator-and-others",v(e[0]),e.length-1);return 2===e.length&&(i=c.Ru.get("playlist.header.creator-and-co-creator",v(e[0]),v(e[1]))),t?(0,L.jsxs)("button",{className:s()(b.A.metaDataText,b.A.creatorWrapper,b.A.creatorButton),onClick:t,children:[r,i]}):(0,L.jsxs)("div",{className:s()(b.A.metaDataText,b.A.creatorWrapper),children:[r,i]})},C=({creators:e,onCreatorClick:t})=>(0,L.jsx)(L.Fragment,{children:e.map(((e,a)=>(0,L.jsxs)(r.Fragment,{children:[0!==a&&(0,L.jsx)("span",{className:b.A.divider}),(0,L.jsx)(j,{creator:e,onClick:t,position:a})]},e.id)))}),N=({creators:e,onPiledCreatorsClick:t,onCreatorClick:a,isTunaApplied:r})=>{const i=(0,x.y)(),s=i===(g.E.SMALL||i===g.E.XSMALL);if(1===e.length){const[t]=e;return t.isMadeFor?(0,L.jsx)(k,{creator:t,onClick:a,isSmallIcon:s}):(0,L.jsx)(f,{creator:t,onClick:a,isSmallIcon:s,prefix:r?"":void 0})}return e.length>0&&e.every((e=>(0,l.APS)(e.uri)))?(0,L.jsx)(_,{creators:e,onPiledCreatorsClick:t,isSmallIcon:s}):(0,L.jsx)(C,{creators:e,onCreatorClick:a})};function R({creators:e,onCreatorClick:t,onPiledCreatorsClick:a,isTunaApplied:i}){return(0,L.jsx)(r.Suspense,{fallback:null,children:(0,L.jsx)(N,{creators:e,onPiledCreatorsClick:a,onCreatorClick:t,isTunaApplied:i})})}},85968:(e,t,a)=>{a.d(t,{u:()=>h});var r=a(97500),i=a.n(r),s=a(40638),n=a(52139),o=a(82924),l=a(41170),c=a(25466),u=a(38684),d=a(49762),p=a(86070);const h=({uri:e,src:t,playAriaLabel:a,onClick:r,isPlaying:h,isActive:m,isLocked:y,isEpisode:g,isVideo:x,spec:b})=>{const L=(0,l.W)(),v=(0,u.s)(),A=(0,s.YQ)((t=>{let a;if(L({type:"click",intent:h?"pause":"play"}),b){const t=b.playbackButtonFactory();let r;r=m&&h?t.hitPause({itemToBePaused:e}):m&&!h?t.hitResume({itemToBeResumed:e}):t.hitPlay({itemToBePlayed:e}),a=v.logInteraction(r)}r(t,a)}),c.d,{leading:!0,trailing:!1});return(0,p.jsxs)("div",{className:d.A.rowImageWithPlay,children:[(0,p.jsx)(o.e,{src:t,isEpisode:g,isVideo:x}),(0,p.jsx)(n.x,{className:i()(d.A.rowPlayPauseButton,d.A.rowImagePlayPauseButton),iconClassName:d.A.rowPlayPauseIcon,onClick:A,isPlaying:h,isLocked:y,playAriaLabel:a})]})}},97444:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(10814);const i="rTMkDBDp47Eo12ZEQv4U";var s=a(86070);const n=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{if(e.untyped)return(0,s.jsx)(r.Z,{as:"p",variant:"finale",dir:"auto",children:e.text},t);const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let i;return i="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,s.jsx)(r.Z,{as:"p",variant:"finale",dir:"auto",children:`${i} ${a}`},t)}));return t&&a.unshift((0,s.jsx)(r.Z,{as:"p",variant:"finale",dir:"auto",children:t},a.length)),(0,s.jsx)("div",{className:i,children:a})}}}]);
//# sourceMappingURL=xpui-routes-track-v2.js.map