"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3890],{16537:(a,e,t)=>{t.d(e,{J:()=>c});var r=t(44461),n=t(54580);const i=Spicetify.GraphQL.Definitions["getTrack"]=new r.l("getTrack","query","26cd58ab86ebba80196c41c3d48a4324c619e9a9d7df26ecca22417e0c50c6a4",null),c=(a,e)=>(0,n.I)(i,a,e)},53018:(a,e,t)=>{t.r(e),t.d(e,{default:()=>y});var r=t(30758),n=t(62411),i=t(85387),c=t(64871),o=t(17160),s=t(58244),d=t(16537),u=t(89137),l=t(75028),k=t(54580),f=t(97959),m=t(91843),g=t(7474),b=t(86070);const p=r.memo((function(){const a=(0,u.g)(),e=(0,i.zy)(),t=(0,m.m)(),p=(0,f.z)(),{trackId:y=""}=(0,i.g)(),{isAnonymous:T}=(0,n.d4)(l.Ht),h=(0,r.useMemo)((()=>new URLSearchParams(e.search)),[e.search]),U=h.get("context")||"",_=(0,c.Mce)(y).toURI(),I=(0,d.J)({uri:_},{gcTime:30*k.i}),w="Track"===I.data?.trackUnion.__typename&&I.data?.trackUnion?.playability.playable,x=(0,r.useCallback)(((e,t,r)=>{const n=p.getState(),i=(0,c.o_h)(t||e)?.toURLPath(!0);h.delete("context");const o=h.toString()?`&${h.toString()}`:"",s=`${i}?highlight=${_}${o}`;if(T)a(s);else{if((!n||n.isPaused)&&w){const a=Number.isInteger(r)&&void 0!==r?{skipTo:{index:r}}:void 0;p.play({uri:e},{featureIdentifier:"track",referrerIdentifier:p.getReferrer()},a)}a(s,{replace:!0})}}),[p,h,_,T,a,w]),A=(0,r.useCallback)((a=>{if("Track"!==a.__typename)return;const e="Track"===a.associationsV3?.audioAssociations?.items[0]?.trackAudio?.data.__typename?a.associationsV3.audioAssociations.items[0].trackAudio?.data:null;e&&e.albumOfTrack?x(_,e.albumOfTrack.uri):x(_,a.firstArtist?.items?.[0]?.uri)}),[x,_]),C=(0,r.useCallback)((()=>{if(!I.loading&&I.data?.trackUnion&&"Track"===I.data.trackUnion.__typename){if(I.data.trackUnion.mediaType===g.IX.Video)return void A(I.data.trackUnion);const a=(I.data.trackUnion.albumOfTrack?.tracks?.items??[]).findIndex((a=>a.track.uri===_));a>=0&&x(I.data.trackUnion.albumOfTrack?.uri||"",I.data.trackUnion.albumOfTrack?.uri||"",a)}}),[x,A,I,_]);return(0,r.useEffect)((()=>{const a=(0,c.tbX)(U);U&&a?t.getContents(U).then((a=>{const e=a.items.findIndex((a=>a?.uri===_));e<0?C():x(U,U,e)})):C()}),[U,C,x,t,_]),I.loading||I.error||"Track"!==I.data?.trackUnion?.__typename?(0,b.jsx)(s.LoadingPage,{hasError:!I.loading,errorMessage:o.Ru.get("track-page.error")}):null})),y=p}}]);
//# sourceMappingURL=xpui-routes-track.js.map