"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[777],{8413:(t,e,a)=>{a.d(e,{n:()=>s});var n=a(30758),o=a(96885),i=a(88551),r=a(31023);function s(){const t=(0,i.p)(),[e,a]=(0,n.useState)(-1);(0,n.useEffect)((()=>{let e=!0;return(async()=>{const n=await t.getVolume();e&&a(n)})(),()=>{e=!1}}),[t]),(0,r.F)(o._.VOLUME,(t=>a(t.data.volume)));return{volume:e,setVolume:(0,n.useCallback)((e=>{a(e),t.setVolume(e)}),[t])}}},13809:(t,e,a)=>{a.d(e,{WatchFeedViewContainer:()=>nn});var n=a(39705),o=a(65632),i=a(30758),r=a(18849),s=a(86070);const c=(0,i.createContext)(null);function l(){const t=(0,i.useContext)(c);if(null===t)throw new Error("Trying to use 'OverturePlaybackContext' without 'OverturePlaybackProvider'!");return t}const u=({children:t,overridePlatformId:e})=>{const a=(0,i.useMemo)((()=>({videoPlayerContainer:".playbackContainerWatchFeed",audioPlayerContainer:".playbackContainerWatchFeed"})),[]),n=(0,r.H)(a,void 0,void 0,void 0,e);return(0,s.jsx)(c.Provider,{value:n,children:t})};var d=a(97500),h=a.n(d),p=a(40638),m=a(93987),g=a(98715),f=a(25748),v=a(23806);const b="music",y="1.0.0",_="default",x="16.0.1";function L(t){return new j(t)}class j{constructor(t){this._path=[{name:"desktop-watch-feed-view",...t.data}],t?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=t.parentAbsoluteLocation)}closeButtonFactory(){return new j.CloseButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}muteButtonFactory(){return new j.MuteButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}followButtonFactory(){return new j.FollowButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}artistNameFactory(){return new j.ArtistNameEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}hashtagButtonFactory(t){return new j.HashtagButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:t})}shareButtonFactory(){return new j.ShareButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}addToQueueFactory(){return new j.AddToQueueEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}nextButtonFactory(){return new j.NextButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}previousButtonFactory(){return new j.PreviousButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}trackTitleFactory(t){return new j.TrackTitleEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:t})}albumTitleFactory(){return new j.AlbumTitleEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}!function(t){t.CloseButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"close_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.MuteButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"mute_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitMutePlayback(){return{actionName:"mute_playback",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUnmutePlayback(){return{actionName:"unmute_playback",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.FollowButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"follow_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitFollow({itemToBeFollowed:t}){return{actionParameterNames:["item_to_be_followed"],actionParameterValues:[t.toString()],actionName:"follow",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUnfollow({itemToBeUnfollowed:t}){return{actionParameterNames:["item_to_be_unfollowed"],actionParameterValues:[t.toString()],actionName:"unfollow",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.ArtistNameEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"artist_name"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.HashtagButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({...a,name:"hashtag_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.ShareButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"share_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitShare({entityToBeShared:t,shareId:e}){return{actionParameterNames:["entity_to_be_shared","share_id"],actionParameterValues:[t.toString(),e.toString()],actionName:"share",actionVersion:2,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.AddToQueueEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"add_to_queue"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitAddItemToQueue({itemToAddToQueue:t}){return{actionParameterNames:["item_to_add_to_queue"],actionParameterValues:[t.toString()],actionName:"add_item_to_queue",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.NextButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"next_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitSkipToNext({itemToBeSkipped:t,positionMs:e,totalContentMs:a}){return{actionParameterNames:["item_to_be_skipped","position_ms","total_content_ms"],actionParameterValues:[t.toString(),e.toString(),a.toString()],actionName:"skip_to_next",actionVersion:2,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.PreviousButtonEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"previous_button"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitSkipToPrevious({itemToBeSkipped:t,positionMs:e,totalContentMs:a}){return{actionParameterNames:["item_to_be_skipped","position_ms","total_content_ms"],actionParameterValues:[t.toString(),e.toString(),a.toString()],actionName:"skip_to_previous",actionVersion:2,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.TrackTitleEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({...a,name:"track_title"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}impression(){return{app:b,generatorVersion:x,specificationVersion:y,specificationMode:_,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={})),function(t){t.AlbumTitleEventFactory=class{constructor({path:t,parentAbsoluteLocation:e,data:a}){this._path=t.concat({name:"album_title"}),e&&(this._parentAbsoluteLocation=e)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[_,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[y,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const t=this._parentAbsoluteLocation?.locations;return{locations:[...t||[],this._getCurrentLocation()]}}hitUiNavigate({destination:t}){return{actionParameterNames:["destination"],actionParameterValues:[t.toString()],actionName:"ui_navigate",actionVersion:1,app:b,generatorVersion:x,interactionType:"hit",specificationMode:_,specificationVersion:y,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(j||(j={}));var A=a(17160),N=a(73765),C=a(36849);function w(t){var e,a,n,o,r,s=t.size?C.$Z[t.size]:t.iconSize,c=(0,C._C)([{size:16,svgContent:"<path d='M6.46 1.5 5.4.44l-3 3L1 2.04-.06 3.1 2.4 5.56 6.46 1.5ZM7.188 6c.331-.452.596-.957.778-1.5H13.5a1 1 0 1 0 0-2H8.244A5.482 5.482 0 0 0 7.966 1H13.5a2.5 2.5 0 0 1 0 5H7.188ZM16 10.5H2V9h14v1.5Zm0 4.5H2v-1.5h14V15Z'/>"},{size:24,svgContent:"<path d='M8.414 3 7 1.586l-3.75 3.75-1.75-1.75L.086 5 3.25 8.164 8.414 3ZM11 4c0 .34-.024.673-.07 1h7.62a1.5 1.5 0 1 1 0 3H9.745a7.036 7.036 0 0 1-2.137 2H18.55a3.5 3.5 0 1 0 0-7h-7.62c.046.327.07.66.07 1Zm10 12H3v-2h18v2Zm0 6H3v-2h18v2Z'/>"}],s||24),l=null!==(e=t.autoMirror)&&void 0!==e&&e;return i.createElement(C.In,Object.assign({},t,{autoMirror:l,viewBox:"0 0 ".concat(c.size," ").concat(c.size),dangerouslySetInnerHTML:{__html:"".concat((o=t.title,r=t.titleId,o?"<title ".concat(r?'id="'.concat(r,'"'):"",">").concat(o,"</title>"):"")).concat((a=t.desc,n=t.descId,a?"<desc ".concat(n?'id="'.concat(n,'"'):"",">").concat(a,"</desc>"):"")).concat(c.svgContent)}}))}var E=a(54947),k=a(60363),S=a(41170),P=a(97959),V=a(98516);const F=i.memo((function({uri:t,className:e,onClick:a=()=>{},size:n=N.t.xs,placement:o}){const r=(0,S.W)(),{isInQueue:c,toggleInQueue:l}=(t=>{const e=(0,P.z)(),a=(0,V.w)().queued.find((e=>e.uri===t)),n=!!a,o=a?.uid;return{toggleInQueue:(0,i.useCallback)((()=>{n?e.removeFromQueue([{uri:t,uid:o??null}]):e.addToQueue([{uri:t,uid:null}])}),[o,n,e,t]),isInQueue:n}})(t),u=(0,i.useCallback)((()=>{r({intent:"add-to-queue",type:"click"}),l(),a()}),[r,l,a]),d=c?A.Ru.get("contextmenu.remove-from-queue"):A.Ru.get("contextmenu.add-to-queue");return(0,s.jsx)(k.Zp,{label:d,placement:o,children:(0,s.jsx)(f.H,{semanticColor:c?"textBrightAccent":"textSubdued",iconOnly:c?w:E.V,"aria-label":d,onClick:u,"data-testid":"add-button",size:n,className:e})})}));var M=a(92612),I=a(97671),T=a(35691),R=a(22248),B=a(52945),O=a(82570),U=a(76688),D=a(99383),z=a(97598),W=a(40793);const H="IQsUjbPtrVLyyA5iu3zQ",Q=({iconSize:t="small",toggleMute:e,isMuted:a,className:n,labelPlacement:o})=>a?(0,s.jsx)(k.Zp,{label:A.Ru.get("playback-control.unmute"),placement:o,children:(0,s.jsx)(f.H,{condensedAll:!0,onClick:e,"aria-label":A.Ru.get("playback-control.unmute"),className:n,children:(0,s.jsx)(D.X,{size:t})})}):(0,s.jsx)(k.Zp,{label:A.Ru.get("playback-control.mute"),placement:o,children:(0,s.jsxs)(f.H,{condensedAll:!0,onClick:e,"aria-label":A.Ru.get("playback-control.mute"),className:n,children:[(0,s.jsx)(z.C,{size:t}),(0,s.jsx)(W.J,{animated:!0,white:!0,className:H})]})});var q=a(8143),Z=a(8335),J=a(67785),Y=a(75627);const X="JXh51ebDftiwM49U49IA",G="IId345zLSrSuzIWtN4Sd",K="EMcF5GoJ2mLzcp0t365T",$="V795GKOEZNiChr8dJcD4",tt="pGPb4TiSkhPdYEt8h2Av",et="FWBI05WNSb4HR8goMhai",at="BWyVJ8XXZ0jRGpFaA9iW",nt="gWworaJ45IDWOdwjrZKh",ot=()=>{const[t,e]=(0,i.useState)(!1);return(0,i.useLayoutEffect)((()=>{setTimeout((()=>e(!0)),200)}),[]),(0,s.jsxs)("div",{className:h()(X,{[G]:t}),children:[(0,s.jsx)("div",{className:h()($,tt)}),(0,s.jsx)("div",{className:h()($,et)}),(0,s.jsx)("div",{className:h()($,at)}),(0,s.jsx)("div",{className:h()($,et)}),(0,s.jsx)("div",{className:K}),(0,s.jsx)("div",{className:h()($,nt)}),(0,s.jsx)("div",{className:h()($,at)}),(0,s.jsx)("div",{className:h()($,tt)}),(0,s.jsx)("div",{className:h()($,et)})]})};var it=a(82300),rt=a(12442),st=a(99307),ct=a(87439);const lt="YHeDUF3aquXRxYmKOs1A",ut="Ul_Er3t8veggCi1APkwp",dt="fhmiZPVDhaOYIlNd7Myq",ht="sJnarE2UKqyhLo0LFNqy",pt="bPMdcQr8gSb4AgWfkolx",mt="cjZ23zZucJkKFMIrGZa4",gt="iQnF1gu0Mg2rGsKVHIFn",ft="qgczwXDFdF_gy4gRs3LN",vt="rCxYvbE1hq2_VEMOM6M_";const bt=({parentEl:t,item:e})=>{const[a,n]=(0,i.useState)({shouldRender:!0,hasError:!1}),o=(0,Y.Eg)(e?.canvas?.fileId,e?.canvas?.uri)&&!a.hasError;(0,i.useEffect)((()=>{n({shouldRender:!0,hasError:!1})}),[e?.uri]);const r=(0,i.useCallback)((t=>{t&&n({shouldRender:!1,hasError:!0})}),[]);return(0,q.createPortal)((0,s.jsx)(s.Fragment,{children:o&&(0,s.jsx)(J.h,{menu:(0,s.jsx)(R.P,{uri:e.uri}),children:(0,s.jsx)("div",{className:ut,children:(0,s.jsx)(Y.Gg,{fileId:e.canvas?.fileId,canvasUrl:e.canvas?.url,canvasUri:e.canvas?.uri,className:dt,overridePlatformId:it.R,playerContainerClass:"canvasContainerWatchFeed",onError:r,playbackType:Y.RT.Loop})})})}),t)},yt=(0,i.memo)((function({item:t,itemPosition:e,isActive:a,onItemPositionInView:n,carouselEl:o,itemElByPositionRef:r}){const c=function(t){return t.canvas?.thumbnail?.sources?t.canvas.thumbnail.sources.sort(((t,e)=>(e.width??0)-(t.width??0)))[0]?.url:t.coverArt?.sources.sort(((t,e)=>(e.width??0)-(t.width??0)))[0]?.url}(t),l=null===t.canvas,[u,d]=(0,i.useState)(null),{ref:p,inView:g}=(0,Z.Wx)({threshold:l?1:.6,root:o});(0,i.useEffect)((()=>{g&&n(e)}),[g,n,e]);const f=(0,i.useCallback)((t=>{r.current.set(e,t)}),[r,e]),v=(0,st.S)([p,d,f]);return c?(0,s.jsx)(J.h,{menu:(0,s.jsx)(R.P,{uri:t.uri}),children:(0,s.jsxs)("div",{ref:v,className:ht,children:[l&&a&&(0,s.jsx)(ot,{}),(0,s.jsx)("div",{className:h()(ft,{[vt]:a,[mt]:l}),style:{"--background-color":t.coverArt?.extractedColors?.colorDark.hex??m.l0o},children:(0,s.jsx)("div",{className:pt,children:(0,s.jsx)(rt._,{className:gt,loading:"lazy",src:c,radius:12,width:"100%"})})}),a&&u&&(0,s.jsx)(bt,{parentEl:u,item:t})]})}):null})),_t=({items:t,currentItemPosition:e,onItemPositionInView:a,itemElByPositionRef:n,onScroll:o,setScrollingState:r})=>{const[c,l]=(0,i.useState)(null);return(0,i.useEffect)((()=>{if((0,ct.n)())return()=>{};const t=()=>r(!0),e=()=>r(!1);return c?.addEventListener("scroll",t,{once:!0}),c?.addEventListener("scrollend",e),()=>{c?.removeEventListener("scroll",t),c?.removeEventListener("scrollend",e)}}),[c,r,e]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:lt,tabIndex:-1,ref:l,onScroll:o,onKeyDown:t=>{t.preventDefault()},children:t.map(((t,o)=>(0,s.jsx)(yt,{item:t,isActive:o===e,carouselEl:c,itemPosition:o,onItemPositionInView:a,itemElByPositionRef:n},t.uri)))})})};var xt=a(68832),Lt=a(30485),jt=a(17473),At=a(82086),Nt=a(28156),Ct=a(18431),wt=a(82936),Et=a(38684);const kt="g47sxYAVvWCq_6T4Ba5L",St=({artistUri:t,initialLibraryState:e,spec:a})=>{const[n,o]=(0,wt.A)(t,e),r=(0,Et.s)(),c=(0,i.useCallback)((async()=>{let e;e=n?a.followButtonFactory().hitUnfollow({itemToBeUnfollowed:t}):a.followButtonFactory().hitFollow({itemToBeFollowed:t}),r.logInteraction(e);try{await o(!n)}catch{}}),[n,o,t,a,r]),l=n?A.Ru.get("unfollow"):A.Ru.get("follow");return(0,s.jsx)(Ct.W,{className:kt,isFollowing:n,onClick:c,buttonText:l})};var Pt=a(61506);const Vt=200,Ft="ease-in-out";var Mt=function(t){return t[t.UP=-1]="UP",t[t.NONE=0]="NONE",t[t.DOWN=1]="DOWN",t}(Mt||{});const It=t=>{if(!t)return Mt.NONE;const{previous:e,current:a}=t;return void 0===e||void 0===a?Mt.NONE:Math.sign(a.position-e.position)},Tt=(t,e,a)=>{if(!t.animate)return void(t.style.opacity="1");const n=It(a);t.animate({opacity:[0,1],transform:[`translateY(${50*n}%)`,"translateY(0%)"]},{duration:Vt,easing:Ft,fill:"forwards",delay:100})},Rt=(t,e,a,n)=>{if(!t.animate)return void a();const o=It(n);t.animate({opacity:[1,0],transform:["translateY(0%)",`translateY(${-1*o*50}%)`]},{duration:Vt,easing:Ft,delay:100}).addEventListener("finish",a,{once:!0})},Bt=t=>{t.animate?t.animate({opacity:[0,1]},{duration:Vt,easing:Ft,fill:"forwards"}):t.style.opacity="1"},Ot=(t,e,a)=>{if(!t.animate)return void a();t.animate({opacity:[1,0]},{duration:Vt,easing:Ft}).addEventListener("finish",a,{once:!0})},Ut=({hideEnteringElements:t,animateEnteringElements:e,animateExitingElements:a,animateFlippedElements:n})=>{t(),a(),n(),e()},Dt="dkbQiFBHMdijQeINl_ij",zt="aiSwqZguOk1P52s9o9xP",Wt="bl3iefJaRs18m1sL93Eh",Ht="zrFS4My93WidFfSAb0u6",Qt="mENWYVW_PAl8OWp2Ut6e",qt="dErRUxXewpEkZd52uLTh",Zt="q2y15bQqkJDcBixyP5oa",Jt=({mainArtist:t,hashtags:e,spec:a,logger:n,position:o,itemUri:r})=>{const{open:c}=(0,Pt.P)(),l=(0,i.useCallback)((t=>{const e=a.hashtagButtonFactory({uri:t}).hitUiNavigate({destination:t});n.logInteraction(e),c(t,"discovery")}),[n,c,a]),u=(0,i.useCallback)((()=>{const e=a.artistNameFactory().hitUiNavigate({destination:t.uri});n.logInteraction(e)}),[n,t.uri,a]);return(0,s.jsx)(xt.ZI,{flipKey:`wf-${r}-footer`,handleEnterUpdateDelete:Ut,decisionData:{position:o},children:(0,s.jsxs)("div",{className:Dt,children:[(0,s.jsx)(J.h,{renderInline:!0,menu:(0,s.jsx)(At.t,{uri:t.uri,isInLibrary:t.saved}),children:(0,s.jsxs)("div",{className:zt,children:[(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(xt.lf,{flipId:`wf-artist-avatar-${r}`,translate:!1,opacity:!1,scale:!1,onAppear:Bt,onExit:Ot,children:(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(jt.e,{label:t.name,images:t.avatar?.sources||[],width:32,userIconSize:"small"})})},`wf-artist-avatar-${r}`)}),(0,s.jsxs)("div",{className:Wt,children:[(0,s.jsx)(xt.lf,{flipId:"wf-artist-name",translate:!0,children:(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(xt.lf,{flipId:t.name,translate:!1,opacity:!1,scale:!1,onAppear:Bt,onExit:Ot,children:(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(g.E,{variant:"bodySmall",semanticColor:"textSubdued",children:(0,s.jsx)(Nt.N,{to:t.uri,onClick:u,children:t.name})})})},t.name)})}),t.listeners&&(0,s.jsx)(xt.lf,{flipId:"wf-listeners",translate:!0,children:(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(g.E,{variant:"bodySmall",semanticColor:"textSubdued",className:Zt,children:A.Ru.formatNumber(t.listeners,{notation:"compact",maximumFractionDigits:0})})})})]}),(0,s.jsx)(xt.lf,{flipId:"wf-follow-button",translate:!0,children:(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(St,{artistUri:t.uri,initialLibraryState:t.saved,spec:a})})})]})}),e.length>0&&(0,s.jsx)("div",{className:Ht,children:e.map(((t,e)=>(0,s.jsx)(xt.lf,{flipId:e,translate:!0,children:(0,s.jsx)("div",{className:qt,children:(0,s.jsx)(Lt.v,{onClick:()=>l(t.uri),children:(0,s.jsx)("span",{className:Qt,children:t.title})},e)})},e)))})]})})};var Yt=a(6939),Xt=a(99361),Gt=a(74692),Kt=a(33184),$t=a(95693);const te="edeYmiJw2Fd9EFB2SQZo",ee="cpE_cN95GCusnLJ3Mssy",ae=()=>{const{progressMs:t,durationMs:e,animate:a}=function(){const t=l(),e=(0,i.useRef)(Date.now()),a=(0,i.useRef)(0),[n,o]=(0,i.useState)(0),[r,s]=(0,i.useState)(3e4),[c,u]=(0,i.useState)(!1),d=(0,$t.g)();return t.on(Kt.LW.PROGRESS,(t=>{const n=Date.now();n-e.current>=500&&(o(t.data.position),e.current=n,t.data.position>a.current?u(!0):u(!1),a.current=t.data.position)})),t.on(Kt.LW.BEFORE_TRACK_LOAD,(()=>{o(0),u(!1)})),t.on(Kt.LW.DURATION_CHANGED,(t=>{s(t.data.duration)})),t.on(Kt.LW.TRACK_ENDED,(()=>{o(r)})),{progressMs:n,durationMs:r,animate:c&&"visible"===d}}();return(0,s.jsx)(Gt.z,{className:h()(te,{[ee]:a}),semanticColor:"essentialBase",value:100*t/e,dir:"ltr"})};var ne=a(34486),oe=a(30773),ie=a(55921);const re="BKbRtjcDGVGtwX86D6Q4",se="KGX7QwiP6RRFs1T_cS0N",ce="Tc6LggefgOUzLZRNg1Bb",le="Cypiobiw1yGi5E9N48gJ",ue="E0LdRRiYvrkUdZCmAXqQ",de="yJJKqce9DPVQnrFseKKU",he="kJqlixofqKau1v1r3YSE",pe="_bMlIQGXEMMBRZOVM71Z",me="omghgDzOcUFl6oOXYNHX",ge="TaaunKIj990MWZKrBWHW",fe=({item:t,handleTitleClick:e,widthBreakpoint:a,position:n})=>{const o=function(t){return t?.coverArt?.sources.sort(((t,e)=>(t.width??0)-(e.width??0)))[0]?.url}(t),i=t.canvas&&o,{badges:r}=(0,ie.b)({contentRating:t.contentRating??void 0});return(0,s.jsx)(xt.ZI,{flipKey:`wf-${t.uri}-itemInfo`,handleEnterUpdateDelete:Ut,decisionData:{position:n},children:(0,s.jsxs)("div",{className:ue,children:[(0,s.jsx)(J.h,{renderInline:!0,menu:(0,s.jsx)(R.P,{uri:t.uri,albumUri:t.album?.uri,artists:t.artists}),children:(0,s.jsx)(xt.lf,{flipId:`wf-title-${t.uri}`,translate:!0,onAppear:Tt,onExit:Rt,children:(0,s.jsx)("div",{className:ge,children:(0,s.jsx)(g.E,{variant:a===oe.E.LARGE?"titleSmall":"titleMedium",className:de,semanticColor:"textBase",children:(0,s.jsx)(Nt.N,{to:t.uri,onClick:e,className:he,children:t.title})})})},`wf-title-${t.uri}`)}),(0,s.jsx)(xt.lf,{flipId:`wf-artist-${t.artists.at(0)?.uri}`,translate:!0,children:(0,s.jsxs)("div",{className:se,children:[r.explicit&&(0,s.jsx)(ne.U,{className:ce}),t.artists.map(((t,e)=>(0,s.jsx)(J.h,{renderInline:!0,menu:t?.uri?(0,s.jsx)(At.t,{uri:t?.uri}):null,children:(0,s.jsxs)("div",{className:h()(ge,re),children:[e>0?A.Ru.getSeparator():null,(0,s.jsx)(Nt.N,{to:t.uri,children:(0,s.jsx)(g.E,{variant:"bodyMedium",className:le,children:t.name})})]})},e)))]})},`wf-artist-${t.artists.at(0)?.uri}`),(0,s.jsxs)("div",{className:me,children:[i&&(0,s.jsx)(J.h,{renderInline:!0,menu:t.album?.uri?(0,s.jsx)(Xt.h,{uri:t.album?.uri}):null,children:(0,s.jsx)(xt.lf,{flipId:`wf-coverart-${t.uri}`,translate:!1,opacity:!1,scale:!1,onAppear:Bt,onExit:Ot,children:(0,s.jsx)("div",{className:ge,children:(0,s.jsx)(Yt._,{src:o,className:pe})})},`wf-coverart-${t.uri}`)}),(0,s.jsx)(ae,{})]})]})})};var ve=a(46147);const be="YKRW27BSGgfw1jw43dpT",ye=()=>(0,s.jsxs)("div",{className:lt,tabIndex:0,children:[(0,s.jsx)("div",{className:ht,children:(0,s.jsx)("div",{className:ft})}),(0,s.jsx)("div",{className:ht,children:(0,s.jsx)("div",{className:ft,children:(0,s.jsx)("div",{className:be,ref:t=>{t?.scrollIntoView({block:"center",inline:"nearest"})}})})}),(0,s.jsx)("div",{className:ht,children:(0,s.jsx)("div",{className:ft,children:(0,s.jsx)("div",{className:be})})})]}),_e="DJxOEatMU2PHk0cCYWoX",xe="FP_XXx0FMQPJEu3WzfpM",Le="JYvxp3Y58xF59FA7Mnaf",je="WLr9Q6nJ_Hv35r7pNEa3",Ae="uwkK6FkoyBrxvGSYBbhw",Ne="AkStH5UDLsXzudcPz_J_",Ce="YmJS4xMTXdNQLvbP2VAt",we="Qtx4b7Wc1c7NEX49CMeH",Ee="SliTY9e8oKOiypDQdhlw",ke="OGPXh73aLJDzhfFAdPvM",Se="d9bbNw4YiAXpQpjrSgBJ",Pe="ji0qx5PBc5_4aMgNLGrp",Ve="BLIxyum1wPNrFibaQ9wr",Fe="NazSI1w8xaruwFqTP3sS",Me="ZRarvpz5og3ifOVHzGOv",Ie="RQaEu8T4LvqfvRmirqJy",Te="jskTw7aMQHNyh13AZI6R",Re="hK5DaTfJaFpo2BJuoy5k",Be=({hide:t})=>(0,s.jsxs)("div",{className:h()(je,Le,{[Ae]:t}),children:[(0,s.jsxs)("div",{className:Re,children:[(0,s.jsx)("div",{className:Ne,children:(0,s.jsx)(ve.Y,{as:"div",variant:"bodySmall",charCount:8,isLoading:!0})}),(0,s.jsxs)("div",{className:ue,children:[(0,s.jsx)(ve.Y,{as:"div",variant:"titleMedium",charCount:10,isLoading:!0}),(0,s.jsx)(ve.Y,{as:"div",variant:"bodyMedium",charCount:15,isLoading:!0}),(0,s.jsx)(ve.Y,{as:"div",variant:"bodySmall",charCount:20,isLoading:!0})]}),(0,s.jsxs)("div",{className:Dt,children:[(0,s.jsx)(ve.Y,{as:"div",variant:"titleSmall",charCount:10}),(0,s.jsx)(ve.Y,{as:"div",variant:"bodySmall",charCount:15})]})]}),(0,s.jsx)("div",{className:Me,children:(0,s.jsx)(ye,{})}),(0,s.jsx)("div",{className:Pe})]});var Oe=a(92783),Ue=a(92574),De=a(5425),ze=a(41523),We=a(89905),He=a(19302),Qe=a(60339),qe=a(59833),Ze=a(96258);const Je="dcZW_YRCwhi9TTJMPxzX",Ye="JSNVglrzXyqMjvBqTdjS",Xe="HfPg2vA6Xn7iwiUnz1e9",Ge="f7MX2BXkHu1edOXcPYc6",Ke="GMCJTC2SwK0uAZrugIfm",$e=({children:t})=>(0,s.jsx)("div",{className:Je,children:t}),ta=({children:t})=>{const[e,a]=(0,Ze.x)("watch-feed.dismissed-shortcut-onboarding",!1),n=(0,qe.W)();if((0,i.useEffect)((()=>{const t=t=>{"?"===t.key&&a(!e)};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}}),[e,a]),e)return(0,s.jsx)(s.Fragment,{children:t});const o=(0,s.jsxs)(ze.A,{colorSet:"announcement",popoverTitle:A.Ru.get("web-player.watch-feed.view.shortcuts.title"),children:[(0,s.jsx)(g.E,{as:"p",variant:"bodyMedium",paddingBottom:"tighter-2",children:A.Ru.get("web-player.watch-feed.view.shortcuts.description")}),(0,s.jsxs)("div",{className:Ge,children:[(0,s.jsxs)("div",{className:Ke,children:[(0,s.jsx)(g.E,{variant:"bodySmall",children:A.Ru.get("web-player.watch-feed.view.shortcuts.previous")}),(0,s.jsx)($e,{children:(0,s.jsx)(We.J,{size:"small"})})]}),(0,s.jsxs)("div",{className:Ke,children:[(0,s.jsx)(g.E,{variant:"bodySmall",children:A.Ru.get("web-player.watch-feed.view.shortcuts.next")}),(0,s.jsx)($e,{children:(0,s.jsx)(He.y,{size:"small"})})]}),(0,s.jsxs)("div",{className:Ke,children:[(0,s.jsx)(g.E,{variant:"bodySmall",children:A.Ru.get("web-player.watch-feed.view.shortcuts.add-to-library")}),(0,s.jsx)($e,{children:(0,s.jsx)(He.y,{size:"small",className:Ye})})]}),(0,s.jsxs)("div",{className:Ke,children:[(0,s.jsx)(g.E,{variant:"bodySmall",children:A.Ru.get("web-player.watch-feed.view.shortcuts.add-to-queue")}),(0,s.jsx)($e,{children:(0,s.jsx)(He.y,{size:"small",className:Xe})})]}),(0,s.jsxs)("div",{className:Ke,children:[(0,s.jsx)(g.E,{variant:"bodySmall",children:A.Ru.get("web-player.watch-feed.view.shortcuts.mute-unmute")}),(0,s.jsx)($e,{children:(0,s.jsx)(g.E,{variant:"marginal",children:(0,s.jsx)("kbd",{children:"M"})})})]})]})]});return(0,s.jsx)(Qe.W,{overlay:o,onHide:()=>{a(!0)},placement:n?Qe.W.topLeft:Qe.W.leftTop,children:t})},ea="bsYqS4l_sJOvBGGeudDj",aa="XIKBfnA7TQOV1T8LLiAS",na="kT3dFHdVmU0vyeE71IDE",oa=({hasNext:t,hasInteracted:e,moveDown:a,isRTL:n,widthBreakpoint:o})=>{const r=A.Ru.get("web-player.watch-feed.view.next-button"),c=n?"right":"left",l=(0,i.useRef)(null);return(0,i.useLayoutEffect)((()=>{e&&l.current?.focus({preventScroll:!0})}),[e]),e?(0,s.jsx)(k.Zp,{label:r,placement:c,children:(0,s.jsx)(f.H,{className:ea,"aria-label":r,label:r,disabled:!t,iconOnly:Oe.r,onClick:()=>a(),ref:l,size:o===oe.E.SMALL?"small":"medium"})}):(0,s.jsx)("div",{className:aa,children:(0,s.jsx)(ta,{children:(0,s.jsx)(Ue.$,{className:na,disabled:!t,colorSet:"invertedLight",iconTrailing:De.R,onClick:()=>a(),size:o===oe.E.SMALL?"small":"medium",children:A.Ru.get("web-player.watch-feed.view.next-button")})})})};var ia=a(70836);const ra="fCykqEza3WtgKmxjL0C1",sa=({hasPrevious:t,moveUp:e,isRTL:a,widthBreakpoint:n})=>{const o=A.Ru.get("web-player.watch-feed.view.previous-button"),i=a?"right":"left";return t?(0,s.jsx)(k.Zp,{label:o,placement:i,children:(0,s.jsx)(f.H,{className:ra,"aria-label":o,label:o,iconOnly:ia.o,onClick:()=>e(),size:n===oe.E.SMALL?"small":"medium"})}):null};var ca=a(62411),la=a(43509),ua=a(66305),da=a(43949),ha=a(85607),pa=a(89137);const ma=({uri:t,moveUp:e,moveDown:a,toggleMute:n})=>{const o=(0,ha.i)(t),r=(0,P.z)(),s=(0,pa.g)(),c=(0,ca.d4)((t=>t.platform.isDesktop)),[l,u]=(0,wt.A)(o),d=(0,i.useCallback)((()=>{u(!l)}),[l,u]),h=(0,i.useCallback)((()=>{r.addToQueue([{uri:t,uid:null}])}),[r,t]),p=(0,i.useCallback)((()=>{s(-1)}),[s]),m=(0,i.useCallback)((()=>{s(1)}),[s]);return(0,la.N)((0,da.p)(ua.r.GO_BACKWARDS),p,{condition:c}),(0,la.N)((0,da.p)(ua.r.GO_FORWARDS),m,{condition:c}),(0,la.N)((0,da.p)(ua.r.WF_ADD_TO_LIBRARY),d),(0,la.N)((0,da.p)(ua.r.WF_ADD_TO_QUEUE),h),(0,la.N)((0,da.p)(ua.r.WF_MUTE_UNMUTE),n),(0,la.N)((0,da.p)(ua.r.WF_GO_TO_PREVIOUS),e),(0,la.N)((0,da.p)(ua.r.WF_GO_TO_NEXT),a),null};var ga=a(64329),fa=a(8413),va=a(95508);function ba({playbackContainerClass:t,onError:e=()=>{}}){const a=l(),[n,o]=(0,i.useState)(!1),r=(0,$t.g)(),{volume:s}=(0,fa.n)(),c=(0,i.useRef)(s),u=(0,ga.J)(e);(0,i.useLayoutEffect)((()=>{s>=0&&(a.setVolume(s),c.current=s),0===s&&o(!0)}),[a,s]),(0,i.useEffect)((()=>(a.on(Kt.LW.TRACK_LOADED,(()=>{const e=document.getElementsByClassName(t),a=e[0]?.querySelector("video");a&&(a.loop=!0,a.muted=!1,a.autoplay=!0)})),a.on(Kt.LW.ERROR,(t=>{t.data.error&&u(t.data.error),u(new Error("PreviewPlayback error"))})),a.on(Kt.LW.MUTED_CHANGED,(({data:t})=>{o(t.muted),t.muted||a.setVolume(c.current||.7)})),()=>{a.removeListener(Kt.LW.TRACK_LOADED),a.removeListener(Kt.LW.ERROR),a.removeListener(Kt.LW.VOLUME_CHANGED)})),[u,a,t]);const d=(0,i.useCallback)((async()=>{const t=await a.getCurrentState(),e=t.playbackState.playing,n=t.track?.uri;"hidden"===r&&e?a.pause():"visible"!==r||e||n&&a.resume()}),[r,a]);(0,i.useEffect)((()=>{d()}),[d]);const h=(0,i.useCallback)((t=>{const e=function(t){const e=t?.preview;return t?.uri&&e?.url?(0,Kt.a2)({uri:t.uri,format:"MP3",url:e.url,logData:{playbackId:(0,va.E)()}}):null}(t);e&&a.playTracks([e],{paused:!1})}),[a]),p=(0,i.useCallback)((async()=>{a.setMuted(!n)}),[n,a]),m=(0,i.useCallback)((()=>a.getCurrentState()),[a]);return{playPreview:h,toggleMute:p,isMuted:n,getCurrentState:m}}var ya=a(85387),_a=a(84809),xa=a(42919);var La=a(69299);var ja=a(92069),Aa=a(65976),Na=a(92206),Ca=a(35469),wa=a(31862);function Ea(t){return(0,wa.h)(t||void 0,{desiredLabel:"large",desiredSize:600})}function ka(t){const e=t?.extractedColors?.colorDark;if(e&&!e.isFallback)return e.hex}var Sa=a(9768),Pa=a(64720),Va=a(53094),Fa=a(39750),Ma=a(24346),Ia=a(47900);const Ta={intent:"share",type:"click",itemIdSuffix:"watchfeed/share"},Ra="playbackContainerWatchFeed";const Ba=({watchFeedContent:t,feedUri:e,resumeOnClose:a})=>{const{close:n}=(0,Pt.P)(),o=(0,qe.W)(),[r,c]=(0,i.useState)(!1),l=(0,O.B)(),u=(0,i.useRef)(!1),d=(0,i.useRef)(new Map),[b,y]=(0,i.useState)(a),[_,x]=(0,i.useState)(!1),{closeSnackbar:j}=(0,U.d)(),{spec:C,logger:w}=(0,Ia.r)(L,{data:{uri:e}}),E=(0,i.useCallback)((t=>{t&&j(),x(t)}),[j]),{content:{title:S,items:P},error:V,fetchNextPage:D,isFetching:z,hasNextPage:W}=t,[H,q]=(0,i.useState)(0),Z=P[H]||null,[J,Y]=(0,i.useState)(!Z),[X,G]=(0,i.useState)(!1);(0,i.useEffect)((()=>{Z?(G(!0),setTimeout((()=>{Y(!1)}),400)):(G(!1),Y(!0))}),[Z]);const K=(0,i.useMemo)((()=>C.trackTitleFactory({uri:Z?.uri})),[C,Z]),$=(0,Ma.t)(K);!function({currentItemUri:t,resumeOnClose:e}){const{close:a,updateLocationState:n}=(0,Pt.P)(),o=(0,ya.zy)(),r=(0,i.useRef)();(0,i.useEffect)((()=>{r.current?o.pathname!==r.current?a({resumePlayback:e,forceClose:!0}):t&&t!==o.state?.watchFeed?.lastSeenItemUri&&n({isOpen:!0,resumeOnClose:e,lastSeenItemUri:t}):r.current=o.pathname}),[a,o,e,t,n])}({currentItemUri:Z?.uri,resumeOnClose:b}),function(t){const e=(0,_a.XB)(),{close:a}=(0,Pt.P)(),n=(0,i.useRef)();(0,i.useEffect)((()=>{n.current?e!==n.current&&e!==xa.Z.NowPlayingView&&a({resumePlayback:t}):n.current=e}),[a,t,e])}(b),function(t){const{close:e}=(0,Pt.P)();(0,i.useEffect)((()=>{const a=a=>{"Escape"===a.key&&(a.target instanceof HTMLElement&&a.target.closest(`#${La.v}`)||e({resumePlayback:t}))};return document.addEventListener("keyup",a),()=>{document.removeEventListener("keyup",a)}}),[t,e])}(a);const tt=t=>{const e=C.closeButtonFactory().hitUiHide();w.logInteraction(e),n({resumePlayback:t})},et=(0,i.useCallback)((t=>{c(!0),u.current=!0,q((e=>{const a=e+t;return a in P?(setTimeout((()=>{d.current.get(a)?.scrollIntoView({block:"center",inline:"nearest",behavior:"smooth"})})),a):e}))}),[P]),{playPreview:at,toggleMute:nt,isMuted:ot,getCurrentState:it}=ba({playbackContainerClass:Ra}),rt=(0,i.useCallback)((async()=>{const{playbackState:t}=await it(),e=C.previousButtonFactory().hitSkipToPrevious({itemToBeSkipped:P[H].uri,positionMs:t.position??-1,totalContentMs:t.duration??-1});w.logInteraction(e),et(-1)}),[et,P,w,H,C,it]);(0,i.useLayoutEffect)((()=>{q(0),d.current.get(0)?.scrollIntoView({block:"center",inline:"nearest",behavior:"instant"})}),[e]),(0,i.useLayoutEffect)((()=>{0!==H&&c(!0)}),[H]);const st=(0,i.useCallback)((async()=>{const{playbackState:t}=await it(),e=C.nextButtonFactory().hitSkipToNext({itemToBeSkipped:P[H].uri,positionMs:t.position??-1,totalContentMs:t.duration??-1});w.logInteraction(e),et(1)}),[et,P,w,H,C,it]),ct=(0,p.YQ)((0,i.useCallback)((()=>{u.current=!1}),[]),100,{leading:!1,trailing:!0}),lt=(0,i.useCallback)((t=>{u.current||q(t)}),[]),ut=(0,i.useCallback)((()=>{if(ot){const t=C.muteButtonFactory().hitUnmutePlayback();w.logInteraction(t)}else{const t=C.muteButtonFactory().hitMutePlayback();w.logInteraction(t)}nt()}),[ot,w,C,nt]),dt=(0,i.useCallback)((()=>{const t=C.shareButtonFactory().hitShare({entityToBeShared:Z?.uri,shareId:Z?.sharingInfo?.shareId||""});w.logInteraction(t)}),[Z,w,C]),ht=(0,i.useCallback)((()=>{if(!Z)return;const t=C.addToQueueFactory().hitAddItemToQueue({itemToAddToQueue:Z?.uri});w.logInteraction(t)}),[Z,w,C]),pt=(0,i.useCallback)((()=>{const t=C.trackTitleFactory({uri:Z.uri}).hitUiNavigate({destination:Z.uri});w.logInteraction(t),y(!1)}),[Z,C,w]);(0,i.useEffect)((()=>{!V&&Z&&W&&function(t,e,a){return t>=e-5&&!(e>50)&&!a}(H,P.length,z)&&D()}),[V,Z,H,z,P,D,W]),(0,i.useEffect)((()=>{at(Z)}),[Z,at]),(0,i.useEffect)((()=>{q(0)}),[e]);const mt=Boolean(P[H-1]),gt=Boolean(P[H+1]),ft=(0,i.useRef)(null),{dynamicColors:vt,dynamicColorsCssVariables:bt}=function(t,e){const a=Ea(t?.coverArt?.sources),n=Ea(e?.coverArt?.sources),{data:o}=(0,Ca.g)(a?[a]:[],{placeholderData:ja.rX});(0,Ca.g)(n?[n]:[]);let i=null;if(o){const t=(0,Aa.r6)((0,Na.c)(o,"higherContrast"));i=(0,Na.I)(t)}return{dynamicColorsCssVariables:i,dynamicColors:o}}(Z,P.at(H+1)),{breakpoint:yt}=(0,Pa.x)({[oe.E.SMALL]:0,[oe.E.MEDIUM]:778,[oe.E.LARGE]:1102},ft),xt=(0,Fa.o)((t=>(t?.restrictions?.disallowAddToQueueReasons||[]).length>0));if(V)return null;const Lt=Z?.artists[0],jt={backgroundColor:vt?.higherContrast.backgroundBase.toCSS(Va.a.RGBA)??(ka(Z?.coverArt)||m.PQ2)},At=o?"right":"left";return(0,s.jsx)(Sa.s,{focusTrapOptions:{allowOutsideClick:!0},children:(0,s.jsx)("div",{className:_e,onClick:()=>tt(a),role:"presentation",children:(0,s.jsxs)("div",{style:jt,className:xe,onClick:t=>{t.stopPropagation()},role:"presentation",tabIndex:-1,children:[Z&&(0,s.jsxs)("div",{className:Le,ref:ft,children:[(0,s.jsxs)("div",{className:Re,ref:$,children:[(0,s.jsx)("div",{children:(0,s.jsx)(g.E,{className:Ne,semanticColor:"textBase",children:S})}),(0,s.jsx)(fe,{item:Z,handleTitleClick:pt,widthBreakpoint:yt,position:H}),(0,s.jsx)(Jt,{mainArtist:Lt,hashtags:Z.hashtags,spec:C,logger:w,position:H,itemUri:Z.uri})]}),(0,s.jsxs)("div",{className:Me,children:[(0,s.jsx)(_t,{items:P,currentItemPosition:H,onItemPositionInView:lt,itemElByPositionRef:d,onScroll:ct,setScrollingState:E}),(0,s.jsx)("div",{className:h()(Ie,{[Te]:_}),ref:l})]}),(0,s.jsxs)("div",{className:Pe,children:[(0,s.jsxs)("div",{className:Ce,children:[(0,s.jsx)("div",{className:we,children:(0,s.jsx)(Q,{toggleMute:ut,isMuted:ot,labelPlacement:At,iconSize:yt===oe.E.SMALL?"small":"medium"})}),(0,s.jsx)(k.Zp,{label:A.Ru.get("close"),placement:"bottom",children:(0,s.jsx)(f.H,{onClick:()=>tt(a),"aria-label":A.Ru.get("close"),condensedAll:!0,children:(0,s.jsx)(v.M,{size:yt===oe.E.SMALL?"small":"medium"})})})]}),(0,s.jsxs)("div",{className:Ee,style:{...bt},children:[(0,s.jsx)(T.b,{renderInline:!0,placement:At,menu:(0,s.jsx)(R.P,{uri:Z.uri,albumUri:Z.album?.uri,artists:Z.artists,sharingInfo:Z.sharingInfo,menuBoundary:ft?.current||void 0}),children:(0,s.jsx)(M.e,{size:yt===oe.E.SMALL?M.M.sm:M.M.md,label:A.Ru.get("more.label.context",Z.title),placement:At,className:ke})}),(0,s.jsx)(I.w,{ariaLabel:A.Ru.get("context-menu.copy-track-link"),uri:Z.uri,placement:At,interactionData:Ta,sharingInfo:null,size:yt===oe.E.SMALL?"small":"medium",onClick:dt}),!xt&&(0,s.jsx)(F,{uri:Z.uri,size:yt===oe.E.SMALL?"small":"medium",placement:At,onClick:ht,className:Se}),(0,s.jsx)(B.g,{uri:Z.uri,size:yt===oe.E.SMALL?N.t.sm:N.t.md,labelPlacement:At,menuPlacement:At,className:Ve})]}),(0,s.jsxs)("div",{className:Fe,children:[(0,s.jsx)(sa,{hasPrevious:mt,moveUp:rt,isRTL:o,widthBreakpoint:yt}),(0,s.jsx)(oa,{hasNext:gt,hasInteracted:r,moveDown:st,isRTL:o,widthBreakpoint:yt}),(0,s.jsx)("div",{className:Ra}),(0,s.jsx)(ma,{moveUp:rt,moveDown:st,toggleMute:nt,uri:Z.uri})]})]})]}),J&&(0,s.jsx)(Be,{hide:X})]})})})};var Oa=a(44983),Ua=a(44461);a(54580);const Da=Spicetify.GraphQL.Definitions["watchFeedView"]=new Ua.l("watchFeedView","query","2822f94f6c03e8a5ac632553e81eb4e2d4ce713cceb83fa892119d3e1e54c7cc",null);const za=t=>{const e=function(t=[]){return t.find((t=>!!t.fileId))||null}(t.previews?.audioPreviews?.items);return{uri:t.uri,preview:e,title:t.name,album:t.albumOfTrack,artists:(a=t.artists.items,a.map((t=>({uri:t.uri,verified:t.profile.verified||!1,name:t.profile.name,avatar:t.visuals.avatarImage,saved:t.saved,listeners:t.stats.monthlyListeners})))),canvas:t.canvas,coverArt:t.albumOfTrack?.coverArt||null,sharingInfo:t.sharingInfo,hashtags:t.discoveryFeedHashtags,contentRating:t.contentRating?.label||null};var a};var Wa=a(62218),Ha=a(15930),Qa=a(37973),qa=a(54658);function Za(t){if("TrackResponseWrapper"===t.content.__typename&&"Track"===t.content.data.__typename){const e=t.content.data;return za(e)}return null}const Ja={offset:0,previousItems:[]};const Ya=({discoveryFeedUri:t,firstItemUri:e,resumeOnClose:a})=>{const n=function(t){const{discoveryFeedUri:e,firstItemUri:a}=t,n=(0,ca.d4)(Wa.JJ),{request:o}=(0,i.useContext)(Qa.j),{data:r,error:s,isFetching:c,hasNextPage:l,fetchNextPage:u}=(0,Oa.q)({queryKey:["watch-feed","view",e,a],queryFn:({pageParam:t})=>(0,qa.c)(o,Da,{sp_t:(0,Ha.v8)("sp_t")??"",country:n,discoveryFeedUri:e,uri:"spotify:section:0JQ5DABRtFWApcy61XJEvU",firstItemUri:t.offset?"":a??"",offset:t.offset,limit:40,previousItems:t.previousItems}),gcTime:18e5,staleTime:3e5,initialPageParam:Ja,getNextPageParam:(t,e)=>{const a=e.reduce(((t,e)=>("HomeSectionCollection"===e?.data?.homeSections.__typename&&e.data.homeSections.sections.forEach((e=>{"HomeSection"===e.__typename&&"HomeWatchFeedSectionData"===e.data?.__typename&&(t.offset=e.sectionItems.pagingInfo.nextOffset??0,t.previousItems=t.previousItems.concat(e.sectionItems.items.map((t=>Za(t)?.uri??null)).filter((t=>null!==t))))})),t)),{...Ja});if(0!==a.offset)return a}});return{content:(0,i.useMemo)((()=>r?.pages?r.pages.reduce(((t,e)=>{const a=e?.data?.homeSections;if("HomeSectionCollection"===a?.__typename){let e=t.title;return a.sections.forEach((a=>{"HomeSection"===a.__typename&&"HomeWatchFeedSectionData"===a.data?.__typename&&(e=a.data.title?.transformedLabel||null,a.sectionItems.items.forEach((e=>{const a=Za(e);a&&t.items.push(a)})))})),{items:t.items,title:e}}return t}),{items:[],title:null}):{items:[],title:null}),[r]),error:s,isFetching:c,hasNextPage:l,fetchNextPage:u}}({discoveryFeedUri:t,firstItemUri:e});return(0,s.jsx)(Ba,{watchFeedContent:n,resumeOnClose:a,feedUri:t})};var Xa=a(33100);const Ga=Spicetify.GraphQL.Definitions["watchFeedEntity"]=new Ua.l("watchFeedEntity","query","0cd628607f49e90f79630db7aba4dde43e0683c3a09d775883030b9584dfe2d3",null);var Ka=a(72540);const $a=({entityFeedUri:t,resumeOnClose:e,watchFeedTitle:a})=>{const n=((t,e)=>{const{request:a}=(0,i.useContext)(Qa.j),n=(0,Xa.NC)(Ka.ggJ,{loadingValue:!1}),{data:o,error:r,isFetching:s,fetchNextPage:c,hasNextPage:l}=(0,Oa.q)({queryKey:["watch-feed","view",t],queryFn:({pageParam:e})=>(0,qa.c)(a,Ga,{uri:t,limit:25,offset:e}),initialPageParam:0,enabled:n,getNextPageParam:t=>t?.data?.getWatchFeedForEntity.pagingInfo.nextOffset,staleTime:3e5,gcTime:18e5});return{content:(0,i.useMemo)((()=>{if(!o?.pages)return{items:[],title:null};const t=o.pages.reduce(((t,e)=>{const a=[];return e?.data?.getWatchFeedForEntity.items.forEach((t=>{"TrackResponseWrapper"===t.__typename&&"Track"===t.data.__typename&&a.push(za(t.data))})),t.concat(a)}),[]);return{title:e,items:t}}),[o,e]),error:r,isFetching:s,hasNextPage:l,fetchNextPage:c}})(t,a);return(0,s.jsx)(Ba,{watchFeedContent:n,resumeOnClose:e,feedUri:t})};var tn=a(64136),en=a(17554);const an=({state:t})=>{const{feedUri:e,firstItemUri:a,resumeOnClose:n,type:o,title:i}=t;if(!o)return null;switch(o){case"discovery":return(0,s.jsx)(Ya,{discoveryFeedUri:e,firstItemUri:a,resumeOnClose:n});case"entity":return(0,s.jsx)($a,{entityFeedUri:e,resumeOnClose:n,watchFeedTitle:i??""});default:(0,en.k)(o)}return null},nn=()=>{const t=(0,tn.S)();return t.isOpen?(0,s.jsx)(o.u,{pageId:n.$h.WATCHFEED,uri:t.feedUri,children:(0,s.jsx)(u,{overridePlatformId:it.R,children:(0,s.jsx)(an,{state:t})})}):null}},31023:(t,e,a)=>{a.d(e,{F:()=>i});var n=a(30758),o=a(88551);function i(t,e){const a=(0,n.useRef)(e),i=(0,o.p)();a.current=e,(0,n.useEffect)((()=>i.getEvents().addListener(t,(t=>{a.current(t)}))),[t,i])}},52945:(t,e,a)=>{a.d(e,{g:()=>n.g});var n=a(25200)},65632:(t,e,a)=>{a.d(e,{u:()=>r});var n=a(30758),o=a(38574),i=a(86070);const r=({pageId:t,uri:e,children:a})=>{const r=(0,o.u)(),s=(0,o.H)();return(0,n.useEffect)((()=>{r?.reportPageView({pageId:t,navigationalRoot:s??void 0,entityUri:e})}),[t,s,r,e]),(0,i.jsx)(i.Fragment,{children:a})}},70836:(t,e,a)=>{a.d(e,{o:()=>i});var n=a(30758),o=a(36849);function i(t){var e,a,i,r,s,c=t.size?o.$Z[t.size]:t.iconSize,l=(0,o._C)([{size:16,svgContent:"<path d='M.47 11.03a.75.75 0 0 0 1.06 0L8 4.56l6.47 6.47a.75.75 0 1 0 1.06-1.06L8 2.44.47 9.97a.75.75 0 0 0 0 1.06z'/>"},{size:24,svgContent:"<path d='M2.793 15.957a1 1 0 0 0 1.414 0L12 8.164l7.793 7.793a1 1 0 1 0 1.414-1.414L12 5.336l-9.207 9.207a1 1 0 0 0 0 1.414z'/>"}],c||24),u=null!==(e=t.autoMirror)&&void 0!==e&&e;return n.createElement(o.In,Object.assign({},t,{autoMirror:u,viewBox:"0 0 ".concat(l.size," ").concat(l.size),dangerouslySetInnerHTML:{__html:"".concat((r=t.title,s=t.titleId,r?"<title ".concat(s?'id="'.concat(s,'"'):"",">").concat(r,"</title>"):"")).concat((a=t.desc,i=t.descId,a?"<desc ".concat(i?'id="'.concat(i,'"'):"",">").concat(a,"</desc>"):"")).concat(l.svgContent)}}))}},74692:(t,e,a)=>{a.d(e,{z:()=>h});var n=a(58228),o=a(62764),i=a(30758),r=a(79458),s=a(65976),c=a(28903),l=["as","className","value","semanticColor","color","css","style"];function u(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function d(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?u(Object(a),!0).forEach((function(e){(0,n.A)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h=function(t){var e=t.as,a=t.className,n=t.value,u=void 0===n?0:n,h=t.semanticColor,p=void 0===h?"essentialBrightAccent":h,m=(t.color,t.css),g=t.style,f=(0,o.A)(t,l),v=e||"div";return i.createElement(v,Object.assign({role:"progressbar","aria-valuenow":u,"aria-valuemin":"0","aria-valuemax":"100","data-encore-id":r.j.ProgressBar,className:(0,c.ZP)(["progress-bar"],a),style:d(d({},(0,c.Xn)("ProgressBar",m)),g)},f),i.createElement("div",{className:(0,c.ZP)(["progress-bar__indicator"]),style:{inlineSize:"".concat(u,"%"),"--progress-bar-color":(0,s.oj)(p)}}))}},82300:(t,e,a)=>{a.d(e,{R:()=>o,Z:()=>n});const n="desktop-home-watch-feed",o="desktop-watch-feed"}}]);
//# sourceMappingURL=dwp-watch-feed-view-container.js.map