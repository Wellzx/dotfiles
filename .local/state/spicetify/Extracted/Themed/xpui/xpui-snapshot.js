(()=>{var e,t,n,a,r,i,s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=__webpack_modules__,o.amdO={},e=[],o.O=(t,n,a,r)=>{if(!n){var i=1/0;for(u=0;u<e.length;u++){for(var[n,a,r]=e[u],s=!0,c=0;c<n.length;c++)(!1&r||i>=r)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(s=!1,r<i&&(i=r));if(s){e.splice(u--,1);var l=a();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,a,r]},o.F={},o.E=e=>{Object.keys(o.F).map((t=>{o.F[t](e)}))},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,a){if(1&a&&(e=this(e)),8&a)return e;if("object"==typeof e&&e){if(4&a&&e.__esModule)return e;if(16&a&&"function"==typeof e.then)return e}var r=Object.create(null);o.r(r);var i={};t=t||[null,n({}),n([]),n(n)];for(var s=2&a&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,o.d(r,i),r},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,n)=>(o.f[n](e,t),t)),[])),o.u=e=>(({42:"xpui-routes-blend",319:"dwp-panel-section",347:"home-subfeed",352:"dwp-page-error-template",399:"xpui-routes-episode-more-like-this",599:"home-ad-card",749:"xpui-routes-country-hub-section",777:"dwp-watch-feed-view-container",983:"xpui-debug-window-contents",1206:"xpui-root-dialogs",1396:"xpui-routes-premium-page",1602:"dwp-home-header",1621:"home-v2-section",1785:"xpui-desktop-routes-settings",1845:"xpui-routes-all-show-ads",2183:"dwp-lyrics-cinema-mode-container",2205:"xpui-playlist-format-redirect-with-params",2233:"dwp-home-chips-row",2355:"xpui-routes-playlist",2391:"xpui-routes-desktop-settings",2543:"xpui-routes-country-hub",2579:"dwp-error-page",2630:"dwp-offline-empty-state",2889:"xpui-routes-recent-searches",3322:"dwp-now-playing-bar",3417:"xpui-feature-activation",3569:"xpui-routes-offline-browse",3632:"this-is-playlist-concerts-carousel",3667:"xpui-pip-mini-player",3838:"xpui-routes-cultural-moment-hub",3890:"xpui-routes-track",3934:"dev-playground",4084:"dwp-whats-new-feed",4312:"home-hpto",4389:"xpui-routes-collection-local-files",4483:"dwp-user-comments",4496:"xpui-routes-create-playlist",4574:"your-sound-capsule-modal",4789:"concerts-on-tour-playlist-card",5040:"xpui-routes-see-all-playlist-leavebehinds",5094:"dwp-top-bar",5523:"xpui-routes-stage-page",5663:"xpui-routes-recently-played",5783:"xpui-routes-collection-concerts",5853:"xpui-routes-collection-concert-gallery",5885:"home-ads-container",5962:"xpui-routes-album",6080:"xpui-routes-collection-episodes",6266:"browse-v2",6457:"xpui-routes-your-library-x",6665:"home-ads-visibility-logger",6863:"xpui-routes-track-v2",7067:"lottie-animation",7125:"xpui-routes-search",7170:"home-ads-fetcher",7241:"xpui-routes-venues",7564:"xpui-routes-buddy-feed",7599:"legacy-hpto-compatibility",7988:"dwp-video-player",8212:"xpui-routes-health-check",8493:"xpui-desktop-modals",8552:"dwp-feedback-bar",8588:"dwp-billboard-ad",8606:"xpui-routes-show",8828:"xpui-routes-collection-songs",8865:"xpui-routes-album-prerelease",9033:"xpui-routes-show-more-like-this",9209:"xpui-routes-concert",9319:"home-v2",9480:"xpui-routes-profile",9500:"dwp-leaderboard-component",9528:"xpui-routes-episode",9718:"playlist-leavebehinds"}[e]||e)+".js"),o.miniCssF=e=>(({42:"xpui-routes-blend",319:"dwp-panel-section",352:"dwp-page-error-template",399:"xpui-routes-episode-more-like-this",599:"home-ad-card",749:"xpui-routes-country-hub-section",777:"dwp-watch-feed-view-container",983:"xpui-debug-window-contents",1206:"xpui-root-dialogs",1396:"xpui-routes-premium-page",1602:"dwp-home-header",1621:"home-v2-section",1845:"xpui-routes-all-show-ads",2183:"dwp-lyrics-cinema-mode-container",2233:"dwp-home-chips-row",2355:"xpui-routes-playlist",2391:"xpui-routes-desktop-settings",2543:"xpui-routes-country-hub",2579:"dwp-error-page",2630:"dwp-offline-empty-state",2889:"xpui-routes-recent-searches",3322:"dwp-now-playing-bar",3417:"xpui-feature-activation",3569:"xpui-routes-offline-browse",3667:"xpui-pip-mini-player",3838:"xpui-routes-cultural-moment-hub",4084:"dwp-whats-new-feed",4312:"home-hpto",4389:"xpui-routes-collection-local-files",4483:"dwp-user-comments",4574:"your-sound-capsule-modal",4789:"concerts-on-tour-playlist-card",5040:"xpui-routes-see-all-playlist-leavebehinds",5094:"dwp-top-bar",5523:"xpui-routes-stage-page",5663:"xpui-routes-recently-played",5783:"xpui-routes-collection-concerts",5853:"xpui-routes-collection-concert-gallery",5962:"xpui-routes-album",6080:"xpui-routes-collection-episodes",6266:"browse-v2",6457:"xpui-routes-your-library-x",6488:"dwp-premium-page",6863:"xpui-routes-track-v2",7125:"xpui-routes-search",7241:"xpui-routes-venues",7564:"xpui-routes-buddy-feed",7599:"legacy-hpto-compatibility",7988:"dwp-video-player",8493:"xpui-desktop-modals",8552:"dwp-feedback-bar",8588:"dwp-billboard-ad",8606:"xpui-routes-show",8828:"xpui-routes-collection-songs",8865:"xpui-routes-album-prerelease",9033:"xpui-routes-show-more-like-this",9209:"xpui-routes-concert",9319:"home-v2",9480:"xpui-routes-profile",9500:"dwp-leaderboard-component",9528:"xpui-routes-episode",9718:"playlist-leavebehinds"}[e]||e)+".css"),o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a={},r="client-web:",o.l=(e,t,n,i)=>{if(a[e])a[e].push(t);else{var s,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+n){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.setAttribute("data-webpack",r+n),s.src=e),a[e]=[t];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var r=a[e];if(delete a[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.p="/",(()=>{if("undefined"!=typeof document){var e=e=>new Promise(((t,n)=>{var a=o.miniCssF(e),r=o.p+a;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var r=(s=n[a]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(r===e||r===t))return s}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){var s;if((r=(s=i[a]).getAttribute("data-href"))===e||r===t)return s}})(a,r))return t();((e,t,n,a,r)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",o.nc&&(i.nonce=o.nc),i.onerror=i.onload=n=>{if(i.onerror=i.onload=null,"load"===n.type)a();else{var s=n&&n.type,o=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+": "+o+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=o,i.parentNode&&i.parentNode.removeChild(i),r(c)}},i.href=t,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i)})(e,r,null,t,n)})),t={4234:0};o.f.miniCss=(n,a)=>{t[n]?a.push(t[n]):0!==t[n]&&{42:1,319:1,352:1,399:1,599:1,710:1,749:1,777:1,983:1,1206:1,1396:1,1602:1,1621:1,1764:1,1845:1,2183:1,2233:1,2355:1,2391:1,2514:1,2543:1,2579:1,2630:1,2889:1,3322:1,3417:1,3569:1,3667:1,3838:1,3862:1,4084:1,4094:1,4312:1,4389:1,4421:1,4483:1,4574:1,4789:1,5040:1,5094:1,5520:1,5523:1,5663:1,5783:1,5853:1,5962:1,6080:1,6266:1,6457:1,6488:1,6863:1,7125:1,7241:1,7564:1,7599:1,7988:1,8207:1,8493:1,8552:1,8588:1,8606:1,8828:1,8865:1,9033:1,9209:1,9319:1,9480:1,9500:1,9528:1,9718:1}[n]&&a.push(t[n]=e(n).then((()=>{t[n]=0}),(e=>{throw delete t[n],e})))},o.F.miniCss=e=>{if(!(o.o(t,e)&&void 0!==t[e]||/^(1([16]04|120|47|785|871|96)|2(023|205|497|791)|3(3(58|64|71)|63[28]|249|277|47|769|890|934)|4(1(45|70|74)|077|23|403|496|764|90)|5((22|88|90)5|117|303|627|696|920)|6(286|471|504|665|896)|7((09|14|17)0|067|586|628|925|962)|8(083|106|212|456|54|739|779|832|975)|9(023|065|343|462|519|652))$/.test(e))){t[e]=null;var n=document.createElement("link");o.nc&&n.setAttribute("nonce",o.nc),n.rel="prefetch",n.as="style",n.href=o.p+o.miniCssF(e),document.head.appendChild(n)}}}})(),(()=>{var e={4234:0};o.f.j=(t,n)=>{var a=o.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else if(6488!=t){var r=new Promise(((n,r)=>a=e[t]=[n,r]));n.push(a[2]=r);var i=o.p+o.u(t),s=new Error;o.l(i,(n=>{if(o.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,a[1](s)}}),"chunk-"+t,t)}else e[t]=0},o.F.j=t=>{if((!o.o(e,t)||void 0===e[t])&&6488!=t){e[t]=null;var n=document.createElement("link");n.charset="utf-8",o.nc&&n.setAttribute("nonce",o.nc),n.rel="prefetch",n.as="script",n.href=o.p+o.u(t),document.head.appendChild(n)}},o.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,[i,s,c]=n,l=0;if(i.some((t=>0!==e[t]))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(c)var u=c(o)}for(t&&t(n);l<i.length;l++)r=i[l],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(u)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),o.nc=void 0,i={7170:[599,6665]},o.f.prefetch=(e,t)=>Promise.all(t).then((()=>{var t=i[e];Array.isArray(t)&&t.map(o.E)})),o.O(0,[4234],(()=>{[352,490,4764,4077,9652,8739,7125,9519,6896,4312,5885,3569,2630].map(o.E)}),5);var c={};(()=>{"use strict";var e=o(99576);var t=o(33100),n=o(71870),a=o(34921),r=o(2443),i=o(17160);const s="PWA_DISPLAY_MODE_CHANGED";var c=o(20295),l=o(96422),u=o(51778),d=o(62411),h=o(65124),p=o(14446),m=o(60542),f=o(30758);const g="main-appShell-container",b="main-appShell-sideBar",v="main-appShell-navItems",y="main-appShell-mainContent",x="main-appShell-topBar",w="main-appShell-cards",_="main-appShell-cardsHeader",A="main-appShell-cardsWrapper",E="main-appShell-card",j="main-appShell-playbackBar";var S=o(86070);const C=(0,f.memo)((function(){return(0,S.jsxs)("div",{className:g,children:[(0,S.jsx)("div",{className:b,children:(0,S.jsxs)("svg",{className:v,width:"232",height:"704",viewBox:"0 0 232 704",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("path",{fill:"#000",d:"M0 0h227v704H0z"}),(0,S.jsx)("path",{d:"M29.887 130.123A8.47 8.47 0 0032.5 124a8.5 8.5 0 10-8.5 8.5 8.454 8.454 0 005.125-1.73l4.401 5.153.76-.649-4.399-5.151zM24 131.5c-4.136 0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5-3.364 7.5-7.5 7.5zM29.16 158.597l-.913.406 7.797 17.513.914-.406-7.798-17.513zM18.5 176.5h1v-18h-1v18zm6 0h1v-18h-1v18z",fill:"#757575"}),(0,S.jsx)("path",{fill:"#404040",d:"M53 162h122v11H53zM64 258h95v11H64z"}),(0,S.jsx)("path",{fill:"#fff",d:"M16 248h32v32H16z"}),(0,S.jsx)("path",{d:"M38 263h-5v-5h-2v5h-5v2h5v5h2v-5h5v-2z",fill:"#000"}),(0,S.jsx)("path",{fill:"url(#paint0_linear)",d:"M16 292h32v32H16z"}),(0,S.jsx)("path",{d:"M37.797 302.727a4.057 4.057 0 00-5.488-.253.558.558 0 01-.31.112.531.531 0 01-.31-.112 4.054 4.054 0 00-5.488.253 4.05 4.05 0 00-1.194 2.883c0 1.089.424 2.113 1.168 2.855l4.462 5.223a1.791 1.791 0 002.726 0l4.435-5.195a4.052 4.052 0 001.195-2.883 4.057 4.057 0 00-1.196-2.883z",fill:"#fff"}),(0,S.jsx)("path",{fill:"#404040",d:"M64 303h79v11H64z"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 353h142v11H16zM16 395h53v11H16zM16 437h98v11H16zM16 479h143v11H16zM16 521h97v11H16z",opacity:"0.6"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 218h71v11H16z"}),(0,S.jsx)("path",{d:"M25.501 73.078L34 77.984V91h-6v-7h-5v7h-6V78.024l8.501-4.946zm-.002-1.156L16 77.449V92h8v-7h3v7h8V77.407l-9.501-5.485z",fill:"#616161"}),(0,S.jsx)("path",{fill:"#404040",d:"M53 78h122v11H53zM53 120h122v11H53z"}),(0,S.jsx)("defs",{children:(0,S.jsxs)("linearGradient",{id:"paint0_linear",x1:"0",y1:"308",x2:"32",y2:"340",gradientUnits:"userSpaceOnUse",children:[(0,S.jsx)("stop",{stopColor:"#450AF5"}),(0,S.jsx)("stop",{offset:"1",stopColor:"#C4EFD9"})]})})]})}),(0,S.jsxs)("div",{className:y,children:[(0,S.jsx)("div",{className:x,children:(0,S.jsxs)("svg",{width:"125",height:"95",viewBox:"0 0 125 95",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{x:"0",y:"31",width:"125",height:"32",rx:"16",fill:"#282828"}),(0,S.jsx)("path",{d:"M992 59c6.627 0 12-5.373 12-12s-5.373-12-12-12-12 5.373-12 12 5.373 12 12 12z",fill:"#404040"}),(0,S.jsx)("path",{fill:"#404040",d:"M1014 42h66v11h-66z"})]})}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:w,children:[(0,S.jsxs)("div",{className:_,children:[(0,S.jsx)("svg",{width:"257",height:"23",viewBox:"0 0 257 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{fill:"#404040",d:"M0 0h257v23H0z"})}),(0,S.jsx)("svg",{width:"72",height:"11",viewBox:"0 0 72 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{fill:"#404040",d:"M0 0h72v11H0z"})})]}),(0,S.jsxs)("div",{className:A,children:[(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]})]})]}),(0,S.jsxs)("div",{className:w,children:[(0,S.jsxs)("div",{className:_,children:[(0,S.jsx)("svg",{width:"257",height:"23",viewBox:"0 0 257 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{fill:"#404040",d:"M0 0h257v23H0z"})}),(0,S.jsx)("svg",{width:"72",height:"11",viewBox:"0 0 72 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{fill:"#404040",d:"M0 0h72v11H0z"})})]}),(0,S.jsxs)("div",{className:A,children:[(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]})]})]}),(0,S.jsxs)("div",{className:w,children:[(0,S.jsxs)("div",{className:_,children:[(0,S.jsx)("svg",{width:"257",height:"23",viewBox:"0 0 257 23",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{fill:"#404040",d:"M0 0h257v23H0z"})}),(0,S.jsx)("svg",{width:"72",height:"11",viewBox:"0 0 72 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{fill:"#404040",d:"M0 0h72v11H0z"})})]}),(0,S.jsxs)("div",{className:A,children:[(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]}),(0,S.jsxs)("svg",{className:E,width:"164",height:"232",viewBox:"0 0 164 232",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("rect",{width:"164",height:"232",rx:"8",fill:"#282828"}),(0,S.jsx)("path",{fill:"#404040",d:"M16 16h132v132H16zM16 166h122v11H16zM16 182h72v11H16zM16 206h94v6H16z"})]})]})]})]})]}),(0,S.jsxs)("div",{className:j,children:[(0,S.jsx)("div",{children:(0,S.jsx)("svg",{width:"175",height:"40",viewBox:"0 0 175 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{fill:"#404040",d:"M53 5h122v11H53zM53 23h101v11H53zM0 0h40v40H0z"})})}),(0,S.jsx)("div",{children:(0,S.jsxs)("svg",{width:"216",height:"48",viewBox:"0 0 216 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,S.jsx)("path",{d:"M12.5 22.8l.7-.8c-1.1-1.3-2.7-2-4.3-2v1c1.3 0 2.6.6 3.5 1.6l.1.2zm7.5 4.7c-1.2 0-2.3-.5-3.2-1.3l-.6.8c1 1 2.4 1.5 3.8 1.5V30l3.5-2-3.5-2v1.5zm0-6V23l3.5-2-3.5-2v1.5c-1.6 0-3.2.7-4.2 2l-3.4 3.9c-.9 1-2.2 1.6-3.5 1.6v1c1.6 0 3.2-.7 4.2-2l3.4-3.9c.9-1 2.2-1.6 3.5-1.6zM61 18.5l-8 4.619V19h-2v10h2v-4.119l8 4.619v-11zM163 20v4.119l-8-4.619v11l8-4.619V30h2V20h-2zM197.5 21h4.5v1.5l3.5-2-3.5-2V20h-4.5c-2.5 0-4.5 2-4.5 4.5 0 .6.1 1.2.4 1.8l.9-.5c-.2-.4-.3-.8-.3-1.3 0-1.9 1.6-3.5 3.5-3.5zm9.1 1.7l-.9.5c.2.4.3.8.3 1.3 0 1.9-1.6 3.5-3.5 3.5H198v-1.5l-3.5 2 3.5 2V29h4.5c2.5 0 4.5-2 4.5-4.5 0-.6-.1-1.2-.4-1.8z",fill:"#fff"}),(0,S.jsx)("circle",{cx:"108",cy:"24",r:"20",fill:"#fff"}),(0,S.jsx)("path",{d:"M100 16h16v16h-16V16z",fill:"#fff"}),(0,S.jsx)("path",{d:"M104.018 30l10.392-6-10.392-6v12z",fill:"#000"})]})}),(0,S.jsx)("div",{children:(0,S.jsx)("svg",{width:"99",height:"16",viewBox:"0 0 99 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{d:"M1 2v5l4.33-2.5L1 2zm0 12h14v-1H1v1zm0-4h14V9H1v1zm7-5v1h7V5H8zM92.945 1.379l-.652.763A7.968 7.968 0 0194.863 8a7.972 7.972 0 01-2.57 5.858l.651.763a8.966 8.966 0 00.001-13.242zm-2.272 2.66l-.651.763a4.484 4.484 0 01-.001 6.397l.651.763a5.48 5.48 0 001.691-3.961c0-1.557-.65-2.962-1.69-3.962zM80 5v6h2.804L88 14V2l-5.196 3H80zm7-1.268v8.536L83.072 10H81V6h2.072L87 3.732zM40 2.5v8c0 .55.45 1 1 1h5v-1h-5v-8h5v-1h-5c-.55 0-1 .45-1 1zM43 14c0 .275.225.5.5.5H46v-1h-2.5c-.275 0-.5.225-.5.5zM55 1.5h-6c-.55 0-1 .45-1 1v11c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-11c0-.55-.45-1-1-1zm0 12h-6v-11h6v11zm-3-8A.75.75 0 1052 4a.75.75 0 000 1.5zm0 6a2 2 0 100-4 2 2 0 000 4zm0-3c.551 0 1 .449 1 1 0 .551-.449 1-1 1-.551 0-1-.449-1-1 0-.551.449-1 1-1z",fill:"#fff"})})})]})]})}));var I=o(57383);const N=f.memo((function(){const e=Object.keys(i.Ru.getTranslations()).length>0;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(I.x,{isOpen:!0,isRemoteConfigInitialized:!1,headingMessage:e?i.Ru.get("error-dialog.generic.header"):"Something went wrong",message:e?i.Ru.get("error-dialog.generic.body"):"Try reloading the page",buttonLabel:e?i.Ru.get("fatal-error.button-label"):"RELOAD PAGE"}),(0,S.jsx)(C,{})]})}));var k=o(87504),L=o(64136),T=o(42168),R=o(97959),P=o(17824),M=o(68740);const O=()=>{const e=(0,R.z)(),t=(0,d.Pj)(),n=(0,f.useRef)(),a=(0,L.S)(),r=e.getState()?.item,i=r&&((0,M.p)(r)||(0,P.d)(r));return(0,f.useEffect)((()=>{n.current=a}),[a]),(0,f.useEffect)((()=>navigator&&navigator.mediaSession?((0,T.g)()&&i||(navigator.mediaSession.setActionHandler("previoustrack",(()=>{const t=n.current?.isOpen;t||e.skipToPrevious()})),navigator.mediaSession.setActionHandler("nexttrack",(()=>{const t=n.current?.isOpen;t||e.skipToNext()}))),navigator.mediaSession.setActionHandler("play",(()=>{const t=n.current?.isOpen;t||e.resume({featureIdentifier:"media-keys"})})),navigator.mediaSession.setActionHandler("pause",(()=>{const t=n.current?.isOpen;t||e.pause({featureIdentifier:"media-keys"})})),i&&(navigator.mediaSession.setActionHandler("seekbackward",(t=>{const n=t.seekOffset?1e3*t.seekOffset:1e4;e.seekBackward(n)})),navigator.mediaSession.setActionHandler("seekforward",(t=>{const n=t.seekOffset?1e3*t.seekOffset:1e4;e.seekForward(n)}))),()=>{navigator.mediaSession.setActionHandler("previoustrack",null),navigator.mediaSession.setActionHandler("nexttrack",null),navigator.mediaSession.setActionHandler("play",null),navigator.mediaSession.setActionHandler("pause",null),navigator.mediaSession.setActionHandler("seekbackward",null),navigator.mediaSession.setActionHandler("seekforward",null)}):()=>{}),[i,e,t]),null};var D=o(13856),H=o(30188),z=o(96861),V=o(63951),B=o(54e3),U=o(25882),F=o(87606),q=o(17554);function W(e){return e?.map((({url:e,width:t,height:n})=>({src:e,sizes:`${t}x${n}`})))??[]}function G(e){window.navigator.mediaSession&&(window.navigator.mediaSession.metadata=function(e){return(0,U.v)(e)?new window.MediaMetadata({title:e.name,artist:e.artists.map((e=>e.name)).join(i.Ru.getSeparator()),album:e.album.name,artwork:W(e.images)}):(0,M.p)(e)?new window.MediaMetadata({title:e.name,artist:e.artists?.map((e=>e.name)).join(i.Ru.getSeparator())||"",album:e.show.name,artwork:W(e.images)}):(0,P.d)(e)?new window.MediaMetadata({title:e.name,artist:e.artists?.map((e=>e.name)).join(i.Ru.getSeparator())||"",album:e.book.name,artwork:W(e.images)}):(0,B.N)(e)?new window.MediaMetadata({title:i.Ru.get("ad-formats.advertisement"),artist:"",album:"",artwork:W(e.images)}):(0,F.v)(e)||void 0===e?new window.MediaMetadata({title:"",artist:"",album:"",artwork:[]}):(0,q.d)(e)}(e))}const $=()=>((0,V.p)(z.gd.UPDATE,(({data:e})=>G(e?.item??void 0))),null),Q=()=>(0,d.d4)(D.c)===H.Kz.pip?(0,S.jsx)($,{}):null;var K=o(96131),Z=o(30339);function Y(e){return{name:"KmPageView",environments:["browser"],data:e}}function J(e){return{name:"KmPageViewNonAuth",environments:["browsernonauth"],data:e}}var X=o(64871);function ee(e=""){const t=`https://open.spotify.com${e}`;let n="";const a=/^\/\w+\/([a-zA-Z0-9]+)[/\w+]*/.exec(e);a&&(n=a[1]);let r=e,i=e;const s=e.match(/^\/search\/(.*)\/(.*)/);return/^\/genre\//.test(e)||/^\/view\//.test(e)?i="/browse/genres":"/"===e?(i="/browse",r="/browse/featured"):"/browse/charts"===e?i="/charts":"/collection/tracks"===e?i="/collection/songs":"/search"===e?i="/search":s?(i="podcasts"===s[2]?"/search/shows":`/search/${s[2]}`,r=`/search/${s[2]}`):e.match(/\/search\/(?<query>.*)/)?(i="/search",r="/search/results"):"/download"===e?i="/upsell":"/queue"===e?i="/nowplaying/queue":/^\/artist\/[a-zA-Z0-9]+\/related/.test(e)?(r=(0,X.ITr)(n).toString(),i="/artist/related"):/^\/artist\/[a-zA-Z0-9]+\/about/.test(e)?(r=(0,X.ITr)(n).toString(),i="/artist/about"):/^\/artist\/[a-zA-Z0-9]+\/concerts/.test(e)?(r=(0,X.ITr)(n).toString(),i="/artist/concerts"):(0,X.ecE)(t)?(r=(0,X.ITr)(n).toString(),i="/artist"):(0,X.tbX)(t)?(r=(0,X.Pse)(n).toString(),i="/playlist"):(0,X._Tv)(t)?(r=(0,X.Q00)(n).toString(),i="/album"):(0,X.gHQ)(t)?(r=(0,X.iMK)(n).toString(),i="/episode"):(0,X.WB1)(t)?(r=(0,X.Mci)(n).toString(),i="/shows"):(0,X.APS)(t)?(r=(0,X.Qjr)(n).toString(),i="/profile"):(0,X.U_m)(t)&&(r=(0,X.Mce)(n).toString(),i="/track"),{viewUri:r,mappedPageId:i}}var te=o(54680);const ne="#login";var ae=o(85387);var re=o(3574);class ie extends f.Component{constructor(e){super(e);const{eventSender:t,location:n,isAnonymous:a}=this.props;t.send(ce(n.pathname,a))}shouldComponentUpdate(e){const{eventSender:t,navigationType:n,location:a,isAnonymous:r}=e,{location:i}=this.props,s=a.hash===ne||i.hash===ne;return(0,K.j)(a,i)||n===Z.rc.Replace||s||((0,re.D)(a.pathname),t.send(function(e,t=!1){const{viewUri:n,mappedPageId:a}=ee(e),r={page:a,type:"exit",view_uri:n};return t?J(r):Y(r)}(i.pathname,r)),t.send(ce(a.pathname,r))),!1}render(){return null}}const se=(0,d.Ng)((function(e,t){return{...t,isAnonymous:e.session.isAnonymous}}))((oe=ie,e=>{const t=(0,ae.zy)(),n=(0,ae.Zp)(),a=(0,ae.wQ)(),r=(0,ae.g)();return(0,S.jsx)(oe,{...e,navigate:n,navigationType:a,location:t,params:r})}));var oe;function ce(e,t=!1){const{viewUri:n,mappedPageId:a}=ee(e),r={page:a,type:"enter",view_uri:n};return t?J(r):Y(r)}var le=o(63693),ue=o(39822),de=o(69943);var he=ue.L.isUsingKeyboard,pe=function(e){var t=function(e){var t=(0,f.useState)(e),n=(0,de.A)(t,2),a=n[0],r=n[1],i=function(){return r(!1)},s=function(e){switch(e.key){case"Tab":case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":r(!0)}};return(0,f.useEffect)((function(){return window.addEventListener("keydown",s),window.addEventListener("mousedown",i),window.addEventListener("touchstart",i),function(){window.removeEventListener("keydown",s),window.removeEventListener("mousedown",i),window.removeEventListener("touchstart",i)}}),[]),{isUsingKeyboard:a,setIsUsingKeyboard:r}}(he),n=t.isUsingKeyboard;return f.createElement(ue.E.Provider,{value:{isUsingKeyboard:n}},e.children)},me=o(66517);var fe=o(90238),ge=o(91064);const be=({fetchHomeAd:e,setHomeAd:t,adsSlotConfig:n,fetchRef:a})=>{const r=(0,ge.vh)();return{fetchAndSetHomeAd:(0,f.useMemo)((()=>e&&n?.hpto?async()=>{const n=e();a.current=n;try{t(n);const e=await n;a.current===n&&t(e)}catch(e){a.current===n&&t(void 0);const i=e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?e.message:String(e);r.send((0,fe.G)({error_type:"fetchHPTOSlotFailure",error_message:i,request_type:"hpto"}))}}:void 0),[r,a,e,t,n])}};function ve(e){const[t,n]=(0,f.useState)(!1);return(0,f.useEffect)((()=>n(!1)),[e]),{dismissed:t,dismiss(){n(!0)}}}function ye(){const e=(0,f.useState)(),t=(0,f.useRef)(e[0]);return{imageUrlToExtractHomeAdColorFrom:(0,f.useState)(),extractedHomeAdColor:[e[0],function(n){t.current=n,e[1](n)}],extractedHomeAdColorRef:t}}const xe=f.useState;var we=o(72540);const _e=()=>({allowSwitchingBetweenHomeAdsAndHpto:(0,t.NC)(we.htx)});var Ae=o(29838);const Ee=f.useState;var je=o(1419);function Se({adsSlotConfig:e}){const t=(0,ae.Zp)(),[n,a]=Ee(),r=e&&je.r.hpto in e;return(0,f.useEffect)((()=>{if(!r)return()=>{};const e=(async()=>{const e=await Promise.resolve().then(o.bind(o,52011)),{slotsClient:n,adsCoreConnector:r}=e,i=await Promise.resolve().then(o.bind(o,23896)),{AdSlotEvent_AdSlotEventType:s,SubSlotRequest:c}=i;return await r.createSlot(je.r.hpto),await r.enableSlot(je.r.hpto),n.subSlot(c.fromPartial({slotId:je.r.hpto}),(({adSlotEvent:e})=>{e?.eventType===s.AVAILABLE&&"true"===e.ad?.metadata?.is_preview&&(a(e.ad),t("/"))}))})();return()=>{e.then((e=>e.cancel()))}}),[r,t,a]),{previewHomeAd:n,setPreviewHomeAd:a}}function Ce({fetchHomeAd:e,adsSlotConfig:t,enableLegacyHptoContainerLoader:n}){const{homeAd:a,setHomeAd:r}=function(){const[e,t]=xe();return{homeAd:e,setHomeAd:t}}(),{fetchAndSetHomeAd:i}=(s={fetchHomeAd:e,setHomeAd:r,adsSlotConfig:t},{...be({...s,fetchRef:(0,f.useRef)()})});var s;return function({enableLegacyHptoContainerLoader:e}={}){const{allowSwitchingBetweenHomeAdsAndHpto:t}=_e(),n=(0,d.wA)();(0,f.useEffect)((()=>{!t&&e&&n((0,Ae.T)())}),[e,t,n])}({enableLegacyHptoContainerLoader:n}),{setHomeAd:r,fetchAndSetHomeAd:i,homeAd:a,...ye(),...ve(a),...Se({adsSlotConfig:t})}}const Ie=({instance:e,children:t})=>{const{adsSlotConfig:n}=function({getAdsSlotConfig:e}){const[t,n]=(0,f.useState)();return(0,f.useEffect)((function(){e?.().then(n)}),[e]),{adsSlotConfig:t}}({getAdsSlotConfig:e?.config.getAdsSlotConfig}),a=Ce({adsSlotConfig:n,...e?.home}),r=(0,f.useMemo)((()=>({adsAPI:e||null,homeAds:a})),[a,e]);return(0,S.jsx)(me.Cp.Provider,{value:r,children:t})};var Ne=o(57109),ke=o(62148),Le=o(27148),Te=o(90515),Re=o(24509),Pe=o(25772),Me=o(93459),Oe=o(50263),De=o(41761),He=o(29723);const ze=({children:e})=>{const n=(0,De.n)(),[a,r]=(0,f.useState)((()=>n.getLocalConfiguration()));return(0,f.useEffect)((()=>n.getEvents().addListener(He.M.UPDATE,(e=>r(e.data.configuration)))),[n,r]),(0,S.jsx)(t.Gu,{configuration:a,children:e})},Ve=({children:e,providers:t})=>{if(void 0===e)throw new Error("MultiProvider requires children!");return t.reduceRight(((e,t)=>(0,f.cloneElement)(t,void 0,e)),(0,S.jsx)(f.Fragment,{children:e}))};var Be=o(14657),Ue=o(52831);const Fe=({instance:e,children:t})=>(0,S.jsx)(Ue.c.Provider,{value:e,children:t});var qe=o(87200);const We=({instance:e,children:t})=>(0,S.jsx)(qe.b.Provider,{value:e,children:t});var Ge=o(37973);const $e=({request:e,children:t})=>{const n=(0,f.useMemo)((()=>({request:e})),[e]);return(0,S.jsx)(Ge.j.Provider,{value:n,children:t})};var Qe=o(97976);const Ke=({instance:e,children:t})=>(0,S.jsx)(Qe.M.Provider,{value:e,children:t});var Ze=o(97264),Ye=o(59061),Je=o(38684),Xe=o(64265);const et=({instance:e,children:t})=>(0,S.jsx)(Xe.J.Provider,{value:e,children:t}),tt=({instance:e,children:t})=>(0,S.jsx)(ge.rP.Provider,{value:e,children:t}),nt=Spicetify.ReactComponent.PlatformProvider=({platform:e,children:t})=>{const n=(0,R.z)(),a=[(0,S.jsx)(tt,{instance:e}),(0,S.jsx)(Le.D,{}),(0,S.jsx)($e,{request:e.getGraphQLLoader()}),(0,S.jsx)(Oe.J,{platformData:e.getPlatformData()}),(0,S.jsx)(ze,{}),(0,S.jsx)(Ie,{instance:e.getAdManagers()}),(0,S.jsx)(Ze.A,{instance:e.getSingAlongAPI()}),(0,S.jsx)(Ye.a,{value:null}),(0,S.jsx)(Je.V,{instance:e.getUBILogger()}),(0,S.jsx)(Pe.Z,{instance:e.getCollectionPlatformAPI()}),(0,S.jsx)(Me.m,{instance:e.getEqualizerAPI()}),(0,S.jsx)(Ne.U.Provider,{value:e.getBuddyFeedAPI()}),(0,S.jsx)(Te.pF,{playerAPI:n}),(0,S.jsx)(Re.t,{instance:e.getSettingsAPI()}),(0,S.jsx)(Be.U,{instance:e.getRequestBuilder()}),(0,S.jsx)(Fe,{instance:e.getAudioOutputDevicesAPI()}),(0,S.jsx)(We,{instance:e.getExternalAccessoryAPI()}),(0,S.jsx)(Ke,{instance:e.getPlaybackFiltersAPI()}),(0,S.jsx)(et,{instance:e.getUrlDispenserServiceClient()}),(0,S.jsx)(pe,{}),(0,S.jsx)(ke.i,{})];return(0,S.jsx)(Ve,{providers:a,children:t})};var at=o(80679),rt=o(8817),it=o(39671),st=o(88257),ot=o(89137);const ct=({history:e,children:t})=>{const[n,a]=(0,f.useState)((()=>({location:e.location,action:e.action})));return(0,f.useLayoutEffect)((()=>{e.listen(((e,t)=>a({location:e,action:t})))}),[e]),(0,S.jsx)(ae.Ix,{location:n.location,navigationType:n.action,navigator:e,children:(0,S.jsx)(ot.$,{children:t})})};var lt=o(40254),ut=o(92069),dt=o(91332),ht=o(47268),pt=o(49375),mt=class extends pt.Q{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const a=t.queryKey,r=t.queryHash??(0,ut.F$)(a,t);let i=this.get(r);return i||(i=new dt.X({client:e,queryKey:a,queryHash:r,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(a)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ht.jG.batch((()=>{this.getAll().forEach((e=>{this.remove(e)}))}))}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find((e=>(0,ut.MK)(t,e)))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter((t=>(0,ut.MK)(e,t))):t}notify(e){ht.jG.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){ht.jG.batch((()=>{this.getAll().forEach((e=>{e.onFocus()}))}))}onOnline(){ht.jG.batch((()=>{this.getAll().forEach((e=>{e.onOnline()}))}))}},ft=o(90097),gt=class extends pt.Q{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#n=new Map,this.#a=0}#t;#n;#a;build(e,t,n){const a=new ft.s({mutationCache:this,mutationId:++this.#a,options:e.defaultMutationOptions(t),state:n});return this.add(a),a}add(e){this.#t.add(e);const t=bt(e);if("string"==typeof t){const n=this.#n.get(t);n?n.push(e):this.#n.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const t=bt(e);if("string"==typeof t){const n=this.#n.get(t);if(n)if(n.length>1){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&this.#n.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=bt(e);if("string"==typeof t){const n=this.#n.get(t),a=n?.find((e=>"pending"===e.state.status));return!a||a===e}return!0}runNext(e){const t=bt(e);if("string"==typeof t){const n=this.#n.get(t)?.find((t=>t!==e&&t.state.isPaused));return n?.continue()??Promise.resolve()}return Promise.resolve()}clear(){ht.jG.batch((()=>{this.#t.forEach((e=>{this.notify({type:"removed",mutation:e})})),this.#t.clear(),this.#n.clear()}))}getAll(){return Array.from(this.#t)}find(e){const t={exact:!0,...e};return this.getAll().find((e=>(0,ut.nJ)(t,e)))}findAll(e={}){return this.getAll().filter((t=>(0,ut.nJ)(e,t)))}notify(e){ht.jG.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.getAll().filter((e=>e.state.isPaused));return ht.jG.batch((()=>Promise.all(e.map((e=>e.continue().catch(ut.lQ))))))}};function bt(e){return e.options.scope?.id}var vt=o(5489),yt=o(70678),xt=o(76970),wt=class{#r;#i;#s;#o;#c;#l;#u;#d;constructor(e={}){this.#r=e.queryCache||new mt,this.#i=e.mutationCache||new gt,this.#s=e.defaultOptions||{},this.#o=new Map,this.#c=new Map,this.#l=0}mount(){this.#l++,1===this.#l&&(this.#u=vt.m.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#r.onFocus())})),this.#d=yt.t.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#r.onOnline())})))}unmount(){this.#l--,0===this.#l&&(this.#u?.(),this.#u=void 0,this.#d?.(),this.#d=void 0)}isFetching(e){return this.#r.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#i.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#r.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#r.build(this,t),a=n.state.data;return void 0===a?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime((0,ut.d2)(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#r.findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,n){const a=this.defaultQueryOptions({queryKey:e}),r=this.#r.get(a.queryHash),i=r?.state.data,s=(0,ut.Zw)(t,i);if(void 0!==s)return this.#r.build(this,a).setData(s,{...n,manual:!0})}setQueriesData(e,t,n){return ht.jG.batch((()=>this.#r.findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,n)]))))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#r.get(t.queryHash)?.state}removeQueries(e){const t=this.#r;ht.jG.batch((()=>{t.findAll(e).forEach((e=>{t.remove(e)}))}))}resetQueries(e,t){const n=this.#r;return ht.jG.batch((()=>(n.findAll(e).forEach((e=>{e.reset()})),this.refetchQueries({type:"active",...e},t))))}cancelQueries(e,t={}){const n={revert:!0,...t},a=ht.jG.batch((()=>this.#r.findAll(e).map((e=>e.cancel(n)))));return Promise.all(a).then(ut.lQ).catch(ut.lQ)}invalidateQueries(e,t={}){return ht.jG.batch((()=>(this.#r.findAll(e).forEach((e=>{e.invalidate()})),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},a=ht.jG.batch((()=>this.#r.findAll(e).filter((e=>!e.isDisabled())).map((e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(ut.lQ)),"paused"===e.state.fetchStatus?Promise.resolve():t}))));return Promise.all(a).then(ut.lQ)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=this.#r.build(this,t);return n.isStaleByTime((0,ut.d2)(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ut.lQ).catch(ut.lQ)}fetchInfiniteQuery(e){return e.behavior=(0,xt.PL)(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ut.lQ).catch(ut.lQ)}ensureInfiniteQueryData(e){return e.behavior=(0,xt.PL)(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return yt.t.isOnline()?this.#i.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#r}getMutationCache(){return this.#i}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#o.set((0,ut.EN)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#o.values()],n={};return t.forEach((t=>{(0,ut.Cp)(e,t.queryKey)&&Object.assign(n,t.defaultOptions)})),n}setMutationDefaults(e,t){this.#c.set((0,ut.EN)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#c.values()],n={};return t.forEach((t=>{(0,ut.Cp)(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)})),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,ut.F$)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ut.hT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#r.clear(),this.#i.clear()}};function _t(e){return e}function At(e){return{mutationKey:e.options.mutationKey,state:e.state,...e.options.scope&&{scope:e.options.scope},...e.meta&&{meta:e.meta}}}function Et(e,t,n){return{state:{...e.state,...void 0!==e.state.data&&{data:t(e.state.data)}},queryKey:e.queryKey,queryHash:e.queryHash,..."pending"===e.state.status&&{promise:e.promise?.then(t).catch((e=>n(e)?Promise.reject(new Error("redacted")):Promise.reject(e)))},...e.meta&&{meta:e.meta}}}function jt(e){return e.state.isPaused}function St(e){return"success"===e.state.status}function Ct(e){return!0}function It(e,t={}){const n=t.shouldDehydrateMutation??e.getDefaultOptions().dehydrate?.shouldDehydrateMutation??jt,a=e.getMutationCache().getAll().flatMap((e=>n(e)?[At(e)]:[])),r=t.shouldDehydrateQuery??e.getDefaultOptions().dehydrate?.shouldDehydrateQuery??St,i=t.shouldRedactErrors??e.getDefaultOptions().dehydrate?.shouldRedactErrors??Ct,s=t.serializeData??e.getDefaultOptions().dehydrate?.serializeData??_t;return{mutations:a,queries:e.getQueryCache().getAll().flatMap((e=>r(e)?[Et(e,s,i)]:[]))}}var Nt=o(76837),kt=["added","removed","updated"];function Lt(e){return kt.includes(e)}async function Tt({queryClient:e,persister:t,maxAge:n=864e5,buster:a="",hydrateOptions:r}){try{const i=await t.restoreClient();if(i){if(!i.timestamp)return t.removeClient();{const s=Date.now()-i.timestamp>n,o=i.buster!==a;if(s||o)return t.removeClient();!function(e,t,n){if("object"!=typeof t||null===t)return;const a=e.getMutationCache(),r=e.getQueryCache(),i=n?.defaultOptions?.deserializeData??e.getDefaultOptions().hydrate?.deserializeData??_t,s=t.mutations||[],o=t.queries||[];s.forEach((({state:t,...r})=>{a.build(e,{...e.getDefaultOptions().hydrate?.mutations,...n?.defaultOptions?.mutations,...r},t)})),o.forEach((({queryKey:t,state:a,queryHash:s,meta:o,promise:c})=>{let l=r.get(s);const u=void 0===a.data?a.data:i(a.data);if(l){if(l.state.dataUpdatedAt<a.dataUpdatedAt){const{fetchStatus:e,...t}=a;l.setState({...t,data:u})}}else l=r.build(e,{...e.getDefaultOptions().hydrate?.queries,...n?.defaultOptions?.queries,queryKey:t,queryHash:s,meta:o},{...a,data:u,fetchStatus:"idle"});if(c){const e=Promise.resolve(c).then(i);l.fetch(void 0,{initialPromise:e})}}))}(e,i.clientState,r)}}}catch(e){throw await t.removeClient(),e}}async function Rt({queryClient:e,persister:t,buster:n="",dehydrateOptions:a}){const r={buster:n,timestamp:Date.now(),clientState:It(e,a)};await t.persistClient(r)}function Pt(e){const t=e.queryClient.getQueryCache().subscribe((t=>{Lt(t.type)&&Rt(e)})),n=e.queryClient.getMutationCache().subscribe((t=>{Lt(t.type)&&Rt(e)}));return()=>{t(),n()}}var Mt=o(20342),Ot=({children:e,persistOptions:t,onSuccess:n,onError:a,...r})=>{const[i,s]=f.useState(!0),o=f.useRef({persistOptions:t,onSuccess:n,onError:a}),c=f.useRef(!1);return f.useEffect((()=>{o.current={persistOptions:t,onSuccess:n,onError:a}})),f.useEffect((()=>{const e={...o.current.persistOptions,queryClient:r.client};return c.current||(c.current=!0,Tt(e).then((()=>o.current.onSuccess?.())).catch((()=>o.current.onError?.())).finally((()=>{s(!1)}))),i?void 0:Pt(e)}),[r.client,i]),(0,S.jsx)(Nt.Ht,{...r,children:(0,S.jsx)(Mt.d,{value:i,children:e})})},Dt=o(13804),Ht=o(15930),zt=o(18687);const Vt=()=>(0,Ht.v8)("sp_key"),Bt=e=>{const t=(0,zt.V)(),n=(()=>{const e=Vt();return setInterval((()=>{e!==Vt()&&window.location.reload()}),5e3)})();t.on(r.TransportEvent.LOGGED_OUT,(()=>{clearInterval(n),e()}))};const Ut=864e5,Ft=Spicetify.ReactComponent.PlatformProvider=({platform:e,children:n})=>{const a=(0,t.NC)(we.QMQ),r="always",i=(0,f.useMemo)((()=>new wt({defaultOptions:{queries:{gcTime:0,networkMode:r},mutations:{networkMode:r}}})),[r]);if((0,f.useEffect)((()=>{var e;Bt((()=>{(0,Dt.k)()})),e=()=>{console.log("Detected hard reload. Deleting persisted cache."),(0,Dt.k)()},window.addEventListener("keydown",(t=>{const n=(t.ctrlKey||t.metaKey)&&t.shiftKey&&"R"===t.key.toUpperCase(),a=t.ctrlKey&&"F5"===t.key.toUpperCase();(n||a)&&e()}))}),[]),(0,f.useEffect)((()=>{a||(0,Dt.k)()}),[a]),a){const t=(0,Dt.Z)(),a=e.getSession(),r=["v1",e.username,a.locale,a.market];return(0,S.jsx)(Ot,{client:i,persistOptions:{persister:t,buster:r.join(":"),maxAge:Ut,hydrateOptions:{defaultOptions:{queries:{gcTime:Ut}}},dehydrateOptions:{shouldDehydrateQuery:e=>!!e.meta?.persist&&St(e)}},children:n})}return(0,S.jsx)(Nt.Ht,{client:i,children:n})};var qt=o(58244);var Wt=o(97500),Gt=o.n(Wt),$t=o(25087),Qt=o(59415);function Kt(){const e=(0,t.NC)(we.g3o),n=(0,d.wA)();return(0,f.useEffect)((()=>{e&&n((0,Qt.$h)("dev"))}),[e,n]),null}function Zt(){const e=(0,t.NC)(we.SqX),n=(0,d.wA)();return(0,f.useEffect)((()=>{n((0,Qt.ab)(e))}),[e,n]),null}function Yt(){const e=(0,d.wA)(),[t,n]=(0,f.useState)(!1),{isOnboardingComplete:a}=(0,$t.er)();return(0,f.useEffect)((()=>{e(l.yk()),n(!0)}),[e]),a&&t?(0,S.jsxs)(f.Suspense,{fallback:null,children:[(0,S.jsx)(Kt,{}),(0,S.jsx)(Zt,{})]}):null}var Jt=o(96964),Xt=function(e){var t=e.useBrowserDefaultFocusStyle,n=void 0===t||t,a=e.children;return f.createElement(Jt.g.Provider,{value:{useBrowserDefaultFocusStyle:n}},a)},en=o(87781),tn=o(66193);const nn=({children:e})=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(tn.M,{children:e})});var an=o(13686),rn=o(81197),sn=o(73075),on=o.n(sn),cn=o(16224),ln=o(59833),un=function(e){return e[e.DOWN=-1]="DOWN",e[e.NONE=0]="NONE",e[e.UP=1]="UP",e}(un||{});const dn=10,hn=({ranges:e,size:t,onResize:n,label:a,placement:r,elementRef:i,decreaseSizeKeyboardCombination:s,increaseSizeKeyboardCombination:o,afterResizing:c})=>{const[l,u]=(0,f.useState)(!1),d=(0,ln.W)(),h=(0,f.useCallback)(((t,n=un.NONE)=>{if(e.some((([e,n])=>e<=t&&t<=n)))return t;switch(n){case un.NONE:{const[n,a]=e.slice().sort((([e,n],[a,r])=>Math.min(Math.abs(e-t),Math.abs(n-t))-Math.min(Math.abs(a-t),Math.abs(r-t))))[0];return t<n?n:a}case un.UP:{const n=e.find((([n],a)=>(e[a-1]?.[1]??0)<t&&t<n)),a=n?.[0];return a?Math.ceil(a/dn)*dn:t}case un.DOWN:{const n=e.find((([n,a],r)=>{const i=e[r+1]?.[0]??1/0;return a<t&&t<i})),a=n?.[1];return a?Math.floor(a/dn)*dn:t}default:return(0,q.k)(n),t}}),[e]),p=(0,f.useCallback)((e=>{if(!i.current)return null;const t=i.current.getBoundingClientRect();return"inline-start"===r?d?e-t.left:t.right-e:"inline-end"===r?d?t.right-e:e-t.left:null}),[r,i,d]),m=(0,f.useCallback)((e=>{if(null==e)return;const t=0!==e||l?Math.trunc(h(e)):0;n(t)}),[h,n,l]);if(Number.isNaN(t)){const t=(e[0][1]-e[0][0])/2;console.error(`[LayoutResizer] css property value is not a number. Defaulting to ${t}`),m(t)}const g=(0,f.useCallback)((()=>{u(!0);const e=t,n=e=>{r.startsWith("inline")?m(p(e.clientX)):m(p(e.clientY))};document.addEventListener("pointerup",(()=>{u(!1),document.removeEventListener("pointermove",n),c?.(e,t)}),{once:!0}),document.addEventListener("pointermove",n)}),[c,p,m,t,r]);(0,f.useEffect)((()=>(s&&on().bind(s,(()=>{m(h(t-dn,-1))})),o&&on().bind(o,(()=>{m(h(t+dn,1))})),()=>{s&&on().unbind(s),o&&on().unbind(o)})),[s,h,o,m,t]);const b=e[0][0],v=e[e.length-1][1];return(0,S.jsxs)(S.Fragment,{children:[l&&(0,S.jsx)("div",{className:"LayoutResizer__resize-overlay"}),(0,S.jsx)("div",{"":"LayoutResizer__resize-bar",onPointerDown:g,className:Gt()("LayoutResizer__resize-bar",{"LayoutResizer__resize-bar--resizing":l,"LayoutResizer__inline-start":"inline-start"===r,"LayoutResizer__inline-end":"inline-end"===r,"LayoutResizer__block-start":"block-start"===r,"LayoutResizer__block-end":"block-end"===r}),onDoubleClick:()=>{const n=e.findIndex((([e])=>e===t)),a=e.findIndex((([e,n])=>n===t));if(-1!==a){const t=e.at(a+1);t&&m(t[0])}else if(-1!==n){const t=e.at(n-1);t&&m(t[1])}},children:(0,S.jsx)(cn.o,{className:"LayoutResizer__input",type:"range",min:b,max:v,onChange:function(e){if(l)return;const n=t;let a=parseInt(e.target.value,10);a=h(a,Math.sign(a-t)),m(a),c?.(n,a)},value:t,step:dn,children:a})})]})};var pn=o(63922),mn=o(93805),fn=o(66305),gn=o(43949),bn=o(53441),vn=o(50745),yn=o(89727),xn=o(24e3);const wn=({elementRef:e})=>{const{spec:t,logger:n}=(0,xn.$)(rn.j,{data:{identifier:"yourlibraryx"}}),a=(0,vn.LH)(),{isGridView:r}=(0,yn.t)(),{size:s,setSize:o,minMaxRanges:c}=(0,bn.y)(),l=(0,ln.W)(),u=(0,mn.S)()===pn.z.LIBRARY;let d="default";a===vn.ZS.COLLAPSED?d="collapsed":a===vn.ZS.EXPANDED&&(d=r?"expanded_grid":"expanded_list");const h=(0,f.useCallback)(((e,a)=>{e!==a&&n.logInteraction(t.sidebarFactory({uri:"",identifier:d}).dragUiResize({startSizePx:e,endSizePx:a}))}),[n,d,t]);return u?null:(0,S.jsx)(hn,{elementRef:e,placement:"inline-end",label:i.Ru.get("resize.sidebar"),onResize:o,size:s,ranges:c,decreaseSizeKeyboardCombination:l?(0,gn.p)(fn.r.NPV_SIDEBAR_DECREASE_WIDTH):(0,gn.p)(fn.r.LEFT_SIDEBAR_DECREASE_WIDTH),increaseSizeKeyboardCombination:l?(0,gn.p)(fn.r.NPV_SIDEBAR_INCREASE_WIDTH):(0,gn.p)(fn.r.LEFT_SIDEBAR_INCREASE_WIDTH),afterResizing:h})};var _n=o(55354);const An={},En=e=>null===e.match(/\/search\/(\w+|\W+){1,}/gi)?e:"search-result",jn=({scrollNodeRef:e,children:t,scrollNodeChildRef:n})=>{const a=(0,f.useRef)(""),r=(0,ae.zy)(),i=(0,ae.wQ)(),s=(0,f.useCallback)((()=>{if(!e.current)return()=>{};const t=En(r.pathname),n=An[t];let a;if(n&&"POP"===i){const t=Date.now(),r=()=>{!e.current||Date.now()>t+3e3?clearInterval(a):e.current.scrollHeight>=n+e.current.offsetHeight&&(e.current.scrollTop=n,clearInterval(a))};a=setInterval(r,50),r()}else e.current.scrollTop=0;return()=>{clearInterval(a)}}),[r.pathname,i,e]);(0,f.useMemo)((()=>{if(!e.current)return;const t=En(a.current);An[t]=e.current.scrollTop,a.current=r.pathname}),[r.pathname,e]),(0,f.useLayoutEffect)((()=>s()),[r.pathname,s,e]);const o=(0,f.useMemo)((()=>({scrollNodeRef:e,scrollNodeChildRef:n})),[e,n]);return(0,S.jsx)(_n.bi.Provider,{value:o,children:t})},Sn=f.createContext(null),Cn=({children:e})=>{const t=(0,f.useRef)(null);return(0,S.jsx)(Sn.Provider,{value:t,children:e})};var In=o(30967),Nn=o(68778);var kn=o(1685),Ln=o(48568),Tn=o(64448),Rn=o(30773),Pn=o(8193),Mn=o(64720);const On="T0fKO6B7LQSCE_VaSM1P",Dn={[Rn.E.SMALL]:0,[Rn.E.MEDIUM]:600,[Rn.E.LARGE]:1024},Hn=(0,f.forwardRef)((({children:e},t)=>{(0,Tn.$)();const n=(0,f.useRef)(null);(0,f.useImperativeHandle)(t,(()=>n.current),[n]);const{breakpoint:a}=(0,Mn.x)(Dn,n);return(0,S.jsx)("main",{ref:n,className:On,tabIndex:-1,children:(0,S.jsx)(Pn.o.Provider,{value:a,children:e})})}));var zn=o(58450),Vn=o(79802),Bn=o(84809),Un=o(42919);const Fn="Root__top-container",qn="Root__top-container--has-notice-bar";function Wn({children:e}){const n=(0,d.d4)((e=>e.ui.unsupportedBrowser.isOpen)),a=(0,Bn.XB)(),r=(0,t.NC)(we.ZDY);return(0,S.jsx)("div",{className:Gt()(Fn,{[qn]:n}),"data-right-sidebar-hidden":!r&&a===Un.Z.Disabled,children:e})}const Gn="xlgKfueiF46Wo_sED8YA",$n=(0,f.forwardRef)((function({gridRow:e,gridColumn:t,zIndex:n,children:a,className:r,debugLabel:i},s){return(0,S.jsx)("div",{ref:s,className:Gt()(Gn,r),style:{gridRow:e,gridColumn:t,zIndex:n},children:a})})),Qn="Root__main-view-overlay",Kn=(0,f.forwardRef)((function({children:e,debugLabel:t},n){return(0,S.jsx)($n,{ref:n,className:Qn,gridRow:"global-nav / main-view",gridColumn:"left-sidebar / right-sidebar",zIndex:"var(--above-everything-except-now-playing-bar-z-index)",debugLabel:t,children:e})}));var Zn=o(7236);const Yn=()=>(0,Bn.Zf)(),Jn=()=>{const{property:e,value:t}=(()=>{const{size:e}=(0,Zn.y)();return(0,f.useMemo)((()=>({property:"--left-sidebar-width",value:e})),[e])})();return(0,f.useMemo)((()=>({[e]:t})),[e,t])},Xn=()=>{const{size:e}=Yn(),n=(0,t.NC)(we.ZDY),a=(0,Bn.XB)()===Un.Z.Disabled&&n?24:e;return(0,f.useMemo)((()=>({property:"--right-sidebar-width",value:a})),[a])},ea=()=>{const{property:e,value:t}=Xn();return(0,f.useMemo)((()=>({[e]:t})),[e,t])};let ta=function(e){return e.Default="default",e.Tuna="tuna",e}({});const na=({children:e})=>(0,S.jsx)(S.Fragment,{children:e}),aa=()=>({applicationMode:{mode:ta.Default,params:{}},setApplicationMode:()=>{throw new Error("setApplicationMode must be used within a ApplicationModeProvider")}}),ra="Root__nav-bar",ia="TkqXOzhmCCuE6YI3hlgA",sa="oDWO4yGAZ2kZlt3TTS4E",oa="p9p4xXN1mgRkvMNUhIWg";function ca({children:e}){const{leftSidebarRef:t}=(0,an.JT)(),{applicationMode:n}=aa(),a=Jn(),r=(0,mn.S)()===pn.z.LIBRARY;return n.mode!==ta.Default?null:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:Gt()(sa,{[oa]:r}),style:a}),(0,S.jsx)("div",{id:"Desktop_LeftSidebar_Id",ref:t,className:Gt()(ra,{[ia]:r}),style:a,children:e})]})}const la="main-yourLibraryX-entryPoints",ua="main-yourLibraryX-library",da=(0,f.lazy)((async()=>{const{YourLibraryX:e}=await Promise.all([o.e(9065),o.e(6457)]).then(o.bind(o,14884));return{default:e}})),ha=()=>(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{className:Gt()(la,ua),children:(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(da,{})})})}),pa="main-navBar-mainNav";function ma(){return(0,S.jsx)("nav",{className:pa,"aria-label":i.Ru.get("sidebar.a11y.landmark-label"),children:(0,S.jsx)(en.pZ,{value:"nav-bar",children:(0,S.jsx)(ha,{})})})}const fa="Root__main-view";function ga({children:e}){const{applicationMode:t}=aa(),{mainContentRef:n}=(0,an.JT)();return t.mode!==ta.Default?null:(0,S.jsx)("div",{ref:n,className:fa,children:e})}var ba=o(73328),va=o(40569),ya=o(48260),xa=o(56806),wa=o(49075);const _a=()=>{const e=(0,xa.v)((e=>{const t=(0,ya.V)(e);return t.isPlayingRemotely&&void 0!==t.remoteDevice?.name&&void 0!==t.remoteDevice?.type})),t=(0,f.useContext)(wa.a);return e||(t?.active??!1)},Aa="Root__right-sidebar",Ea="OTBExwAsDgh_OEe7EAlu",ja="mYWHdrNeGjAdTOD28xSj",Sa="bENvsWd8JrCmuFulkXpg",Ca="GS3Plog6THw80YGUPTYo";function Ia({children:e}){const{rightSidebarRef:t}=(0,an.JT)(),n=(0,ba.h)(),a=(0,mn.S)(),r=(0,d.d4)((e=>e.ui.fullscreenMode.isOpen)),i=_a(),{applicationMode:s}=aa();return(0,$t.er)().shouldStepBeVisible(va.B.SEARCH)||s.mode!==ta.Default?null:(0,S.jsx)("div",{ref:t,className:Gt()(Aa,{[Ea]:a===pn.z.NOW_PLAYING_VIEW,[ja]:n,[Sa]:r,[Ca]:i}),children:e})}const Na="Root__now-playing-bar";function ka({children:e}){const{nowPlayingBarRef:t}=(0,an.JT)(),{applicationMode:n}=aa();return n.mode!==ta.Default?null:(0,S.jsx)("div",{ref:t,className:Na,children:e})}var La=o(85210),Ta=o(8143);const Ra=(0,f.lazy)((()=>new Promise((e=>{const t=Promise.all([o.e(9462),o.e(1104),o.e(8456),o.e(4174),o.e(5303),o.e(854),o.e(3667)]).then(o.bind(o,46313)).then((e=>({default:e.PiPMiniPlayer}))),n=new Promise((e=>{setTimeout(e,300)}));Promise.all([t,n]).then((t=>{e(t[0])}))}))));var Pa=o(62809);const Ma=e=>{const t=(0,Pa.ZY)()??document;(0,f.useEffect)((()=>{if(!e)return;const n=e=>{const t=e.target;["INPUT","TEXTAREA"].includes(t.tagName)||e.preventDefault()};return t.addEventListener("contextmenu",n),()=>{t.removeEventListener("contextmenu",n)}}),[t,e])},Oa=f.memo((()=>{const e=(0,d.d4)((e=>e.platform.isDeveloperMode));return Ma(!e),null}));var Da=o(91113),Ha=o(75622);o(15981);var za=o(24600),Va=o(34269),Ba=o(26928),Ua=o(89370),Fa=o(62903);const qa="pip-mini-player",Wa={OS_MACOS:"spotify__os--is-macos",OS_WINDOWS:"spotify__os--is-windows",CONTAINER_DESKTOP:"spotify__container--is-desktop",CONTAINER_WEB:"spotify__container--is-web"};function Ga(e,t,n){!function(e,t){e.querySelector("html")?.classList.remove(...t)}(n,Object.values(Wa));const a=function(e,t){const n=["no-focus-outline"];return t===Va.f.macOS?n.push(Wa.OS_MACOS):t===Va.f.Windows&&n.push(Wa.OS_WINDOWS),e===za.m.Desktop?n.push(Wa.CONTAINER_DESKTOP):e===za.m.Web&&n.push(Wa.CONTAINER_WEB),n}(e,t);!function(e,t){t.forEach((t=>{e.querySelector("html")?.classList.add(t)}))}(n,a)}const $a=e=>{const t=Array.from(document.getElementsByTagName("script")).filter((e=>e.src?.includes("xpui.js")))?.[0]?.src.replace(/\/[^/]+$/,"")??"",n="-snapshot";return{scripts:[`${t}/${qa}${n}.js`,`${t}/vendor~${qa}${n}.js`],styles:[`${t}/${qa}${n}.css`,`${t}/vendor~${qa}${n}.css`]}},Qa=e=>{const t=(0,ge.mv)();(0,f.useLayoutEffect)((()=>{if(!e)return;const{pipResources:n}=(0,Ba.x)(Ua.I4),{scripts:a,styles:r}=$a();e.document.body.style.margin="0",e.document.body.style.padding="0",e.document.body.style.overflow="hidden",e.document.body.style.height="100%",Ga(t.container,t.operatingSystem,e.document),Fa.M.setup(e.document),a.map((t=>((e,t)=>{const n=document.createElement("script");n.setAttribute("src",e),t.document.head.appendChild(n)})(t,e))),r.map((t=>((e,t)=>{const n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),t.document.body.prepend(n)})(t,e)))}),[e,t])};var Ka=o(32944);const Za=f.memo((()=>{const{capabilities:{isEnabled:e},isOpen:t,close:n}=(0,Ka.H)(),a=(0,f.useCallback)(n,[n]),r=window.documentPictureInPicture?.window??null;var i,s;if(Qa(r),i=r,s=window,(0,f.useEffect)((()=>{i&&s&&["lang","dir"].forEach((e=>{const t=s.document.documentElement.getAttribute(e);null!==t&&i.document.documentElement.setAttribute(e,t)}))}),[i,s]),(0,f.useEffect)((()=>{}),[]),!e||!t||!r)return null;const o=r;return(0,Ta.createPortal)((0,S.jsx)(m.s,{onError:a,children:(0,S.jsxs)(Pa.IF,{handle:o,children:[(0,S.jsx)(Oa,{}),(0,S.jsx)(Ha.S,{children:(0,S.jsx)(f.Suspense,{fallback:(0,S.jsx)(Da.B,{}),children:(0,S.jsx)(Ra,{})})})]})}),r.document.body)}));var Ya=o(58352),Ja=o(80024);class Xa extends Ja.V{}var er=o(61520),tr=(o(87439),o(31862)),nr=o(26062),ar=o(82983);const rr=640;class ir{_events=new Xa;graphicsRef=null;currentImageUrl=null;getCapabilities(){return{isEnabled:!0,supportsVideo:!1,supportsAds:!1,supportsConnect:!1,supportsOffline:!1}}getEvents(){return this._events}async open(e){const t=this.getOrCreateGraphics();await this.updateGraphicsFromPlayerState(t,e);const n=this.getPictureInPictureElement();return n===t.video||(await this.requestPictureInPicture(t,(()=>{this.close()})),this._events.emitSync("visibility_change",!0)),n??null}async updateGraphicsFromPlayerState(e,t){const n=this.getImageURLFromPlayerState(t);null!==n?await this.drawImage(e,n):this.close()}close(){this.getPictureInPictureElement()&&document.exitPictureInPicture(),this.disposeGraphics(),this._events.emitSync("visibility_change",!1)}isAllowed(e,t,n){const a=e?.hasContext??!1,r=e?.item?.type===nr.c.EPISODE&&"audio"!==e?.item.mediaType;return!!a&&(!!(n??!0)&&!r)}getCurrentState(){return this.getPictureInPictureElement()?"open":"closed"}syncWithPlayerState(e){const t=e?.hasContext??!1,n=e?.isPaused??!1,a=this.getPictureInPictureElement();!t||n?a?.pause():a?.play();const r=this.getOrCreateGraphics();this.updateGraphicsFromPlayerState(r,e)}getOrCreateGraphics(){return this.graphicsRef??=this.createGraphics(),this.graphicsRef}disposeGraphics(){this.graphicsRef=null,this.currentImageUrl=null}createGraphics(){const e=document.createElement("canvas");e.width=rr,e.height=rr;const t=e.getContext("2d"),n=document.createElement("video");return n.srcObject=e.captureStream(),n.muted=!0,{context:t,video:n}}async drawImage({context:e,video:t},n){if(this.currentImageUrl===n)return;this.currentImageUrl=n;const a=new Image;a.crossOrigin="anonymous",a.src=(0,ar.m)({imageUriOrUrl:n,desiredMosaicSize:rr}),await a.decode(),e.drawImage(a,0,0,rr,rr),await t.play()}getImageURLFromPlayerState(e){const t=e?.item?.images??[];return(0,tr.h)(t,{desiredSize:rr})??null}async requestPictureInPicture({video:e},t){try{await e.requestPictureInPicture(),e.addEventListener("leavepictureinpicture",t,{once:!0})}catch(e){(0,er.v)(e)}}getPictureInPictureElement(){if(document.pictureInPictureElement)return document.pictureInPictureElement}static isSupported(){return!1}}var sr=o(27791),or=o(54191),cr=o(9856),lr=o.n(cr);class ur{#h=new Xa;#p=null;#m;constructor(e=!1){this.#m=e}getCapabilities(){return{isEnabled:!0,supportsVideo:!0,supportsAds:!0,supportsConnect:!0,supportsOffline:this.#m}}getEvents(){return this.#h}async open(e){if(!ur.isSupported())return null;const t=this.getDocumentPictureInPictureElement()?.window;if(t){if(t===this.#p)return this.#p;t.close()}const{width:n,height:a}=this.getInitialWindowSize(e?.item),r=await this.createWindow(n,a);return void 0===r?(this.close(),null):(this.#p=r,this.#p.addEventListener("pagehide",(()=>{this.close()}),{once:!0}),this.#h.emitSync("visibility_change",!0),this.#p)}close(){this.#p&&(this.#p.close(),this.#p=null),this.#h.emitSync("visibility_change",!1)}isAllowed(e,t,n){return!(!(e?.hasContext??!1)&&t===or.zP.NOT_CONNECTED)||!!(0,sr.HS)(e?.context??null)}getCurrentState(){return this.#p?"open":"closed"}syncWithPlayerState(e){}getInitialWindowSize(e){let t=300,n=300;if(e){(0,M.p)(e)&&("video"===e.mediaType||"mixed"===e.mediaType)&&(t=425,n=300)}return{width:t,height:n}}async createWindow(e,t){return await(this.getDocumentPictureInPictureElement()?.requestWindow({width:e,height:t}))}getDocumentPictureInPictureElement(){return window.documentPictureInPicture}static isSupported(){return"documentPictureInPicture"in window&&!0}}class dr{getCapabilities(){return{isEnabled:!1,supportsVideo:!1,supportsAds:!1,supportsConnect:!1,supportsOffline:!1}}getEvents(){return new Xa}open(){return Promise.resolve(void 0)}close(){}isAllowed(e,t,n){return!1}getCurrentState(){return"closed"}syncWithPlayerState(){}}const hr=()=>{const e=(0,t.NC)(we.Tb_),[n]=(0,f.useState)((()=>{if(navigator.webdriver)return new dr;if(ur.isSupported()&&e){return new ur(!0)}return ir.isSupported()?new ir:new dr}));return n};var pr=o(39750),mr=o(68871);function fr(){if(gr())try{navigator.mediaSession.setActionHandler("enterpictureinpicture",null)}catch(e){}}function gr(){return"mediaSession"in navigator}const br=f.memo((({pipInstance:e})=>((e=>{const{connectionStatus:t,isActiveDeviceLocal:n}=(0,xa.v)((e=>({connectionStatus:e.connectionStatus,isActiveDeviceLocal:e.activeDevice?.isLocal})),mr.a),a=(0,pr.o)((e=>e),((e,t)=>e?.hasContext===t?.hasContext&&e?.item?.uri===t?.item?.uri)),r=(0,f.useRef)(a);r.current=a;const i=(0,f.useMemo)((()=>e.isAllowed(a,t,n)),[t,n,e,a]);(0,f.useEffect)((()=>{if(gr()){try{i?navigator.mediaSession.setActionHandler("enterpictureinpicture",(t=>{e.open(r.current)})):fr()}catch(e){}return()=>{fr()}}}),[e,i])})(e),null)));var vr=o(60749),yr=o(47021);const xr=f.createContext({}),wr=({children:e})=>{const[t,n]=f.useState(!0),a=(0,f.useMemo)((()=>({isGlobalNavDraggable:t,setIsGlobalNavDraggable:n})),[t,n]);return(0,S.jsx)(xr.Provider,{value:a,children:e})};var _r=o(25748),Ar=o(92574),Er=o(59636),jr=o(44040),Sr=o(60363),Cr=o(53830),Ir=o(55102),Nr=o(88913),kr=o(89354),Lr=o(92208);const Tr="YyUcY0HTiYikUOwhh29d",Rr=(e,t)=>{if(!t)return null;const n=((e,t)=>{const[n=1,a=0,r=0,i=0]=e.split("."),[s=1,o=0,c=0,l=0]=t.split("."),u=1e9*Number(n)+1e6*Number(a)+1e4*Number(r)+Number(i);return 1e9*Number(s)+1e6*Number(o)+1e4*Number(c)+Number(l)-u})(e,t);return n>=2e4?"negative":n>=1e3?"warning":n>=500?"announcement":null},Pr=()=>{const e=(0,kr.k)(),t=(0,Nr.t)(),n=(0,f.useCallback)((()=>{t.prepareUpdate()}),[t]),a=(0,f.useCallback)((()=>{t.applyUpdate()}),[t]),[r,s]=(0,f.useState)(null),o=e?.version;if((0,f.useEffect)((()=>{t.getVersionInfo().then((e=>{const t=e.containerVersion.split(".");5===t.length&&t.pop(),s(t.join("."))}))}),[t]),e?.state===Lr.D.UPDATE_NONE)return null;if(!r||!o)return null;const c=Rr(r,o);if(!c)return null;switch(e?.state){case Lr.D.UPDATE_AVAILABLE:return(0,S.jsx)(Sr.Zp,{label:i.Ru.get("release-notifier.update-available",o),children:(0,S.jsx)(Ar.$,{size:"small",colorSet:c,onClick:n,className:Tr,children:o})});case Lr.D.UPDATE_PROCESSING:return(0,S.jsx)(Sr.Zp,{label:i.Ru.get("release-notifier.update-processing",o),children:(0,S.jsx)(Ar.$,{size:"small",colorSet:c,disabled:!0,className:Tr,children:o})});case Lr.D.UPDATE_READY:return(0,S.jsx)(Sr.Zp,{label:i.Ru.get("release-notifier.update-ready",o),children:(0,S.jsx)(Ar.$,{size:"small",colorSet:c,onClick:a,className:Tr,children:o})});default:return null}},Mr=()=>{const e=(0,Cr.t)(),[{data:t}]=(0,Ir.K)(e.employee.isEmployee);return t?(0,S.jsx)(Pr,{}):null},Or=()=>(0,S.jsx)(Mr,{});var Dr=o(98715),Hr=o(58228);function zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Vr=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(n),!0).forEach((function(t){(0,Hr.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o(64541).L),Br=o(71713),Ur=o(94079),Fr=o(73147),qr=o(18987),Wr=o(41170);const Gr="400ms",$r="main-topBarStatusIndicator-TopBarStatusIndicatorContainer",Qr="main-actionButtons-button",Kr="main-noConnection-isError",Zr="main-noConnection-isNotice",Yr="main-topBarStatusIndicator-hasTooltip",Jr="main-topBarStatusIndicator-tooltipIsError",Xr="main-topBarStatusIndicator-enter",ei="main-topBarStatusIndicator-enterActive",ti="main-topBarStatusIndicator-exitActive",ni="main-topBarStatusIndicator-tooltipEnter",ai="main-topBarStatusIndicator-notMinimized",ri="main-topBarStatusIndicator-tooltipEnterActive";let ii=function(e){return e.ERROR="ERROR",e.NOTICE="NOTICE",e}({});const si=(0,f.memo)((function(e){const{children:t,feedbackType:n,tooltip:a,itemId:r,display:i=!0,minimized:s=!1,renderInLine:o=!1,spec:c}=e,l=(0,f.useRef)(null),u=(0,Wr.W)(),d=(0,Je.s)();return(0,S.jsx)(Ur.A,{in:i,timeout:parseInt(Gr,10),unmountOnExit:!0,onEnter:()=>{s||l.current?.classList.add(ni)},onEntered:()=>{s||l.current?.classList.add(ri)},onExited:()=>{s||l.current?.classList.remove(ri)},classNames:{enter:Xr,enterActive:ei,exitActive:ti},nodeRef:l,children:(0,S.jsx)(en.pZ,{value:r,children:(0,S.jsx)("div",{className:Gt()($r,{[ai]:!s}),children:(0,S.jsx)(qr.y,{offset:[-2,20],action:"toggle",trigger:"click",content:(0,S.jsx)(Fr.z,{className:Gt()({[Jr]:n===ii.ERROR}),children:(0,S.jsx)("div",{children:a})}),renderInline:o,children:(0,S.jsx)("button",{className:Gt()(Qr,{[Yr]:a,[Kr]:n===ii.ERROR,[Zr]:n===ii.NOTICE}),onClick:()=>{u({intent:"toggle",type:"click"}),c&&d.logInteraction(c.hitUiReveal())},ref:l,"":r,children:t})})})})})}));var oi=o(6413),ci=o(23763),li=o(65190),ui=o(83463),di=o(1894);const hi="P8EYxpJkrSRcmY5CFfgZ",pi="oMR8tk4wMj9_exGQeapz",mi="qq3uDmbXwv31FKawHDIg",fi="B64o12iyKiKF4s8uuClS";function gi(e){if(null===e)return null;const t=Math.abs(Date.now()-e.getTime());if(t<1e3)return null;const{hours:n,minutes:a,seconds:r}=(0,di.S)(t),s=(0,ci.j)({h:n,m:a,s:r});return i.Ru.get("authorization-status.retrying",s)}const bi=({retryAt:e})=>{const t=(0,li.v)(),[n,a]=(0,f.useState)(gi(e)),r=(0,h.Oj)();return(0,f.useEffect)((()=>{const t=window.setInterval((()=>{a(gi(e))}),500);return()=>{window.clearInterval(t)}}),[e,a]),(0,S.jsxs)("div",{className:hi,children:[(0,S.jsx)(Dr.E,{as:"p",variant:"bodyMediumBold",children:i.Ru.get("authorization-status.title")}),(0,S.jsx)("span",{className:pi,children:n??i.Ru.get("authorization-status.reconnecting")}),(0,S.jsxs)("div",{className:mi,children:[(0,S.jsx)(_r.H,{semanticColor:"textBase",buttonSize:Vr.sm,onClick:()=>{r({type:"close"})},children:i.Ru.get("authorization-status.dismiss")}),(0,S.jsx)(Ar.$,{className:fi,buttonSize:Vr.sm,onClick:()=>t.tryAuthorize(),children:i.Ru.get("authorization-status.retry")})]})]})},vi=({minimized:e,spec:n})=>{const a=(0,oi.n)(),{isAuthorized:r,retryAt:s}=(0,ui.Y)();return(0,t.NC)(we.ueo)?(0,S.jsxs)(si,{feedbackType:ii.ERROR,minimized:e,display:a&&!r,spec:n,tooltip:(0,S.jsx)(bi,{retryAt:s}),itemId:"authorization-status-indicator",children:[(0,S.jsx)(Br.b,{size:"small"}),i.Ru.get("authorization-status.badge")]}):null};var yi=o(66191),xi=o(55965),wi=o(35693),_i=o(71297),Ai=o(5408),Ei=o(47900);const ji="PYPe3hJJmzsQV6XoN3Cl",Si="mqsHTSdyZwgRvD2Kylc1",Ci=()=>{const e=(0,Je.s)(),{spec:t}=(0,Ei.r)(xi.V,{}),n=(0,h.Oj)(),a=(0,d.wA)(),r=(0,f.useCallback)((()=>{n({type:"close"}),a(_i.r8.actions.open()),e.logInteraction(t.learnMoreButtonFactory().hitUiReveal())}),[a,e,n,t]);return(0,S.jsxs)("div",{className:ji,children:[(0,S.jsx)(Dr.E,{variant:"bodySmall",children:i.Ru.get("topBar.dsa-indicator")}),(0,S.jsx)(_r.H,{className:Si,onClick:r,condensedAll:!0,size:"small",semanticColor:"textBase",children:i.Ru.get("topBar.dsa-cta")})]})},Ii=({spec:e})=>{const t=(0,wi.p)();return(0,S.jsx)(Ai.r,{spec:e,children:(0,S.jsx)(si,{feedbackType:ii.NOTICE,minimized:!0,display:!t,tooltip:(0,S.jsx)(Ci,{}),itemId:"dsa-mode-status-indicator",spec:e,renderInLine:!0,children:(0,S.jsx)(yi.p,{size:"small"})})})};var Ni=o(26003);const ki=({minimized:e,spec:t})=>{const n=!(0,oi.n)();return(0,S.jsxs)(si,{feedbackType:ii.NOTICE,minimized:e,display:n,spec:t,tooltip:i.Ru.get("offline.callout-disconnected"),itemId:"offline-status-indicator",children:[(0,S.jsx)(Ni.P,{size:"small"}),i.Ru.get("offline.badge")]})};var Li=o(1578),Ti=o(9507),Ri=o(42978);var Pi=o(49631);function Mi(){const e=(0,Ri.N)(Ti.H),[t,n]=(0,f.useState)(!1),a=(0,Pi.a)();(0,f.useEffect)((()=>{const t=e.subscribeToPrivateSession((e=>{a()&&n(e)}));return()=>{t()}}),[e,a]);return{isPrivateSession:t,setPrivateSession:(0,f.useCallback)((t=>{e.setPrivateSession(t)}),[e])}}const Oi=({minimized:e,spec:t})=>{const{isPrivateSession:n}=Mi();return(0,S.jsxs)(si,{feedbackType:ii.NOTICE,minimized:e,display:n,tooltip:i.Ru.get("private-session.badge"),spec:t,itemId:"private-session-indicator",children:[(0,S.jsx)(Li.y,{size:"small"}),i.Ru.get("private-session.badge")]})};var Di=o(51247);const Hi=f.memo((function(e){const t=(0,Di.U)("(max-width: 1023px)"),n=(0,f.useMemo)((()=>e.spec?.privateSessionButtonFactory()),[e.spec]),a=(0,f.useMemo)((()=>e.spec?.offlineButtonFactory()),[e.spec]),r=(0,f.useMemo)((()=>e.spec?.authorizationButtonFactory()),[e.spec]),i=(0,f.useMemo)((()=>e.spec?.dsaModeButtonFactory()),[e.spec]);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(Oi,{spec:n,minimized:t}),(0,S.jsx)(ki,{spec:a,minimized:t}),(0,S.jsx)(vi,{spec:r,minimized:t}),(0,S.jsx)(Ii,{spec:i})]})}));var zi=o(48368),Vi=o(72045);function Bi(e){return{name:"KmInteraction",environments:["browser"],data:e}}function Ui(e){return{name:"KmInteractionNonAuth",environments:["browsernonauth"],data:e}}var Fi=o(76688),qi=o(35287);function Wi(e,t){switch(t.type){case"installed":return{...e,installed:!0};case"before-install":return{...e,deferredPrompt:t.prompt,canBeInstalled:!0};default:return e}}const Gi=f.memo((({logger:e,spec:t})=>{const n=(0,d.wA)(),a=(0,ge.vh)(),r=(0,qi.V)(),{enqueueSnackbar:s}=(0,Fi.d)(),[o,c]=(0,f.useReducer)(Wi,{deferredPrompt:void 0,installed:!1,canBeInstalled:!1});(0,f.useEffect)((()=>{const e=()=>{c({type:"installed"}),s(i.Ru.get("pwa.confirm"));const e={action_type:"unknown",action_intent:"pwa-installed",target_uri:"/pwa-install-confirmation",item_id:"pwa",view_uri:"/unknown",page:"/page"};a.send(r?Ui(e):Bi(e))},t=e=>{e.preventDefault(),c({type:"before-install",prompt:e})};return window.addEventListener("beforeinstallprompt",t),window.addEventListener("appinstalled",e),()=>{window.removeEventListener("beforeinstallprompt",t),window.removeEventListener("appinstalled",e)}}),[n,s,a,r]);const l=(0,f.useCallback)((n=>{if(n.preventDefault(),t&&e){const n=t.installPwaButtonFactory().hitInstallApp({appName:"pwa"});e.logInteraction(n)}o.deferredPrompt&&o.deferredPrompt.prompt()}),[t,e,o.deferredPrompt]),{canBeInstalled:u,installed:h}=o;return!u||h?null:(0,S.jsx)(Ar.$,{colorSet:"overMedia",size:"small",onClick:l,iconLeading:zi.i,children:(0,S.jsx)(Dr.E,{variant:"bodySmallBold",className:"ellipsis-one-line",children:i.Ru.get("pwa.download-app")})})}));var $i=o(74990);const Qi=f.memo((({shouldCalloutPWA:e,spec:t,logger:n})=>{const a=(0,f.useCallback)((()=>{if(!t||!n)return;const e=t.installAppButtonFactory().hitNavigateToExternalUri({destination:"/download"});n.logInteraction(e)}),[n,t]),[r,s]=(0,f.useState)(!1),o=(0,f.useRef)(null);if((0,$i.w)({onResize:({width:e})=>{o.current?.scrollWidth&&e<o.current?.scrollWidth?s(!0):s(!1)},refOrElement:o}),!e){const e=(0,S.jsx)(_r.H,{size:"small",href:"/download",iconLeading:zi.i,onClick:a,component:Vi.v,children:(0,S.jsx)(Dr.E,{variant:"bodySmallBold",className:"ellipsis-one-line",ref:o,children:i.Ru.get("navbar.install-app")})});return r?(0,S.jsx)(Sr.Zp,{label:i.Ru.get("navbar.install-app"),children:e}):e}return(0,S.jsx)(Gi,{logger:n,spec:t})}));var Ki=o(24053),Zi=o(29586),Yi=o(69270),Ji=o(46032),Xi=o(44500);const es={isCTA:!1,placement:Zi.D.bottomLeft,shouldHideOnOutsideClick:({triggerAction:e})=>!e||e.type!==Xi.Gs,getTitle:({triggerAction:e})=>e?.type===Ji.no.SAVE_PRERELEASE?i.Ru.get("action-trigger.log-in-or-sign-up"):i.Ru.get("action-trigger.logged-out"),getDescription:({triggerAction:e})=>{switch(e?.type){case Ki.gK.ADD_TO_QUEUE:return i.Ru.get("action-trigger.logged-out-queue");case Ji.$k.START_RADIO:return i.Ru.get("action-trigger.logged-out-radio");case Ji.no.SAVE_TRACK:return i.Ru.get("action-trigger.log-in-like-action");case Ji.no.SAVE_ALBUM:return i.Ru.get("action-trigger.save-album");case Ji.no.SAVE_PRERELEASE:return i.Ru.get("web-player.prerelease.album_anonymous_presave");case Ji.tf.FOLLOW_USER:return i.Ru.get("action-trigger.log-in-follow-profile");case Xi.Gs:return"track"===e?.entityType?i.Ru.get("action-trigger.logged-out-full-track"):i.Ru.get("action-trigger.logged-out-synced");default:return i.Ru.get("action-trigger.logged-out-continue")}}},ts=({children:e})=>(0,S.jsx)(Zi.y,{id:Yi.d,options:es,children:e});var ns=o(1110),as=o(24346);const rs=({...e})=>{const{spec:t}=(0,ns.D)(Er.x,{}),n=(0,f.useMemo)((()=>t.upgradeButtonFactory()),[t]),a=(0,as.t)(n);return(0,S.jsx)(Ar.$,{...e,style:{flexShrink:0},ref:a,size:"small",onClick:e.onClick,"aria-label":i.Ru.get("upgrade.tooltip.title"),title:i.Ru.get("upgrade.tooltip.title"),colorSet:"invertedLight","":"upgrade-button",children:i.Ru.get("upgrade.button")})};var is=o(23806),ss=o(95325),os=o(93987),cs=o(17473),ls=o(35691);const us="music",ds="3.1.0",hs="default",ps="12.2.0";function ms(e){return new fs(e)}class fs{constructor(e){this._path=[{name:"desktop-user-widget-menu"}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}goToAccountPageRowFactory(){return new fs.GoToAccountPageRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}goToUserProfileRowFactory(){return new fs.GoToUserProfileRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}openEmployeePodcastModalRowFactory(){return new fs.OpenEmployeePodcastModalRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}goToUpgradePlanPageRowFactory(){return new fs.GoToUpgradePlanPageRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}togglePrivateSessionRowFactory(){return new fs.TogglePrivateSessionRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}goToSettingsRowFactory(){return new fs.GoToSettingsRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}goToInAppMessagingRowFactory(){return new fs.GoToInAppMessagingRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}updateClientRowFactory(){return new fs.UpdateClientRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}logOutRowFactory(){return new fs.LogOutRowEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}goToPlanManagementFactory(){return new fs.GoToPlanManagementEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hs,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ds,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}impression(){return{app:us,generatorVersion:ps,specificationVersion:ds,specificationMode:hs,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}!function(e){e.GoToAccountPageRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"go_to_account_page_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hs,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ds,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:us,generatorVersion:ps,interactionType:"hit",specificationMode:hs,specificationVersion:ds,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(fs||(fs={})),function(e){e.GoToUserProfileRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"go_to_user_profile_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hs,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ds,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:us,generatorVersion:ps,interactionType:"hit",specificationMode:hs,specificationVersion:ds,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(fs||(fs={})),function(e){e.OpenEmployeePodcastModalRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"open_employee_podcast_modal_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hs,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ds,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:us,generatorVersion:ps,interactionType:"hit",specificationMode:hs,specificationVersion:ds,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(fs||(fs={})),function(e){e.GoToUpgradePlanPageRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"go_to_upgrade_plan_page_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hs,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ds,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitNavigateToExternalUri({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"navigate_to_external_uri",actionVersion:1,app:us,generatorVersion:ps,interactionType:"hit",specificationMode:hs,specificationVersion:ds,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(fs||(fs={})),function(e){e.TogglePrivateSessionRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"toggle_private_session_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hs,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ds,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitSetSettingField(){return{actionName:"set_setting_field",actionVersion:1,app:us,generatorVersion:ps,interactionType:"hit",specificationMode:hs,specificationVersion:ds,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(fs||(fs={})),function(e){e.GoToSettingsRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"go_to_settings_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hs,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ds,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:us,generatorVersion:ps,interactionType:"hit",specificationMode:hs,specificationVersion:ds,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(fs||(fs={})),function(e){e.GoToInAppMessagingRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"go_to_in_app_messaging_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hs,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ds,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:us,generatorVersion:ps,interactionType:"hit",specificationMode:hs,specificationVersion:ds,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(fs||(fs={})),function(e){e.UpdateClientRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"update_client_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hs,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ds,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:us,generatorVersion:ps,interactionType:"hit",specificationMode:hs,specificationVersion:ds,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(fs||(fs={})),function(e){e.LogOutRowEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"log_out_row"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hs,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ds,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitLogout(){return{actionName:"logout",actionVersion:1,app:us,generatorVersion:ps,interactionType:"hit",specificationMode:hs,specificationVersion:ds,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(fs||(fs={})),function(e){e.GoToPlanManagementEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"go_to_plan_management"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hs,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[ds,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitNavigateToExternalUri({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"navigate_to_external_uri",actionVersion:1,app:us,generatorVersion:ps,interactionType:"hit",specificationMode:hs,specificationVersion:ds,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(fs||(fs={}));var gs=o(35015),bs=o(20089),vs=o(96282),ys=o(26705);function xs(e,t){return t?(0,ys.r)(e):(0,vs._)(e)}var ws=o(69413),_s=o(22264),As=o(24829);const Es=({divider:e,visible:t})=>{const n=(0,ge.vh)(),a=(0,qi.V)(),r=(0,f.useCallback)((()=>{n.send(xs({category:"masthead",action:"click",label:"download-link",destination_url:_s.Kw,context:window.location.href,os:(0,As.f)(),variant:"a"},a))}),[n,a]);return t?(0,S.jsx)(bs.D,{divider:e,role:"menuitem",href:_s.Kw,onClick:r,target:"_blank",trailingIcon:(0,S.jsx)(ws.p,{size:"small"}),children:i.Ru.get("download.download")}):null};var js=o(40074),Ss=o(92061);const Cs=({divider:e,ubiLogger:t,ubiSpec:n})=>{const a=(0,d.wA)(),r=(0,Ss.k)(),{url:s,isExternal:o}=r,c=(0,f.useCallback)((()=>{t.logInteraction(n.goToUpgradePlanPageRowFactory().hitNavigateToExternalUri({destination:s})),a((0,js.d)({action_type:"gtm.upgradeClick",action_intent:"upgrade-dwp",item_id:"dwp-top-bar",view_uri:""}))}),[t,n,s,a]);return o?(0,S.jsx)(bs.D,{divider:e,role:"menuitem",trailingIcon:(0,S.jsx)(ws.p,{size:"small"}),onClick:c,target:"_blank",href:s,children:i.Ru.get("navbar.premium")}):(0,S.jsx)(bs.D,{divider:e,role:"menuitem",onClick:c,to:s,children:i.Ru.get("navbar.premium")})},Is=({divider:e,visible:t})=>{const n=(0,ge.vh)(),a=(0,qi.V)(),r=(0,f.useCallback)((()=>{n.send(xs({category:"masthead",action:"click",label:"support-link",destination_url:_s.nw,context:window.location.href,os:(0,As.f)(),variant:"a"},a))}),[n,a]);return t?(0,S.jsx)(bs.D,{divider:e,role:"menuitem",href:_s.nw,onClick:r,target:"_blank",trailingIcon:(0,S.jsx)(ws.p,{size:"small"}),children:i.Ru.get("user.support")}):null},Ns="8px",ks="main-userWidget-box",Ls="main-userWidget-box",Ts="main-userWidget-dropDownMenu",Rs="main-avatar-avatar",Ps="main-userWidget-screenReaderOnly",Ms="main-userWidget-notificationDot",Os="tU7KjNh_lnoniCY_3zHQ",Ds="kD6L2BtiukbMHbIwCNef",Hs="main-userWidget-unableToUpdate",zs="FZ4y0Q61kFpjJzUjCvSa",Vs="main-userWidget-setupPlan",Bs="main-userWidget-hasAvatar",Us=()=>{const e=(0,d.d4)((e=>e.platform.isDesktop)),{spec:t,logger:n}=(0,Ei.r)(ms,{});return(0,f.useEffect)((()=>{n.logImpression(t.impression())}),[n,t]),e?null:(0,S.jsx)("div",{className:Ts,children:(0,S.jsxs)(gs.W,{children:[(0,S.jsx)(Cs,{ubiSpec:t,ubiLogger:n}),(0,S.jsx)(Is,{visible:!0}),(0,S.jsx)(Es,{visible:!0})]})})};function Fs(e){if(null===e)return null;const t=e["multiuserplan-member-type"],n=parseInt(e["multiuserplan-current-size"]||"1",10);switch(t){case"FAMILY_MANAGER":return{plan:"family",currentSize:n};case"DUO_MANAGER":return{plan:"duo",currentSize:n};default:return null}}var qs=o(81419);const Ws=({displayAvatar:e})=>(0,S.jsxs)("div",{className:zs,children:[(0,S.jsx)("span",{className:Ps,children:i.Ru.get("user.update-available")}),(0,S.jsx)(qs.Z,{className:Gt()(Ms,{[Os]:!e},Ds)})]});var Gs=o(9820);const $s=`${_s.xD}?utm_source=spotify&utm_medium=menu&utm_campaign=your_account`,Qs=({divider:e,ubiLogger:t,ubiSpec:n})=>{const{openURLWithSessionTransfer:a}=(0,Gs.L)();return(0,S.jsx)(bs.D,{divider:e,role:"menuitem",trailingIcon:(0,S.jsx)(ws.p,{size:"small"}),onClick:()=>{t.logInteraction(n.goToAccountPageRowFactory().hitUiNavigate({destination:$s})),a($s)},children:i.Ru.get("user.account")})};var Ks=o(92118),Zs=o(21405),Ys=o(38595);const Js=()=>{const{show:e}=(0,Zs.j)();return(0,Ys.R)()?(0,S.jsxs)(Ks.g,{displayText:"Debug Tools",children:[(0,S.jsx)(bs.D,{role:"menuitem",onClick:()=>e(),children:"Debug Window"}),!1,!1]}):null};var Xs=o(84579);const eo=({divider:e,ubiLogger:t,ubiSpec:n})=>{const a=(0,d.wA)(),r=(0,f.useCallback)((()=>{t.logInteraction(n.logOutRowFactory().hitLogout()),a((0,Xs.wH)())}),[a,t,n]);return(0,S.jsx)(bs.D,{divider:e,role:"menuitem",onClick:r,"":"user-widget-dropdown-logout",children:i.Ru.get("user.log-out")})},to=({divider:e,planAttributes:t,ubiSpec:n,ubiLogger:a})=>{const{openURLWithSessionTransfer:r}=(0,Gs.L)(),s="duo"===t.plan?"https://www.spotify.com/account/duo/":"https://www.spotify.com/account/family/";return(0,S.jsx)(bs.D,{divider:e,role:"menuitem",trailingIcon:(0,S.jsx)(ws.p,{size:"small"}),onClick:()=>{a.logInteraction(n.goToPlanManagementFactory().hitNavigateToExternalUri({destination:s})),r(s)},children:(0,S.jsxs)("span",{className:Vs,children:["duo"===t.plan?i.Ru.get("user.setup-duo"):i.Ru.get("user.setup-family"),t.currentSize<=1&&(0,S.jsx)(qs.Z,{className:Ms,name:"dot-icon"})]})})},no=({visible:e,divider:t,ubiSpec:n,ubiLogger:a})=>{const{isPrivateSession:r,setPrivateSession:s}=Mi(),o=(0,f.useCallback)((()=>{a.logInteraction(n.togglePrivateSessionRowFactory().hitSetSettingField()),s(!r)}),[s,r,a,n]);return e?(0,S.jsx)(bs.D,{divider:t,role:"menuitemcheckbox","aria-checked":r,onClick:o,children:i.Ru.get("user.private-session")}):null},ao="/preferences",ro=({divider:e,ubiLogger:t,ubiSpec:n})=>(0,S.jsx)(bs.D,{divider:e,role:"menuitem",to:ao,onClick:()=>{t.logInteraction(n.goToSettingsRowFactory().hitUiNavigate({destination:ao}))},children:i.Ru.get("user.settings")}),io=({divider:e,ubiLogger:t,ubiSpec:n})=>{const a=(0,kr.k)(),r=(0,Nr.t)(),s=(0,f.useCallback)((()=>{t.logInteraction(n.updateClientRowFactory().hitUiHide()),r.applyUpdate()}),[r,t,n]);return a?.state!==Lr.D.UPDATE_READY?null:(0,S.jsx)(bs.D,{divider:e,role:"menuitem",onClick:s,trailingIcon:(0,S.jsx)(qs.Z,{className:Ms}),"":"user-widget-update-available",children:i.Ru.get("user.update-client")})},so=({divider:e})=>{const t=(0,d.wA)(),n=(0,f.useCallback)((e=>{e.preventDefault(),t((0,l.as)())}),[t]);return(0,S.jsx)(bs.D,{divider:e,role:"menuitem",trailingIcon:(0,S.jsx)(qs.Z,{className:Hs}),onClick:n,href:"",target:"_blank",children:i.Ru.get("user.unable-to-update")})};var oo=o(88231),co=o(75028);const lo=({divider:e,ubiLogger:t,ubiSpec:n})=>{const a=(0,d.wA)(),r=(0,oo.D)("loggedin_upgrade_menu"),s=(0,Ss.k)(),{url:o,isExternal:c}=s,l=(0,f.useCallback)((()=>{t.logInteraction(n.goToUpgradePlanPageRowFactory().hitNavigateToExternalUri({destination:o})),a((0,js.d)({action_type:"gtm.upgradeClick",action_intent:"upgrade-dwp",item_id:"dwp-top-bar",view_uri:""}))}),[a,o,t,n]);return(0,d.d4)((e=>(0,co.Yb)(e)))?c?(0,S.jsx)(bs.D,{divider:e,role:"menuitem",trailingIcon:(0,S.jsx)(ws.p,{size:"small"}),onClick:l,target:"_blank",href:r(o),children:i.Ru.get("upgrade.tooltip.title")}):(0,S.jsx)(bs.D,{divider:e,role:"menuitem",onClick:l,to:r(o),children:i.Ru.get("upgrade.tooltip.title")}):null},uo=({divider:e,ubiSpec:t,ubiLogger:n})=>{const a=(0,d.d4)((e=>e.session.user?.uri)),r=(0,R.z)();if(!a)return null;const s=(0,X.o_h)(a).toURLPath(!0);return(0,S.jsx)(bs.D,{divider:e,role:"menuitem",to:s,onClick:()=>{n.logInteraction(t.goToUserProfileRowFactory().hitUiNavigate({destination:s})),r.setReferrer("user_profile")},children:i.Ru.get("card.tag.profile")})};var ho=o(8335);const po="KROerAKSuwZBbse9iJT_",mo="Sv1KnjVg3ekpKXQ06hx1",fo="lgapDocKw68LlwEMOEe_",go="X0f9yl0vfdlQU4bX4p2Q",bo="ELJKm9oK4ojPrEohxqWu",vo="GRIcLOxMVgF_nrfnY4Uv",yo="ECeOpd1vpoOavSRlnAvd",xo="eUqphQq1C_Rpj86v0C76",wo="q_y6r1A1e8D5uNZ_Menz",_o="jG4F9TThOut3mIchASGW",Ao="SuKZtj8PyNFy4RV6GSem",Eo="SO8ZVeRnaa3OYx4hD5WZ",jo="FSi_NkGvBacIY9AQ3Enf",So="RRTp4ESOekxPGhzyjzt5",Co="KFhPNPSqzSZjHtAi0Kqz",Io="O84I6j6mdxtM8lakjPzR",No="WATiQKibA4mYnP3g6KaM",ko="y77CgOUQOe6c5bjVe4GX",Lo="QeUrkqvHAbXSveKN2wCu",To=()=>(0,S.jsx)("div",{className:Gt()(go,bo,vo),children:(0,S.jsx)(Dr.E,{semanticColor:"textSubdued",variant:"marginal",children:i.Ru.get("web-player.notification-center.empty-state")})});var Ro=o(21711);const Po=({lastItemRef:e})=>(0,S.jsx)("div",{className:Gt()(go,bo),ref:e,children:(0,S.jsx)(Ro.a3,{semanticColor:"textSubdued","aria-labelledby":i.Ru.get("page.loading")})});var Mo=o(6001),Oo=o(63151);const Do=({primaryImages:e})=>(0,S.jsx)("div",{className:_o,children:e.length>1?(0,S.jsx)("div",{className:jo,children:e.map(((t,n)=>(0,S.jsx)("div",{className:So,style:{zIndex:e.length-n},children:(0,S.jsx)(cs.e,{imageClassName:xo,placeholderClassName:xo,label:"notificationAvatar",width:32,images:[{url:t.image_url}],userIconSize:"medium",username:t.displayName,displayName:t.displayName})},n)))}):(0,S.jsx)(cs.e,{images:e.map((e=>({url:e.image_url}))),userIconSize:"large",label:"notificationAvatar",width:48,username:e[0]?.displayName,displayName:e[0]?.displayName})}),Ho=({primaryImage:e,secondaryImage:t})=>(0,S.jsxs)("div",{className:_o,children:[(0,S.jsx)(Mo.b,{className:Ao,images:[{url:e.image_url}],iconSize:"medium",size:Oo.Qe.SIZE_40,type:nr.c.PLAYLIST,title:e.displayName}),(0,S.jsx)(cs.e,{className:Eo,imageClassName:xo,placeholderClassName:xo,label:"notificationAvatar",width:24,images:[{url:t.image_url}],userIconSize:"small",username:t.displayName,displayName:t.displayName})]});var zo=o(56386),Vo=o.n(zo),Bo=o(98479),Uo=o(55158);const Fo=({title:e,timestamp:t})=>{let n=0;const a=(0,f.useRef)(null),r=(0,Bo.K)({ref:a}),i=(0,f.useMemo)((()=>(0,Uo.Z)(Date.parse(t)).replace(/\s+/g,"")),[t]);return(0,S.jsxs)("div",{className:Co,children:[(0,S.jsx)(Dr.E,{variant:"bodySmall",semanticColor:"textBase",style:{"--timestamp-text":`'${i}'`},className:No,ref:a,children:Vo()(e.text?.text,/(\$\d+)/g,((t,a)=>{const r=(0,S.jsx)(Dr.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e.text_values[n].text},a);return n++,r}))}),r&&(0,S.jsx)(Dr.E,{variant:"marginal",semanticColor:"textSubdued",className:Io,children:i})]})},qo=()=>(0,S.jsx)("div",{className:Lo});let Wo=function(e){return e.UNKNOWN_STATE="UNKNOWN_STATE",e.UNREAD="UNREAD",e.READ="READ",e.CLICKED="CLICKED",e[e.UNRECOGNIZED=NaN]="UNRECOGNIZED",e}({});const Go=({notification:e,markAsRead:t})=>{const{ref:n,inView:a}=(0,ho.Wx)();return(0,f.useEffect)((()=>{a&&e.state===Wo.UNREAD&&t(e.notification_id)}),[a,t,e.notification_id,e.state]),(0,S.jsxs)("div",{className:wo,ref:n,children:[(0,S.jsx)(Do,{primaryImages:e.primary_images}),(0,S.jsx)(Fo,{title:e.title,timestamp:e.event_timestamp}),e.state===Wo.UNREAD&&(0,S.jsx)("div",{className:ko,children:(0,S.jsx)(qo,{})})]})},$o=({notification:e,markAsRead:t})=>{const{ref:n,inView:a}=(0,ho.Wx)();return(0,f.useEffect)((()=>{a&&e.state===Wo.UNREAD&&t(e.notification_id)}),[a,t,e.notification_id,e.state]),(0,S.jsxs)("div",{className:wo,ref:n,children:[(0,S.jsx)(Ho,{primaryImage:e.primary_image,secondaryImage:e.secondary_image}),(0,S.jsx)(Fo,{title:e.title,timestamp:e.event_timestamp}),e.state===Wo.UNREAD&&(0,S.jsx)("div",{className:ko,children:(0,S.jsx)(qo,{})})]})};var Qo=o(69881),Ko=o(78814);const Zo=async(e,t)=>{const n=Qo.n.getInstance();await n.build().withHost(Ko.dv).withJsonContentType().withoutMarket().withMethod("POST").withBody({notification_ids:e,state:t}).withPath("/UpdateNotificationState").send()};var Yo=o(44983);const Jo=()=>{const{data:e,isLoading:t,fetchNextPage:n,hasNextPage:a}=(0,Yo.q)({queryKey:["notifications"],queryFn:async({pageParam:e})=>await(async e=>{const t=Qo.n.getInstance();return(await t.build().withHost(Ko.dv).withJsonContentType().withoutMarket().withMethod("POST").withBody({check_further_unread:!0,cursor:e,limit:20}).withPath("/GetNotifications").send()).body})(e),initialPageParam:void 0,getPreviousPageParam:e=>e.reverse_cursor,getNextPageParam:e=>e.forward_cursor,gcTime:18e5,staleTime:6e5});return{notifications:e?.pages.map((e=>e.notifications)).flat()??[],isLoading:t,hasNextPage:a,fetchNextPage:n}};var Xo=o(86261),ec=o(72816);const tc=({notifications:e,fetchNextPage:t,hasNextPage:n})=>{const a=(0,ot.g)(),r=(0,h.Oj)(),{ref:s,inView:o}=(0,ho.Wx)();(0,f.useEffect)((()=>{o&&t()}),[t,o]);const c=(0,f.useCallback)((async e=>{Zo([e],Wo.READ)}),[]),l=(0,f.useCallback)((async e=>{Zo([e],Wo.CLICKED)}),[]),u=(0,f.useCallback)((e=>{const t="COMMENT_REACT"===e.single_notification?.event_type||"COMMENT_REPLY"===e.single_notification?.event_type?(e=>{const t=(0,X.o_h)(e,{parseUnknown:!0});return"unknown"===t?.type&&t.args?(0,X.iMK)(t.args.at(3)??"").toURI():""})(e.single_notification?.action?.uri??""):e.single_notification?.action?.uri??e.double_notification?.action?.uri;if(t){const e=(0,X.o_h)(t).toURLPath(!0);a(e),r({type:"close"})}}),[r,a]),d=(0,f.useCallback)((()=>e.map(((e,t)=>{const n=e.single_notification?.notification_id??e.double_notification?.notification_id;return(0,S.jsx)(ec.u,{children:(0,S.jsx)(Xo.H,{role:"menuitem",className:Gt()(go,yo),onClick:()=>{l(n),u(e)},children:(a=e,Object.prototype.hasOwnProperty.call(a,"single_notification")?(0,S.jsx)(Go,{notification:e.single_notification,markAsRead:c}):(0,S.jsx)($o,{notification:e.double_notification,markAsRead:c}))})},t);var a}))),[l,c,u,e]);return(0,S.jsxs)("div",{className:po,children:[(0,S.jsx)(Dr.E,{variant:"bodyMediumBold",semanticColor:"textBase",className:fo,children:i.Ru.get("web-player.notification-center.button-label")}),e.length>0?(0,S.jsxs)("div",{className:mo,children:[d(),n&&(0,S.jsx)(Po,{lastItemRef:s})]}):(0,S.jsx)(To,{})]})},nc=()=>{const{notifications:e,isLoading:t,hasNextPage:n,fetchNextPage:a}=Jo();return t?(0,S.jsx)("div",{className:po,children:(0,S.jsx)(Po,{})}):(0,S.jsx)(tc,{notifications:e,hasNextPage:n,fetchNextPage:a})};var ac=o(32728);const rc=()=>{const{setIsGlobalNavDraggable:e}=(0,f.useContext)(xr),n=(0,d.d4)((e=>e.platform.isDesktop)),{spec:a,logger:r}=(0,Ei.r)(ms,{});(0,f.useEffect)((()=>{r.logImpression(a.impression())}),[r,a]),(0,f.useEffect)((()=>(e?.(!1),()=>{e?.(!0)})),[e]);const i=(0,ac.k)(),s=Fs(i.data),o=(0,t.NC)(we.y2l);return(0,S.jsx)("div",{"":"user-widget-menu",className:Ts,children:(0,S.jsxs)(gs.W,{children:[(0,S.jsx)(Qs,{ubiSpec:a,ubiLogger:r}),s&&(0,S.jsx)(to,{planAttributes:s,ubiSpec:a,ubiLogger:r}),(0,S.jsx)(uo,{ubiSpec:a,ubiLogger:r}),(0,S.jsx)(lo,{ubiSpec:a,ubiLogger:r}),(0,S.jsx)(Is,{visible:!0}),(0,S.jsx)(Es,{visible:!n}),(0,S.jsx)(no,{visible:n,ubiSpec:a,ubiLogger:r}),(0,S.jsx)(ro,{divider:"after",ubiSpec:a,ubiLogger:r}),i?.data?.["client-deprecated"]&&(0,S.jsx)(so,{}),(0,S.jsx)(io,{ubiSpec:a,ubiLogger:r})," ",(0,S.jsx)(Js,{}),(0,S.jsx)(eo,{ubiSpec:a,ubiLogger:r,divider:o?"after":void 0}),o&&(0,S.jsx)(nc,{})]})})},ic="Mfd_Z1fq10XbJnN0Fz6C",sc="bLHetMTwwHHeDXIUjSYi",oc="mbYYWaWS05FffVjDSqQP",cc=({percentage:e,label:t})=>(0,S.jsx)("div",{className:ic,style:{"--onboarding-circle-percentage":`${e}%`},children:(0,S.jsx)("div",{className:sc,children:(0,S.jsx)(Dr.E,{as:"span",variant:"titleSmall",semanticColor:"textSubdued",className:oc,children:t})})});var lc=o(80054);const uc="music",dc="3.0.0",hc="default",pc="16.2.6";function mc(e){return new fc(e)}class fc{constructor(e){this._path=[{name:"desktop-onboarding-checklist-menu"}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}tasksFactory(){return new fc.TasksEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}snackbarFactory(e){return new fc.SnackbarEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hc,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[dc,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}impression(){return{app:uc,generatorVersion:pc,specificationVersion:dc,specificationMode:hc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}!function(e){e.TasksEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"tasks"}),t&&(this._parentAbsoluteLocation=t)}taskItemFactory(t){return new e.TasksEventFactory.TaskItemEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:t})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hc,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[dc,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}}(fc||(fc={})),function(e){e.SnackbarEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({...n,name:"snackbar"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hc,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[dc,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:uc,generatorVersion:pc,interactionType:"hit",specificationMode:hc,specificationVersion:dc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:uc,generatorVersion:pc,interactionType:"hit",specificationMode:hc,specificationVersion:dc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}impression(){return{app:uc,generatorVersion:pc,specificationVersion:dc,specificationMode:hc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(fc||(fc={})),function(e){!function(e){e.TaskItemEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({...n,name:"task_item"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[hc,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[dc,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitFocusInputField(){return{actionName:"focus_input_field",actionVersion:1,app:uc,generatorVersion:pc,interactionType:"hit",specificationMode:hc,specificationVersion:dc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:uc,generatorVersion:pc,interactionType:"hit",specificationMode:hc,specificationVersion:dc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:uc,generatorVersion:pc,interactionType:"hit",specificationMode:hc,specificationVersion:dc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitCreatePlaylist(){return{actionName:"create_playlist",actionVersion:1,app:uc,generatorVersion:pc,interactionType:"hit",specificationMode:hc,specificationVersion:dc,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(e.TasksEventFactory||(e.TasksEventFactory={}))}(fc||(fc={}));var gc=o(97229);const bc="kRu_9FQvlKWWUwxVan3v",vc="OsPgVNwb3Fo6F1g2_hh0",yc="OImI6hJyJdsS02FJ98YU",xc="jGlYiZsdrAJfB3k6icct",wc="vlZ81rdxwEATJEumDZxh",_c="vAQqVvJRN5rwYjjHlxOT",Ac="ijX3uYDojJHVt3RI6c8t",Ec=()=>{const{tasks:e,performTask:t}=(0,gc.V)(),n=(0,h.Oj)(),{spec:a,logger:r}=(0,Ei.r)(mc,{});(0,f.useEffect)((()=>{r.logImpression(a.impression())}),[]);const i=e=>{t(e,(()=>{(e=>{const t=a.tasksFactory().taskItemFactory({identifier:e});switch(e){case"start-playing":r.logInteraction(t.hitFocusInputField());break;case"save-playlist":case"watch-a-video":r.logInteraction(t.hitUiNavigate({destination:"/search"}));break;case"create-playlist":r.logInteraction(t.hitCreatePlaylist());break;default:r.logInteraction(t.hitUiReveal())}})(e),n({type:"close"})}))};return(0,S.jsx)(f.Fragment,{children:e.map((e=>{const t=e.completed?lc.k:e.icon;return(0,S.jsx)(ec.u,{onKeyDown:t=>{if("Enter"===t.key){if(t.preventDefault(),e.completed)return;i(e.id)}},children:(0,S.jsxs)("div",{role:"button","aria-disabled":e.completed,className:Gt()(bc,{[vc]:e.completed}),children:[(0,S.jsx)("div",{className:yc,children:(0,S.jsx)(t,{size:"large"})}),(0,S.jsxs)("div",{className:wc,children:[(0,S.jsxs)("div",{className:_c,children:[(0,S.jsx)(Dr.E,{as:"h3",variant:"bodyMediumBold",semanticColor:"textBase",className:Ac,children:e.title}),(0,S.jsx)("div",{className:xc,children:e.action&&(0,S.jsx)(Ar.$,{size:"small",disabled:e.completed,onClick:()=>i(e.id),children:e.action})})]}),(0,S.jsx)(Dr.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:e.description})]})]})},e.id)}))})};var jc=o(98264);const Sc="R1LAYqlvoHyvSWVzo0lh",Cc="WnBTuOeFRF5dfvTx4eJV",Ic="hrs25CWx5fvA930Z7m3M",Nc="rwRzCTrfDh28F0JEWJ9U",kc=()=>{const{completed:e,count:t,percentage:n}=(0,jc.o)(),a=e===t;return(0,S.jsxs)(gs.W,{className:Sc,children:[(0,S.jsx)("li",{children:(0,S.jsxs)("header",{className:Cc,children:[(0,S.jsxs)("div",{className:Ic,children:[(0,S.jsx)(Dr.E,{as:"h3",variant:"titleMedium",semanticColor:"textBase",children:a?i.Ru.get("web-player.onboarding-checklist.menu.title.complete"):i.Ru.get("web-player.onboarding-checklist.menu.title")}),(0,S.jsx)(Dr.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:a?i.Ru.get("web-player.onboarding-checklist.menu.text.complete"):i.Ru.get("web-player.onboarding-checklist.menu.text")})]}),(0,S.jsx)("div",{className:Nc,children:(0,S.jsx)(cc,{percentage:n,label:i.Ru.get("web-player.onboarding-checklist.progress",{completed:e,count:t})})})]})}),(0,S.jsx)(Ec,{})]})};var Lc=o(49225),Tc=o(36828),Rc=o(53752);const Pc=({taskId:e,onShowChecklist:t})=>{const{spec:n,logger:a}=(0,Ei.r)(mc,{});return(0,f.useEffect)((()=>{a.logImpression(n.snackbarFactory({identifier:e}).impression())}),[]),(0,S.jsx)(Lc.O,{children:(0,S.jsx)(Rc.P,{center:(0,S.jsx)(Tc.z,{children:i.Ru.get("web-player.onboarding-checklist.snackbar.message")}),trailing:(0,S.jsx)(_r.H,{semanticColor:"textBrightAccent",onClick:t,condensedAll:!0,"aria-hidden":"true",children:i.Ru.get("web-player.onboarding-checklist.snackbar.action")})})})};var Mc=o(81302),Oc=o(50920),Dc=o(30752),Hc=o(70650),zc=o(62834),Vc=o(12681);var Bc=o(85931);const Uc="oA573BNFb8S9eT2dC_11",Fc="ZLmgOlSW3zMXC4WLEFQ_",qc="cHDUBxSE2gSd9dYJbMMB",Wc="NCv0D4jsAJZQqnwZafDJ",Gc="XPCpAdXbyFFm77bvi0Yg",$c="By9LfOps_25hkeyFZcyQ",Qc="RziMgLvhmVlp7IVq7xvN",Kc="W6hUg4cqx063fqJBsujV",Zc=({userDisplayName:e,avatarContent:t,showUpdateNotification:n,displayAvatar:a,onAvatarClick:r})=>{const[s,o]=(0,f.useState)(null),{completed:c,count:l,percentage:u}=(0,jc.o)(),h=(0,f.useRef)(null);return(()=>{const{completeTask:e,isTaskCompleted:t}=(0,gc.V)(),{enqueueCustomSnackbar:n}=(0,Oc.i)(),a=(0,Mc.S)(),r=(0,f.useCallback)((()=>{a("openChecklist",{})}),[a]),i=(0,f.useCallback)((t=>{e(t),n((0,S.jsx)(Pc,{taskId:t,onShowChecklist:r}),{identifier:"onboarding-checklist"})}),[e,n,r]);(0,V.p)(z.gd.QUEUE_ACTION,(e=>{t("queue-it-up")||"add"===e.data.action&&i("queue-it-up")}));const s=t("watch-a-video"),o=(0,pr.o)((e=>"video"===e?.item?.mediaType&&(0,Hc.uW)(e)===Dc.i.PLAYING));(0,f.useEffect)((()=>{o&&!s&&i("watch-a-video")}),[i,s,o]);const c=t("start-playing"),l=(0,pr.o)((e=>"audio"===e?.item?.mediaType&&(0,Hc.uW)(e)===Dc.i.PLAYING));(0,f.useEffect)((()=>{l&&!c&&i("start-playing")}),[i,c,l]);const u=t("save-playlist");(0,zc.b)(Vc.tD.OPERATION_COMPLETE,(e=>{u||"add"===e.data.operation&&e.data.uris.some(X.tbX)&&i("save-playlist")}));const h=t("create-playlist");(0,zc.b)(Vc.tD.OPERATION_COMPLETE,(e=>{h||"create_playlist"===e.data.operation&&i("create-playlist")}));const p=t("become-a-pro"),m=(0,d.d4)((e=>e.ui.keyboardShortcutsHelpModal.isOpen));(0,f.useEffect)((()=>{m&&!p&&i("become-a-pro")}),[i,p,m]);const{isOpen:g}=(0,Ka.H)(),b=t("try-mini-player");(0,f.useEffect)((()=>{g&&!b&&i("try-mini-player")}),[i,b,g])})(),((e,t)=>{const n=(0,Bc.R)(),a=(0,f.useRef)(t);(0,f.useEffect)((()=>{a.current=t}),[t]),(0,f.useEffect)((()=>n.addListener(e,(e=>{a.current&&a.current(e)}))),[e,n])})("openChecklist",(()=>{const e=h.current;if(!e)return;const t=e.querySelector("button");t?.click()})),(0,S.jsxs)("div",{className:Gt()(Uc,{[Fc]:"onboarding"===s,[qc]:"user"===s}),children:[(0,S.jsx)("div",{className:$c,ref:h,children:(0,S.jsx)(ls.b,{onHide:()=>o(null),onShow:()=>o("onboarding"),offset:[0,8],placement:"bottom-end",menu:(0,S.jsx)(kc,{}),children:(e,t,n)=>(0,S.jsx)(Sr.Zp,{label:i.Ru.get("web-player.onboarding-checklist.widget.tooltip"),children:(0,S.jsx)(_r.H,{ref:n,className:Kc,condensedAll:!0,"aria-label":i.Ru.get("web-player.onboarding-checklist.widget.tooltip"),style:{"--onboarding-circle-percentage":`${u}%`},onClick:e=>{t(e)},children:(0,S.jsx)("span",{className:Wc,children:i.Ru.get("web-player.onboarding-checklist.progress",{completed:c,count:l})})})})})}),(0,S.jsx)("div",{className:Gc,children:(0,S.jsx)(ls.b,{onShow:()=>o("user"),onHide:()=>o(null),offset:[0,8],placement:"bottom-end",menu:(0,S.jsx)(rc,{}),children:(i,s,o)=>(0,S.jsx)(Sr.Zp,{label:e,children:(0,S.jsxs)(_r.H,{ref:o,className:Qc,onClick:e=>{r?.(e),s(e)},condensedAll:!0,"aria-label":e,"":"user-widget-link",semanticColor:"textBase",children:[t,n&&(0,S.jsx)(Ws,{displayAvatar:a})]})})})})]})};var Yc=o(62738);const Jc=()=>{const e=(0,t.NC)(we.y2l),{data:n}=(0,Yc.I)({queryKey:["notification-unread-status"],queryFn:async()=>await(async()=>{const e=Qo.n.getInstance();return(await e.build().withHost(Ko.dv).withJsonContentType().withoutMarket().withMethod("POST").withPath("/GetUserHasUnreadNotification").send()).body})(),enabled:e,staleTime:6e5,refetchInterval:e=>!e.state.data?.userHasUnreadNotification&&108e5});return n?.userHasUnreadNotification??!1};var Xc=o(68759),el=o(54913),tl=o(71548);const nl=e=>{const n=(0,d.d4)((e=>e.session.user)),a=(0,kr.k)(),r=Fs((0,ac.k)().data),i=!!r&&r.currentSize<=1,s=(0,t.NC)(we.y2l),o=Jc(),c=s&&o,l=(0,Xc.q)(),u=(0,el.w)(),h=!l&&u.variant!==we.Vt9.Control;if(!n)return(0,S.jsx)(ls.b,{offset:[0,parseInt(Ns,10)],placement:"bottom-end",menu:(0,S.jsx)(Us,{}),children:(e,t,n)=>(0,S.jsx)("button",{className:Gt()(ks),type:"button",onClick:t,ref:n,"":"unauth-user-widget-link",children:e?(0,S.jsx)(is.M,{size:"small","aria-hidden":"true"}):(0,S.jsx)(ss.d,{size:"small","aria-hidden":"true"})})});const p=n.display_name||n.id,m=n.display_name?.charAt(0).toUpperCase(),f=!!n?.images.length||!n.display_name,g=(0,tl.nj)(n?.avatarBackgroundColor||0),b="var(--background-elevated-base)",v={backgroundColor:f?b:`#${g}`,color:os.Ql9,lineHeight:"32px"},y=f?(0,S.jsx)(cs.e,{label:p,width:n?.images.length?32:24,images:n?.images,userIconSize:"small",testID:"user-widget-avatar",transparent:!0,className:Gt()({[Bs]:n?.images.length})}):(0,S.jsx)(Dr.E,{variant:"bodySmallBold","":"username-first-letter",style:v,className:Rs,children:m}),x=a?.state===Lr.D.UPDATE_READY||i||c;return h?(0,S.jsx)(Zc,{avatarContent:y,userDisplayName:p,showUpdateNotification:x,displayAvatar:f,onAvatarClick:t=>{e.onClick?.(t)}}):(0,S.jsx)(ls.b,{offset:[0,parseInt(Ns,10)],placement:"bottom-end",menu:(0,S.jsx)(rc,{}),children:(t,n,a)=>(0,S.jsx)(Sr.Zp,{label:p,children:(0,S.jsxs)(_r.H,{className:Ls,onClick:t=>{e.onClick?.(t),n(t)},style:{backgroundColor:b},ref:a,condensedAll:!0,"aria-label":p,"":"user-widget-link",semanticColor:"textBase",children:[y,x&&(0,S.jsx)(Ws,{displayAvatar:f})]})})})};var al=o(36849);function rl(e){var t,n,a,r,i,s=e.size?al.$Z[e.size]:e.iconSize,o=(0,al._C)([{size:16,svgContent:"<path d='M4.538 7.513c.16-.482.42-.925.761-1.3.072-.079.159-.139.237-.21l-.2-.113a.667.667 0 0 1-.179-1l.232-.278a2.836 2.836 0 0 0 .714-1.677 2.807 2.807 0 0 0-.106-.937A2.069 2.069 0 0 0 4.853.74a2.116 2.116 0 0 0-2.415.508 2.09 2.09 0 0 0-.435.75 2.78 2.78 0 0 0-.106.937c.047.622.298 1.212.714 1.677l.232.278a.666.666 0 0 1-.179 1l-1.331.768A2.668 2.668 0 0 0 0 8.968v.034h4.347a4.305 4.305 0 0 1 .191-1.489zm10.134-.856-1.331-.768a.666.666 0 0 1-.179-1l.232-.278a2.842 2.842 0 0 0 .714-1.677 2.806 2.806 0 0 0-.106-.937A2.068 2.068 0 0 0 12.858.739a2.116 2.116 0 0 0-2.415.508 2.09 2.09 0 0 0-.435.75 2.798 2.798 0 0 0-.106.937c.047.622.298 1.212.714 1.677l.232.278a.665.665 0 0 1-.179 1l-.2.113c.078.071.165.131.237.21.342.375.6.818.76 1.3.15.48.214.984.186 1.487H16v-.034a2.667 2.667 0 0 0-1.328-2.308zm-4 6-1.331-.769a.665.665 0 0 1-.179-1l.232-.278a2.724 2.724 0 0 0 .608-2.614 2.1 2.1 0 0 0-.435-.75 2.117 2.117 0 0 0-3.124 0 2.1 2.1 0 0 0-.435.75 2.78 2.78 0 0 0-.106.937c.047.622.298 1.212.714 1.677l.232.278a.666.666 0 0 1-.179 1l-1.331.769a2.666 2.666 0 0 0-1.333 2.309V15h8v-.034a2.666 2.666 0 0 0-1.333-2.305v-.004z'/>"},{size:24,svgContent:"<path d='m16.004 19.153-2-1.153a.999.999 0 0 1-.268-1.506l.347-.417c.624-.697 1-1.581 1.071-2.515a4.167 4.167 0 0 0-.159-1.406 3.144 3.144 0 0 0-.651-1.125 3.177 3.177 0 0 0-4.687 0 3.147 3.147 0 0 0-.652 1.125 4.167 4.167 0 0 0-.159 1.406c.07.934.447 1.818 1.071 2.515l.348.417A1 1 0 0 1 9.996 18l-2 1.153a4 4 0 0 0-2 3.464v.051h12v-.05a4 4 0 0 0-1.992-3.465zm-9.151-5.472a6.164 6.164 0 0 1 .262-2.168 5.24 5.24 0 0 1 .845-1.557.992.992 0 0 1-.22-1.462l.347-.417c.624-.697 1-1.581 1.071-2.515a4.167 4.167 0 0 0-.159-1.406 3.143 3.143 0 0 0-.651-1.125 3.178 3.178 0 0 0-4.687 0 3.146 3.146 0 0 0-.652 1.125 4.167 4.167 0 0 0-.159 1.406c.07.934.447 1.818 1.071 2.515l.348.417A1 1 0 0 1 4 10l-2 1.153a4 4 0 0 0-2 3.464v.051h6.993a5.847 5.847 0 0 1-.14-.987zm15.151-2.528-2-1.153a1 1 0 0 1-.268-1.506l.347-.417c.624-.697 1-1.581 1.071-2.515a4.167 4.167 0 0 0-.159-1.406 3.143 3.143 0 0 0-.651-1.125 3.178 3.178 0 0 0-4.687 0 3.146 3.146 0 0 0-.652 1.125 4.167 4.167 0 0 0-.159 1.406c.07.934.447 1.818 1.071 2.515l.348.417a.993.993 0 0 1-.221 1.462c.368.468.654.994.845 1.557.217.701.305 1.435.262 2.168-.02.332-.068.663-.143.987H24v-.05a4 4 0 0 0-1.996-3.465z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(al.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}var il=o(16567),sl=o(35185);const ol="main-topBar-buddyFeed",cl=({onClick:e,tooltipLabel:t,ariaLabel:n,className:a,testId:r,children:i,restoreFocusKey:s,disabled:o})=>(0,S.jsx)(Sr.Zp,{label:t,children:(0,S.jsx)(_r.H,{"aria-label":n,onClick:e,size:"small",condensedAll:!0,"":r,className:Gt()(ol,a),"data-restore-focus-key":s,disabled:o,children:i})});var ll=o(84593),ul=o(83106);const dl=Te.$S.BUDDY_FEED_BUTTON_CLICK,hl=({spec:e})=>{const{isActive:t,panelSend:n}=(0,Bn.AI)(Un.Z.BuddyFeed,Un.Z.BuddyFeedOverlay),{isSupported:a}=(0,Ne.C)().getCapabilities(),r=(0,oi.n)(),s=(0,ul.K)(),o=(0,Je.s)(),c=(0,f.useCallback)((()=>{if(!a)return void(s&&o.logInteraction(e.hitUiReveal()));const r=t;n(dl),r||(0,sl.I)("BUDDY-FEED")}),[a,t,n,s,o,e]),l=(0,S.jsx)(cl,{tooltipLabel:r?i.Ru.get("buddy-feed.friend-activity"):i.Ru.get("offline.feedback-text"),ariaLabel:i.Ru.get("buddy-feed.friend-activity"),onClick:c,testId:"friend-activity-button",restoreFocusKey:Un.Z.BuddyFeed,disabled:!r,children:t?(0,S.jsx)(rl,{size:"small",semanticColor:"textBase"}):(0,S.jsx)(il.B,{size:"small"})});return a?l:s?(0,S.jsx)(ll.$,{type:"buddy-feed",children:l}):null};function pl(e){var t,n,a,r,i,s=e.size?al.$Z[e.size]:e.iconSize,o=(0,al._C)([{size:16,svgContent:"<path d='M8 0a5.5 5.5 0 0 0-5.5 5.5v3.069L.307 12.376A.75.75 0 0 0 .25 13h15.5a.75.75 0 0 0-.057-.624L13.5 8.567V5.5A5.5 5.5 0 0 0 8 0zm1.937 14.5H6.063a2 2 0 0 0 3.874 0z'/>"},{size:24,svgContent:"<path d='M9.261 21a2.75 2.75 0 1 0 5.478 0H9.26zM12 1a7.5 7.5 0 0 0-7.5 7.5v5.344L1.53 19h20.94l-2.97-5.158V8.5A7.5 7.5 0 0 0 12 1z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(al.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}function ml(e){var t,n,a,r,i,s=e.size?al.$Z[e.size]:e.iconSize,o=(0,al._C)([{size:16,svgContent:"<path d='M8 1.5a4 4 0 0 0-4 4v3.27a.75.75 0 0 1-.1.373L2.255 12h11.49L12.1 9.142a.75.75 0 0 1-.1-.374V5.5a4 4 0 0 0-4-4zm-5.5 4a5.5 5.5 0 0 1 11 0v3.067l2.193 3.809a.75.75 0 0 1-.65 1.124H10.5a2.5 2.5 0 0 1-5 0H.957a.75.75 0 0 1-.65-1.124L2.5 8.569V5.5zm4.5 8a1 1 0 1 0 2 0H7z'/>"},{size:24,svgContent:"<path d='M12 3a5.5 5.5 0 0 0-5.5 5.5v5.878L4.414 18h15.173L17.5 14.377V8.5A5.5 5.5 0 0 0 12 3zM4.5 8.5a7.5 7.5 0 1 1 15 0v5.342L23.046 20h-7.582a3.5 3.5 0 1 1-6.929 0H.955L4.5 13.844V8.5zM10.585 20a1.5 1.5 0 1 0 2.83 0h-2.83z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(al.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}var fl=o(29494),gl=o(67283),bl=o(93023),vl=o(90325),yl=o(54658);const xl="agh_IHo91VhyFTnp5BzM",wl="XVC0Gr8G4SXM0a98jbqC",_l="K8ygfuFNcx2tNcNv09JH";function Al(){const{name:e}=gl.lo;return[e]}const El=()=>{const e=(0,ot.g)(),t=(0,bl.J)(),n=(0,oi.n)(),a=(0,vl._)((e=>"/content-feed"===e.pathname)),r=a,[s,o]=(0,f.useState)(!1),{request:c}=(0,f.useContext)(Ge.j),l=(0,Nt.jE)(),{spec:u,logger:d}=(0,Ei.r)(fl.q,{});(0,f.useEffect)((()=>{let e=!1;const t=setInterval((async()=>{let t;try{t=await(0,yl.c)(c,gl.jF,{})}catch{return}if(t?.errors)return;const n=t?.data?.whatsNewFeedHasNewItems||!1;if(n&&!e){const e=u.notificationsBellToggleFactory().notificationsIndicatorFactory().impression();d.logImpression(e),o(!0),l.invalidateQueries({queryKey:Al()})}e=n}),144e5);return()=>{clearInterval(t)}}),[d,l,c,u]);const h=()=>(0,S.jsxs)("div",{className:xl,"":"notification-dot",children:[(0,S.jsx)("span",{className:wl,children:i.Ru.get("new_releases")}),(0,S.jsx)(qs.Z,{className:_l})]}),p=(0,f.useCallback)((()=>{a?(d.logInteraction(u.notificationsBellToggleFactory().hitUiNavigateBack()),t.length>1?t.goBack():e("/")):(o(!1),d.logInteraction(u.notificationsBellToggleFactory().hitUiNavigate({destination:"spotify:app:content-feed"})),e("/content-feed"))}),[a,d,u,t,e]);return(0,S.jsxs)(cl,{tooltipLabel:i.Ru.get("web-player.whats-new-feed.button-label"),ariaLabel:i.Ru.get("web-player.whats-new-feed.button-label"),testId:"whats-new-feed-button",onClick:p,disabled:!n,children:[r?(0,S.jsx)(pl,{size:"small",semanticColor:"textBase"}):(0,S.jsx)(ml,{size:"small"}),s&&(0,S.jsx)(h,{})]})};var jl=o(57783),Sl=o(48284);const Cl=(0,f.forwardRef)((({className:e},t)=>{const n=(0,Wr.W)(),a=(0,d.wA)(),r=(0,qi.V)(),{spec:s,logger:o}=(0,ns.D)(Er.x,{}),c=(0,Di.U)("(max-width: 849px)"),l=r&&c,u=(0,f.useCallback)((()=>{a((0,jr.Ai)()),n({intent:"signup",type:"click"})}),[a,n]),h=(0,f.useCallback)((()=>{a((0,jr.zL)()),n({intent:"login",type:"click"})}),[a,n]),p=(0,f.useCallback)((()=>{a((0,jr.NM)()),n({intent:"upgrade-to-premium",type:"click"})}),[a,n]),{openURLWithSessionTransfer:m}=(0,Gs.L)(),g=(0,ot.g)(),b=(e,t)=>{t?m(e):g(e)},v=(0,f.useMemo)((()=>s.upgradeButtonFactory()),[s]),y=(0,f.useMemo)((()=>s.friendFeedButtonFactory()),[s]),{shouldShowUpgradeButton:x,onUpgradeClick:w}=(0,jl.i)(v,o),_=(0,Di.U)("(min-width: 1024px)"),{isDesktop:A,isPWA:E,shouldCalloutPWA:j}=(0,d.d4)((e=>e.platform)),C=(0,f.useCallback)((()=>{o.logInteraction(s.profileButtonFactory().hitUiReveal())}),[o,s]);return(0,S.jsxs)("div",{className:Gt()(e,Sl.A.topbarContentRight),ref:t,children:[(0,S.jsx)(Hi,{spec:s}),r&&!c?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(_r.H,{condensed:!0,onClick:()=>{p()},children:i.Ru.get("navbar.premium")}),(0,S.jsx)(_r.H,{condensed:!0,onClick:()=>b(_s.nw,!0),children:i.Ru.get("user.support")}),(0,S.jsx)(_r.H,{condensed:!0,onClick:()=>b(_s.Kw,!0),children:i.Ru.get("download.download")}),(0,S.jsx)("div",{className:Sl.A.topNavBarSeparator})]}):(0,S.jsx)(S.Fragment,{}),(0,S.jsx)(Or,{}),x&&_&&(0,S.jsx)(rs,{onClick:w,className:Sl.A.UpgradeButton}),!A&&!E&&!(0,T.g)()&&(0,S.jsx)(Qi,{shouldCalloutPWA:j,logger:o,spec:s}),r&&(0,S.jsxs)("div",{className:Sl.A.loginButtons,children:[(0,S.jsx)(_r.H,{className:Sl.A.signupButton,onClick:u,"":"signup-button",size:"small",children:i.Ru.get("sign_up")}),(0,S.jsx)(ts,{children:(0,S.jsx)(Ar.$,{colorSet:"invertedLight",onClick:h,"":"login-button",children:i.Ru.get("login")})})]}),!r&&(0,S.jsxs)("div",{className:Gt()(Sl.A.globalNavBar,Sl.A.topBarRightButtonContainer),children:[(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(El,{})}),(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(hl,{spec:y})})]}),(!r||l)&&(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(nl,{onClick:C})})]})}));var Il=o(60280),Nl=o(43413);const kl=(e,t)=>e[0]===t[0]&&e[1]===t[1],Ll=({className:e})=>{const{spec:t,logger:n}=(0,ns.D)(Er.x,{}),a=(0,ot.g)(),[r,s]=(()=>{const[e,t]=(0,d.d4)((e=>[e.ui.history.canGoBack,e.ui.history.canGoForward]),kl);return[e,t]})(),o=(0,f.useCallback)((()=>{n.logInteraction(t.backButtonFactory().hitUiNavigateBack()),a(-1)}),[n,a,t]),c=(0,f.useCallback)((()=>{n.logInteraction(t.forwardButtonFactory().hitUiNavigateForwardInHistory()),a(1)}),[n,a,t]);return(0,S.jsxs)("div",{className:Gt()(e,Sl.A.globalNavBarHistoryButtonsContainer),children:[(0,S.jsx)(Sr.Zp,{label:i.Ru.get("navbar.go-back"),children:(0,S.jsx)(_r.H,{size:"medium",iconOnly:Il.g,condensed:!0,"":"top-bar-back-button","aria-label":i.Ru.get("navbar.go-back"),disabled:!r,onClick:o})}),(0,S.jsx)(Sr.Zp,{label:i.Ru.get("navbar.go-forward"),children:(0,S.jsx)(_r.H,{size:"medium",iconOnly:Nl.V,condensed:!0,"":"top-bar-forward-button","aria-label":i.Ru.get("navbar.go-forward"),disabled:!s,onClick:c})})]})};var Tl=o(34796),Rl=o(37101),Pl=o(35729);const Ml="fiHe04F7JrFVxwTtQKNC",Ol="OOmw6k8Nm2wxqdp3iMEi",Dl="VdaiGBErbfEB8WKT1_xB",Hl="MvkNePnKvq7odsvqZGGp",zl="c1SbOcr3tYRrykXHia_i",Vl="G_BZRxrcmBjLCMT7rM7w",Bl="blk4J9F0PVHYjLGdgxIB",Ul="fJA65AgTmNpHAUxb_CIl",Fl="QUV8gJ5njNR0opnIViHW",ql="Root__globalNav",Wl="main-globalNav-navLink",Gl="main-globalNav-navLinkActive",$l="Dp3xccI7c2f_JSJ8OHYu",Ql="main-globalNav-historyButtonsContainer",Kl="nmAHq8nfXRtoQmKU1gaF",Zl="main-globalNav-searchSection",Yl="main-globalNav-searchContainer",Jl="axu7kRtHOzwIb8b14FT6",Xl="link-subtle",eu="pKJyyZ_7ei9TgOxrTFHX",tu="BsOjYbxeNtBwDGjKRYG3",nu=({containerRef:e,contentRightRef:t,isSearchInputCollapsed:n,forceExpandSearchInput:a})=>{const{logOpenCreateMenu:r}=(0,Pl.q)(),s=(0,f.useRef)(null),o=(0,f.useRef)(null),[c,l]=(0,f.useState)(!1),u=(0,ln.W)(),d=(0,f.useCallback)((()=>{if(s.current&&o.current&&t.current){const e=s.current.offsetWidth+o.current.offsetWidth,{left:n,right:a}=t.current.getBoundingClientRect(),{left:r,right:i}=s.current.getBoundingClientRect();let c=r+e>n;if(u){c=i-e<a}l(c)}}),[t,u]);(0,$i.w)({refOrElement:e,onResize:d,observeOnMount:!0});const h=!c&&!(n&&a)||c&&n&&!a;return(0,S.jsx)(ls.b,{menu:(0,S.jsx)(Rl.r,{}),onShow:()=>{r()},children:(e,t,n)=>(0,S.jsx)(Sr.Zp,{label:i.Ru.get("web-player.global-nav-bar.create-button.tooltip"),children:(0,S.jsx)("div",{className:Ml,ref:s,children:(0,S.jsxs)("button",{type:"button",ref:n,onClick:t,className:Gt()(Xl,Ol,e&&Bl,Dl),children:[(0,S.jsx)(Tl.u,{className:Ul}),(0,S.jsx)("span",{className:Gt()(zl,{[Vl]:!h}),children:(0,S.jsx)("span",{className:Fl,children:(0,S.jsx)(Dr.E,{ref:o,variant:"bodyMediumBold",semanticColor:"textBase",className:Hl,children:i.Ru.get("web-player.global-nav-bar.create-button.label")})})})]})})})})};function au(e){var t,n,a,r,i,s=e.size?al.$Z[e.size]:e.iconSize,o=(0,al._C)([{size:16,svgContent:"<path d='M9.375.988a2.75 2.75 0 0 0-2.75 0l-5.25 3.03A1.75 1.75 0 0 0 .5 5.535v9.724c0 .415.336.75.75.75h4a.75.75 0 0 0 .75-.75V10h4v5.258c0 .415.336.75.75.75h4a.75.75 0 0 0 .75-.75V5.534a1.75 1.75 0 0 0-.875-1.515L9.375.988z'/>"},{size:24,svgContent:"<path d='M13.5 1.515a3 3 0 0 0-3 0L3 5.845a2 2 0 0 0-1 1.732V21a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6h4v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V7.577a2 2 0 0 0-1-1.732l-7.5-4.33z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(al.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}var ru=o(10753),iu=o(27966);const su=({className:e})=>{const{spec:n,logger:a}=(0,ns.D)(Er.x,{}),r=(0,ot.g)(),s=(0,iu.l)(),o=(0,t.NC)(we.gQu),c=(0,vl._)((e=>"/"===e.pathname||"/home"===e.pathname));return(0,S.jsx)(Sr.Zp,{label:i.Ru.get("view.web-player-home"),children:(0,S.jsx)(_r.H,{iconOnly:c?au:ru.H,className:Gt()(e,Wl,Xl,{[Gl]:c}),"aria-label":i.Ru.get("view.web-player-home"),"":"home-button",onClick:()=>{const e=n.homeButtonFactory().hitUiNavigate({destination:"spotify:app:home"});a.logInteraction(e),o&&!c||s(pn.z.CLOSED),r("/")}})})},ou="Kgjmt7IX5samBYUpbkBu",cu="B9lb86gGqGGFcSZZ95bA",lu="CCIGxtpAreSdwWRo14FE",uu="TTB3lAVAhCK9Apl8quWw",du="N9r2VuXMBlhRSVF5dCek",hu=({children:e})=>(0,S.jsx)("div",{className:uu,children:e}),pu=()=>(0,S.jsx)("div",{className:ou}),mu=({children:e})=>(0,S.jsx)("div",{className:du,children:e}),fu=()=>(0,S.jsx)("div",{className:cu}),gu=()=>(0,S.jsx)("div",{className:lu});var bu=o(54699),vu=o(42767),yu=o(94281),xu=o(9768);const wu="fmZ0hU6ImbDQi5qGWLvF",_u="kOrgVj4dtioqHnXeX9Ui",Au=()=>{const e=(0,yu.J)("search");return(0,S.jsxs)(bu.Y,{ref:e,"aria-labelledby":"tooltipTitle tooltipSubtitle",children:[(0,S.jsx)(Dr.E,{as:"p",variant:"bodyMedium",paddingBottom:"tighter-2",id:"tooltipTitle",children:i.Ru.get("web-player.onboarding-new-user.step-search")}),(0,S.jsx)(Dr.E,{variant:"marginal",id:"tooltipSubtitle",children:i.Ru.get("web-player.onboarding-new-user.step-count",1,va.c)})]})},Eu=({children:e})=>{const{shouldStepBeVisible:t}=(0,$t.er)();return(0,S.jsx)(xu.s,{active:t(va.B.SEARCH),children:(0,S.jsx)("div",{className:_u,children:(0,S.jsx)(vu.E,{isOnboarding:!0,isVisible:t(va.B.SEARCH),refClassName:wu,content:(0,S.jsx)(Au,{}),children:e})})})};var ju=o(40638),Su=o(19229),Cu=o(65488);function Iu(e){var t,n,a,r,i,s=e.size?al.$Z[e.size]:e.iconSize,o=(0,al._C)([{size:16,svgContent:"<path d='M2 1.2a.7.7 0 0 1 .7-.7h10.6a.7.7 0 0 1 .7.7V4H2V1.2zM.987 6a.75.75 0 0 0-.734.906l1.81 8.5a.75.75 0 0 0 .733.594h10.38a.75.75 0 0 0 .734-.594l1.81-8.5A.75.75 0 0 0 14.987 6h-14zM8 13c-1.657 0-3-.895-3-2s1.343-2 3-2 3 .895 3 2-1.343 2-3 2z'/>"},{size:24,svgContent:"<path d='M4 2a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v4H4V2zM1.513 9.37A1 1 0 0 1 2.291 9H21.71a1 1 0 0 1 .978 1.208l-2.17 10.208A2 2 0 0 1 18.562 22H5.438a2 2 0 0 1-1.956-1.584l-2.17-10.208a1 1 0 0 1 .201-.837zM12 17.834c1.933 0 3.5-1.044 3.5-2.333 0-1.289-1.567-2.333-3.5-2.333S8.5 14.21 8.5 15.5c0 1.289 1.567 2.333 3.5 2.333z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(al.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}function Nu(e){var t,n,a,r,i,s=e.size?al.$Z[e.size]:e.iconSize,o=(0,al._C)([{size:16,svgContent:"<path d='M.404 6.278A.75.75 0 0 1 .987 6h14a.75.75 0 0 1 .733.906l-1.81 8.5a.75.75 0 0 1-.733.594H2.797a.75.75 0 0 1-.734-.594l-1.81-8.5a.75.75 0 0 1 .15-.628zM1.914 7.5l1.49 7h9.166l1.49-7H1.913z'/><path d='M9.987 11c0 .736-.896 1.333-2 1.333-1.105 0-2-.597-2-1.333s.895-1.333 2-1.333c1.104 0 2 .597 2 1.333zM2 1.25A.75.75 0 0 1 2.75.5h10.5a.75.75 0 0 1 .75.75V4h-1.5V2h-9v2H2V1.25z'/>"},{size:24,svgContent:"<path d='M15 15.5c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z'/><path d='M1.513 9.37A1 1 0 0 1 2.291 9h19.418a1 1 0 0 1 .979 1.208l-2.339 11a1 1 0 0 1-.978.792H4.63a1 1 0 0 1-.978-.792l-2.339-11a1 1 0 0 1 .201-.837zM3.525 11l1.913 9h13.123l1.913-9H3.525zM4 2a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v4h-2V3H6v3H4V2z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(al.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}var ku=o(93490);const Lu="music",Tu="2.1.0",Ru="default",Pu="12.2.0";function Mu(e){return new Ou(e)}class Ou{constructor(e){this._path=[{name:"desktop-search-input"}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[Ru,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[Tu,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}keyStrokeChangeSearchQuery({searchQueryString:e}){return{actionParameterNames:["search_query_string"],actionParameterValues:[e.toString()],actionName:"change_search_query",actionVersion:1,app:Lu,generatorVersion:Pu,interactionType:"key_stroke",specificationMode:Ru,specificationVersion:Tu,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}keyStrokeSearch(){return{actionName:"search",actionVersion:1,app:Lu,generatorVersion:Pu,interactionType:"key_stroke",specificationMode:Ru,specificationVersion:Tu,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitTextClear(){return{actionName:"text_clear",actionVersion:1,app:Lu,generatorVersion:Pu,interactionType:"hit",specificationMode:Ru,specificationVersion:Tu,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}var Du=o(80654),Hu=o(87736),zu=o(32358),Vu=o(12738),Bu=o(23157),Uu=o(13929),Fu=o(10949),qu=o(53694),Wu=o(27244),Gu=o(57762),$u=o(26064),Qu=o(75808),Ku=o(28156),Zu=o(95110),Yu=o(29908);const Ju="qgxVpjYtxLSzXuRb1DLt",Xu="ka4wGy_b04LNCthHIH1N",ed="CPqBiLSmPraw0XkjjBp6",td="XFJcBNfnUfPHtwtYAkdx",nd="ZiBMct2Zn84xzTkEly_p",ad="V5kle5COkVEN5X6CkL7q",rd="c4tFCPbYwVHGfqMSeDbS",id="dSiGMhFfPa7d2yEwV3yE",sd="S37aRGXzbqbG049CEylp",od="yc0gfCvIaGSEMoWUQCVA",cd="A5mSopU8ZkrqFtMhrJae",ld="recent-searches-item-",ud=(0,f.memo)((({entity:e,index:t,focusedElement:n,isPlaying:a,onClearItemClick:r,onClick:s,onPlayClick:o})=>{const c=(0,Yu._)(),l=(0,f.useRef)(null);(0,f.useEffect)((()=>{n&&l.current?.scrollIntoView({behavior:"auto",block:"nearest"})}),[n]);const u=e.type===nr.c.ARTIST||e.type===nr.c.USER||e.type===nr.c.AUTHOR?Mo.u.CIRCLE:Mo.u.ROUNDED_CORNERS,d=(0,Zu.ji)(e),h=e.type!==nr.c.USER&&e.type!==nr.c.PRE_RELEASE_ALBUM&&e.type!==nr.c.PRE_RELEASE_BOOK&&e.type!==nr.c.AUTHOR,p=Boolean(n),m="play-button"===n&&h,g="remove-item-button"===n;return(0,S.jsx)(qu.v,{ref:l,hasFocus:p,variant:"naked",hoverAnimationDuration:"0ms",hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedHighlight",size:"sm",onClick:s,isRedundantOnClick:!0,role:"link",id:`${ld}${t}`,className:Gt()(td,{[ad]:p}),media:(0,S.jsxs)("div",{className:Gt()({[Ju]:h}),children:[(0,S.jsx)(Mo.b,{className:nd,fadeIn:!0,images:c(d??[],48),shape:u,size:Oo.Qe.SIZE_48,iconSize:"medium",type:e.type,title:e.name,loadingMode:"eager"}),h&&(0,S.jsx)("div",{className:Gt()(Xu,{[ed]:u===Mo.u.CIRCLE,[sd]:m}),children:(0,S.jsx)(_r.H,{hover:m,focus:m,iconOnly:a?Wu._:Gu.A,onClick:o,"aria-label":a?i.Ru.get("playlist.a11y.pause",e.name):i.Ru.get("playlist.a11y.play",e.name),size:"medium",tabIndex:-1})})]}),subtitle:(0,S.jsxs)($u.j,{"line-clamp":1,className:od,children:[(0,Zu.bA)(e),(0,S.jsx)("span",{className:cd,children:(0,Zu.$F)(e)})]}),title:(0,S.jsx)(Ku.N,{to:e.uri,tabIndex:-1,children:(0,S.jsx)(Qu.d,{lineClamp:1,children:e.name})}),trailing:(0,S.jsx)(_r.H,{className:Gt()(rd,{[id]:g}),focus:g,"aria-label":i.Ru.get("remove"),iconOnly:is.M,size:"small",onClick:()=>r(e.uri),tabIndex:-1})},e.uri)}));var dd=o(11222);const hd="_b3hhmbWtOY8_1M1mM1H",pd="j4xi27AJ3oy5qZ8CGhhQ",md="dM_TEJo05MxBvrLzfNrW",fd="ODl7TwNawIfBwiZv1Czg",gd="main-topBar-searchBar",bd="upGmCR5y3yDImbt6sHOl",vd="IYex0sXu8fnCz1FqFbRe",yd="xlLQHgpip3xYOwRYpwun",xd="c5zycBhSdLGTqsceZhiB",wd="nBGzYhSIK1A7qANmTnpk",_d="GimJ6fo6WOYPyWNVpSr1",Ad="YxfuYxT7HHkLxLlty5O0",Ed="sxCQ4toOdQ6hMN2rU8Kn",jd="b7r2WRiu5f9Q99qmyreh",Sd="M9l40ptEBXPm03dU3X1k",Cd="EJttP30F1zYHeAw7ISHb",Id="R69APjfNV0o9tAbfrWZf",Nd="MdMAXXFPalD99eigsBug",kd="BV0jjn_h5TtMMl8YKuZ0",Ld="recent-searches-dropdown",Td=(0,f.memo)((({inputRef:e,setSelectedRecentSearchItemId:t})=>{const{searchHistory:n,clearSearchHistory:a}=(0,dd.k)(),{mainLandmarkRef:r}=(0,an.JT)(),s=(0,f.useRef)(null),o=(0,ot.g)(),[c,l]=(0,f.useState)(!1),{spec:u,logger:d}=(0,Ei.r)(Bu.a,{data:{uri:"spotify:app:recent-searches"}}),h=(0,f.useCallback)((e=>{const t=u.recentSearchesItemFactory({uri:e}).removeRecentSearchesItemButtonFactory().hitRemoveRecentSearchesItem();d.logInteraction(t),a(e)}),[a,u,d]),{isPlaying:p,currentlyPlayingContextUri:m}=(0,pr.o)((e=>({isPlaying:(0,Hc.uW)(e)===Dc.i.PLAYING,currentlyPlayingContextUri:e?.context.uri??null})),mr.a),g=(0,R.z)(),b=(0,f.useCallback)((e=>{const t=(0,X.o_h)(e.uri);if(null!==t){const n=u.recentSearchesItemFactory({uri:e.uri}).hitUiNavigate({destination:e.uri});d.logInteraction(n),o(t.toURLPath(!0)),requestAnimationFrame((()=>{r.current&&r.current.focus()}))}}),[d,r,o,u]),v=(0,f.useCallback)((e=>{const t=(0,X.o_h)(e);if(!(0,Zu.MB)(t?.type))return;const n=u.recentSearchesItemFactory({uri:e}),a=n.pauseRecentSearchesItemButtonFactory().hitPause({itemToBePaused:e}),r=n.playRecentSearchesItemButtonFactory().hitPlay({itemToBePlayed:e});p&&m===e?(g.pause({featureIdentifier:"search"}),d.logInteraction(a)):p||m!==e?(g.play({uri:e},{featureIdentifier:"search",referrerIdentifier:"search"}),d.logInteraction(r)):(g.resume({featureIdentifier:"search"}),d.logInteraction(r))}),[g,p,m,u,d]),[y,x]=(0,f.useState)(-1),[w,_]=(0,f.useState)("entire-item");return(0,f.useEffect)((()=>{-1===y&&s.current?.scrollIntoView()}),[y]),(0,f.useEffect)((()=>{const r=e.current,i=e=>{if(!(r?.value&&r?.value.length>0))switch(e.key){case"ArrowUp":(e=>{e.preventDefault();const n=Math.max(y-1,0);x(n),t(`${ld}${n}`),_("entire-item")})(e);break;case"ArrowDown":(e=>{e.preventDefault();const a=Math.min(y+1,n.length-1);x(a),t(`${ld}${a}`),_("entire-item")})(e);break;case"ArrowLeft":(e=>{e.preventDefault(),"entire-item"===w?_("play-button"):"remove-item-button"===w&&_("entire-item")})(e);break;case"ArrowRight":(e=>{e.preventDefault(),"entire-item"===w?_("remove-item-button"):"play-button"===w&&_("entire-item")})(e);break;case"Enter":(e=>{e.preventDefault();const t=n[y];t&&(e.shiftKey&&"entire-item"===w?v(t.uri):"entire-item"===w?b(t):"play-button"===w?v(t.uri):"remove-item-button"===w&&a(t.uri))})(e)}};r?.addEventListener("keydown",i);const s=()=>{x(-1),t(void 0)};return r?.addEventListener("focus",s),()=>{r?.removeEventListener("keydown",i),r?.removeEventListener("focus",s)}}),[a,e,b,n,n.length,y,w,t,v]),0===n.length?null:(0,S.jsxs)("div",{className:wd,id:Ld,role:"listbox",children:[(0,S.jsxs)(Fu.a,{className:_d,children:[(0,S.jsx)(Dr.E,{as:"p",ref:s,variant:"bodyMediumBold",semanticColor:"textBase",className:Ad,children:i.Ru.get("search.title.recent-searches")}),(0,S.jsx)(zu.b,{condensedAll:!0,role:"listbox",children:n.map(((e,t)=>(0,S.jsx)(ud,{focusedElement:y===t?w:void 0,entity:e,index:t,isPlaying:p&&m===e.uri,onClick:()=>b(e),onPlayClick:()=>v(e.uri),onClearItemClick:h},e.uri)))}),(0,S.jsx)(Vu.n,{onClick:()=>{l(!0)},size:"small",className:Ed,children:i.Ru.get("search.clear-recent-searches")})]}),(0,S.jsx)(Uu.T,{onClose:()=>{l(!1)},isOpen:c,onConfirm:()=>{(()=>{const e=u.clearButtonFactory().hitClearRecentSearches();d.logInteraction(e),a()})(),l(!1)},"aria-label":i.Ru.get("search.clear-recent-searches-dialog.title"),titleText:i.Ru.get("search.clear-recent-searches-dialog.title"),descriptionText:i.Ru.get("search.clear-recent-searches-dialog.description"),confirmText:i.Ru.get("search.clear-recent-searches-dialog.confirm-button"),cancelText:i.Ru.get("search.clear-recent-searches-dialog.cancel-button")})]})}));var Rd=o(5178),Pd=o(44306),Md=o(78217);const Od=(0,f.memo)((function({onFocus:e,onLeadingIconClick:t,inputRef:n}){const a=(0,ae.zy)(),r="/search"===a.pathname,s=(0,ot.g)(),{currentStep:o,tryTriggerNextStep:c}=(0,$t.er)(),{setIsGlobalNavDraggable:l}=(0,f.useContext)(xr),u=(0,f.useRef)(null),h=n||u,p=(0,f.useRef)(null),m=(0,_n.SF)(),{mainLandmarkRef:g}=(0,an.JT)(),b=(0,d.wA)(),[{category:v,query:y},x]=(0,Rd.o)(),w=(0,f.useCallback)((()=>h.current?.value||""),[h]),_=(0,f.useCallback)((e=>{h.current&&(h.current.value=e)}),[h]),[A,E]=(0,f.useState)(void 0),{spec:j}=(0,ns.D)(Er.x,{}),{spec:C,logger:I}=(0,Ei.r)(Mu,{}),[N,k]=(()=>{const[e,t]=(0,f.useState)(!1);return[e,e=>{"compositionstart"===e.type&&t(!0),"compositionend"===e.type&&t(!1)}]})(),L=(0,$t.er)().shouldStepBeVisible(va.B.SEARCH),T=(0,ju.YQ)((e=>{const t=C.keyStrokeChangeSearchQuery({searchQueryString:e}),{interactionId:n}=I.logInteraction(t),a=o===va.B.ARTIST_CARD||o===va.B.SEARCH;x(e,a?"artists":v,!y,n),c(va.B.SEARCH),m.current&&(m.current.scrollTop=0)}),200,{trailing:!0}),R=(0,f.useCallback)(((e=!1)=>{h.current!==document.activeElement&&(p.current=document.activeElement,h.current&&h.current.focus()),e&&h.current?.select()}),[h]);(0,Md.x)(Pd.W.SHOW_SEARCH,(()=>R(!0))),(0,f.useEffect)((()=>{o===va.B.SEARCH&&R()}),[o,R]),(({location:e,searchQuery:t,setValue:n,isEnabled:a})=>{const r=(0,f.useRef)(e.key),i=e.key;(0,f.useEffect)((()=>{r.current!==i&&a&&(n(t),r.current=i)}),[i,t,n,a])})({location:a,searchQuery:y,setValue:_,isEnabled:!T.isPending()});const P=()=>{h.current&&h.current.focus();const e=C.hitTextClear();e&&I.logInteraction(e),l?.(!1),_("")},M=e=>{e.preventDefault();const t=w();t&&I.logInteraction(C.keyStrokeSearch());const n=(0,X.o_h)(t,{parseUnknown:!0});if(n?.type===X.NQG.AD){const e=(0,X.cEw)(n.id);if(n.id===e)return;b((0,Du.gt)(n.id))}else n?(T.cancel(),s(`${n.toURLPath(!0)}${(e=>{try{return new URL(e).search}catch(e){return""}})(t)}`,{state:{preventMoveFocus:!0,redirectToHome:(0,X.crr)(n)}})):t?T(t):s("/search",{state:{preventMoveFocus:!0}});t&&g.current&&g.current.focus()},O=(0,In.Nf)();(0,f.useEffect)((()=>{const e=h.current,t=(0,gn.p)(fn.r.OPEN_SEARCH_MODAL);return e&&on()(e).bind(t,(()=>{O({type:"OPEN"})})),()=>{on()(e).unbind(t)}}),[h,O]);const D=i.Ru.get("search.search-for-label");return(0,S.jsx)("div",{className:Gt()(hd,{[xd]:L}),children:(0,S.jsx)(Su.E,{as:"form",onSubmit:M,role:"search",className:jd,onClick:t,iconLeading:(0,S.jsx)(Sr.Zp,{label:i.Ru.get("navbar.search"),children:(0,S.jsxs)("div",{children:[(0,S.jsx)(_r.H,{className:Cd,condensed:!0,iconOnly:Cu.C,"aria-label":i.Ru.get("navbar.search"),onClick:t}),(0,S.jsx)(Cu.C,{"":"search-icon",className:Sd,"aria-hidden":!0,size:"xlarge"})]})}),iconTrailing:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(Sr.Zp,{label:i.Ru.get("search.a11y.clear-input"),children:(0,S.jsx)(_r.H,{condensedAll:!0,className:Nd,"":"clear-button",iconOnly:is.M,"aria-label":i.Ru.get("search.a11y.clear-input"),onClick:P})}),(0,S.jsx)(Sr.Zp,{label:i.Ru.get("browse"),children:(0,S.jsx)("div",{className:kd,children:(0,S.jsx)(_r.H,{condensedAll:!0,"":"browse-button",iconOnly:r?Iu:Nu,"aria-label":i.Ru.get("browse"),onClick:e=>{const t=j.browseButtonFactory().hitUiNavigate({destination:"spotify:app:search"});I.logInteraction(t),e.preventDefault(),e.stopPropagation(),s("/search",{state:{fromBrowse:!0}})},className:r?pd:""})})})]}),children:(0,S.jsxs)("div",{className:fd,children:[(0,S.jsx)(ku.Z,{role:"combobox","aria-owns":Ld,"aria-controls":Ld,"aria-expanded":!0,"aria-activedescendant":A,"":"search-input","data-top-bar-search":!0,className:Gt()(gd,Id),type:"search",spellCheck:!1,placeholder:D,ref:h,onKeyDown:e=>{const t=w();if("Escape"===e.key&&(e.stopPropagation(),t&&P()),"Enter"===e.key&&""!==t){if(N)return;M(e)}},onFocus:()=>{const t=w();l?.(""!==t),e?.()},onBlur:()=>l?.(!0),onChange:e=>{if(!e.currentTarget)return;const t=e.currentTarget.value;l?.(""!==t),T(t)},onCompositionStart:k,onCompositionEnd:k}),(0,S.jsxs)("div",{className:Gt()(md),"aria-hidden":"true",children:[(0,S.jsx)("span",{className:bd,children:D}),!L&&(0,S.jsx)("span",{className:vd,children:(0,gn.p)(fn.r.OPEN_SEARCH_MODAL).at(0)?.split("+").map((e=>(0,S.jsx)(Dr.E,{as:"kbd",variant:"bodyMedium",className:yd,children:(0,Hu.O)(e)},e)))})]}),!L&&(0,S.jsx)(Td,{inputRef:h,setSelectedRecentSearchItemId:E})]})})})}));var Dd=o(66705);var Hd=o(64694);const zd=e=>{if(!e.current)return!1;return e.current.offsetWidth>400},Vd=e=>!!e.current&&(e.current===document.activeElement||""!==e.current.value),Bd=(e,t)=>!!e.current&&(e.current.offsetLeft<=t&&t<=e.current.offsetLeft+e.current.offsetWidth),Ud=({topBarRef:e,className:n})=>{const a=(0,Dd.c)(),r=(0,ge.mv)().operatingSystem===Hd.f.Windows,{isGlobalNavDraggable:i}=(0,f.useContext)(xr),s=(0,t.NC)(we.s_6,{loadingValue:we.G2o.NONE})===we.G2o.GLOBAL_NAV,[o,c]=(0,f.useState)(!1),[l,u]=(0,f.useState)(!1),[d,h]=(0,f.useState)(!1),p=(0,f.useRef)(null),m=(0,f.useRef)(null),g=(0,f.useRef)(null),b=(0,f.useRef)(null),v=(0,f.useRef)(null),y=(0,ba.h)(),x=(0,f.useRef)(!1);(0,f.useEffect)((()=>{m.current&&(m.current.tabIndex=l&&!d?-1:0)}),[l,d]);const w=(0,f.useCallback)((({width:t})=>{t&&(v?.current&&t!==v.current&&(x.current=t>v.current),v.current=t),((e,t,n,a,r,i)=>{if(!n.current||!t.current||!e.current)return;const s=n.current,o=Math.max(350,Math.min(i?604:546,.5*s.offsetWidth)),c=Bd(e,s.offsetWidth/2-o/2)||Bd(e,s.offsetWidth/2+o/2)||Bd(t,s.offsetWidth/2-o/2)||Bd(t,s.offsetWidth/2+o/2);a!==c&&r(c)})(g,b,e,o,c,s),((e,t,n,a)=>{e.current&&(zd(e)&&!0===t&&n?a(!1):zd(e)||!1!==t||n||a(!0))})(p,x.current,l,u),((e,t,n)=>{e.current&&Vd(e)&&(t||n(!0))})(m,d,h)}),[d,s,e,l,o]);var _,A,E;(0,$i.w)({refOrElement:e,onResize:w}),_=b,A=()=>{e.current&&w({width:null})},E={subtree:!0,childList:!0},(0,f.useEffect)((()=>{if(_.current){const e=new MutationObserver(A);return e.observe(_.current,E),()=>e.disconnect()}return()=>{}}),[_,A,E]);const j=(0,f.useCallback)((e=>{e?.preventDefault(),e?.stopPropagation(),Vd(m)||h(!d);(!l||l&&!d)&&m.current?.focus()}),[d,l]);return(0,S.jsxs)("div",{className:Gt()(ql,n,eu,{[Xl]:!i,[Jl]:o||l,searchInputCollapsed:l,forceExpandSearchInput:d,[tu]:y}),ref:e,id:"global-nav-bar","":"global-nav-bar",children:[(0,S.jsx)("div",{className:Ql,ref:g,children:a?(0,S.jsx)(vr.N_,{to:"/",className:Kl,children:(0,S.jsx)(yr.G,{height:32,condensed:!0})}):(0,S.jsxs)(hu,{children:[r?(0,S.jsx)(fu,{}):(0,S.jsx)(pu,{}),(0,S.jsx)(Ll,{className:Xl})]})}),(0,S.jsx)("div",{className:Zl,children:(0,S.jsxs)("div",{className:Yl,ref:p,children:[(0,S.jsx)(su,{className:$l}),(0,S.jsx)(Eu,{children:(0,S.jsx)(Od,{inputRef:m,onLeadingIconClick:j,onFocus:()=>h(!0)})}),s&&(0,S.jsx)(nu,{containerRef:e,contentRightRef:b,isSearchInputCollapsed:l,forceExpandSearchInput:d})]})}),(0,S.jsxs)(mu,{children:[(0,S.jsx)(Cl,{className:Xl,ref:b}),r&&!a?(0,S.jsx)(gu,{}):(0,S.jsx)(S.Fragment,{})]})]})},Fd=e=>{const{applicationMode:t}=aa();return t.mode!==ta.Default?null:(0,S.jsx)(Ud,{...e})};var qd=o(40767);const Wd=({elementRef:e})=>{const{item:t}=(0,pr.o)((e=>({item:e?.item})),((e,t)=>e.item?.uri===t.item?.uri)),{spec:n,logger:a}=(0,xn.$)(qd.t,{data:{uri:t?.uri??""}}),{min:r,max:s,size:o,setSize:c}=Yn(),l=(0,f.useMemo)((()=>[[r,s]]),[r,s]),u=(0,Bn.XB)(),d=(0,ln.W)(),h=(0,f.useCallback)(((e,t)=>{e!==t&&a.logInteraction(n.npvUiResizeFactory().dragUiResize({startSizePx:e,endSizePx:t}))}),[a,n]);return u===Un.Z.Disabled?null:(0,S.jsx)(hn,{elementRef:e,placement:"inline-start",label:i.Ru.get("resize.sidebar"),onResize:c,size:o,ranges:l,decreaseSizeKeyboardCombination:d?(0,gn.p)(fn.r.LEFT_SIDEBAR_DECREASE_WIDTH):(0,gn.p)(fn.r.NPV_SIDEBAR_DECREASE_WIDTH),increaseSizeKeyboardCombination:d?(0,gn.p)(fn.r.LEFT_SIDEBAR_INCREASE_WIDTH):(0,gn.p)(fn.r.NPV_SIDEBAR_INCREASE_WIDTH),afterResizing:h})},Gd=(0,f.createContext)(null);var $d=o(22606),Qd=o(93621);const Kd=({children:e})=>{const[t,n]=(0,f.useState)(!1),[a,r]=(0,f.useState)(""),i=(0,f.useRef)(null),s=(0,Qd.O)(),o=(0,$d.C)(),c=(0,d.wA)(),u=(0,f.useCallback)((e=>{t?(o(a),r(""),n(!1),c((0,l.np)())):(e&&r(e),s.startActiveDiscovery(),n(!0),c((0,l.ae)()))}),[t,o,a,c,s]),h=(0,f.useMemo)((()=>({triggerRef:i,toggleDevicePicker:u,isPickerOpen:t})),[u,t]);return(0,S.jsx)(Gd.Provider,{value:h,children:e})};var Zd=o(43509);const Yd=()=>((0,Zd.q)(),null),Jd=()=>{const e=(0,L.S)().isOpen,{applicationMode:t}=aa();return e||t.mode===ta.Tuna?null:(0,S.jsx)(Yd,{})},Xd=f.lazy((async()=>await Promise.all([o.e(5905),o.e(4403),o.e(1206)]).then(o.bind(o,39334)).then((e=>({default:e.RootDialogs}))))),eh=e=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(Xd,{...e})}),th=({children:e,debugLabel:t})=>(0,S.jsx)($n,{gridRow:"global-nav / now-playing-bar",gridColumn:"left-sidebar / right-sidebar",zIndex:"var(--above-everything-grid-area-z-index)",debugLabel:t,children:e}),nh=(0,f.forwardRef)((function({children:e,className:t,debugLabel:n},a){return(0,S.jsx)($n,{gridRow:"main-view / now-playing-bar",gridColumn:"left-sidebar / right-sidebar",zIndex:"var(--above-main-and-now-playing-view-grid-area-z-index)",ref:a,className:t,debugLabel:n,children:e})}));var ah=o(86938);const rh=()=>(0,S.jsx)("div",{id:ah.K,style:{zIndex:"1"}}),ih=()=>null,sh=f.lazy((async()=>{const{LyricsCinemaModeContainer:e}=await Promise.all([o.e(5920),o.e(2183)]).then(o.bind(o,94774));return{default:e}})),oh=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(sh,{})}),ch=f.lazy((async()=>{const{NowPlayingBar:e}=await Promise.all([o.e(9462),o.e(1104),o.e(7090),o.e(4174),o.e(5303),o.e(8106),o.e(854),o.e(7628),o.e(3322)]).then(o.bind(o,28480));return{default:e}})),lh=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(ch,{})});var uh=o(61506);const dh=f.lazy((async()=>{const{WatchFeedViewContainer:e}=await Promise.all([o.e(8832),o.e(777)]).then(o.bind(o,13809));return{default:e}})),hh=()=>{const{close:e}=(0,uh.P)();return(0,S.jsx)(m.s,{onError:t=>{e({resumePlayback:!0}),(0,Nn.Jy)(t,"WatchFeedView")},children:(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(dh,{})})})},ph=f.lazy((async()=>{const{SnackbarProvider:e}=await Promise.resolve().then(o.bind(o,82570));return{default:e}})),mh=e=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(ph,{...e})}),fh=f.lazy((async()=>{const{FeedbackBar:e}=await o.e(8552).then(o.bind(o,46748));return{default:e}})),gh=e=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(fh,{...e})}),bh=f.lazy((async()=>{const{PageErrorTemplate:e}=await o.e(352).then(o.bind(o,67391));return{default:e}})),vh=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(bh,{})}),yh=f.lazy((async()=>{const{TopBar:e}=await o.e(5094).then(o.bind(o,33977));return{default:e}})),xh=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(yh,{})}),wh=f.lazy((async()=>{const{Billboard:e}=await o.e(8588).then(o.bind(o,39790));return{default:e}})),_h=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(wh,{})}),Ah=f.lazy((async()=>{const{LeaderboardComponent:e}=await o.e(9500).then(o.bind(o,15230));return{default:e}})),Eh=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(Ah,{})}),jh=f.lazy((async()=>{const{VideoPlayer:e}=await Promise.all([o.e(9462),o.e(4174),o.e(5303),o.e(7988)]).then(o.bind(o,29684));return{default:e}})),Sh=e=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(jh,{...e})});var Ch=o(30827),Ih=o(72982),Nh=o(29321);const kh="RMhp6CH5pXRI1XuARX8n",Lh=({children:e})=>(0,Ih.er)().shouldStepBeVisible(Nh.B.SEARCH)?(0,S.jsx)("div",{className:kh,children:e}):(0,S.jsx)(S.Fragment,{children:e}),Th=f.memo((()=>{const e=(0,ae.zy)(),t=(0,Ln.m)();return(0,f.useEffect)((()=>{t.notifyViewLoaded(e.pathname)}),[t,e.pathname]),null}));var Rh=o(31310),Ph=o(48889),Mh=o(42203);const Oh="music",Dh="1.2.0",Hh="default",zh="16.1.6";function Vh(e){return new Bh(e)}class Bh{constructor(e){this._path=[{name:"desktop-cinema-mode-npv"}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}peekButtonFactory(){return new Bh.PeekButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}toggleAudioVideoButtonFactory(e){return new Bh.ToggleAudioVideoButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}fullscreenButtonFactory(){return new Bh.FullscreenButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}subtitlesButtonFactory(){return new Bh.SubtitlesButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}closeButtonFactory(){return new Bh.CloseButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}switchVariantFactory(e){return new Bh.SwitchVariantEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}ambientModeFactory(){return new Bh.AmbientModeEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}contextTitleFactory(e){return new Bh.ContextTitleEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation,data:e})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[Hh,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[Dh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}impression(){return{app:Oh,generatorVersion:zh,specificationVersion:Dh,specificationMode:Hh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}!function(e){e.PeekButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"peek_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[Hh,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[Dh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:Oh,generatorVersion:zh,interactionType:"hit",specificationMode:Hh,specificationVersion:Dh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(Bh||(Bh={})),function(e){class t{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({...n,name:"toggle_audio_video_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[Hh,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[Dh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitPlay({itemToBePlayed:e}){return{actionParameterNames:["item_to_be_played"],actionParameterValues:[e.toString()],actionName:"play",actionVersion:1,app:Oh,generatorVersion:zh,interactionType:"hit",specificationMode:Hh,specificationVersion:Dh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}t.Identifier={SWITCH_TO_AUDIO:"switch_to_audio",SWITCH_TO_VIDEO:"switch_to_video"},e.ToggleAudioVideoButtonEventFactory=t}(Bh||(Bh={})),function(e){e.FullscreenButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"fullscreen_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[Hh,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[Dh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:Oh,generatorVersion:zh,interactionType:"hit",specificationMode:Hh,specificationVersion:Dh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:Oh,generatorVersion:zh,interactionType:"hit",specificationMode:Hh,specificationVersion:Dh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(Bh||(Bh={})),function(e){e.SubtitlesButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"subtitles_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[Hh,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[Dh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:Oh,generatorVersion:zh,interactionType:"hit",specificationMode:Hh,specificationVersion:Dh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:Oh,generatorVersion:zh,interactionType:"hit",specificationMode:Hh,specificationVersion:Dh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(Bh||(Bh={})),function(e){e.CloseButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"close_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[Hh,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[Dh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiHide(){return{actionName:"ui_hide",actionVersion:1,app:Oh,generatorVersion:zh,interactionType:"hit",specificationMode:Hh,specificationVersion:Dh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(Bh||(Bh={})),function(e){class t{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({...n,name:"switch_variant"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[Hh,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[Dh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:Oh,generatorVersion:zh,interactionType:"hit",specificationMode:Hh,specificationVersion:Dh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}t.Identifier={ARTWORK:"artwork",CANVAS:"canvas",HERO:"hero",VIDEO:"video"},e.SwitchVariantEventFactory=t}(Bh||(Bh={})),function(e){e.AmbientModeEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({name:"ambient_mode"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[Hh,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[Dh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}autoUiReveal(){return{actionName:"ui_reveal",actionVersion:1,app:Oh,generatorVersion:zh,interactionType:"auto",specificationMode:Hh,specificationVersion:Dh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}autoUiHide(){return{actionName:"ui_hide",actionVersion:1,app:Oh,generatorVersion:zh,interactionType:"auto",specificationMode:Hh,specificationVersion:Dh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(Bh||(Bh={})),function(e){e.ContextTitleEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:n}){this._path=e.concat({...n,name:"context_title"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[Hh,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[Dh,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:Oh,generatorVersion:zh,interactionType:"hit",specificationMode:Hh,specificationVersion:Dh,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(Bh||(Bh={}));const Uh=()=>{const{spec:e,logger:t}=(0,Ei.r)(Vh,{}),n=(0,f.useCallback)(((n,a="")=>{t.logInteraction(e.toggleAudioVideoButtonFactory({identifier:n}).hitPlay({itemToBePlayed:a}))}),[t,e]),a=(0,f.useCallback)((n=>{t.logInteraction(e.fullscreenButtonFactory()[n?"hitUiReveal":"hitUiHide"]())}),[t,e]),r=(0,f.useCallback)((n=>{t.logInteraction(e.subtitlesButtonFactory()[n?"hitUiReveal":"hitUiHide"]())}),[t,e]),i=(0,f.useCallback)((()=>{t.logInteraction(e.peekButtonFactory().hitUiReveal())}),[t,e]),s=(0,f.useCallback)((()=>{t.logInteraction(e.closeButtonFactory().hitUiHide())}),[t,e]),o=(0,f.useCallback)((n=>{t.logInteraction(e.switchVariantFactory({identifier:n}).hitUiReveal())}),[t,e]),c=(0,f.useCallback)((n=>{t.logInteraction(e.ambientModeFactory()[n?"autoUiReveal":"autoUiHide"]())}),[t,e]),l=(0,f.useCallback)((n=>{t.logInteraction(e.contextTitleFactory({uri:n}).hitUiNavigate({destination:n}))}),[t,e]);return(0,f.useMemo)((()=>({logAudioVideoToggleClick:n,logFullscreenButtonClick:a,logSubtitlesButtonClick:r,logShowNPVButtonClick:i,logCloseButtonClick:s,logSwitchVariantClick:o,logContextTitleClick:l,logAmbientModeTransition:c})),[c,n,s,l,a,i,r,o])};var Fh=o(80472);const qh=(e,t)=>{t?document.documentElement.setAttribute(e,t):document.documentElement.removeAttribute(e)},Wh=(e,t)=>{for(const n of e)qh(`data-transition-type-${n}`,t)};function Gh({transitionKey:e,transition:t,types:n=[],onTransitionFinished:a,onTransitionFinishedRejection:r}){if(!window.matchMedia("(prefers-reduced-motion: reduce)").matches&&"startViewTransition"in document){qh("data-transition",e),Wh(n,"before-snapshot");document.startViewTransition((()=>{(0,Ta.flushSync)((()=>{Wh(n,"after-snapshot"),t()}))})).finished.finally((()=>{qh("data-transition",null),Wh(n,null)})).then(a,r)}else t(),a?.()}var $h=o(77936),Qh=o(3795);var Kh=o(96258),Zh=o(59149);const Yh="QgD5n5t4yCMPYSrZ9Ecl",Jh="KoFMRthETtDdYW3pCObX",Xh="kl0_TyO1NHFm45Umh87i",ep="UnqxYX3t2DLqLrnAP4Jy";function tp({children:e}){const{leftSidebarRef:n,mainContentRef:a,rightSidebarRef:r}=(0,an.JT)(),i=(0,vl._)((e=>e.state?.cinemaState??Fh.z.CLOSED)),s=(0,ot.g)(),o=(0,vl.M)(),[c,l]=(0,f.useState)(Fh.z.CLOSED),u=(0,f.useRef)(c),[d,h]=(0,Kh.x)("cinema-media-preference","artwork"),p=(0,f.useRef)(null),[m,g]=(0,f.useState)(!1),{logAmbientModeTransition:b}=Uh(),v=(0,Ri.N)(Qh.Z),y=Xn(),x=(0,f.useRef)(y);(0,f.useLayoutEffect)((()=>{x.current=y}),[y]);const{setVideoPlayerUIFlag:w}=(0,$h.d)(),_=(0,f.useRef)(!1),A=(0,t.NC)(we.gQu),E=(0,f.useCallback)((e=>{if(_.current!==e){e&&v.setWindowButtonsVisibility(!1),g(e),b(e);const t=null!==document.fullscreenElement;e||t||v.setWindowButtonsVisibility(!0)}_.current=e}),[b,v]),j=(0,f.useCallback)((e=>{if(e===c)return;const t=document.getElementById("global-nav-bar");t?.classList.add(ep),n.current?.classList.add(Xh),n.current?.removeAttribute("inert"),r.current?.removeAttribute("inert"),a.current?.removeAttribute("inert");const{property:i,value:s}=x.current;n.current?.style.setProperty(i,`${s}`),a.current?.style.setProperty(i,`${s}`);const o=()=>{e===Fh.z.NOW_PLAYING_VIEW?(n.current?.setAttribute("inert",""),a.current?.setAttribute("inert","")):e===Fh.z.LIBRARY&&a.current?.setAttribute("inert",""),t?.classList.remove(ep),n.current?.classList.remove(Xh);null!==document.fullscreenElement||v.setWindowButtonsVisibility(!0),u.current=e},d=function(e,t){if(e===Fh.z.NOW_PLAYING_VIEW&&t===Fh.z.LIBRARY||e===Fh.z.LIBRARY&&t===Fh.z.NOW_PLAYING_VIEW)return"cinema-library-npv";switch(e===Fh.z.CLOSED?t:e){case Fh.z.LIBRARY:return"cinema-library";case Fh.z.NOW_PLAYING_VIEW:default:return"cinema-npv"}}(e,u.current);let h=[];e===Fh.z.NOW_PLAYING_VIEW?h=["open"]:e===Fh.z.CLOSED&&(h=["close"]),Gh({transitionKey:d,types:h,transition:()=>{switch(e){case Fh.z.NOW_PLAYING_VIEW:a.current?.classList.toggle(Yh,!0);break;case Fh.z.CLOSED:r.current?.classList.toggle(Jh,!1),a.current?.classList.toggle(Yh,!1),a.current?.classList.toggle(Jh,!1),w(H.nP.cinema,!1),g(!1)}l(e)},onTransitionFinished:o,onTransitionFinishedRejection:o})}),[c,n,a,v,r,w]),C=(0,f.useCallback)((e=>{if(A||j(e),i===e)return;const t=o();s({...t,search:"?viewMode=1"}),s(t,{state:{cinemaState:e},replace:!0})}),[j,o,A,i,s]);(0,f.useEffect)((()=>{if(!A)return;(0,Zh.g)(Fh.z)(i)&&i!==c&&j(i)}),[i,j,c,A]);const I=(0,f.useCallback)((e=>{A?C(e):j(e)}),[j,A,C]),N=(0,f.useCallback)((e=>{e!==d&&(p.current=d,h(e))}),[d,h]),k=(0,f.useMemo)((()=>({currentVariant:d,previousVariant:p.current})),[d]);return(0,S.jsx)(Ph.y.Provider,{value:I,children:(0,S.jsx)(Ph.s.Provider,{value:c,children:(0,S.jsx)(Rh.y.Provider,{value:E,children:(0,S.jsx)(Rh.g.Provider,{value:m,children:(0,S.jsx)(Mh.N.Provider,{value:N,children:(0,S.jsx)(Mh.P.Provider,{value:k,children:e})})})})})})}var np=o(67785),ap=o(24818);const rp="UP5xr3mJlsVHSQSt3MNi",ip="UGUzQdLr0FOyK2iF4N99",sp="f29Q3Tbod66t9VOxx__5",op="zd0ix0IBIqFTP6B95VIN",cp="UlZinSHPFkvRP0oFWGRZ",lp="DJcMUKFwkFECf5ksmSfU",up="ENxGKtCpYhxr2iXP7IXH",dp="EofCPtVE6SQxRFEovVtX";function hp({children:e}){const t=(0,pr.o)((e=>e?.item?.uri)),n={appear:dp,appearActive:up,appearDone:lp,enter:cp,enterActive:op,enterDone:sp,exit:ip,exitActive:rp},a=f.createRef();return(0,S.jsx)("div",{children:(0,S.jsx)(ap.A,{mode:"out-in",children:(0,S.jsx)(Ur.A,{classNames:n,nodeRef:a,appear:!0,addEndListener:e=>{a.current?.addEventListener("transitionend",e,!1)},children:(0,S.jsx)("div",{ref:a,children:e})},t)})})}var pp=o(41205);const mp="nDASs8PnkRghxOlOdT4q",fp="ZPBvrYZDkJvwrRfK_r5i",gp="vYn7fv3RB7DSzS3yofOR";function bp(){return(0,S.jsxs)("div",{className:mp,children:[(0,S.jsx)("div",{className:fp}),(0,S.jsx)("div",{className:gp})]})}const vp="vcM9TMyqu0KxTFltxnJw";function yp({children:e,className:t}){return(0,S.jsx)("div",{className:Gt()(vp,t),children:e})}const xp="H9xGogGpXHZx7IssSDnI",wp=({children:e})=>(0,S.jsx)(yp,{className:xp,children:e});function _p({children:e}){const t=(0,f.useRef)(null),n=(0,f.useRef)(null);return(0,$i.w)({refOrElement:n,onResize:({height:e})=>{0===e?t.current?.style.setProperty("position","absolute"):(t.current?.style.removeProperty("position"),t.current?.style.setProperty("grid-row-end",`span ${e+16}`))},observeOnly:"height"}),(0,S.jsx)("div",{ref:t,children:(0,S.jsx)("div",{ref:n,children:e})})}var Ap=o(798),Ep=o(18708),jp=o(10829),Sp=o(48737),Cp=o(81929),Ip=o(66887),Np=o(67436),kp=o(56092),Lp=o(2426),Tp=o(88559),Rp=o(19710),Pp=o(33930),Mp=o(91272),Op=o(19383),Dp=o(56539);const Hp=({item:e})=>{const n={uri:e.uri,numberOfChapters:Cp.Kp},{data:a,isLoading:r,error:i}=(0,Tp.X)({queryKey:["queryNpvEpisode",n],staleTime:Cp.Ff,gcTime:Cp.CD,variables:n}),s=(0,Op.d)(),o=(0,t.NC)(we.xEc),c=(0,Dp.d)(e.uri)?.episodeOrChapter,l=(0,Rp.SB)(a?.episodeUnionV2),u=(0,Rp.lz)(a?.episodeUnionV2);if(!e.uri||!l||r||i)return null;const d=c&&c.type===nr.c.EPISODE&&c.transcript&&c.transcript.length>0;return(0,S.jsxs)(wp,{children:[s&&(0,S.jsx)(_p,{children:(0,S.jsx)(Mp.TopCommentsCard,{uri:l.uri})}),(0,S.jsx)(_p,{children:(0,S.jsx)(jp.N,{episode:l})}),!l.originalEpisode&&(0,S.jsx)(_p,{children:(0,S.jsx)(Ap.c,{episode:l})}),(0,S.jsx)(_p,{children:(0,S.jsx)(Ip.F,{episode:l})}),(0,S.jsx)(_p,{children:(0,S.jsx)(Ep.I,{episode:l})}),o&&u&&(0,S.jsx)(_p,{children:(0,S.jsx)(Np.m,{coverArt:u.coverArt||void 0,description:u.htmlDescription||"",name:u.name,publisher:u.publisher?.name,uri:u.uri})}),d&&(0,S.jsx)(_p,{children:(0,S.jsx)(Pp.n,{episode:e})}),(0,S.jsx)(_p,{children:(0,S.jsx)(Sp.A,{})}),(0,S.jsx)(_p,{children:(0,S.jsx)(kp.T,{headerVariant:"bodyMediumBold",children:(0,S.jsx)(Lp.K,{topics:u?.topics.items??[],logTopicNavigation:()=>{}})})})]})},zp=({item:e})=>(0,oi.n)()?(0,S.jsx)(Hp,{item:e}):(0,S.jsx)(S.Fragment,{});var Vp=o(44821),Bp=o(38241),Up=o(96440),Fp=o(71158),qp=o(41886);var Wp=o(8987);const Gp="pFdYR3vuy4sSAW9Al1PK",$p=({item:e,variant:n})=>{const a=(0,t.NC)(we.LX5),{loading:r,error:i,data:s}=(0,Wp.i)(e);if(!e.uri||!(e=>"Artist"===e?.__typename)(s?.artistUnion)||!(e=>"Track"===e?.__typename)(s?.trackUnion)||r||i)return null;const{profile:o,stats:c,visuals:l,profile:{externalLinks:u}}=s.artistUnion,{credits:d,relatedVideos:h}=s.trackUnion,p=a&&(e=>"RelatedVideoPage"===e?.__typename)(h)&&h.totalCount>0,m=s.artistUnion.goods.concerts.totalCount>0,f=s.trackUnion.merch.totalCount>0;return(0,S.jsxs)(S.Fragment,{children:[p&&(0,S.jsx)("div",{className:Gp,style:{"--section-background-base":"transparent","--section-padding":0},children:(0,S.jsx)(qp.a,{data:s,item:e,withRelatedVideosHeadingShadow:"video"===n,withRelatedVideosHeadingSpacingBottom:!0,fullBleedGap:48,carouselCardWidth:292})}),(0,S.jsxs)(wp,{children:[(0,S.jsx)(_p,{children:(0,S.jsx)(Vp.F,{artistUri:s.artistUnion.uri,artist:o,stats:c,visuals:l,externalLinks:u.items,preferFullBleed:!0})}),d&&(0,S.jsx)(_p,{children:(0,S.jsx)(Bp.V,{data:d,trackUri:e.uri})}),m&&(0,S.jsx)(_p,{children:(0,S.jsx)(Fp.I,{artistId:s.artistUnion.id,data:s.artistUnion.goods.concerts})}),f&&(0,S.jsx)(_p,{children:(0,S.jsx)(Up.J,{artistId:s.artistUnion.id,artistUri:s.artistUnion.uri,merch:s.trackUnion.merch.items})}),(0,S.jsx)(_p,{children:(0,S.jsx)(Sp.A,{})})]})]})},Qp=(0,f.createContext)({masonryItemRefs:{},addMasonryItemRef:()=>{},removeMasonryItemRef:()=>{}}),Kp=({children:e})=>{const[t,n]=(0,f.useState)({}),a=(0,f.useCallback)(((e,t)=>{t&&n((n=>({...n,[e]:t})))}),[]),r=(0,f.useCallback)((e=>{n((t=>{const{[e]:n,...a}=t;return a}))}),[]),i=(0,f.useMemo)((()=>({masonryItemRefs:t,addMasonryItemRef:a,removeMasonryItemRef:r})),[t,a,r]);return(0,S.jsx)(Qp.Provider,{value:i,children:e})},Zp="XEQXyBqaaficCzDJ5AKf",Yp="eIcGlWiPFlMFzz6B2c8s",Jp="PSfSqBJX7klfij762bUE",Xp={cssStyles:{"--section-background-base":"var(--background-elevated-base)","--section-padding":pp.spacer24,"--section-border-radius":pp.spacer16},headerVariant:"titleSmall"};function em({item:e,variant:t}){const{cssStyles:n}=(0,kp.Y)(),a=(0,ba.h)();let r=null;return(0,U.v)(e)&&!e.isLocal?r=(0,S.jsx)($p,{item:e,variant:t}):(0,M.p)(e)&&(r=(0,S.jsx)(zp,{item:e})),r?(0,S.jsxs)("div",{className:Gt()(Zp,{[Jp]:a}),style:n,children:[(0,S.jsx)(bp,{}),(0,S.jsx)("div",{className:Yp,children:r})]}):null}function tm({item:e,variant:n}){return(0,t.NC)(we.k8v)?(0,S.jsx)(Kp,{children:(0,S.jsx)(kp.T,{...Xp,children:(0,S.jsx)(em,{item:e,variant:n})})}):null}var nm=o(95079);const am="GapdiNsdBIazVbcdXmNP",rm="800",im="cinema-mode-container-animation",sm="cinema-mode-container-animation-reverse",om="M8he015HRnzLwz3JDRfC",cm="gIKzFuG_3N1rV0eFUi2h",lm="rYBVq3cPQnPx3qkqOL05",um="x9dJ3u2hhW9QgMGfdXtA",dm="IsRjGOZx7PxUfbBZO8RA";function hm({children:e}){const t=(0,pr.o)((e=>e?.item?.uri)),n=parseInt(rm,10),a=(()=>{const{currentContextUri:e,currentItemUri:t,nextItemUri:n,previousItemUri:a}=(0,pr.o)((e=>({currentContextUri:e?.context.uri,currentItemUri:e?.item?.uri,nextItemUri:e?.nextItems.at(0)?.uri,previousItemUri:e?.previousItems.at(0)?.uri})),((e,t)=>e.currentContextUri===t.currentContextUri&&e.currentItemUri===t.currentItemUri&&e.nextItemUri===t.nextItemUri&&e.previousItemUri===t.previousItemUri)),r=(0,f.useRef)(e),i=(0,f.useRef)(n),s=(0,f.useRef)(a),o=(0,f.useMemo)((()=>{if(t){if(t===i.current)return"next";if(t===s.current)return"previous"}}),[t]);if(t&&e&&e===r.current)return i.current=n,s.current=a,r.current=e,o})();let r;return"next"===a?r=im:"previous"===a&&(r=sm),t?(0,S.jsx)(nm.A,{childFactory:e=>(0,f.cloneElement)(e,{classNames:r,timeout:n}),component:null,children:(()=>{const a=f.createRef();return(0,S.jsx)(Ur.A,{in:!0,appear:!1,timeout:n,classNames:r,nodeRef:a,children:(0,S.jsx)("div",{className:am,ref:a,children:e})},t)})()}):(0,S.jsx)(S.Fragment,{children:e})}var pm=o(89557),mm=o(79403);const fm=({title:e,link:t,onClick:n,className:a})=>e?t?(0,S.jsx)(vr.N_,{to:t,onClick:n,children:(0,S.jsx)(gm,{title:e,className:a})}):(0,S.jsx)(gm,{title:e,className:a}):null;function gm({className:e,title:t}){return(0,S.jsx)(Dr.E,{variant:"bodyMediumBold",className:e,semanticColor:"textBase",children:t})}var bm=o(84176),vm=o(8008),ym=o(99984);function xm({item:e}){const n=(0,t.NC)(we.lDj);return(0,S.jsxs)("div",{className:ym.A.adHeader,children:[(0,S.jsx)(vm.A,{item:e,variant:"bodyMediumBold",semanticColor:"textBase",surface:"CINEMA_MODE"}),n&&(0,S.jsx)(bm.U,{item:e})]})}var wm=o(81940),_m=o(92612);const Am="jGjBLNxG_YEiLQ03xZ92",Em=({children:e,keyboardShortcut:t})=>(0,S.jsxs)("div",{children:[(0,S.jsx)("span",{children:e}),(0,S.jsx)(Dr.E,{variant:"marginal",as:"kbd",className:Am,children:t})]});var jm=o(3191),Sm=o(94875),Cm=o(11727),Im=o(96736),Nm=o(80381),km=o(90282);const Lm="WRGTOibB8qNEkgPNtMxq",Tm="DMm03qTsAQRiHan4x2_X",Rm="fOA8mVyHaHw2T808ZLpL",Pm="evwKdhFvMDEaa9_x_PmY",Mm="BlefThKb7viY6qEBS_vT",Om="dFz3mTMCEntyqsdPM0FF",Dm="Fcj8mAN1eZK2tUKIgSB3",Hm="pRnninATMpy3HDTSr5o0",zm="h4EuLz4_twkL_M8f9Wbn",Vm="bLzfnxEGEY4gss5lmLxy",Bm="pHKCWYLEfXteboHZwjIH",Um="NJrwgEr7XcvEnQhrGNUu",Fm="CNxUJDLHdeb0t0Mckrca",qm="kflPy_mvGLyJR3mkh04x",Wm="ELSmDYJtrr7_ktB1jf97",Gm="l9Qu5hTVqTZAaLybbOWB";function $m(e){return(0,U.v)(e)||(0,F.v)(e)||(0,M.p)(e)||(0,P.d)(e)?e.name:(0,B.N)(e)?"":(0,q.d)(e)}const Qm=({item:e,context:t,UBICallbacks:n})=>{const{logFullscreenButtonClick:a,logCloseButtonClick:r}=n,s=(0,iu.l)(),o=(0,jm.h)(),{isInFullScreen:c,isFullScreenSupported:l,toggleFullScreen:u}=(0,Nm.H)({refOrElement:document.body,shouldWakeLockScreen:!0}),d=(0,pr.o)((e=>(0,B.N)(e?.item??void 0))),h=(0,f.useRef)(null);(0,km.i)({ref:h,preventScroll:!0});const p=(0,f.useCallback)((()=>{a(!c),u()}),[c,a,u]);return(0,S.jsxs)("div",{className:Gm,children:[!d&&(0,S.jsx)(ls.b,{menu:(0,S.jsx)(Im.W,{context:t,item:e}),children:(0,S.jsx)(_m.e,{className:Hm,size:"small",condensed:!1,label:i.Ru.get("more.label.context",e?$m(e):"")})}),l&&!d&&(0,S.jsx)(Sr.Zp,{label:c?(0,S.jsx)(Em,{keyboardShortcut:"Esc",children:i.Ru.get("web-player.cinema-mode.fullscreen.exit")}):i.Ru.get("web-player.cinema-mode.fullscreen.enter"),children:(0,S.jsx)(_r.H,{className:Hm,iconOnly:c?Sm.z:Cm.T,size:"small",onClick:p,"aria-label":c?i.Ru.get("web-player.cinema-mode.fullscreen.exit"):i.Ru.get("web-player.cinema-mode.fullscreen.enter")})}),!c&&(0,S.jsx)(Sr.Zp,{label:(0,S.jsx)(Em,{keyboardShortcut:"Esc",children:i.Ru.get("web-player.cinema-mode.minimize")}),children:(0,S.jsx)(_r.H,{ref:h,className:Gt()(Hm,{[Um]:o&&d}),iconOnly:wm.b,size:"small",onClick:()=>{r(),(0,sl.I)("NPV_OPEN_CINEMA_MODE_BUTTON"),s(Fh.z.CLOSED)},"aria-label":i.Ru.get("web-player.cinema-mode.minimize")})})]})};function Km(e){var t,n,a,r,i,s=e.size?al.$Z[e.size]:e.iconSize,o=(0,al._C)([{size:16,svgContent:"<path d='M9.5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z'/><path d='M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0Zm3 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z'/>"},{size:24,svgContent:"<path d='M12 10a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z'/><path d='M1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12Zm8.159-2.816A3.987 3.987 0 0 0 8 12a3.987 3.987 0 0 0 1.184 2.841A3.987 3.987 0 0 0 12 16a3.987 3.987 0 0 0 2.816-1.159l.012-.013.013-.012A3.987 3.987 0 0 0 16 12a3.987 3.987 0 0 0-1.184-2.841A3.987 3.987 0 0 0 12 8a3.987 3.987 0 0 0-2.841 1.184Z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(al.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}var Zm=o(32231),Ym=o(86963),Jm=o(51689);function Xm(e){var t,n,a,r,i,s=e.size?al.$Z[e.size]:e.iconSize,o=(0,al._C)([{size:16,svgContent:"<path d='M0 16v-.672a3.999 3.999 0 0 1 2-3.463l3.112-1.8a1.2 1.2 0 0 0 .322-1.807l-.487-.585a5.367 5.367 0 0 1-1.353-3.175 5.3 5.3 0 0 1 .2-1.776c.172-.525.453-1.01.823-1.42a4.016 4.016 0 0 1 5.92 0c.37.41.65.895.823 1.42a5.3 5.3 0 0 1 .2 1.776 5.367 5.367 0 0 1-1.353 3.175l-.487.585A1.2 1.2 0 0 0 9.6 9.62l-.008.007A5.486 5.486 0 0 0 8.607 16H0zm14.72-9.029a.75.75 0 0 1 1.28.53v6a2.499 2.499 0 1 1-2.5-2.5h1V7.5a.75.75 0 0 1 .22-.53z'/>"},{size:24,svgContent:"<path d='M14.3 14.28a5.968 5.968 0 0 0 .237 7.717H1v-1.6a4 4 0 0 1 2-3.465l4.8-2.763a1.5 1.5 0 0 0 .4-2.26l-.7-.835a7.046 7.046 0 0 1-1.775-4.17 6.906 6.906 0 0 1 .264-2.33 5.211 5.211 0 0 1 1.08-1.865 5.27 5.27 0 0 1 7.77 0c.486.54.854 1.175 1.08 1.865.22.756.308 1.544.263 2.33a7.047 7.047 0 0 1-1.775 4.17l-.7.835a1.498 1.498 0 0 0 .4 2.26l.193.111zm5.993-4.686a1 1 0 0 1 1.707.707v7.666a3 3 0 1 1-3-3h1v-4.666a1 1 0 0 1 .293-.707z'/>"}],s||24),c=null!==(t=e.autoMirror)&&void 0!==t&&t;return f.createElement(al.In,Object.assign({},e,{autoMirror:c,viewBox:"0 0 ".concat(o.size," ").concat(o.size),dangerouslySetInnerHTML:{__html:"".concat((r=e.title,i=e.titleId,r?"<title ".concat(i?'id="'.concat(i,'"'):"",">").concat(r,"</title>"):"")).concat((n=e.desc,a=e.descId,n?"<desc ".concat(a?'id="'.concat(a,'"'):"",">").concat(n,"</desc>"):"")).concat(o.svgContent)}}))}var ef=o(1657),tf=o(65924),nf=o(6850);const af=({item:e,variant:t,hasHeroImage:n,hasCanvas:a,UBICallbacks:r,setPreferredVariant:s})=>{const{logSwitchVariantClick:o,logSubtitlesButtonClick:c}=r,l=(0,f.useCallback)((e=>{const t=e.currentTarget.value;s(t),o(t)}),[s,o]),u=(0,U.v)(e),d="video"===t,{isSupported:h,availableLanguages:p}=(0,nf.K)(),m=h&&0!==p.length,g="video"===t&&m;return d?null:(0,S.jsxs)("div",{role:"radiogroup","aria-label":i.Ru.get("web-player.cinema-mode.fullscreen.media-control-options"),className:Gm,children:[u&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(Sr.Zp,{label:i.Ru.get("web-player.cinema-mode.artwork-mode"),children:(0,S.jsx)(_r.H,{role:"radio",value:"artwork","aria-checked":"artwork"===t,className:Gt()(Hm,{[zm]:"artwork"===t}),iconOnly:"artwork"===t?Km:Zm.I,size:"small","aria-label":i.Ru.get("web-player.cinema-mode.artwork-mode"),onClick:l})}),(0,S.jsx)(Sr.Zp,{label:i.Ru.get("web-player.cinema-mode.canvas-mode"),children:(0,S.jsx)(_r.H,{role:"radio",value:"canvas","aria-checked":"canvas"===t,className:Gt()(Hm,{[zm]:"canvas"===t}),iconOnly:"canvas"===t?Ym.C:Jm.d,size:"small","aria-label":i.Ru.get("web-player.cinema-mode.canvas-mode"),onClick:l,disabled:!a})}),(0,S.jsx)(Sr.Zp,{label:i.Ru.get("web-player.cinema-mode.hero-mode"),children:(0,S.jsx)(_r.H,{role:"radio",value:"hero","aria-checked":"hero"===t,className:Gt()(Hm,{[zm]:"hero"===t}),iconOnly:"hero"===t?Xm:ef.r,size:"small","aria-label":i.Ru.get("web-player.cinema-mode.hero-mode"),onClick:l,disabled:!n})})]}),g&&(0,S.jsx)(tf.C,{iconSize:"small",renderInline:!0,noBackground:!0,className:Gt()("encore-over-media-set",Vm),onToggle:c})]})},rf=e=>{const{data:t}=(0,Wp.i)(e),n={artist:null,track:null};return"Artist"===t?.artistUnion.__typename&&(n.artist=t.artistUnion),"Track"===t?.trackUnion.__typename&&(n.track=t.trackUnion),n};var sf=o(43020);const of=e=>{const t=(0,f.useRef)(!1),{uri:n,isSongVideo:a}=(0,sf.k)();return e===n&&(t.current=a),t.current};var cf=o(92289),lf=o(84417),uf=o(86787);const df="_puuZ57esN_9Y2SCNbwo",hf="oANNzxABv28l2I8YF5pg",pf="JVkIVMehzaPb8PLfQP6s",mf="AKCWrvmtzq3kz_PI9CNe",ff="hlDzKEohazBhJodv4mhe",gf="QGXc_hHBwRUrhNYouZGq",bf="xdja48XruI6VfcoS9tui",vf="BVAIl9qXiMPGdPlcsIUS",yf=({context:e,item:n,variant:a,ambientMode:r,setPreferredVariant:i})=>{const{title:s,link:o}=(0,lf.g)(n,e),c=(0,t.NC)(we.mZP),{artist:l,track:u}=rf(n),d=ea(),h=(0,mm.H)(e.uri),p=Uh(),m=(0,U.v)(n),g=u?.canvas,b=c&&!!g?.fileId,v=!!(0,f.useMemo)((()=>{const e=l?.headerImage?.data;if("ImageV2"===e?.__typename)return(0,uf.g)(e.sources.map(uf.R))}),[l]),{isAdPlaying:y,isPlayingVideoAd:x}=(0,pr.o)((e=>{const t=e?.item??void 0,n=(0,B.N)(t);return{isAdPlaying:n,isPlayingVideoAd:(0,Hc.A3)(e)&&n}}),mr.a),{logContextTitleClick:w,logAudioVideoToggleClick:_}=p,A=of(n.uri);return(0,S.jsx)(S.Fragment,{children:!x&&(0,S.jsx)(np.h,{menu:(0,S.jsx)(Im.W,{context:e,item:n}),children:(0,S.jsxs)("div",{className:Gt()(df,lm,{[pf]:"hero"===a||"video"===a,[hf]:r&&!y,[um]:r}),style:d,children:[(0,S.jsx)(np.h,{menu:h,children:(0,S.jsx)("div",{className:gf,children:(0,B.N)(n)?(0,S.jsx)(xm,{item:n}):(0,S.jsx)(fm,{title:s,link:o,onClick:()=>{w(e.uri)}})})}),(0,S.jsxs)("div",{className:ff,children:[(0,S.jsx)(af,{variant:a,setPreferredVariant:i,item:n,hasHeroImage:v,hasCanvas:b,UBICallbacks:p}),m&&!A&&(0,S.jsx)("div",{className:bf,children:(0,S.jsx)("div",{className:mf})}),A&&(0,S.jsx)(cf.L,{className:vf,onClick:_}),(0,S.jsx)(Qm,{item:n,context:e,UBICallbacks:p})]})]})})})};var xf=o(5056),wf=o(84111),_f=o(35469);const Af="a7Ka5yznvrbSDPk1G36o",Ef="vfrdRkOiUHFQZ8YxDEyK",jf="JVoVebPNAPKBLKSlIBXw",Sf="fdPgA4PPp3NyCe5sMQzv",Cf="NLugTTXj517p1xOAgsur",If="pd3cZQBgtgOFLAp9ns7Q",Nf=({ambientMode:e,mediaVariant:n,children:a,style:r,onContextMenu:i})=>{const s=(0,t.NC)(we.k8v),o=(0,wf.w)({contrast:"highContrast"}),c=(0,wf.w)({contrast:"higherContrast"});let l={"--cinema-mode-bg-color-from":o?.["--background-base"],"--cinema-mode-bg-color-to":c?.["--background-base"],...r};return"artwork"!==n&&"canvas"!==n||(l={...l,...o}),(0,S.jsxs)("div",{className:Gt()(Af,{[If]:e,[Cf]:"video"===n,[Sf]:"hero"===n,[jf]:s,"encore-over-media-set":"video"===n||"hero"===n}),style:l,onContextMenu:i,children:[(0,S.jsx)("div",{className:Ef}),a]})},kf=({imageUrl:e,...t})=>{const{data:n}=(0,_f.g)(e?[e]:[]);return(0,S.jsx)(xf.d,{dynamicColors:n,children:(0,S.jsx)(Nf,{...t})})};var Lf=o(75627);const Tf="xT6oSRia2sXC94ckOTnF",Rf="xTq_kta5CuULVPQZSRUN",Pf=({canvas:e,onError:t})=>{const[n,a]=(0,f.useState)(!0);return(0,S.jsx)(Lf.Gg,{fileId:e.fileId,canvasUrl:e.url,canvasType:e.type,canvasUri:e.uri,playerContainerClass:Tf,playbackType:Lf.RT.Loop,allowAspectRatioFix:!0,onLoaded:()=>a(!1),onError:t,children:n&&(0,S.jsx)("div",{className:Rf})})},Mf=f.memo((({variant:e})=>"hero"!==e?null:(0,S.jsx)("div",{className:Gt()(Rm,cm)})));var Of=o(76546);var Df=o(15211),Hf=o(32605);const zf="gbmk2WQ9l8znVQyvUFBY",Vf="Gi_KZDd1DK3BeebKNKI2",Bf=f.memo((()=>{const e=(()=>{const e=(0,ya.l)(),{videoPlayerMode:t}=(0,$h.d)();return!!(0,Of.L)()&&(t===H.Kz.documentPip||t===H.Kz.pip?"pip":!!e&&"connect")})(),t=f.useMemo((()=>{switch(e){case"pip":return(0,S.jsx)(Df.k,{});case"connect":return(0,S.jsx)(Hf.V,{});case!1:return null;default:return(0,q.k)(e),null}}),[e]);return t?(0,S.jsx)("div",{className:Vf,children:t}):null})),Uf=f.memo((({variant:e})=>{const t="video"===e;return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{hidden:!t,id:"VideoPlayerCinema_ReactPortal",className:zf}),t&&(0,S.jsx)(Bf,{})]})}));var Ff=o(36755),qf=o(26881),Wf=o(57556),Gf=o(43776),$f=o(79902),Qf=o(7545);var Kf=o(39801);const Zf="xlarge",Yf=f.memo((({context:e,item:n,variant:a,ambientMode:r,onContextMenu:i,setPreferredVariant:s})=>{const o=(0,t.NC)(we.mZP),{setVideoPlayerUIFlag:c}=(0,$h.d)(),l=of(n.uri),u=(0,sr.bJ)(e,n),d=ea(),h=(0,_n.SF)(),p=(0,tr.h)(n.images??void 0,{desiredSize:640,desiredLabel:Zf});(0,f.useLayoutEffect)((()=>{c(H.nP.cinema,!0)}),[c]),(0,Kf.M)({desiredSize:640,desiredLabel:Zf}),(e=>{const t=(0,pr.o)((e=>e?.nextItems?.[0]),((e,t)=>e?.uri===t?.uri)),n=(0,f.useMemo)((()=>(0,tr.h)(t?.images??void 0,{desiredLabel:e?.desiredLabel,desiredSize:e?.desiredSize})),[t?.images,e?.desiredLabel,e?.desiredSize]);(0,f.useEffect)((()=>{n&&((new Image).src=n)}),[n])})({desiredSize:640,desiredLabel:Zf}),(0,f.useEffect)((()=>{h.current&&(h.current.scrollTop=0)}),[n.uri,h]);const{artist:m,track:g}=rf(n);(()=>{const e=(0,pr.o)((e=>e?.nextItems?.[0]),((e,t)=>e?.uri===t?.uri));rf(e)})();const b=(0,mn.S)();(()=>{const e=(0,R.z)(),t=(0,f.useRef)(!1),n=(0,f.useCallback)((n=>{t.current?t.current=!1:e[n](15e3)}),[e]),a=(0,f.useCallback)(((n,a)=>{n.repeat&&(e[a](5e3),t.current=!0)}),[e]),r=(0,f.useCallback)((()=>{n("seekForward")}),[n]),i=(0,f.useCallback)((()=>{n("seekBackward")}),[n]),s=(0,ju.dh)((e=>{a(e,"seekForward")}),100),o=(0,ju.dh)((e=>{a(e,"seekBackward")}),100);(0,Zd.N)(["right"],r,{eventType:"keyup"}),(0,Zd.N)(["right"],s,{allowRepeat:!0}),(0,Zd.N)(["left"],i,{eventType:"keyup"}),(0,Zd.N)(["left"],o,{allowRepeat:!0})})();const v=g?.canvas,y=o&&!!v?.fileId,x=(0,f.useMemo)((()=>{const e=m?.headerImage?.data;if("ImageV2"===e?.__typename)return(0,uf.g)(e.sources.map(uf.R))}),[m]),w={};"hero"===a&&!!x&&(w["--cinema-mode-bg-image"]=`url(${x.url})`);const{isAdPlaying:_,isPlayingVideoAd:A}=(0,pr.o)((e=>{const t=e?.item??void 0,n=(0,B.N)(t);return{isAdPlaying:n,isPlayingVideoAd:(0,Hc.A3)(e)&&n}}),mr.a),E=b===Fh.z.NOW_PLAYING_VIEW&&_&&!A,j=(0,B.N)(n),C=j?n.url??void 0:void 0,I=(0,f.useCallback)((()=>{j&&(window.location.href=C??"")}),[C,j]),N=(0,f.useCallback)((()=>{s("artwork")}),[s]),{images:k,isSecondary:L}=(0,Qf.u)(n);return(0,S.jsx)("div",{className:Gt()(Lm,{[Bm]:r}),children:(0,S.jsxs)(kf,{ambientMode:r,mediaVariant:a,imageUrl:p,style:w,onContextMenu:i,children:[(0,S.jsx)(Mf,{variant:a}),(0,S.jsx)(yf,{context:e,item:n,variant:a,ambientMode:r,setPreferredVariant:s}),"lyrics"===a&&(0,S.jsx)(qf.default,{format:"cinema"}),"artwork"===a&&(u?(0,S.jsx)("div",{className:Gt()(Mm,om),children:(0,S.jsx)($f.aU,{})}):(0,S.jsx)(pm.N,{className:Gt()(Mm,Om,om,{[Dm]:j}),placeholderClassName:Pm,imgSrc:p,loading:"eager",onClick:I})),y&&"canvas"===a&&(0,S.jsx)(Pf,{canvas:v,onError:N}),(0,S.jsx)(Uf,{variant:a}),r&&!["video","lyrics"].includes(a)&&!_&&(0,S.jsx)("div",{className:Gt()(Fm,dm),style:d,children:(0,S.jsxs)("div",{className:qm,children:[("hero"===a||"canvas"===a||L)&&(0,S.jsx)(Wf.b,{className:Wm,desiredLabel:"small",size:92,images:k,type:n.type}),(0,S.jsx)(Gf.d,{context:e,item:n,enableVideoButton:l,titleTypeVariant:"titleSmall",subtitleTypeVariant:"bodyMedium"})]})}),E&&j&&(0,S.jsx)(Ff.h,{item:n,className:Tm})]})})})),Jf=e=>(0,S.jsx)(Yf,{...e});function Xf(e){const{isPlayingVideo:t}=(0,pr.o)((e=>({isPlayingVideo:(0,Hc.A3)(e)})),mr.a),n=(0,pr.o)((e=>e?.item??void 0),mr.a),{artist:a}=rf(n),r=(0,f.useMemo)((()=>{const e=a?.headerImage?.data;if("ImageV2"===e?.__typename)return(0,uf.g)(e.sources.map(uf.R))}),[a]);return"lyrics"===e?"lyrics":t?"video":"hero"===e&&!!r?"hero":"canvas"===e?"canvas":"artwork"}var eg=o(80631);const tg="YMsGXPVKmUe0oQtcmynz",ng="bJpCYqcWl8OpWl0MZ2aq",ag="cxJRf5Rtrz506OnriHVw",rg=({children:e})=>{const t=(0,f.useRef)(null),n=(0,f.useMemo)((()=>({scrollNodeRef:t})),[t]),{currentVariant:a}=(0,eg.r)(),r=Xf(a);return(0,f.useEffect)((()=>{"lyrics"!==r&&t.current?.scrollTo({top:0})}),[r]),(0,S.jsx)(_n.bi.Provider,{value:n,children:(0,S.jsx)(Fu.a,{className:ng,scrollNodeRef:t,children:e})})};var ig=o(55017),sg=o(50006),og=o(19545),cg=o(35902);const lg=(e,t,n,a)=>!!n||(!t||(!!(e=>{if(null===e)return!1;const t=document.elementFromPoint(e.x,e.y),n=t?.closest(sg.nu);return n instanceof HTMLElement&&"false"!==n.dataset.preventsAmbientMode})(e)||(null!==document.activeElement?.closest(sg.oj)||(!!document.querySelector("#context-menu")||(!!(()=>{const e=document.querySelectorAll(`[aria-modal="true"]:not([hidden]):not([aria-label="${i.Ru.get("ad-formats.advertisement")}"])`);if(0===e.length)return!1;for(const t of e){if(!("checkVisibility"in t)||"function"!=typeof t.checkVisibility)return!1;if(t.checkVisibility())return!0}return!1})()||!!a))))),ug=()=>{const e=(()=>{const e=(0,f.useContext)(Rh.y);if(!e)throw new Error("useAmbientDispatch must be used within a CinemaProvider");return e})(),n=(0,og.j)(),a=(0,f.useRef)(null),r=(0,t.NC)(we.ikI),i=(0,f.useRef)(null),{isPlaying:s}=(0,cg.GK)(),o=(0,f.useRef)(!1),c=(0,_n.SF)(),l=(0,ig.y)(c),u=(0,f.useCallback)((()=>!lg(i.current,s,o.current,l)),[s,l]),d=(0,f.useCallback)((()=>{e(!0)}),[e]),h=(0,f.useCallback)((()=>{const e=1e3*r;function t(t){a.current&&clearTimeout(a.current),a.current=setTimeout(t,e)}const n=()=>{t(u()?()=>{u()?d():n()}:n)};n()}),[r,d,u]),p=(0,f.useCallback)((()=>{e(!1),h()}),[h,e]),m=(0,ju.YQ)(p,100,{leading:!0,trailing:!1,maxWait:1e3*(r-1)});(0,V.p)(z.gd.ERROR,p),(0,f.useEffect)((()=>{if(!n)return()=>{};const e=e=>{i.current={x:e.clientX,y:e.clientY},m()},t=e=>{"Tab"===e.key&&m()};return document.addEventListener("pointermove",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("pointermove",e),document.removeEventListener("keydown",t),a.current&&clearTimeout(a.current)}}),[m,n,e]),(0,f.useEffect)((()=>{const e=()=>{o.current=!0},t=()=>{o.current=!1};return document.addEventListener("pointerdown",e),document.addEventListener("pointerup",t),()=>{document.removeEventListener("pointerdown",e),document.removeEventListener("pointerup",t)}}),[]),(0,f.useEffect)((()=>{const e=()=>{i.current=null};return document.addEventListener("pointerleave",e),()=>{document.removeEventListener("pointerleave",e)}}),[]),(0,f.useEffect)((()=>{l||n||!u()?p():d()}),[d,p,n,u,l])};var dg=o(10195),hg=o(79863);var pg=o(70297);const mg=f.memo((({nowPlayingState:e})=>{const{isPlayingVideo:t}=(0,pr.o)((e=>({isPlayingVideo:(0,Hc.A3)(e)})),mr.a),n=(0,pg.F)(),{currentVariant:a}=(0,eg.r)(),r=Xf(a),i=(0,jm.h)();(0,hg.w)(),(0,dg.x)((()=>{(0,sl.I)("NPV_OPEN_CINEMA_MODE_BUTTON")}));const{spec:s}=(0,Ei.r)(Vh,{});ug();const o=(0,S.jsx)(np.h,{menu:(0,S.jsx)(Im.W,{context:e.context,item:e.item}),children:(0,S.jsx)(Jf,{context:e.context,item:e.item,ambientMode:i,variant:r,setPreferredVariant:n})});return(0,S.jsxs)(Ai.r,{spec:s,children:[(0,S.jsx)("div",{className:Gt()(tg,{[ag]:["hero","video"].includes(r)}),children:t?o:(0,S.jsx)(hm,{children:o})}),(0,S.jsx)(hp,{children:"lyrics"!==r&&(0,S.jsx)(tm,{item:e.item,variant:r})})]})})),fg=()=>{const e=function(){const e=(0,pr.o)((e=>e),Of.F),t=(0,f.useRef)(e?.item);if(null===e)return null;e.item&&(t.current=e.item);const{context:n,index:a}=e;return null===t.current||void 0===t.current?null:{context:n,item:t.current,index:a}}(),t=(0,iu.l)();return(0,f.useEffect)((()=>{e||t(Fh.z.CLOSED)}),[e,t]),e?(0,S.jsx)(_n.ql.Provider,{value:"now_playing_panel",children:(0,S.jsx)(rg,{children:(0,S.jsx)(mg,{nowPlayingState:e})})}):null};var gg=o(2095),bg=o(60647);var vg=o(82570);const yg="QdB2YtfEq0ks5O4QbtwX",xg="PZX553lOrpQetFlWCrWO",wg="FWlHsHhD0hSw1ldIXnOF",_g="poe3QmyrczMfT4aZNIok",Ag="FKsek3qI2lalTOUrGVqP",Eg="_6dEq1ZVxeUsyP_cwJlgR",jg=()=>{const e=(0,gg.S)(),t=(()=>{const e=(0,gg.S)(),t=(0,bg.l)(),n=(0,Bn.XB)(),a=(0,f.useRef)(n),[r,i]=(0,f.useState)(n!==Un.Z.Disabled&&n!==Un.Z.NowPlayingView);return(0,f.useEffect)((()=>{e===Fh.z.NOW_PLAYING_VIEW&&a.current!==n?Gh({transitionKey:"right-sidebar-open",transition:()=>{i(n!==Un.Z.Disabled&&n!==Un.Z.NowPlayingView)}}):i(n!==Un.Z.Disabled&&n!==Un.Z.NowPlayingView),a.current=n}),[n,e,t]),r})(),n=(0,jm.h)(),a=(0,d.d4)((e=>e.ui.fullscreenMode.isOpen)),r=_a(),i=(0,vg.B)();return null===e||e===Fh.z.CLOSED||e===Fh.z.LIBRARY?null:(0,S.jsx)("div",{className:Gt()(yg,{[xg]:t,[wg]:n,[_g]:a,[Ag]:r,[Eg]:e===Fh.z.NOW_PLAYING_VIEW}),ref:i,children:e===Fh.z.NOW_PLAYING_VIEW&&(0,S.jsx)(fg,{})})},Sg="UQRh5VQzvqcMfTje1JUe",Cg="vZEejECt3WMlIXNA9fj2",Ig="xY0iJHKcHDzoJjeBKSdO",Ng="ioc3t503ae97t5CDdGbB",kg="qxrH_qn4r4_azzuyVxbj",Lg="EwLgE5CNgEGirtNknjHp";function Tg({className:e}){return(0,S.jsxs)("div",{className:Gt()(Sg,e),children:[(0,S.jsx)("div",{className:Cg}),(0,S.jsx)("div",{className:Ig}),(0,S.jsx)("div",{className:Lg}),(0,S.jsx)("div",{className:Ng}),(0,S.jsx)("div",{className:kg})]})}var Rg=o(14436);function Pg({children:e,UBICallbacks:n}){const{isExpanded:a}={isExpanded:(0,Bn.XB)()!==Un.Z.Disabled},r=(0,t.NC)(we.ZDY),s=(0,f.useDeferredValue)(a),{logShowNPVButtonClick:o}=n,c=(0,Bn._Y)(),u=(0,d.wA)(),h=(0,f.useCallback)((()=>{o(),c(Te.$S.NPV_BUTTON_CLICK),u((0,l.Ym)())}),[u,o,c]);return r?(0,S.jsx)("div",{className:Gt()(Rg.A.peek,{[Rg.A.expanded]:a,[Rg.A.collapsed]:!a,[Rg.A.deferredCollapsed]:!s}),children:(0,S.jsxs)("div",{className:Rg.A.overlayWrapper,children:[(0,S.jsx)(Tg,{className:Rg.A.fauxMainViewEnd}),(0,S.jsx)("div",{className:Rg.A.peekContent,"aria-hidden":!a,inert:a?void 0:"",children:e}),(0,S.jsx)("div",{className:Rg.A.overlay,onClick:h,children:(0,S.jsx)(Sr.Zp,{label:i.Ru.get("web-player.cinema-mode.peek.show.now-playing-view"),children:(0,S.jsx)(_r.H,{"aria-label":i.Ru.get("web-player.cinema-mode.peek.show.now-playing-view"),iconOnly:Il.g,size:"small",className:Rg.A.overlayButton})})})]})}):(0,S.jsx)(S.Fragment,{children:e})}const Mg=f.lazy((async()=>{const{PanelSection:e}=await Promise.all([o.e(5627),o.e(6504),o.e(5920),o.e(8832),o.e(1604),o.e(8106),o.e(319)]).then(o.bind(o,57610));return{default:e}})),Og=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(Mg,{})});var Dg=o(40182);const Hg="XOawmCGZcQx4cesyNfVO";function zg({children:e}){const n=(0,Dg.X)(),{size:a}=(0,Bn.Zf)();let r=a;return(0,t.NC)(we.ZDY)||n!==Un.Z.Disabled||(r=0),(0,S.jsx)("div",{style:{width:`${r}px`},className:Hg,children:e})}const Vg=()=>{const e=Uh();return(0,S.jsx)(Pg,{UBICallbacks:e,children:(0,S.jsx)(zg,{children:(0,S.jsx)(Og,{})})})};var Bg=o(26482);const Ug="cKAAyrqpVEsxnhtvNHou",Fg="HRQp773shLo1JL0Df_og",qg="zQW9tqtrDIkVB6G8W3OO",Wg="n0OfVH5OdDa9YY7NXzN1",Gg=({item:e})=>{const t=(0,d.wA)(),n=(0,iu.l)(),a=(0,ba.h)(),{setVideoPlayerUIFlag:r}=(0,$h.d)(),s=(0,f.useCallback)((()=>{(0,sl.I)("NPV_OPEN_CINEMA_MODE_BUTTON"),n(pn.z.CLOSED),t((0,Bg.Oc)()),r(H.nP.cinema,!1)}),[t,n,r]);return(0,S.jsxs)("div",{className:Ug,children:[(0,S.jsx)(xm,{item:e}),(0,S.jsx)("div",{className:Fg,children:(0,S.jsx)(_r.H,{className:Gt()(qg,{[Wg]:a}),iconOnly:wm.b,size:"small",onClick:s,"aria-label":i.Ru.get("web-player.cinema-mode.minimize")})})]})},$g=()=>{const e=(0,mn.S)(),t=(0,ba.h)(),{isPlayingVideoAd:n,item:a}=(0,pr.o)((e=>{const t=e?.item??void 0;return{isPlayingVideoAd:(0,Hc.A3)(e)&&(0,B.N)(t),item:t}}),((e,t)=>e.isPlayingVideoAd===t.isPlayingVideoAd&&e.item?.uid===t.item?.uid)),r=e===pn.z.NOW_PLAYING_VIEW&&n;let i="main-view",s="left-sidebar / main-view",o="var(--above-main-and-now-playing-view-grid-area-z-index)";return r&&(s="left-sidebar / right-sidebar"),t&&(i="global-nav / now-playing-bar",s="left-sidebar / right-sidebar",o="var(--above-everything-grid-area-z-index)"),(0,S.jsxs)($n,{gridRow:i,gridColumn:s,zIndex:o,debugLabel:r?"VTO cinema mode ad":"VTO modal ad",children:[r&&a&&(0,B.N)(a)?(0,S.jsx)(Gg,{item:a}):null,(0,S.jsx)("div",{className:"VTO__modal-slot"})]})};var Qg=o(43451),Kg=o(62287),Zg=o(21128),Yg=o(28465),Jg=o(40071),Xg=o(4164),eb=o(84541),tb=o(21313),nb=o(53977);const ab=()=>{const{id:e}=(0,ae.g)(),t=(0,d.wA)(),n=(0,tb.M)(),a=(0,Jg.C)();return(0,f.useEffect)((()=>{if(!e)return;const r=sb(n,a,e);r&&t(r)}),[t,e,n,a]),(0,S.jsx)(Xg.$,{to:"/"})},rb=()=>{const e=(0,tb.M)(),t=(0,Jg.C)(),n=(0,Yg.Y)(),a=(0,ae.zy)();return(0,f.useEffect)((()=>{if(t===nb.lz.PREMIUM&&e===nb._H.ENABLED){const e=(0,X.o_h)(a.pathname);n(e&&(0,X.p3P)(e)?e:void 0)}}),[n,t,a.pathname,e]),(0,S.jsx)(Xg.$,{to:"/"})},ib=()=>{const{openQueue:e}=(0,Kg.R)();return(0,f.useEffect)((()=>{e(Qg.p.PARTICIPANT_LIST)}),[e]),(0,S.jsx)(Xg.$,{to:"/"})};function sb(e,t,n){return t===nb.lz.NONE?(0,l.A9)(eb.EL.ERROR):e===nb._H.RESTRICTED?(0,l.A9)(eb.EL.REDIRECT,n):e===nb._H.ENABLED?(0,l.A9)(eb.EL.JOIN,n):null}const ob=new Map,cb=(e,t=[])=>{(0,f.useEffect)((()=>(ob.set(e,!0),()=>{ob.delete(e)})),[...t,e])},lb=e=>Object.values(Zg.S).includes(e),ub=()=>{const e=(0,d.wA)(),t=(0,tb.M)(),n=(0,ot.g)(),a=(0,Jg.C)(),r=(0,Yg.Y)(),{openQueue:i}=(0,Kg.R)();return cb((s=>{const o=(0,X.o_h)(s.pathname??""),c=o&&(0,X.crr)(o)&&!lb(s.pathname),l=o&&(0,X.p3P)(o);if(lb(s.pathname))return i(Qg.p.PARTICIPANT_LIST),!0;if(l)return r(o),!0;if(c){const r=sb(t,a,o.id);return!!r&&(e(r),s.state?.redirectToHome&&n("/"),!0)}return!1}),[t,a]),null},db=()=>{const{openQueue:e}=(0,Kg.R)();return cb((t=>"/queue"===t.pathname?(e(Qg.p.QUEUE),!0):"/history"===t.pathname&&(e(Qg.p.HISTORY),!0))),null};var hb=o(20040);const pb=()=>{const e=(0,gg.S)(),t=(0,iu.l)();return cb((n=>"/launch-cinema-mode"===n.pathname&&(e!==Fh.z.NOW_PLAYING_VIEW&&t(Fh.z.NOW_PLAYING_VIEW),!0))),null};var mb=o(50589);class fb extends Ja.V{}const gb=({children:e})=>{const t=(0,f.useMemo)((()=>new fb),[]);return(0,S.jsx)(mb.m.Provider,{value:t,children:e})};var bb=o(45575),vb=o(15570),yb=o(28500),xb=o(31799);const wb=1248,_b=(0,Zh.g)(Un.Z),Ab=(0,Zh.g)(yb.ZS),Eb=()=>(function(){const{size:e,setSize:n,minWidth:a,maxWidth:r,leftSidebarCollapsedStateNavbarWidth:i,leftSidebarDefaultStateNavbarWidth:s,leftSidebarExpandedStateNavbarWidth:o}=(0,Zn.y)(),{leftSidebarState:c,setLeftSidebarState:l,canCollapse:u}=(0,yb.ae)(),d=(0,Bn.XB)(),h=(0,Bn._Y)(),{min:p,max:m,size:g,setSize:b}=Yn(),v=(0,xb.H)(),y=(0,f.useRef)(null),x=(0,f.useRef)(null),w=(0,f.useRef)(null),_=(0,t.NC)(we.ZDY)?bb.j:0;(0,f.useLayoutEffect)((()=>{const t=v-e-3*La.KV-(d!==Un.Z.Disabled?g+La.KV:_),f={leftSidebarWidth:e,leftSidebarMinWidth:a,leftSidebarMaxWidth:r,leftSidebarState:c,leftSidebarStateRestoreTarget:y.current,rightSidebarWidth:g,rightSidebarMinWidth:p,rightSidebarMaxWidth:m,rightSidebarPanel:d,rightSidebarPanelRestoreTarget:x.current,storedCollapsedLeftSidebarWidth:i,storedDefaultLeftSidebarWidth:s,storedExpandedLeftSidebarWidth:o,clientWidth:v,mainContentWidth:t,canCollapse:u},A=w.current;if((0,K.j)(f,A))return;const E=function(e,t){let{leftSidebarWidth:n=0,rightSidebarWidth:a=0}=t;const{mainContentWidth:r=0,leftSidebarMinWidth:i=0,leftSidebarMaxWidth:s=0,leftSidebarState:o,leftSidebarStateRestoreTarget:c,rightSidebarMinWidth:l=0,rightSidebarMaxWidth:u=0,rightSidebarPanel:d,rightSidebarPanelRestoreTarget:h,storedCollapsedLeftSidebarWidth:p=0,storedDefaultLeftSidebarWidth:m=0,storedExpandedLeftSidebarWidth:f=0,clientWidth:g=0,canCollapse:b=!0}=t,v={},y=d!==Un.Z.Disabled,x=void 0!==e?.leftSidebarWidth&&n>e.leftSidebarWidth,w=void 0!==e?.rightSidebarWidth&&a>e.rightSidebarWidth,_=void 0===e?.clientWidth?0:g-e.clientWidth,A=_<0,E=g>0,j=r<La.ev?La.ev-r:0;let S=A?-1*_:0;r>wb?S=Math.max(0,S-(r-wb)):j&&(S=j);const C=o===yb.ZS.EXPANDED&&e?.leftSidebarState!==yb.ZS.EXPANDED,I=o===yb.ZS.DEFAULT&&e?.leftSidebarState!==yb.ZS.DEFAULT;let N=n-i;x&&(N=C?n-vb.Z.EXPANDED_MIN:I?n-vb.Z.DEFAULT_MIN:0);let k=w?0:a-l;const L=S<=N+k;if(r<La.ev&&!L)y&&(x||A&&(o===yb.ZS.COLLAPSED||!b))?(v.rightSidebarPanel=Un.Z.Disabled,v.rightSidebarPanelRestoreTarget=t.rightSidebarPanel,S-=a,k=0):(o===yb.ZS.EXPANDED&&r+(n-vb.Z.DEFAULT_MIN)>La.ev?(v.leftSidebarState=yb.ZS.DEFAULT,S-=n-m,N=m-vb.Z.DEFAULT_MIN):(v.leftSidebarState=yb.ZS.COLLAPSED,S-=n-p,N=0),v.leftSidebarStateRestoreTarget=t.leftSidebarState);else if(d===Un.Z.Disabled&&h!==Un.Z.Disabled&&_b(h)&&d!==e?.rightSidebarPanelRestoreTarget&&r-a-La.KV>=La.ev)v.rightSidebarPanel=h,v.rightSidebarPanelRestoreTarget=null;else if(o===yb.ZS.DEFAULT&&c===yb.ZS.EXPANDED&&r-(f-n)>=La.ev)v.leftSidebarState=yb.ZS.EXPANDED,v.leftSidebarStateRestoreTarget=null;else if(o===yb.ZS.COLLAPSED&&c===yb.ZS.DEFAULT&&r-(m-n)>=La.ev)v.leftSidebarState=yb.ZS.DEFAULT,v.leftSidebarStateRestoreTarget=null;else if(E&&r>=800){let e=s-n,t=u-a;const r=Math.min(_,e+t);for(let i=0;i<r;i++)n<a&&n<s&&e>0?(n++,e--):a<u&&t>0&&(a++,t--)}o!==e?.leftSidebarState&&Ab(c)&&c===e?.leftSidebarStateRestoreTarget&&(v.leftSidebarStateRestoreTarget=null);d!==e?.rightSidebarPanel&&_b(h)&&h===e?.rightSidebarPanelRestoreTarget&&(v.rightSidebarPanelRestoreTarget=null);if(S>0&&S<=N+k)for(let e=0;e<S;e++)n>a&&n>i&&N>0?(n--,N--):a>l&&k>0&&(a--,k--);n&&n!==t.leftSidebarWidth&&(v.leftSidebarWidth=n);a&&a!==t.rightSidebarWidth&&(v.rightSidebarWidth=a);return v}(A,f);void 0!==E.leftSidebarWidth&&n(E.leftSidebarWidth),Ab(E.leftSidebarState)&&l(E.leftSidebarState),void 0!==E.leftSidebarStateRestoreTarget&&(y.current=E.leftSidebarStateRestoreTarget),void 0!==E.rightSidebarWidth&&0!==A?.rightSidebarWidth&&b(E.rightSidebarWidth),void 0!==E.rightSidebarPanel&&h((0,Te.MQ)(E.rightSidebarPanel)),void 0!==E.rightSidebarPanelRestoreTarget&&(x.current=E.rightSidebarPanelRestoreTarget),w.current=f}),[e,a,r,n,g,p,m,b,d,i,s,o,l,h,v,u,_,c])}(),null);var jb=o(30869),Sb=o(35014),Cb=o(40962);const Ib=()=>{const e=(0,jb.o)(Sb.P.CountryHubs,(0,ae.zy)()),n=(()=>{const e=(0,Dd.c)(),n=(0,t.NC)(we.$AL);return!!e&&n===we.a8u.Enabled})(),a=(0,Cb.w2)(window.navigator.userAgent);return(e||n)&&!a};var Nb=o(76358),kb=o(76541),Lb=o(62218);let Tb=function(e){return e.InView="in_view",e.OutOfView="out_of_view",e}({});var Rb=o(33333);let Pb=new class{get(){return Rb.t5}};let Mb=new class{get(){return Rb.wi}};var Ob=o(79577);const Db=()=>{const[e,t]=(0,f.useState)(!1),{pathname:n}=location,a=(0,d.d4)(Lb.JJ),r=(0,qi.V)(),[s,o]=(0,f.useState)(null),c=i.Ru.getLocaleForURLPath(),l=(0,Ob.p)({urlLocale:c,type:"locale"}),{ref:u,inView:h}=(0,ho.Wx)({threshold:.5}),p=Pb.get(),m=Mb.get(),g=(()=>{const e=(0,ge.vh)(),t=(0,Dd.c)(),n=(0,qi.V)(),a=(0,d.d4)(co.F6),r=(0,d.d4)(Lb.JJ);return(0,f.useCallback)(((i,s)=>{const o={category:i,action:"footer_view",variant:"none",label:"dwp",os:(0,As.f)(),context:s,sp_t:(0,Ht.v8)("sp_t"),country:a?r:"",timestamp:(new Date).toISOString()};t&&(n?e.send((0,kb.r)(o)):e.send((0,Nb._)(o)))}),[t,n,e,r,a])})(),b=Ib();(0,f.useEffect)((()=>{o((0,Cb.w2)(window.navigator.userAgent))}),[]),(0,f.useEffect)((()=>{const e=setTimeout((()=>{t(!0)}),1100);return()=>{t(!1),clearTimeout(e)}}),[n]),(0,f.useEffect)((()=>{g(h?Tb.InView:Tb.OutOfView,n)}),[h,g,n]);const v={countryHub:!0,openUrlLocale:l?c:void 0};return e&&null!==s?(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(p,{language:i.Ru.getLocaleForSmartling(),market:a.toLowerCase(),excludePlanLinks:s,...b&&v,children:(0,S.jsx)("div",{ref:u,children:(0,S.jsx)(m,{hideWebPlayerLink:!0,hideLegalLinks:r})})})}):(0,S.jsx)(S.Fragment,{})};var Hb=o(80568);const zb=f.memo((()=>{const e=function(e,t){return e!==Hd.m.Desktop&&(e!==Hd.m.PWA&&(!t&&!(0,T.g)()))}((0,Hb.My)(),(0,vl._)((e=>"/lyrics"===e.pathname)));return e?(0,S.jsx)("div",{className:"main-view-container__mh-footer-container",children:(0,S.jsx)(Db,{})}):null}));var Vb=o(64473);const Bb={"-200":.694444418,"-150":.7607257962,"-100":.8333333135,"-50":.9128709435,0:1,50:1.095445156,100:1.200000048,150:1.314534187,200:1.440000057,250:1.577440977,300:1.728000045,350:1.892929196,400:2.073600054};var Ub=o(48751),Fb=o(56005);function qb(e){return{name:"AutoPlayOnLoad",environments:["browser"],data:e}}var Wb=o(78170);const Gb="auto_play_on_load_attempted";function $b(){const e=(0,t.NC)(Wb.mR),n=(0,ae.zy)(),a=(0,R.z)(),r=(0,f.useRef)(!1),[i,s]=(0,vr.ok)(),o=(0,ge.vh)();(0,V.p)(z.gd.READY,(async()=>{if(!e)return;if(r.current)return;const t=new URLSearchParams(n.search);if(t.has(Gb))return;const i=t.get("utm_medium"),c=t.has("autoplay");if(!("gemini"===i||c))return;const l=(0,X.o_h)(n.pathname);if(!l)return void console.error("Attempted autoplay but URI is not parsable");const u=l.toString();s((e=>(e.set(Gb,"1"),e))),r.current=!0;let d=null;function h(){d&&(o.send(d),d=null,a.getEvents().removeListener(z.gd.UPDATE,g),a.getEvents().removeListener(z.gd.ERROR,f))}setTimeout((()=>{h()}),2500);const p=()=>{d||(console.log("Autoplay maybe successful",l),d=qb({entity_uri:u,page_url:n.pathname+n.search,success:!0}))},m=e=>{console.log("Autoplay failed",l,e),d=qb({entity_uri:u,page_url:n.pathname+n.search,success:!1,error_message:e}),h()};function f(e){m(e?.data?.cause?.message??"Failure with unknown error message")}function g(e){e.data?.item?.uri!==u&&e.data?.context?.uri!==u||e.data?.isPaused||p()}a.getEvents().addListener(z.gd.UPDATE,g),a.getEvents().addListener(z.gd.ERROR,f),console.log("Triggering autoplay",l),a.play({uri:u},{featureIdentifier:"auto_play_on_load",referrerIdentifier:"auto_play_on_load"})}))}var Qb=o(97944);const Kb=()=>{const e=(0,Ri.N)(Qb.L),t=e.getCapabilities(),n=t.canZoomIn&&t.canZoomOut;(0,f.useEffect)((()=>{if(!n)return()=>{};const t=t=>{if(t.ctrlKey){t.preventDefault();const n=t.deltaY;if(0===n)return;n>0?e.zoomOut():e.zoomIn()}},a=e=>{"Control"===e.key&&window.addEventListener("wheel",t,{passive:!1})};window.addEventListener("keydown",a);const r=e=>{"Control"===e.key&&window.removeEventListener("wheel",t)};return window.addEventListener("keyup",r),()=>{window.removeEventListener("wheel",t),window.removeEventListener("keydown",a),window.removeEventListener("keyup",r)}}),[e,n])},Zb=f.memo((({isDeveloperMode:e,onBrowserNotSupported:n,onReachUsableState:a})=>((e=>{const t=(0,ot.g)();(0,f.useEffect)((()=>{const n=n=>{e&&(3===n.button?(t(-1),n.preventDefault()):4===n.button&&t(1))};return document.addEventListener("mouseup",n),()=>{document.removeEventListener("mouseup",n)}}),[e,t])})(!0),Ma(!e),(({onBrowserNotSupported:e,onReachUsableState:t})=>{(0,f.useEffect)((()=>{const n=lr().getParser(window.navigator.userAgent);n.satisfies({chrome:"<62"})||n.satisfies({edge:"<16"})?e(i.Ru.get("browser_upgrade_notice",n.getBrowserName())):t("home")}),[e,t])})({onBrowserNotSupported:n,onReachUsableState:a}),function(){const e=(0,Cr.t)(),[{data:t}]=(0,Ir.K)(e.viewportZoom),n=(0,Ln.m)();(0,f.useEffect)((()=>{const e=Math.round(t??0).toString(),a=Vb.b*Bb[e];n.setTitlebarHeight(a)}),[t,n])}(),Kb(),(()=>{const e=(0,Ln.m)(),n=(0,t.NC)(we.QxH),a=(0,t.NC)(we.fzW),r=(0,t.NC)(we.v2);(0,f.useEffect)((()=>{e.setPLEPorts(n,a,r)}),[e,n,a,r])})(),(()=>{const e=(0,Nt.jE)();(0,zc.L)((()=>{e.invalidateQueries({queryKey:["useAddToPlaylistListData"]})}))})(),function(){const e=(0,f.useRef)(!0),t=(0,wi.p)(),n=(0,Nt.jE)();(0,f.useEffect)((()=>{e.current?e.current=!1:function(e){e.invalidateQueries(),e.removeQueries({type:"inactive"})}(n)}),[t,n])}(),(()=>{const e=(0,Nt.jE)(),t=(0,Fb.R)();(0,f.useEffect)((()=>t.getEvents().addListener(Ub.S.AVAILABILITY_UPDATE,(()=>{e.invalidateQueries({queryKey:["use-shuffle"]})}))),[e,t])})(),$b(),null)));var Yb=o(72661);const Jb=e=>{const{accessTokenIsSet:t,onClose:n,onBrowserNotSupported:a,onReachUsableState:r,isVideoSupported:i,isDesktop:s,billboardMinimized:o,isDeveloperMode:c,adsEnabled:l,children:u}=e,h=(0,Ln.m)(),p=(0,f.useRef)(null),g=(0,f.useRef)(null),b=(0,f.useRef)(null),v=(0,f.useRef)(null),y=(0,f.useRef)(null),x=(0,f.useRef)(null),w=(0,f.useRef)(null),_=(0,f.useRef)(null),A=(0,f.useRef)(null),E=(0,f.useRef)(null),j=(0,f.useRef)(null),C=(0,f.useRef)(null),I=(0,f.useRef)(null),N=hr(),k=(0,Cr.t)(),[{data:L}]=(0,Ir.K)(k.viewportZoom),{handleDrop:T,handleDragStart:R,handleDragEnd:P,handleDragOver:M}=(()=>{const e=(0,f.useCallback)((e=>{e.preventDefault(),document.body.removeAttribute("data-dragging-type")}),[]),t=(0,f.useCallback)((e=>{document.body.removeAttribute("data-dragging-type")}),[]),n=(0,f.useCallback)((e=>{e.preventDefault()}),[]);return{handleDrop:e,handleDragStart:(0,f.useCallback)((e=>{e.target instanceof Element&&"true"!==e.target.getAttribute("draggable")&&(e.preventDefault(),e.stopPropagation())}),[]),handleDragEnd:t,handleDragOver:n}})();(0,Bn.bF)(),(0,f.useEffect)((()=>{window&&window.history&&window.history.scrollRestoration&&(window.history.scrollRestoration="manual")}),[]),(0,f.useEffect)((()=>{h.notifyReadyStateReached()}),[h]);const O=(0,f.useMemo)((()=>[(0,S.jsx)(jn,{scrollNodeRef:C,scrollNodeChildRef:I}),(0,S.jsx)(zn.X,{}),(0,S.jsx)(an.ZC,{mainLandmarkRef:g,lyricsCinemaRef:w,leftSidebarRef:E,rightSidebarRef:j,nowPlayingBarRef:v,mainContentRef:y,topBarRef:b}),(0,S.jsx)(nn,{}),(0,S.jsx)($t.Qr,{}),(0,S.jsx)(Kd,{}),(0,S.jsx)(Xt,{}),(0,S.jsx)(Cn,{}),(0,S.jsx)(In.$y,{}),(0,S.jsx)(kn.JI,{}),(0,S.jsx)(Yb.NT,{}),(0,S.jsx)(Vn.Ad,{}),(0,S.jsx)(Ya.n,{instance:N}),(0,S.jsx)(mh,{domRootRef:A}),(0,S.jsx)(wa.F,{}),(0,S.jsx)(na,{}),(0,S.jsx)(wr,{}),(0,S.jsx)(Ch.r,{}),(0,S.jsx)(tp,{}),(0,S.jsx)(gb,{})]),[N]),D=(0,d.d4)((e=>e.ui.unsupportedBrowser));return(0,S.jsxs)(Ve,{providers:O,children:[(0,S.jsxs)("div",{"":"root",className:Gt()("Root","global-nav","centered-layout"),style:{"--panel-gap":`${La.KV}px`,"--zoom-level":(0,hb.I)(L??0)},onDrop:T,onDragOver:M,onDragStart:R,onDragEnd:P,ref:p,children:[(0,S.jsx)(gh,{message:D.isOpen?D.message:null,allowHTML:!0,onClose:n,isNotSupported:!0}),(0,S.jsxs)(Wn,{children:[(0,S.jsx)(Eb,{}),(0,S.jsx)(Fd,{topBarRef:b}),(0,S.jsxs)(ca,{children:[(0,S.jsx)(ma,{}),(0,S.jsx)(wn,{elementRef:E})]}),(0,S.jsx)(ka,{children:(0,S.jsx)(lh,{})}),(0,S.jsxs)(ga,{children:[(0,S.jsx)(en.pZ,{value:"top-bar",children:(0,S.jsx)(xh,{})}),(0,S.jsxs)("div",{className:"main-view-container",children:[(0,S.jsx)("div",{className:"under-main-view"}),(0,S.jsx)(Fu.a,{className:"main-view-container__scroll-node",scrollNodeRef:C,children:(0,S.jsx)("div",{ref:I,className:Gt()("main-view-container__scroll-node-child"),style:{minHeight:`calc(100vh - ${La.uC}px - ${La.fO}px - 519px)`},children:(0,S.jsx)(Hn,{ref:g,children:(0,S.jsxs)(m.s,{Fallback:()=>(0,S.jsx)(vh,{}),onError:e=>(0,Nn.Jy)(e,"Root"),children:[u,(0,S.jsx)(zb,{})]})})})}),i&&(0,S.jsx)(Sh,{fullscreenModeRef:_,cinemaModeRef:x})]}),(0,S.jsx)(oh,{}),t&&l&&(0,S.jsx)(Eh,{}),s&&(0,S.jsx)("div",{className:Gt()("",{"Root__ads-container-desktop--is-hidden":!o}),children:(0,S.jsx)(_h,{})})]}),(0,S.jsxs)(Ia,{children:[(0,S.jsx)(Vg,{}),(0,S.jsx)(Wd,{elementRef:j})]}),(0,S.jsx)(jg,{}),(0,S.jsx)("div",{id:"lyrics-cinema",className:"Root__lyrics-cinema",ref:w}),(0,S.jsx)(Kn,{ref:x,debugLabel:"Video player cinema mode"}),(0,S.jsx)(Kn,{debugLabel:"Snackbar container",ref:A}),(0,S.jsx)($g,{}),(0,S.jsx)(th,{debugLabel:"Tuna root",children:(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(ih,{})})}),(0,S.jsx)(th,{debugLabel:"Popover layer",children:(0,S.jsx)(rh,{})}),(0,S.jsx)(nh,{debugLabel:"Onboarding new user background",children:(0,S.jsx)(Lh,{})})]}),(0,S.jsx)(eh,{isDesktop:s}),(0,S.jsx)(hh,{}),(0,S.jsx)(Za,{}),(0,S.jsx)(br,{pipInstance:N})]}),(0,S.jsx)(Yt,{}),(0,S.jsx)(Jd,{}),(0,S.jsx)(ub,{}),(0,S.jsx)(db,{}),(0,S.jsx)(pb,{}),(0,S.jsx)(Th,{}),(0,S.jsx)(Zb,{isDeveloperMode:c,onBrowserNotSupported:a,onReachUsableState:r})]})};const Xb=o(43270).ErrorPage;var ev=o(60013);const tv=function({children:e}){(()=>{const e=(0,t._r)();(0,f.useEffect)((()=>{const t=(0,Nn.sV)(),n=[...(0,ev.v6)()].reduce(((t,n)=>{const a=e.getValue(n.name);return t[`rc.${n.name}`]=a,t}),{});t.setTags(n)}),[e])})();const n=(0,d.wA)(),a=(0,d.d4)((e=>e.session.accessToken)),r=(0,d.d4)((e=>e.ui.errorPage)),i=(0,Ln.m)(),s=(0,d.d4)((e=>e.platform.isDesktop?e.ads.root.adsEnabled:!!e.session.productState?.ads&&1===parseInt(e.session.productState.ads,10))),o=(0,d.d4)((e=>!!e.ads.billboard&&e.ads.billboard.isMinimized)),{isDesktop:c,isDeveloperMode:u,isVideoSupported:h}=(0,d.d4)((e=>e.platform)),p=r.isError,m=r.name,g=!!a,b=(0,f.useCallback)((e=>{i.notifyUsableStateReached(e)}),[i]),v=(0,f.useCallback)((()=>{n(l.BZ())}),[n]),y=(0,f.useCallback)((e=>{n(l.Gz(e))}),[n]);return p?(0,S.jsx)(Xb,{errorName:m}):(0,S.jsx)(Jb,{billboardMinimized:o,isVideoSupported:h,onReachUsableState:b,accessTokenIsSet:g,onClose:v,onBrowserNotSupported:y,isDesktop:c,isDeveloperMode:u,adsEnabled:s,children:e})},nv=({action:e,context:t,country:n,variant:a})=>({action:e,context:t,country:n,category:"brotli-exp-metrics",label:"dwp",sp_t:(0,Ht.v8)("sp_t"),os:(0,As.f)(),variant:a});var av=o(17231);const rv=[...Object.values(av.h).map((e=>`generated-locales/web-player/${e}`)),"build/web-player/web-player","build/error-page/error-page","js/retargeting-pixels","js/gtm","build/web-player/pip-mini-player","build/web-player/vendor~web-player","build/web-player/encore~web-player"],iv=e=>e.reduce(((e,t)=>{const n=t.name.split("/cdn/")[1];return n&&0!==t.transferSize&&(e=>rv.some((t=>new RegExp(t).test(e))))(n)?(e[n]={bytesTransferred:t.transferSize,latency:Number((t.responseEnd-t.responseStart).toFixed(2))},e):e}),{});var sv=o(39705);const ov=f.lazy((async()=>{const{SeeAllPlaylistLeavebehinds:e}=await o.e(5040).then(o.bind(o,11571));return{default:e}})),cv=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(ov,{})}),lv=f.lazy((async()=>{const{LoadingPage:e}=await Promise.resolve().then(o.bind(o,58244));return{default:e}})),uv=e=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(lv,{...e})}),dv=(0,f.lazy)((()=>o.e(8865).then(o.bind(o,74218)).then((e=>({default:e.AlbumPrerelease})))));var hv=o(84372);const pv=e=>(0,S.jsx)(hv.e,{pageId:sv.$h.PRERELEASE,children:e}),mv=()=>{const{id:e}=(0,ae.g)();if(!e)return pv((0,S.jsx)(uv,{hasError:!0,errorMessage:i.Ru.get("error.not_found.title.album")}));const t=(0,X.jsG)(e);return pv((0,S.jsx)(dv,{uri:t.toString()},e))},fv=()=>(0,S.jsx)(ae.qh,{path:"/prerelease/:id",element:(0,S.jsx)(mv,{})},"album-prerelease"),gv=f.lazy((async()=>{const{UpcomingReleasesErrorPage:e}=await o.e(2579).then(o.bind(o,51695));return{default:e}})),bv=({errorName:e})=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(gv,{errorName:e})}),vv=()=>(0,S.jsx)(ae.qh,{path:"/upcoming-releases",element:(0,S.jsx)(bv,{errorName:"upcoming_releases_not_supported"})},"upcoming-releases"),yv=f.lazy((async()=>{const{ErrorPage:e}=await o.e(2579).then(o.bind(o,43270));return{default:e}})),xv=({errorName:e})=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(yv,{errorName:e})}),wv=()=>[(0,S.jsx)(ae.qh,{path:"/artist-videos",element:(0,S.jsx)(xv,{errorName:"artist_videos_not_supported"})},"artist-videos")],_v=(0,f.lazy)((()=>Promise.all([o.e(3769),o.e(7925),o.e(9343),o.e(5520)]).then(o.bind(o,20664))));var Av=o(14327);function Ev(e){return`spotify:section:${e.replace(/^section/,"")}`}const jv=(0,f.lazy)((()=>Promise.all([o.e(3277),o.e(4764),o.e(6266)]).then(o.bind(o,74425)).then((e=>({default:e.BrowsePage}))))),Sv=(0,f.lazy)((()=>Promise.all([o.e(3277),o.e(4764),o.e(6266)]).then(o.bind(o,34226)).then((e=>({default:e.BrowseSection}))))),Cv=({id:e})=>{if(e.startsWith("section"))return(0,S.jsx)(Sv,{uri:Ev(e)});const t=function(e){return/^(section)?[0-9A-Za-z_-]{22}$/.test(e)}(e)?function(e){return`spotify:page:${e}`}(e):function(e){return`spotify:genre:${e}`}(e);return(0,S.jsx)(jv,{uri:t})},Iv=f.lazy((async()=>{const{CountryHub:e}=await Promise.all([o.e(4403),o.e(1120),o.e(2543)]).then(o.bind(o,20844));return{default:e}})),Nv=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(Iv,{})}),kv=f.lazy((async()=>{const{CountryHubSection:e}=await Promise.all([o.e(4403),o.e(1120),o.e(749)]).then(o.bind(o,62097));return{default:e}})),Lv=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(kv,{})}),Tv=e=>`spotify:cultural-moment:hub:${e}`,Rv=f.lazy((()=>o.e(3838).then(o.bind(o,22603)))),Pv=()=>{const{id:e=""}=(0,ae.g)();return(0,S.jsx)(Rv,{uri:Tv(e),id:e})},Mv=f.lazy((async()=>{const{EpisodeMoreLikeThis:e}=await Promise.all([o.e(4077),o.e(9652),o.e(399)]).then(o.bind(o,69253));return{default:e}})),Ov=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(Mv,{})});var Dv=o(58146);const Hv=f.lazy((async()=>{const{HomeChipsRowWithEmptyStates:e}=await Promise.all([o.e(147),o.e(4764),o.e(7586),o.e(9023),o.e(5117),o.e(9319),o.e(2233)]).then(o.bind(o,31809));return{default:e}})),zv=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(Hv,{})}),Vv=f.lazy((async()=>{const{HomeHeader:e}=await o.e(1602).then(o.bind(o,38356));return{default:e}})),Bv=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(Vv,{})});var Uv=o(84762);const Fv=f.lazy((async()=>{const{OfflineEmptyState:e}=await o.e(2630).then(o.bind(o,44819));return{default:e}})),qv=({showDownloadInformation:e})=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(Fv,{showDownloadInformation:e})});var Wv=o(67427),Gv=o(54335),$v=o(27341);const Qv=(0,f.lazy)((()=>Promise.all([o.e(9519),o.e(6896),o.e(4312)]).then(o.bind(o,46906)))),Kv=(0,f.lazy)((()=>o.e(5885).then(o.bind(o,89201)))),Zv=(0,f.lazy)((()=>o.e(3569).then(o.bind(o,65802)))),Yv=(0,f.lazy)((()=>Promise.all([o.e(147),o.e(4764),o.e(7586),o.e(9023),o.e(5117),o.e(9319)]).then(o.bind(o,63034)))),Jv=(0,f.lazy)((()=>Promise.all([o.e(3277),o.e(9023),o.e(1621)]).then(o.bind(o,99448)))),Xv=(0,f.lazy)((()=>o.e(3569).then(o.bind(o,38603)))),ey=(0,f.lazy)((async()=>{const{HomeSubfeedWithRedirect:e}=await Promise.all([o.e(147),o.e(4764),o.e(7586),o.e(9023),o.e(5117),o.e(9319),o.e(347)]).then(o.bind(o,22122));return{default:e}})),ty=()=>{const{sectionId:e}=(0,ae.g)();return(0,S.jsx)(Jv,{uri:`spotify:section:${e}`})},ny=({isDesktop:e,isPremium:t,isOffline:n})=>n?e&&t?(0,S.jsx)(Zv,{}):(0,S.jsx)(qv,{showDownloadInformation:!1}):(0,S.jsx)(Yv,{}),ay=({isDesktop:e,isOffline:t})=>{const n=(0,Uv.f)()!==Dv.e,{allowSwitchingBetweenHomeAdsAndHpto:a}=_e();return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(Bv,{}),e&&n&&(a?(0,S.jsx)(Kv,{}):(0,S.jsx)(Qv,{})),!t&&(0,S.jsx)(zv,{}),(0,S.jsx)(ae.sv,{})]})};const ry="/launch-miniplayer",iy=()=>{const e=(()=>{const{open:e,isOpen:t,canOpen:n}=(0,Ka.H)();return(0,f.useCallback)((()=>{n&&!t&&e()}),[n,t,e])})();return(0,f.useEffect)((()=>{e()}),[e]),cb((t=>t.pathname===ry&&(e(),!0)),[e]),(0,S.jsx)(Xg.$,{to:"/"})},sy=f.lazy((async()=>{const{PlaylistFormatRedirectWithParams:e}=await o.e(2205).then(o.bind(o,40221));return{default:e}})),oy=e=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(sy,{...e})});var cy=o(74300),ly=o(65727),uy=o(17496);const dy=f.lazy((()=>Promise.all([o.e(8975),o.e(8083),o.e(6488)]).then(o.bind(o,98083)))),hy=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(dy,{})}),py=()=>(0,cy.X)()?(0,S.jsx)(hv.e,{navigationalRoot:Wv.g.EXPLORE_PREMIUM,pageId:sv.$h.PREMIUM,entityUri:"spotify:app:premium",children:(0,S.jsx)(hy,{})}):(0,S.jsx)(Xg.$,{to:"/"});var my=o(36320);const fy=({queueView:e})=>{const{openQueue:t}=(0,Kg.R)();return(0,f.useLayoutEffect)((()=>{t(e)}),[]),null},gy=()=>(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(ae.qh,{path:"/queue",element:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(fy,{queueView:my.p.QUEUE}),(0,S.jsx)(Xg.$,{to:"/"})]})},"/queue"),(0,S.jsx)(ae.qh,{path:"/history",element:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(fy,{queueView:my.p.HISTORY}),(0,S.jsx)(Xg.$,{to:"/"})]})},"/history")]});var by=o(98880);const vy=f.lazy((async()=>{const{ShowMoreLikeThisPage:e}=await o.e(9033).then(o.bind(o,14114));return{default:e}})),yy=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(vy,{})}),xy=()=>[(0,S.jsx)(ae.qh,{path:"/the-drop-weekly",element:(0,S.jsx)(xv,{errorName:"the_drop_weekly_not_supported"})},"the-drop-weekly")];var wy=o(45588),_y=o(44839),Ay=o(1755);const Ey=()=>{const{trackId:e=""}=(0,ae.g)(),t=(0,_y.n)();var n;if(!((n=t)===we.ssn.AboveFansAlsoLike||n===we.ssn.AbovePopularReleases||n===we.ssn.AboveRecommendedBasedOnThisSong))return(0,S.jsx)(ae.C5,{to:"/",replace:!0});const a=(0,X.Mce)(e).toString();return(0,S.jsxs)("div",{className:"contentSpacing",children:[(0,S.jsx)(wy.Q,{children:i.Ru.get("track-page.playlists-with-this-song")}),(0,S.jsx)(Ay.N$,{isFullPage:!0,limit:50,renderInVariant:t,uri:a})]})};var jy=o(14397);const Sy=f.memo((function(){const{trackId:e=""}=(0,ae.g)(),t=(e=>`spotify:track:${e}`)(e);return(0,S.jsxs)("div",{className:"contentSpacing",children:[(0,S.jsx)(wy.Q,{children:i.Ru.get("internal-link-recommender.more-recommended-releases")}),(0,S.jsx)(jy.b,{uri:t,isFullPage:!0,title:i.Ru.get("internal-link-recommender.more-recommended-releases")})]})})),Cy=f.lazy((async()=>{const{WhatsNewFeed:e}=await Promise.all([o.e(4077),o.e(4084)]).then(o.bind(o,91090));return{default:e}})),Iy=()=>(0,S.jsx)(f.Suspense,{fallback:null,children:(0,S.jsx)(Cy,{})}),Ny=()=>(0,qi.V)()?(0,S.jsx)(Xg.$,{to:"/"}):(0,S.jsx)(Iy,{});var ky=o(45111),Ly=o(9374);const Ty=`/playlist/${ky.wn}`,Ry=()=>{const{metadata:e,error:t,context:n}=(0,Ly._)(),{triggerPlay:a,isPlaying:r}=n,i=(0,d.wA)();return{isLoading:!e&&!t,callback:(0,f.useCallback)((()=>{e?r||a():i((0,l.eN)())}),[r,a,i,e])}},Py=()=>{const{isLoading:e,callback:t}=Ry();return(0,f.useEffect)((()=>{e||t()}),[e,t]),e?null:(0,S.jsx)(Xg.$,{to:"/"})};var My=o(57969),Oy=o(46265),Dy=o(55278),Hy=o(2399);const zy=(0,f.lazy)((()=>o.e(1845).then(o.bind(o,55803))));var Vy=o(23248);const By=(0,f.lazy)((()=>o.e(1845).then(o.bind(o,55803))));function Uy(){const e=(0,ae.zy)(),t=`/${(0,ae.g)()["*"]??""}${e.search}`,n=e.pathname+e.search;return(0,S.jsx)(ae.C5,{to:t===n?`/${e.search}`:t,replace:!0})}var Fy=o(68198),qy=o(20431),Wy=o(12782);const Gy=f.lazy((()=>o.e(5962).then(o.bind(o,60554)))),$y=f.lazy((()=>Promise.resolve().then(o.bind(o,69870)))),Qy=f.lazy((()=>o.e(3890).then(o.bind(o,53018)))),Ky=f.lazy((()=>o.e(6863).then(o.bind(o,34483)))),Zy=f.lazy((()=>o.e(9480).then(o.bind(o,54591)))),Yy=f.lazy((()=>Promise.all([o.e(4170),o.e(5696),o.e(9209)]).then(o.bind(o,74034)))),Jy=!1,Xy=f.lazy((()=>Promise.all([o.e(7140),o.e(423),o.e(8828)]).then(o.bind(o,7541)))),ex=f.lazy((()=>Promise.all([o.e(7925),o.e(423),o.e(6080)]).then(o.bind(o,22157)))),tx=f.lazy((()=>o.e(4389).then(o.bind(o,52252)))),nx=f.lazy((()=>Promise.all([o.e(8779),o.e(5783)]).then(o.bind(o,33215)))),ax=f.lazy((()=>o.e(5853).then(o.bind(o,46798)))),rx=f.lazy((()=>Promise.all([o.e(490),o.e(4764),o.e(4077),o.e(9652),o.e(8739),o.e(7125)]).then(o.bind(o,41836)))),ix=f.lazy((()=>Promise.all([o.e(4764),o.e(8739),o.e(2889)]).then(o.bind(o,72621)))),sx=f.lazy((()=>Promise.all([o.e(3769),o.e(3358),o.e(4077),o.e(7925),o.e(7140),o.e(9343),o.e(2355)]).then(o.bind(o,76732)))),ox=f.lazy((()=>o.e(4496).then(o.bind(o,10246)))),cx=f.lazy((()=>Promise.all([o.e(5117),o.e(5663)]).then(o.bind(o,85117)))),lx=f.lazy((()=>Promise.all([o.e(196),o.e(6286),o.e(9652),o.e(7925),o.e(5225),o.e(8606)]).then(o.bind(o,39183)))),ux=f.lazy((()=>Promise.all([o.e(196),o.e(3371),o.e(4077),o.e(9652),o.e(5225),o.e(9528)]).then(o.bind(o,75306)))),dx=f.lazy((()=>o.e(1785).then(o.bind(o,58784)))),hx=f.lazy((()=>Promise.resolve().then(o.bind(o,26881)))),px=f.lazy((()=>o.e(42).then(o.bind(o,30208)))),mx=f.lazy((()=>o.e(42).then(o.bind(o,46338)))),fx=f.lazy((()=>o.e(8212).then(o.bind(o,81797)))),gx=f.lazy((()=>Promise.all([o.e(8975),o.e(8083),o.e(1396)]).then(o.bind(o,98872)))),bx=f.lazy((()=>o.e(7241).then(o.bind(o,12097)))),vx=f.lazy((()=>o.e(5523).then(o.bind(o,26907)))),yx=e=>{const{viewId:t=""}=(0,ae.g)();return t===by.r?(0,S.jsx)(cx,{...e}):(0,S.jsx)(Cv,{id:t})},xx=({RoutesComponent:e=ae.BV})=>{const t=(0,Wy.o)();return(0,S.jsxs)(e,{children:[(0,S.jsx)(ae.qh,{path:"tracks",element:(0,S.jsx)(hv.e,{pageId:sv.$h.COLLECTION_SONGS,children:(0,S.jsx)(Xy,{})})}),(0,S.jsx)(ae.qh,{path:"episodes",element:(0,S.jsx)(hv.e,{pageId:sv.$h.COLLECTION_PODCASTS_EPISODES,children:(0,S.jsx)(ex,{})})}),(0,S.jsx)(ae.qh,{path:"your-episodes",element:(0,S.jsx)(hv.e,{pageId:sv.$h.COLLECTION_PODCASTS_EPISODES,children:(0,S.jsx)(ex,{})})}),t.canFetchAllTracks&&(0,S.jsx)(ae.qh,{path:"local-files",element:(0,S.jsx)(hv.e,{pageId:sv.$h.LOCALFILES,children:(0,S.jsx)(tx,{})})}),(0,S.jsx)(ae.qh,{path:"/*",element:(0,S.jsx)(Xg.$,{to:"/collection/tracks"})})]})},wx=e=>{const{playlistId:t}=(0,ae.g)();return(0,f.createElement)(sx,{...e,key:t})},_x=e=>{const{artistId:t}=(0,ae.g)();return(0,f.createElement)($y,{...e,key:t})},Ax=e=>{const{albumId:t}=(0,ae.g)();return(0,f.createElement)(Gy,{...e,key:t})},Ex=e=>{const{showId:t}=(0,ae.g)();return(0,f.createElement)(lx,{...e,key:t})},jx=({RoutesComponent:e=ae.BV})=>{const n=(0,ae.zy)();(()=>{const e=(0,bl.J)(),t=(0,f.useRef)("");(0,f.useEffect)((()=>e.block(((e,n)=>{let a=!1;for(const[t]of ob)t(e,n)&&(a=!0);const r=e.pathname+e.search+e.hash;if("PUSH"===n&&t.current===r&&(a=!0),a)return!1;t.current=r}))),[e])})();const a=(0,d.d4)((e=>e.features.enableShows)),{isDesktop:r,isBrowser:s}=(0,d.d4)((e=>e.platform)),{isAnonymous:o,productState:c}=(0,d.d4)(co.Ht),u="premium"===c?.product,h=!(0,oi.n)();(0,My.K)(),(()=>{const e=(0,t.NC)(we.fLU),n=(0,ae.zy)(),a=(0,d.wA)(),r=(0,f.useRef)(n.pathname),i=(0,f.useCallback)((()=>{a((0,l.H2)())}),[a]);(0,f.useEffect)((()=>{if(r.current===n.pathname){if(e===we.KwA.AllPagesSoftWall){const e=setTimeout(i,200);return()=>clearTimeout(e)}if((e===we.KwA.EntityPagesSoftWall||e===we.KwA.EntityPagesSoftWallDelayed)&&"/"!==r.current.replace(/^\/intl-[A-Za-z]{2}/i,"")){const t=e===we.KwA.EntityPagesSoftWall?200:5e3,n=setTimeout(i,t);return()=>clearTimeout(n)}}return r.current=n.pathname,()=>{}}),[e,n.pathname,a,i])})(),function(){const{finishOnboarding:e,currentStep:t}=(0,Ih.er)(),n=(0,ae.RQ)("/search/:query/:category"),a=(0,ae.RQ)("/search/*"),r=(0,ae.RQ)("/artist/:artistUri");(0,f.useEffect)((()=>{t!==Nh.B.ARTIST_CARD?t===Nh.B.PLAY_BUTTON&&(r||e()):a&&null!==n&&"artists"!==n?.params.category?e():a||r||e()}),[t,e,a,n,r])}(),function(){const{finishOnboarding:e,currentStep:t}=(0,Ih.er)(),n=(0,ae.RQ)("/artist/:artistUri"),a=(0,ae.RQ)("/search/*"),[r,i]=(0,f.useState)(!1);(0,V.p)(z.gd.UPDATE,(e=>{!r&&e.data?.hasContext&&i(!0)})),(0,f.useEffect)((()=>{(t===Nh.B.PLAY_BUTTON&&n||t===Nh.B.ARTIST_CARD&&a)&&r&&e()}),[t,e,r,n,a])}();const{allEpisodeAdsRoute:p}={allEpisodeAdsRoute:(0,S.jsx)(ae.qh,{path:(0,Dy.c)(Hy.ob),element:(0,S.jsx)(zy,{surface:Oy.ui.PODCAST_SEE_ALL})},"all-episode-ads")},{allShowAdsRoute:m}={allShowAdsRoute:(0,S.jsx)(ae.qh,{path:(0,Vy.q)(Hy.yA),element:(0,S.jsx)(By,{surface:Oy.ui.PODCAST_SEE_ALL})},"all-show-ads")},g=(({isDesktop:e,isPremium:t,isOffline:n})=>{const a=(0,Gv.W)({type:"locale",uri:"home"});return[(0,S.jsxs)(ae.qh,{path:"/",element:(0,S.jsx)(hv.e,{navigationalRoot:Wv.g.HOME,pageId:sv.$h.HOME,entityUri:"spotify:app:home",children:(0,S.jsx)(ay,{isDesktop:e,isPremium:t,isOffline:n})}),children:[(0,S.jsx)(ae.qh,{path:"/home",element:(0,S.jsx)(ey,{})},"home-subfeed"),e&&t&&(0,S.jsx)(ae.qh,{path:"/music-downloads",element:(0,S.jsx)(Xv,{})},"music-downloads"),(0,S.jsx)(ae.qh,{index:!0,element:(0,S.jsx)(ny,{isDesktop:e,isPremium:t,isOffline:n})})]},"home"),a?$v.NW.map((a=>(0,S.jsxs)(ae.qh,{path:`/${$v.CT}${a}`,element:(0,S.jsx)(hv.e,{navigationalRoot:Wv.g.HOME,pageId:sv.$h.HOME,entityUri:"spotify:app:home",children:(0,S.jsx)(ay,{isDesktop:e,isPremium:t,isOffline:n})}),children:[(0,S.jsx)(ae.qh,{path:`/${$v.CT}${a}/home`,element:(0,S.jsx)(ey,{})},"home-subfeed"),(0,S.jsx)(ae.qh,{index:!0,element:(0,S.jsx)(ny,{isDesktop:e,isPremium:t,isOffline:n})})]},"home-i18n"))):null,(0,S.jsx)(ae.qh,{path:"/section/:sectionId",element:(0,S.jsx)(hv.e,{pageId:sv.$h.HOME_DRILLDOWN,children:(0,S.jsx)(ty,{})})},"home-section")]})({isDesktop:r,isPremium:u,isOffline:h}),b=(()=>{const{isLoading:e,callback:t}=Ry();return cb((n=>n.pathname===Ty&&(e||t(),!0)),[e,t]),(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(ae.qh,{path:Ty,element:(0,S.jsx)(Py,{})},Ty)})})(),v=(0,S.jsx)(ae.qh,{path:ry,element:(0,S.jsx)(iy,{})},ry),y=[(0,S.jsx)(ae.qh,{path:"/cultural-moment/hub/:id",element:(0,S.jsx)(hv.e,{pageId:sv.$h.CULTURALMOMENTSHUB,children:(0,S.jsx)(Pv,{})})},"cultural-moment-hub")],x=fv(),w=gy(),_=(0,S.jsx)(ae.qh,{path:"/content-feed",element:(0,S.jsx)(Ny,{})}),A=(()=>{const e=i.Ru.getLocaleForURLPath(),t=(0,d.d4)(ly.N),n=(0,Ob.p)({entityFeatureFlag:t,urlLocale:e,entity:nr.c.PREMIUM,type:"link"})?(0,uy.hF)("/premium"):"/premium";return(0,S.jsx)(ae.qh,{path:n,element:(0,S.jsx)(py,{})})})(),E=[(0,S.jsx)(ae.qh,{path:Zg.S.PARTICIPANTS_PAGE,Component:ib},"social-session-participant-page"),(0,S.jsx)(ae.qh,{path:"/socialsession/:id",Component:ab},"social-session-invitation-fallback"),(0,S.jsx)(ae.qh,{path:"/jam/:contextType?/:id?/:play?",Component:rb},"jam-creation-fallback")],j=wv(),C=xy(),I=(0,t.NC)(we.DKh),N=!(0,T.g)(),k=vv(),L=(0,Av.H)(),R=Ib();return(0,S.jsxs)(e,{children:[(0,S.jsx)(ae.qh,{path:"/user/:userId/collection/your-episodes",element:(0,S.jsx)(Xg.$,{to:"/collection/episodes"})}),(0,S.jsx)(ae.qh,{path:"/user/:userId/collection/album/:albumId",element:(0,S.jsx)(Xg.$,{to:"/album/:albumId"})}),(0,S.jsx)(ae.qh,{path:"/user/:userId/collection/artist/:artistId",element:(0,S.jsx)(Xg.$,{to:"/artist/:artistId/saved"})}),(0,S.jsx)(ae.qh,{path:"/user/:userId/playlist/:playlistId",element:(0,S.jsx)(Xg.$,{to:"/playlist/:playlistId"})}),(0,S.jsx)(ae.qh,{path:"/browse/genres",element:(0,S.jsx)(Xg.$,{to:"/genre/hub-browse-grid"})}),(0,S.jsx)(ae.qh,{path:"/browse/newreleases",element:(0,S.jsx)(Xg.$,{to:"/genre/new-releases-page"})}),(0,S.jsx)(ae.qh,{path:"/browse/discover",element:(0,S.jsx)(Xg.$,{to:"/genre/discover-page"})}),(0,S.jsx)(ae.qh,{path:"/browse/charts",element:(0,S.jsx)(Xg.$,{to:"/genre/browse-charts-tab"})}),(0,S.jsx)(ae.qh,{path:"/browse/featured",element:(0,S.jsx)(Xg.$,{to:"/"})}),(0,S.jsx)(ae.qh,{path:"/browse",element:(0,S.jsx)(Xg.$,{to:"/"})}),(0,S.jsx)(ae.qh,{path:`/playlist/${qy.iU}`,element:(0,S.jsx)(Xg.$,{to:"/collection/episodes"})}),(0,S.jsx)(ae.qh,{path:`/playlist/${qy._J}`,element:(0,S.jsx)(Xg.$,{to:"/collection/tracks"})}),Fy.BG.map((e=>(0,S.jsx)(ae.qh,{path:e,element:(0,S.jsx)(Xg.$,{to:Fy.yf})},e))),(0,S.jsx)(ae.qh,{path:"/internal/recs/playlist/:playlistId",element:(0,S.jsx)(Xg.$,{to:"/playlist/:playlistId"})}),(0,S.jsx)(ae.qh,{path:"/settings",element:(0,S.jsx)(Xg.$,{to:"/"})}),o?[(0,S.jsx)(ae.qh,{path:"/collection/*",element:(0,S.jsx)(Xg.$,{to:"/"})},"collection-redirect")]:[(0,S.jsx)(ae.qh,{path:"/collection",element:(0,S.jsx)(Xg.$,{to:"/collection/tracks"})},"collection-redirect")],g,b,v,y,x,j,C,k,w,_,A,E,(0,S.jsx)(ae.qh,{path:"/user/:userId/collection",element:(0,S.jsx)(Xg.$,{to:{search:n.search,pathname:"/collection/tracks"}})}),(0,S.jsx)(ae.qh,{path:"/search/*",element:(0,S.jsx)(hv.e,{navigationalRoot:Wv.g.SEARCH,children:(0,S.jsx)(rx,{})})}),(0,S.jsx)(ae.qh,{path:"/recent-searches",element:(0,S.jsx)(hv.e,{navigationalRoot:Wv.g.SEARCH,pageId:sv.$h.SEARCH_RECENT,children:(0,S.jsx)(ix,{})})}),(0,S.jsx)(ae.qh,{path:"/collection/*",element:(0,S.jsx)(hv.e,{children:(0,S.jsx)(xx,{RoutesComponent:e})})}),(0,S.jsx)(ae.qh,{path:"/artist/:artistId/*",element:(0,S.jsx)(hv.e,{children:(0,S.jsx)(_x,{})})}),(0,S.jsx)(ae.qh,{path:"/album/:albumId/*",element:(0,S.jsx)(hv.e,{pageId:sv.$h.ALBUM,children:(0,S.jsx)(Ax,{})})}),(0,S.jsx)(ae.qh,{path:"/playlist-format/:title",element:(0,S.jsx)(hv.e,{children:(0,S.jsx)(oy,{isAnonymous:o})})}),(0,S.jsx)(ae.qh,{path:"/playlist-format/:title/:category",element:(0,S.jsx)(hv.e,{children:(0,S.jsx)(oy,{isAnonymous:o})})}),(0,S.jsx)(ae.qh,{path:"/track/:trackId/*",element:(0,S.jsx)(hv.e,{pageId:sv.$h.TRACK,children:s?(0,S.jsx)(Ky,{}):(0,S.jsx)(Qy,{})})}),(0,S.jsx)(ae.qh,{path:"/track/:trackId/more-like-this",element:(0,S.jsx)(Sy,{})},"more-like-this-track"),(0,S.jsx)(ae.qh,{path:"/track/:trackId/playlists-with-this-song",element:(0,S.jsx)(Ey,{})},"playlists-with-this-song"),(0,S.jsx)(ae.qh,{path:"/playlist/:playlistId/see-all-ads",element:(0,S.jsx)(cv,{})}),(0,S.jsx)(ae.qh,{path:"/playlist/:playlistId/*",element:(0,S.jsx)(hv.e,{pageId:sv.$h.PLAYLIST,children:(0,S.jsx)(wx,{})})}),!1,(0,S.jsx)(ae.qh,{path:"/user/:username/folder/:folderId",element:(0,S.jsx)(Xg.$,{to:"/"})}),(0,S.jsx)(ae.qh,{path:"/folder/:folderId/*",element:(0,S.jsx)(Xg.$,{to:"/"})}),(0,S.jsx)(ae.qh,{path:"/user/:userId/*",element:(0,S.jsx)(hv.e,{children:(0,S.jsx)(Zy,{})})}),(0,S.jsx)(ae.qh,{path:"/genre/corona_news_podcasts",element:(0,S.jsx)(Xg.$,{to:"/genre/corona_news_podcasts-page"})}),(0,S.jsx)(ae.qh,{path:"/genre/:viewId",element:(0,S.jsx)(hv.e,{pageId:sv.$h.GENRE,children:(0,S.jsx)(yx,{})})}),(0,S.jsx)(ae.qh,{path:"/view/:viewId",element:(0,S.jsx)(hv.e,{pageId:sv.$h.HOME_DRILLDOWN,children:(0,S.jsx)(yx,{})})}),(0,S.jsx)(ae.qh,{path:"/concerts-page",element:(0,S.jsx)(Xg.$,{to:"/concerts"})}),(0,S.jsx)(ae.qh,{path:"/concerts/location/:location",element:(0,S.jsx)(hv.e,{pageId:sv.$h.CONCERTS,children:(0,S.jsx)(nx,{})})}),(0,S.jsx)(ae.qh,{path:"/concerts/location/:location/genre/:id",element:(0,S.jsx)(hv.e,{pageId:sv.$h.CONCERTS,children:(0,S.jsx)(nx,{})})}),(0,S.jsx)(ae.qh,{path:"/concerts/genre/:id",element:(0,S.jsx)(hv.e,{pageId:sv.$h.CONCERTS,children:(0,S.jsx)(nx,{})})}),(0,S.jsx)(ae.qh,{path:"/concerts/:slug",element:(0,S.jsx)(hv.e,{pageId:sv.$h.CONCERTS,children:(0,S.jsx)(ax,{})})}),(0,S.jsx)(ae.qh,{path:"/concerts",element:(0,S.jsx)(hv.e,{pageId:sv.$h.CONCERTS,children:(0,S.jsx)(nx,{})})}),(0,S.jsx)(ae.qh,{path:"/concert/:concertId",element:(0,S.jsx)(hv.e,{pageId:sv.$h.CONCERTS_CONCERT,children:(0,S.jsx)(Yy,{})})}),I&&(0,S.jsx)(ae.qh,{path:"/venue/:venueId",element:(0,S.jsx)(hv.e,{pageId:sv.$h.VENUE,children:(0,S.jsx)(bx,{})})}),N&&Jy,(0,S.jsx)(ae.qh,{path:"/lyrics",element:(0,S.jsx)(hv.e,{pageId:sv.$h.LYRICS,children:(0,S.jsx)(hx,{format:"fullscreen"})})}),(0,S.jsx)(ae.qh,{path:"/preferences",element:(0,S.jsx)(hv.e,{pageId:sv.$h.SETTINGS,navigationalRoot:Wv.g.SETTINGS,children:(0,S.jsx)(dx,{})})}),(0,S.jsx)(ae.qh,{path:"/premium",element:(0,S.jsx)(hv.e,{pageId:sv.$h.PREMIUM,entityUri:"spotify:app:premium",children:(0,S.jsx)(gx,{})})}),(0,S.jsx)(ae.qh,{path:"/radio/:entity/:id",element:(0,S.jsx)(Xg.$,{to:"/:entity/:id"})}),(0,S.jsx)(ae.qh,{path:"/station/:entity/:id",element:(0,S.jsx)(Xg.$,{to:"/:entity/:id"})}),(0,S.jsx)(ae.qh,{path:"/new/playlist",element:(0,S.jsx)(hv.e,{children:(0,S.jsx)(ox,{})})}),(0,S.jsx)(ae.qh,{path:"/blend/taste-match/:invitationId",element:(0,S.jsx)(hv.e,{pageId:sv.$h.BLEND_TASTE_MATCH,children:(0,S.jsx)(px,{})})}),(0,S.jsx)(ae.qh,{path:"/blend/invitation",element:(0,S.jsx)(hv.e,{pageId:sv.$h.BLEND_INVITATION,children:(0,S.jsx)(mx,{})})}),(0,S.jsx)(ae.qh,{path:"/_pong",element:(0,S.jsx)(fx,{})}),(0,S.jsx)(ae.qh,{path:"/blend/invitation-page",element:(0,S.jsx)(hv.e,{pageId:sv.$h.BLEND_INVITATION,children:(0,S.jsx)(mx,{})})}),(0,S.jsx)(ae.qh,{path:"/blend/ci/:playlistId",element:(0,S.jsx)(Xg.$,{to:"/playlist/:playlistId"})}),(0,S.jsx)(ae.qh,{path:"/__noul__",element:(0,S.jsx)(Uy,{})}),(0,S.jsx)(ae.qh,{path:"/__noul__/*",element:(0,S.jsx)(Uy,{})}),a?[(0,S.jsx)(ae.qh,{path:"/browse/podcasts",element:(0,S.jsx)(Xg.$,{to:"/genre/podcasts-web"})},"podcasts"),m,(0,S.jsx)(ae.qh,{path:Hy.e2,element:(0,S.jsx)(Ex,{})},Hy.e2),(0,S.jsx)(ae.qh,{path:"/show/:showId/more-like-this",element:s?(0,S.jsx)(yy,{}):(0,S.jsx)(Xg.$,{to:"/"})},"more-like-this-shows"),(0,S.jsx)(ae.qh,{path:"/episode/:episodeId/more-like-this",element:s?(0,S.jsx)(Ov,{}):(0,S.jsx)(Xg.$,{to:"/"})},"more-like-this-episodes"),p,(0,S.jsx)(ae.qh,{path:Hy.Ch,element:(0,S.jsx)(ux,{})},"episode")]:[(0,S.jsx)(ae.qh,{path:"/browse/podcasts",element:(0,S.jsx)(Xg.$,{to:"/"})},"podcasts"),(0,S.jsx)(ae.qh,{path:"/show/*",element:(0,S.jsx)(Xg.$,{to:"/"})},"show"),(0,S.jsx)(ae.qh,{path:"/episode/*",element:(0,S.jsx)(Xg.$,{to:"/"})},"episode")],(0,S.jsx)(ae.qh,{path:"/site/:lookupToken",element:(0,S.jsx)(hv.e,{pageId:sv.$h.THESTAGE,children:(0,S.jsx)(vx,{})})}),(0,S.jsx)(ae.qh,{path:"/presents/:lookupToken",element:(0,S.jsx)(hv.e,{pageId:sv.$h.THESTAGE,children:(0,S.jsx)(vx,{})})}),(0,S.jsx)(ae.qh,{path:"/popular-in/:country",element:R?(0,S.jsx)(Nv,{}):(0,S.jsx)(Xg.$,{to:"/"})}),(0,S.jsx)(ae.qh,{path:"/popular-all/:contentId/:country",element:R?(0,S.jsx)(Lv,{}):(0,S.jsx)(Xg.$,{to:"/"})}),$v.NW.map((e=>((e,t,n)=>[(0,S.jsx)(ae.qh,{path:`/${$v.CT}${t}/track/:trackId`,element:(0,S.jsx)(hv.e,{pageId:sv.$h.TRACK,children:e?(0,S.jsx)(Ky,{}):(0,S.jsx)(Qy,{})})},"locale_track"),(0,S.jsx)(ae.qh,{path:`/${$v.CT}${t}/track/:trackId/more-like-this`,element:(0,S.jsx)(hv.e,{pageId:sv.$h.TRACK,children:(0,S.jsx)(Sy,{})})},"locale_track_more_like_this"),(0,S.jsx)(ae.qh,{path:`/${$v.CT}${t}/artist/:artistId/*`,element:(0,S.jsx)(hv.e,{children:(0,S.jsx)(_x,{})})},"locale_artist"),(0,S.jsx)(ae.qh,{path:`/${$v.CT}${t}/album/:albumId`,element:(0,S.jsx)(hv.e,{pageId:sv.$h.ALBUM,children:(0,S.jsx)(Gy,{})})},"locale_album"),(0,S.jsx)(ae.qh,{path:`/${$v.CT}${t}/premium`,element:(0,S.jsx)(hv.e,{pageId:sv.$h.PREMIUM,entityUri:"spotify:app:premium",children:(0,S.jsx)(gx,{})})},"locale_premium"),(0,S.jsx)(ae.qh,{path:`/${$v.CT}${t}/popular-in/:country`,element:n?(0,S.jsx)(Nv,{}):(0,S.jsx)(Xg.$,{to:"/"})},"locale_country_hub"),(0,S.jsx)(ae.qh,{path:`/${$v.CT}${t}/popular-all/:contentId/:country`,element:n?(0,S.jsx)(Lv,{}):(0,S.jsx)(Xg.$,{to:"/"})},"locale_country_hub_section")])(s,e,R))),null,!1,L?(0,S.jsx)(ae.qh,{path:"/author/:authorId/*",element:(0,S.jsx)(_v,{})}):null]})},Sx=(0,f.memo)((function(){return(()=>{const[e,n]=(0,f.useState)(),a=(0,ge.vh)(),r=(0,d.d4)(Lb.JJ),i=(0,qi.V)(),s=(0,t.NC)(we.HI4),o=(0,f.useCallback)((()=>{const e=performance.mark("pageEnd");n(e.startTime/1e3)}),[n]);(0,f.useEffect)((()=>(window.addEventListener("load",o),()=>{window.removeEventListener("load",o)})),[o]),(0,f.useEffect)((()=>{if(e){const t=nv({action:"load-time",context:JSON.stringify({loadTime:`${e.toFixed(2)}s`}),country:r,variant:s});i?a.send((0,kb.r)(t)):a.send((0,Nb._)(t))}}),[r,a,i,e,s])})(),(()=>{const e=(0,ge.vh)(),n=(0,d.d4)(Lb.JJ),a=(0,qi.V)(),r=(0,t.NC)(we.HI4),i=iv(performance.getEntriesByType("resource"));(0,f.useEffect)((()=>{if(Object.keys(i).length>0){const t=nv({action:"bytes-transferred-latency-per-resource",context:JSON.stringify(i),country:n,variant:r});a?e.send((0,kb.r)(t)):e.send((0,Nb._)(t))}}),[n,e,a,i,r])})(),(0,S.jsx)(tv,{children:(0,S.jsx)(f.Suspense,{fallback:(0,S.jsx)(qt.LoadingPage,{hasError:!1,errorMessage:"",loadOffline:!0}),children:(0,S.jsx)(jx,{})})})}));var Cx=o(10568),Ix=o(30891),Nx=o(777);const kx=({registry:e,children:t})=>{const n=(0,f.useContext)(Ix.N);return null!==n&&(e=(0,Nx.I)([e,n])),(0,S.jsx)(Ix.N.Provider,{value:e,children:t})};var Lx=o(88743);const Tx=({store:e,platform:t})=>{const n=[(0,S.jsx)(Pa.IF,{}),(0,S.jsx)(Cx.G,{}),(0,S.jsx)(rt.GM,{}),(0,S.jsx)(u.vd,{}),(0,S.jsx)(Ft,{platform:t}),(0,S.jsx)(lt.xy,{}),(0,S.jsx)(k.wI,{}),(0,S.jsx)(le.Pj,{}),(0,S.jsx)(at.nI,{}),(0,S.jsx)(h.SF,{}),(0,S.jsx)(p.id,{}),(0,S.jsx)(Lx.k7,{}),(0,S.jsx)(st.o,{}),(0,S.jsx)(Yu.yd,{isWebPSupported:t.isWebPSupported}),(0,S.jsx)(it.d,{eventSender:t.getEventSender()})];return(0,S.jsx)(ct,{history:t.getHistory(),children:(0,S.jsx)(m.s,{onError:e=>(0,Nn.Jy)(e,"App"),Fallback:N,children:(0,S.jsx)(d.Kq,{store:e,children:(0,S.jsx)(kx,{registry:t.getRegistry(),children:(0,S.jsxs)(nt,{platform:t,children:[(0,S.jsx)(se,{eventSender:t.getEventSender()}),(0,S.jsxs)(Ve,{providers:n,children:[(0,S.jsx)(Q,{}),(0,S.jsx)(O,{}),(0,S.jsx)(Sx,{})]})]})})})})})},Rx="POP",Px="PUSH",Mx="REPLACE";function Ox(e,t){return{canGoBack:e>0,canGoForward:e<t.length-1}}var Dx=o(21962),Hx=o(96083);var zx=o(48884);const Vx=e=>{window?.performance?.mark&&e&&window.performance.mark(e)},Bx=(e,t,n)=>window?.performance?.measure&&window?.performance?.getEntriesByName&&e&&t&&n?(window.performance.measure(n,e,t),window.performance.getEntriesByName(n)):[];function Ux(e){return e.container===za.m.Desktop}var Fx=o(12322),qx=o(88335);const Wx=(0,Fx._C)((()=>{const e=1e3*(0,qx.zf)();return{name:"SessionTiming",processEvent(t){const n=1e3*(0,qx.zf)();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}}));var Gx=o(1587),$x=o(88283),Qx=o(10928),Kx=o(92397),Zx=o(8141),Yx=o(60603),Jx=o(66664),Xx=o(43642),ew=o(18305),tw=o(58252),nw=o(98935);const aw=(e,t,n,a)=>{let r,i;return s=>{t.value>=0&&(s||a)&&(i=t.value-(r||0),(i||void 0===r)&&(r=t.value,t.delta=i,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}},rw=(e=!0)=>{const t=Yx.j.performance&&Yx.j.performance.getEntriesByType&&Yx.j.performance.getEntriesByType("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},iw=()=>{const e=rw();return e&&e.activationStart||0},sw=(e,t)=>{const n=rw();let a="navigate";n&&(Yx.j.document&&Yx.j.document.prerendering||iw()>0?a="prerender":Yx.j.document&&Yx.j.document.wasDiscarded?a="restore":n.type&&(a=n.type.replace(/_/g,"-")));return{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v4-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:a}},ow=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const a=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return a.observe(Object.assign({type:e,buffered:!0},n||{})),a}}catch(e){}},cw=e=>{const t=t=>{("pagehide"===t.type||Yx.j.document&&"hidden"===Yx.j.document.visibilityState)&&e(t)};Yx.j.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},lw=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let uw=-1;const dw=e=>{"hidden"===Yx.j.document.visibilityState&&uw>-1&&(uw="visibilitychange"===e.type?e.timeStamp:0,hw())},hw=()=>{removeEventListener("visibilitychange",dw,!0),removeEventListener("prerenderingchange",dw,!0)},pw=()=>(Yx.j.document&&uw<0&&(uw="hidden"!==Yx.j.document.visibilityState||Yx.j.document.prerendering?1/0:0,addEventListener("visibilitychange",dw,!0),addEventListener("prerenderingchange",dw,!0)),{get firstHiddenTime(){return uw}}),mw=e=>{Yx.j.document&&Yx.j.document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()},fw=[1800,3e3],gw=[.1,.25],bw=(e,t={})=>{((e,t={})=>{mw((()=>{const n=pw(),a=sw("FCP");let r;const i=ow("paint",(e=>{e.forEach((e=>{"first-contentful-paint"===e.name&&(i.disconnect(),e.startTime<n.firstHiddenTime&&(a.value=Math.max(e.startTime-iw(),0),a.entries.push(e),r(!0)))}))}));i&&(r=aw(e,a,fw,t.reportAllChanges))}))})(lw((()=>{const n=sw("CLS",0);let a,r=0,i=[];const s=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=i[0],n=i[i.length-1];r&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(r+=e.value,i.push(e)):(r=e.value,i=[e])}})),r>n.value&&(n.value=r,n.entries=i,a())},o=ow("layout-shift",s);o&&(a=aw(e,n,gw,t.reportAllChanges),cw((()=>{s(o.takeRecords()),a(!0)})),setTimeout(a,0))})))},vw=[100,300];let yw=0,xw=1/0,ww=0;const _w=e=>{e.forEach((e=>{e.interactionId&&(xw=Math.min(xw,e.interactionId),ww=Math.max(ww,e.interactionId),yw=ww?(ww-xw)/7+1:0)}))};let Aw;const Ew=()=>{"interactionCount"in performance||Aw||(Aw=ow("event",_w,{type:"event",buffered:!0,durationThreshold:0}))},jw=[],Sw=new Map;const Cw=()=>(Aw?yw:performance.interactionCount||0)-0,Iw=[],Nw=e=>{if(Iw.forEach((t=>t(e))),!e.interactionId&&"first-input"!==e.entryType)return;const t=jw[jw.length-1],n=Sw.get(e.interactionId);if(n||jw.length<10||t&&e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===(n.entries[0]&&n.entries[0].startTime)&&n.entries.push(e);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};Sw.set(t.id,t),jw.push(t)}jw.sort(((e,t)=>t.latency-e.latency)),jw.length>10&&jw.splice(10).forEach((e=>Sw.delete(e.id)))}},kw=e=>{const t=Yx.j.requestIdleCallback||Yx.j.setTimeout;let n=-1;return e=lw(e),Yx.j.document&&"hidden"===Yx.j.document.visibilityState?e():(n=t(e),cw(e)),n},Lw=[200,500],Tw=(e,t={})=>{"PerformanceEventTiming"in Yx.j&&"interactionId"in PerformanceEventTiming.prototype&&mw((()=>{Ew();const n=sw("INP");let a;const r=e=>{kw((()=>{e.forEach(Nw);const t=(()=>{const e=Math.min(jw.length-1,Math.floor(Cw()/50));return jw[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,a())}))},i=ow("event",r,{durationThreshold:null!=t.durationThreshold?t.durationThreshold:40});a=aw(e,n,Lw,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),cw((()=>{r(i.takeRecords()),a(!0)})))}))},Rw=[2500,4e3],Pw={},Mw=[800,1800],Ow=e=>{Yx.j.document&&Yx.j.document.prerendering?mw((()=>Ow(e))):Yx.j.document&&"complete"!==Yx.j.document.readyState?addEventListener("load",(()=>Ow(e)),!0):setTimeout(e,0)},Dw={},Hw={};let zw,Vw,Bw,Uw,Fw;function qw(e,t=!1){return Jw("cls",e,$w,zw,t)}function Ww(e,t){return Xw(e,t),Hw[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);ow(e,(t=>{Gw(e,{entries:t})}),t)}(e),Hw[e]=!0),e_(e,t)}function Gw(e,t){const n=Dw[e];if(n&&n.length)for(const a of n)try{a(t)}catch(t){tw.T&&Xx.vF.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${(0,nw.qQ)(a)}\nError:`,t)}}function $w(){return bw((e=>{Gw("cls",{metric:e}),zw=e}),{reportAllChanges:!0})}function Qw(){return((e,t={})=>{mw((()=>{const n=pw(),a=sw("FID");let r;const i=e=>{e.startTime<n.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),r(!0))},s=e=>{e.forEach(i)},o=ow("first-input",s);r=aw(e,a,vw,t.reportAllChanges),o&&cw(lw((()=>{s(o.takeRecords()),o.disconnect()})))}))})((e=>{Gw("fid",{metric:e}),Vw=e}))}function Kw(){return((e,t={})=>{mw((()=>{const n=pw(),a=sw("LCP");let r;const i=e=>{t.reportAllChanges||(e=e.slice(-1)),e.forEach((e=>{e.startTime<n.firstHiddenTime&&(a.value=Math.max(e.startTime-iw(),0),a.entries=[e],r())}))},s=ow("largest-contentful-paint",i);if(s){r=aw(e,a,Rw,t.reportAllChanges);const n=lw((()=>{Pw[a.id]||(i(s.takeRecords()),s.disconnect(),Pw[a.id]=!0,r(!0))}));["keydown","click"].forEach((e=>{Yx.j.document&&addEventListener(e,(()=>kw(n)),{once:!0,capture:!0})})),cw(n)}}))})((e=>{Gw("lcp",{metric:e}),Bw=e}),{reportAllChanges:!0})}function Zw(){return((e,t={})=>{const n=sw("TTFB"),a=aw(e,n,Mw,t.reportAllChanges);Ow((()=>{const e=rw();e&&(n.value=Math.max(e.responseStart-iw(),0),n.entries=[e],a(!0))}))})((e=>{Gw("ttfb",{metric:e}),Uw=e}))}function Yw(){return Tw((e=>{Gw("inp",{metric:e}),Fw=e}))}function Jw(e,t,n,a,r=!1){let i;return Xw(e,t),Hw[e]||(i=n(),Hw[e]=!0),a&&t({metric:a}),e_(e,t,r?i:void 0)}function Xw(e,t){Dw[e]=Dw[e]||[],Dw[e].push(t)}function e_(e,t,n){return()=>{n&&n();const a=Dw[e];if(!a)return;const r=a.indexOf(t);-1!==r&&a.splice(r,1)}}var t_=o(68676);function n_(e){return"number"==typeof e&&isFinite(e)}function a_(e,t,n,{...a}){const r=(0,Gx.et)(e).start_timestamp;return r&&r>t&&"function"==typeof e.updateStartTime&&e.updateStartTime(t),(0,t_.hb)(e,(()=>{const e=(0,t_.Uk)({startTime:t,...a});return e&&e.end(n),e}))}function r_(e){const t=(0,Jx.KU)();if(!t)return;const{name:n,transaction:a,attributes:r,startTime:i}=e,{release:s,environment:o}=t.getOptions(),c=t.getIntegrationByName("Replay"),l=c&&c.getReplayId(),u=(0,Jx.o5)(),d=u.getUser(),h=void 0!==d?d.email||d.id||d.ip_address:void 0;let p;try{p=u.getScopeData().contexts.profile.profile_id}catch(e){}const m={release:s,environment:o,user:h||void 0,profile_id:p||void 0,replay_id:l||void 0,transaction:a,"user_agent.original":Yx.j.navigator&&Yx.j.navigator.userAgent,...r};return(0,t_.Uk)({name:n,attributes:m,startTime:i,experimental:{standalone:!0}})}function i_(){return Yx.j&&Yx.j.addEventListener&&Yx.j.performance}function s_(e){return e/1e3}function o_(){let e,t,n=0;if(!function(){try{return PerformanceObserver.supportedEntryTypes.includes("layout-shift")}catch(e){return!1}}())return;let a=!1;function r(){a||(a=!0,t&&function(e,t,n){tw.T&&Xx.vF.log(`Sending CLS span (${e})`);const a=s_((qx.k3||0)+(t&&t.startTime||0)),r=(0,Jx.o5)().getScopeData().transactionName,i=t?(0,Qx.Hd)(t.sources[0]&&t.sources[0].node):"Layout shift",s=(0,ew.Ce)({[$x.JD]:"auto.http.browser.cls",[$x.uT]:"ui.webvital.cls",[$x.jG]:t&&t.duration||0,"sentry.pageload.span_id":n}),o=r_({name:i,transaction:r,attributes:s,startTime:a});o&&(o.addEvent("cls",{[$x.Sn]:"",[$x.xc]:e}),o.end(a))}(n,e,t),i())}const i=qw((({metric:t})=>{const a=t.entries[t.entries.length-1];a&&(n=t.value,e=a)}),!0);cw((()=>{r()})),setTimeout((()=>{const e=(0,Jx.KU)();if(!e)return;const n=e.on("startNavigationSpan",(()=>{r(),n&&n()})),a=(0,Gx.Bk)(),i=a&&(0,Gx.zU)(a),s=i&&(0,Gx.et)(i);s&&"pageload"===s.op&&(t=i.spanContext().spanId)}),0)}let c_,l_,u_=0,d_={};function h_({recordClsStandaloneSpans:e}){const t=i_();if(t&&qx.k3){t.mark&&Yx.j.performance.mark("sentry-tracing-init");const n=Jw("fid",(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=s_(qx.k3),a=s_(t.startTime);d_.fid={value:e.value,unit:"millisecond"},d_["mark.fid"]={value:n+a,unit:"second"}}),Qw,Vw),a=function(e,t=!1){return Jw("lcp",e,Kw,Bw,t)}((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(d_.lcp={value:e.value,unit:"millisecond"},c_=t)}),!0),r=function(e){return Jw("ttfb",e,Zw,Uw)}((({metric:e})=>{e.entries[e.entries.length-1]&&(d_.ttfb={value:e.value,unit:"millisecond"})})),i=e?o_():qw((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(d_.cls={value:e.value,unit:""},l_=t)}),!0);return()=>{n(),a(),r(),i&&i()}}return()=>{}}function p_(e,t){const n=i_();if(!n||!n.getEntries||!qx.k3)return;const a=s_(qx.k3),r=n.getEntries(),{op:i,start_timestamp:s}=(0,Gx.et)(e);if(r.slice(u_).forEach((t=>{const n=s_(t.startTime),r=s_(Math.max(0,t.duration));if(!("navigation"===i&&s&&a+n<s))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((a=>{m_(e,t,a,n)})),m_(e,t,"secureConnection",n,"TLS/SSL"),m_(e,t,"fetch",n,"cache"),m_(e,t,"domainLookup",n,"DNS"),function(e,t,n){const a=n+s_(t.requestStart),r=n+s_(t.responseEnd),i=n+s_(t.responseStart);t.responseEnd&&(a_(e,a,r,{op:"browser.request",name:t.name,attributes:{[$x.JD]:"auto.ui.browser.metrics"}}),a_(e,i,r,{op:"browser.response",name:t.name,attributes:{[$x.JD]:"auto.ui.browser.metrics"}}))}(e,t,n)}(e,t,a);break;case"mark":case"paint":case"measure":{!function(e,t,n,a,r){const i=rw(!1),s=s_(i?i.requestStart:0),o=r+Math.max(n,s),c=r+n,l=c+a,u={[$x.JD]:"auto.resource.browser.metrics"};o!==c&&(u["sentry.browser.measure_happened_before_request"]=!0,u["sentry.browser.measure_start_time"]=o);a_(e,o,l,{name:t.name,op:t.entryType,attributes:u})}(e,t,n,r,a);const i=pw(),s=t.startTime<i.firstHiddenTime;"first-paint"===t.name&&s&&(d_.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&s&&(d_.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,a,r,i){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const s=(0,Zx.Dl)(n),o={[$x.JD]:"auto.resource.browser.metrics"};f_(o,t,"transferSize","http.response_transfer_size"),f_(o,t,"encodedBodySize","http.response_content_length"),f_(o,t,"decodedBodySize","http.decoded_response_content_length");const c=t.deliveryType;null!=c&&(o["http.response_delivery_type"]=c);const l=t.renderBlockingStatus;l&&(o["resource.render_blocking_status"]=l);s.protocol&&(o["url.scheme"]=s.protocol.split(":").pop());s.host&&(o["server.address"]=s.host);o["url.same_origin"]=n.includes(Yx.j.location.origin);const u=i+a,d=u+r;a_(e,u,d,{name:n.replace(Yx.j.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:o})}(e,t,t.name,n,r,a)}})),u_=Math.max(r.length-1,0),function(e){const t=Yx.j.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),n_(n.rtt)&&(d_["connection.rtt"]={value:n.rtt,unit:"millisecond"}));n_(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`);n_(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===i){!function(e){const t=rw(!1);if(!t)return;const{responseStart:n,requestStart:a}=t;a<=n&&(e["ttfb.requestTime"]={value:n-a,unit:"millisecond"})}(d_);const n=d_["mark.fid"];n&&d_.fid&&(a_(e,n.value,n.value+s_(d_.fid.value),{name:"first input delay",op:"ui.action",attributes:{[$x.JD]:"auto.ui.browser.metrics"}}),delete d_["mark.fid"]),"fcp"in d_&&t.recordClsOnPageloadSpan||delete d_.cls,Object.entries(d_).forEach((([e,t])=>{(0,Kx.X)(e,t.value,t.unit)})),e.setAttribute("performance.timeOrigin",a),e.setAttribute("performance.activationStart",iw()),function(e){c_&&(c_.element&&e.setAttribute("lcp.element",(0,Qx.Hd)(c_.element)),c_.id&&e.setAttribute("lcp.id",c_.id),c_.url&&e.setAttribute("lcp.url",c_.url.trim().slice(0,200)),null!=c_.loadTime&&e.setAttribute("lcp.loadTime",c_.loadTime),null!=c_.renderTime&&e.setAttribute("lcp.renderTime",c_.renderTime),e.setAttribute("lcp.size",c_.size));l_&&l_.sources&&l_.sources.forEach(((t,n)=>e.setAttribute(`cls.source.${n+1}`,(0,Qx.Hd)(t.node))))}(e)}c_=void 0,l_=void 0,d_={}}function m_(e,t,n,a,r=n){const i=function(e){if("secureConnection"===e)return"connectEnd";if("fetch"===e)return"domainLookupStart";return`${e}End`}(n),s=t[i],o=t[`${n}Start`];o&&s&&a_(e,a+s_(o),a+s_(s),{op:`browser.${r}`,name:t.name,attributes:{[$x.JD]:"auto.ui.browser.metrics"}})}function f_(e,t,n,a){const r=t[n];null!=r&&r<2147483647&&(e[a]=r)}const g_=[],b_=new Map;function v_(){if(i_()&&qx.k3){const e=Jw("inp",(({metric:e})=>{if(null==e.value)return;const t=e.entries.find((t=>t.duration===e.value&&y_[t.name]));if(!t)return;const{interactionId:n}=t,a=y_[t.name],r=s_(qx.k3+t.startTime),i=s_(e.value),s=(0,Gx.Bk)(),o=s?(0,Gx.zU)(s):void 0,c=(null!=n?b_.get(n):void 0)||o,l=c?(0,Gx.et)(c).description:(0,Jx.o5)().getScopeData().transactionName,u=r_({name:(0,Qx.Hd)(t.target),transaction:l,attributes:(0,ew.Ce)({[$x.JD]:"auto.http.browser.inp",[$x.uT]:`ui.interaction.${a}`,[$x.jG]:t.duration}),startTime:r});u&&(u.addEvent("inp",{[$x.Sn]:"millisecond",[$x.xc]:e.value}),u.end(r+i))}),Yw,Fw);return()=>{e()}}return()=>{}}const y_={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};var x_=o(4004),w_=o(85402),__=o(44165),A_=o(5285),E_=o(48276),j_=o(39399);const S_={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function C_(e,t={}){const n=new Map;let a,r=!1,i="externalFinish",s=!t.disableAutoFinish;const o=[],{idleTimeout:c=S_.idleTimeout,finalTimeout:l=S_.finalTimeout,childSpanTimeout:u=S_.childSpanTimeout,beforeSpanEnd:d}=t,h=(0,Jx.KU)();if(!h||!(0,__.w)())return new E_.w;const p=(0,Jx.o5)(),m=(0,Gx.Bk)(),f=function(e){const t=(0,t_.Uk)(e);return(0,A_.r)((0,Jx.o5)(),t),w_.T&&Xx.vF.log("[Tracing] Started span is an idle span"),t}(e);function g(){a&&(clearTimeout(a),a=void 0)}function b(e){g(),a=setTimeout((()=>{!r&&0===n.size&&s&&(i="idleTimeout",f.end(e))}),c)}function v(e){a=setTimeout((()=>{!r&&s&&(i="heartbeatFailed",f.end(e))}),u)}function y(e){r=!0,n.clear(),o.forEach((e=>e())),(0,A_.r)(p,m);const t=(0,Gx.et)(f),{start_timestamp:a}=t;if(!a)return;(t.data||{})[$x.fs]||f.setAttribute($x.fs,i),Xx.vF.log(`[Tracing] Idle span "${t.op}" finished`);const s=(0,Gx.xO)(f).filter((e=>e!==f));let u=0;s.forEach((t=>{t.isRecording()&&(t.setStatus({code:j_.TJ,message:"cancelled"}),t.end(e),w_.T&&Xx.vF.log("[Tracing] Cancelling span since span ended early",JSON.stringify(t,void 0,2)));const n=(0,Gx.et)(t),{timestamp:a=0,start_timestamp:r=0}=n,i=r<=e,s=a-r<=(l+c)/1e3;if(w_.T){const e=JSON.stringify(t,void 0,2);i?s||Xx.vF.log("[Tracing] Discarding span since it finished after idle span final timeout",e):Xx.vF.log("[Tracing] Discarding span since it happened after idle span was finished",e)}s&&i||((0,Gx.VS)(f,t),u++)})),u>0&&f.setAttribute("sentry.idle_span_discarded_spans",u)}return f.end=new Proxy(f.end,{apply(e,t,n){d&&d(f);const[a,...r]=n,i=a||(0,qx.zf)(),s=(0,Gx.cI)(i),o=(0,Gx.xO)(f).filter((e=>e!==f));if(!o.length)return y(s),Reflect.apply(e,t,[s,...r]);const c=o.map((e=>(0,Gx.et)(e).timestamp)).filter((e=>!!e)),u=c.length?Math.max(...c):void 0,h=(0,Gx.et)(f).start_timestamp,p=Math.min(h?h+l/1e3:1/0,Math.max(h||-1/0,Math.min(s,u||1/0)));return y(p),Reflect.apply(e,t,[p,...r])}}),o.push(h.on("spanStart",(e=>{if(r||e===f||(0,Gx.et)(e).timestamp)return;var t;(0,Gx.xO)(f).includes(e)&&(t=e.spanContext().spanId,g(),n.set(t,!0),v((0,qx.zf)()+u/1e3))}))),o.push(h.on("spanEnd",(e=>{var t;r||(t=e.spanContext().spanId,n.has(t)&&n.delete(t),0===n.size&&b((0,qx.zf)()+c/1e3))}))),o.push(h.on("idleSpanEnableAutoFinish",(e=>{e===f&&(s=!0,b(),n.size&&v())}))),t.disableAutoFinish||b(),setTimeout((()=>{r||(f.setStatus({code:j_.TJ,message:"deadline_exceeded"}),i="finalTimeout",f.end())}),l),f}var I_=o(7347),N_=o(41115);let k_=!1;function L_(){const e=(0,Gx.Bk)(),t=e&&(0,Gx.zU)(e);if(t){const e="internal_error";w_.T&&Xx.vF.log(`[Tracing] Root span: ${e} -> Global error occurred`),t.setStatus({code:j_.TJ,message:e})}}L_.tag="sentry_tracingErrorCallback";var T_=o(26327),R_=o(33414),P_=o(97470),M_=o(62571),O_=o(54536),D_=o(78027);var H_=o(74772),z_=o(27972),V_=o(82186),B_=o(7330),U_=o(86928),F_=o(63560),q_=o(18611);function W_(e={}){const t=(0,Jx.KU)();if(!(0,q_.Ol)()||!t)return{};const n=(0,F_.E)(),a=(0,U_.h)(n);if(a.getTraceData)return a.getTraceData(e);const r=(0,Jx.o5)(),i=e.span||(0,Gx.Bk)(),s=i?(0,Gx.Qh)(i):function(e){const{traceId:t,sampled:n,spanId:a}=e.getPropagationContext();return(0,R_.TC)(t,a,n)}(r),o=i?(0,P_.k1)(i):(0,P_.ao)(t,r),c=(0,B_.De)(o);return R_.MI.test(s)?{"sentry-trace":s,baggage:c}:(Xx.vF.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function G_(e,t,n,a,r="auto.http.browser"){if(!e.fetchData)return;const i=(0,__.w)()&&t(e.fetchData.url);if(e.endTimestamp&&i){const t=e.fetchData.__span;if(!t)return;const n=a[t];return void(n&&(!function(e,t){if(t.response){(0,j_.N8)(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:j_.TJ,message:"internal_error"});e.end()}(n,e),delete a[t]))}const{method:s,url:o}=e.fetchData,c=function(e){try{return new URL(e).href}catch(e){return}}(o),l=c?(0,Zx.Dl)(c).host:void 0,u=!!(0,Gx.Bk)(),d=i&&u?(0,t_.Uk)({name:`${s} ${o}`,attributes:{url:o,type:"fetch","http.method":s,"http.url":c,"server.address":l,[$x.JD]:r,[$x.uT]:"http.client"}}):new E_.w;if(e.fetchData.__span=d.spanContext().spanId,a[d.spanContext().spanId]=d,n(e.fetchData.url)){const t=e.args[0],n=e.args[1]||{},a=$_(t,n,(0,__.w)()&&u?d:void 0);a&&(e.args[1]=n,n.headers=a)}return d}function $_(e,t,n){const a=W_({span:n}),r=a["sentry-trace"],i=a.baggage;if(!r)return;const s=t.headers||(function(e){return"undefined"!=typeof Request&&(0,V_.tH)(e,Request)}(e)?e.headers:void 0);if(s){if(function(e){return"undefined"!=typeof Headers&&(0,V_.tH)(e,Headers)}(s)){const e=new Headers(s);if(e.set("sentry-trace",r),i){const t=e.get("baggage");if(t){const n=Q_(t);e.set("baggage",n?`${n},${i}`:i)}else e.set("baggage",i)}return e}if(Array.isArray(s)){const e=[...s.filter((e=>!(Array.isArray(e)&&"sentry-trace"===e[0]))).map((e=>{if(Array.isArray(e)&&"baggage"===e[0]&&"string"==typeof e[1]){const[t,n,...a]=e;return[t,Q_(n),...a]}return e})),["sentry-trace",r]];return i&&e.push(["baggage",i]),e}{const e="baggage"in s?s.baggage:void 0;let t=[];return Array.isArray(e)?t=e.map((e=>"string"==typeof e?Q_(e):e)).filter((e=>""===e)):e&&t.push(Q_(e)),i&&t.push(i),{...s,"sentry-trace":r,baggage:t.length>0?t.join(","):void 0}}}return{...a}}function Q_(e){return e.split(",").filter((e=>!e.split("=")[0].startsWith(B_.sv))).join(",")}var K_=o(95627);const Z_=new WeakMap,Y_=new Map,J_={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function X_(e,t){const{traceFetch:n,traceXHR:a,trackFetchStreamPerformance:r,shouldCreateSpanForRequest:i,enableHTTPTimings:s,tracePropagationTargets:o}={traceFetch:J_.traceFetch,traceXHR:J_.traceXHR,trackFetchStreamPerformance:J_.trackFetchStreamPerformance,...t},c="function"==typeof i?i:e=>!0,l=e=>function(e,t){const n=D_.jf.location&&D_.jf.location.href;if(n){let a,r;try{a=new URL(e,n),r=new URL(n).origin}catch(e){return!1}const i=a.origin===r;return t?(0,K_.Xr)(a.toString(),t)||i&&(0,K_.Xr)(a.pathname,t):i}{const n=!!e.match(/^\/(?!\/)/);return t?(0,K_.Xr)(e,t):n}}(e,o),u={};n&&(e.addEventProcessor((e=>("transaction"===e.type&&e.spans&&e.spans.forEach((e=>{if("http.client"===e.op){const t=Y_.get(e.span_id);t&&(e.timestamp=t/1e3,Y_.delete(e.span_id))}})),e))),r&&(0,z_.B$)((e=>{if(e.response){const t=Z_.get(e.response);t&&e.endTimestamp&&Y_.set(t,e.endTimestamp)}})),(0,z_.ur)((e=>{const t=G_(e,c,l,u);if(e.response&&e.fetchData.__span&&Z_.set(e.response,e.fetchData.__span),t){const n=nA(e.fetchData.url),a=n?(0,Zx.Dl)(n).host:void 0;t.setAttributes({"http.url":n,"server.address":a})}s&&t&&eA(t)}))),a&&(0,H_.Mn)((e=>{const t=function(e,t,n,a){const r=e.xhr,i=r&&r[H_.Er];if(!r||r.__sentry_own_request__||!i)return;const s=(0,__.w)()&&t(i.url);if(e.endTimestamp&&s){const e=r.__sentry_xhr_span_id__;if(!e)return;const t=a[e];return void(t&&void 0!==i.status_code&&((0,j_.N8)(t,i.status_code),t.end(),delete a[e]))}const o=nA(i.url),c=o?(0,Zx.Dl)(o).host:void 0,l=!!(0,Gx.Bk)(),u=s&&l?(0,t_.Uk)({name:`${i.method} ${i.url}`,attributes:{type:"xhr","http.method":i.method,"http.url":o,url:i.url,"server.address":c,[$x.JD]:"auto.http.browser",[$x.uT]:"http.client"}}):new E_.w;r.__sentry_xhr_span_id__=u.spanContext().spanId,a[r.__sentry_xhr_span_id__]=u,n(i.url)&&function(e,t){const{"sentry-trace":n,baggage:a}=W_({span:t});n&&function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader("baggage",n)}catch(e){}}(e,n,a)}(r,(0,__.w)()&&l?u:void 0);return u}(e,c,l,u);s&&t&&eA(t)}))}function eA(e){const{url:t}=(0,Gx.et)(e).data||{};if(!t||"string"!=typeof t)return;const n=Ww("resource",(({entries:a})=>{a.forEach((a=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(a)&&a.name.endsWith(t)){const t=function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",a="";for(const r of e){if("/"===r){[t,n]=e.split("/");break}if(!isNaN(Number(r))){t="h"===a?"http":a,n=e.split(a)[1];break}a+=r}a===e&&(t=a);return{name:t,version:n}}(e.nextHopProtocol),a=[];if(a.push(["network.protocol.version",n],["network.protocol.name",t]),!qx.k3)return a;return[...a,["http.request.redirect_start",tA(e.redirectStart)],["http.request.fetch_start",tA(e.fetchStart)],["http.request.domain_lookup_start",tA(e.domainLookupStart)],["http.request.domain_lookup_end",tA(e.domainLookupEnd)],["http.request.connect_start",tA(e.connectStart)],["http.request.secure_connection_start",tA(e.secureConnectionStart)],["http.request.connection_end",tA(e.connectEnd)],["http.request.request_start",tA(e.requestStart)],["http.request.response_start",tA(e.responseStart)],["http.request.response_end",tA(e.responseEnd)]]}(a);t.forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function tA(e=0){return((qx.k3||performance.timeOrigin)+e)/1e3}function nA(e){try{return new URL(e,D_.jf.location.origin).href}catch(e){return}}const aA={...S_,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...J_},rA=(e={})=>{k_||(k_=!0,(0,I_.L)(L_),(0,N_.r)(L_));const{enableInp:t,enableLongTask:n,enableLongAnimationFrame:a,_experiments:{enableInteractions:r,enableStandaloneClsSpans:i},beforeStartSpan:s,idleTimeout:o,finalTimeout:c,childSpanTimeout:l,markBackgroundSpan:u,traceFetch:d,traceXHR:h,trackFetchStreamPerformance:p,shouldCreateSpanForRequest:m,enableHTTPTimings:f,instrumentPageLoad:g,instrumentNavigation:b}={...aA,...e},v=h_({recordClsStandaloneSpans:i||!1});t&&v_(),a&&T_.O.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?new PerformanceObserver((e=>{const t=(0,Gx.Bk)();if(t)for(const n of e.getEntries()){if(!n.scripts[0])continue;const e=s_(qx.k3+n.startTime),{start_timestamp:a,op:r}=(0,Gx.et)(t);if("navigation"===r&&a&&e<a)continue;const i=s_(n.duration),s={[$x.JD]:"auto.ui.browser.metrics"},o=n.scripts[0],{invoker:c,invokerType:l,sourceURL:u,sourceFunctionName:d,sourceCharPosition:h}=o;s["browser.script.invoker"]=c,s["browser.script.invoker_type"]=l,u&&(s["code.filepath"]=u),d&&(s["code.function"]=d),-1!==h&&(s["browser.script.source_char_position"]=h),a_(t,e,e+i,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:s})}})).observe({type:"long-animation-frame",buffered:!0}):n&&Ww("longtask",(({entries:e})=>{const t=(0,Gx.Bk)();if(!t)return;const{op:n,start_timestamp:a}=(0,Gx.et)(t);for(const r of e){const e=s_(qx.k3+r.startTime),i=s_(r.duration);"navigation"===n&&a&&e<a||a_(t,e,e+i,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[$x.JD]:"auto.ui.browser.metrics"}})}})),r&&Ww("event",(({entries:e})=>{const t=(0,Gx.Bk)();if(t)for(const n of e)if("click"===n.name){const e=s_(qx.k3+n.startTime),a=s_(n.duration),r={name:(0,Qx.Hd)(n.target),op:`ui.interaction.${n.name}`,startTime:e,attributes:{[$x.JD]:"auto.ui.browser.metrics"}},i=(0,Qx.xE)(n.target);i&&(r.attributes["ui.component_name"]=i),a_(t,e,e+a,r)}}));const y={name:void 0,source:void 0};function x(e,t){const n="pageload"===t.op,a=s?s(t):t,r=a.attributes||{};t.name!==a.name&&(r[$x.i_]="custom",a.attributes=r),y.name=a.name,y.source=r[$x.i_];const u=C_(a,{idleTimeout:o,finalTimeout:c,childSpanTimeout:l,disableAutoFinish:n,beforeSpanEnd:e=>{v(),p_(e,{recordClsOnPageloadSpan:!i})}});function d(){["interactive","complete"].includes(D_.jf.document.readyState)&&e.emit("idleSpanEnableAutoFinish",u)}return n&&D_.jf.document&&(D_.jf.document.addEventListener("readystatechange",(()=>{d()})),d()),u}return{name:"BrowserTracing",afterAllSetup(e){let n,a=D_.jf.location&&D_.jf.location.href;function i(){n&&!(0,Gx.et)(n).timestamp&&(O_.T&&Xx.vF.log(`[Tracing] Finishing current active span with op: ${(0,Gx.et)(n).op}`),n.end())}e.on("startNavigationSpan",(t=>{(0,Jx.KU)()===e&&(i(),n=x(e,{op:"navigation",...t}))})),e.on("startPageLoadSpan",((t,a={})=>{if((0,Jx.KU)()!==e)return;i();const r=a.sentryTrace||sA("sentry-trace"),s=a.baggage||sA("baggage"),o=(0,R_.kM)(r,s);(0,Jx.o5)().setPropagationContext(o),n=x(e,{op:"pageload",...t})})),e.on("spanEnd",(e=>{const t=(0,Gx.et)(e).op;if(e!==(0,Gx.zU)(e)||"navigation"!==t&&"pageload"!==t)return;const n=(0,Jx.o5)(),a=n.getPropagationContext();n.setPropagationContext({...a,sampled:void 0!==a.sampled?a.sampled:(0,Gx.pK)(e),dsc:a.dsc||(0,P_.k1)(e)})})),D_.jf.location&&(g&&iA(e,{name:D_.jf.location.pathname,startTime:qx.k3?qx.k3/1e3:void 0,attributes:{[$x.i_]:"url",[$x.JD]:"auto.pageload.browser"}}),b&&(0,x_._)((({to:t,from:n})=>{void 0===n&&a&&-1!==a.indexOf(t)?a=void 0:n!==t&&(a=void 0,function(e,t){(0,Jx.rm)().setPropagationContext({traceId:(0,M_.el)()}),(0,Jx.o5)().setPropagationContext({traceId:(0,M_.el)()}),e.emit("startNavigationSpan",t),(0,Jx.o5)().setTransactionName(t.name);const n=(0,Gx.Bk)();n&&(0,Gx.et)(n).op}(e,{name:D_.jf.location.pathname,attributes:{[$x.i_]:"url",[$x.JD]:"auto.navigation.browser"}}))}))),u&&(D_.jf&&D_.jf.document?D_.jf.document.addEventListener("visibilitychange",(()=>{const e=(0,Gx.Bk)();if(!e)return;const t=(0,Gx.zU)(e);if(D_.jf.document.hidden&&t){const e="cancelled",{op:n,status:a}=(0,Gx.et)(t);O_.T&&Xx.vF.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),a||t.setStatus({code:j_.TJ,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}})):O_.T&&Xx.vF.warn("[Tracing] Could not set up background tab detection due to lack of global document")),r&&function(e,t,n,a){let r;const i=()=>{const i="ui.action.click",s=(0,Gx.Bk)(),o=s&&(0,Gx.zU)(s);if(o){const e=(0,Gx.et)(o).op;if(["navigation","pageload"].includes(e))return void(O_.T&&Xx.vF.warn(`[Tracing] Did not create ${i} span because a pageload or navigation span is in progress.`))}r&&(r.setAttribute($x.fs,"interactionInterrupted"),r.end(),r=void 0),a.name?r=C_({name:a.name,op:i,attributes:{[$x.i_]:a.source||"url"}},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n}):O_.T&&Xx.vF.warn(`[Tracing] Did not create ${i} transaction because _latestRouteName is missing.`)};D_.jf.document&&addEventListener("click",i,{once:!1,capture:!0})}(o,c,l,y),t&&function(){const e=({entries:e})=>{const t=(0,Gx.Bk)(),n=t&&(0,Gx.zU)(t);e.forEach((e=>{if(!function(e){return"duration"in e}(e)||!n)return;const t=e.interactionId;if(null!=t&&!b_.has(t)){if(g_.length>10){const e=g_.shift();b_.delete(e)}g_.push(t),b_.set(t,n)}}))};Ww("event",e),Ww("first-input",e)}(),X_(e,{traceFetch:d,traceXHR:h,trackFetchStreamPerformance:p,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:m,enableHTTPTimings:f})}}};function iA(e,t,n){e.emit("startPageLoadSpan",t,n),(0,Jx.o5)().setTransactionName(t.name);const a=(0,Gx.Bk)();return"pageload"===(a&&(0,Gx.et)(a).op)?a:void 0}function sA(e){const t=(0,Qx.NX)(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}o(31035);let oA,cA,lA,uA,dA,hA=!1;const pA=new WeakSet;function mA(e){return function(e,t){const n=rA({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:a,useLocation:r,useNavigationType:i,createRoutesFromChildren:s,matchRoutes:o,stripBasename:c,instrumentPageLoad:l=!0,instrumentNavigation:u=!0}=e;return{...n,setup(){oA=a,cA=r,lA=i,dA=o,uA=s,hA=c||!1},afterAllSetup(e){n.afterAllSetup(e);const a=D_.jf&&D_.jf.location&&D_.jf.location.pathname;l&&a&&iA(e,{name:a,attributes:{[$x.i_]:"url",[$x.uT]:"pageload",[$x.JD]:`auto.pageload.react.reactrouter_v${t}`}}),u&&pA.add(e)}}}(e,"6")}const fA={version:"1.1.64.510",date:new Date(2021,6,20)};function gA(){if((0,Hb.My)()!==za.m.Desktop)return!0;const e=function(){const e=window.navigator.userAgent.match(Hb.aS);return e?.groups?.version??null}();if(!e)return!0;const t=function(e){const t=fA.version.split(".")[2],[,n,a]=e.split(".");if("1"!==n)return new Date;const r=parseInt(t,10),i=parseInt(a,10);if(isNaN(i))return new Date;const s=i-r,o=new Date(fA.date.getTime());return o.setDate(o.getDate()+14*s),o}(e);return n=t,((new Date).getTime()-n.getTime())<0;var n}const bA=e=>{const t=(e.transaction||"").replace(/^\/intl-[A-Za-z]{2}/i,"/");return e.transaction=t,e};var vA=o(88006),yA=o(91382),xA=o(63682);var wA=o(6544),_A=o(22726),AA=o(37813),EA=o(3074),jA=o.n(EA);function SA(){return jA().create().hex.replace(/-/g,"").substr(0,16)}const CA=(e,t)=>{const n=e.url.searchParams.get("dlsi")??SA(),a=navigator.userAgent,r={link:e.url.toString(),entity_uri:e.uri.toURI(),source:a,deeplink_session_id:n};t.send((0,AA.N)(r))},IA=e=>e.searchParams.has("si")||"1"===e.searchParams.get("go")||"1"===e.searchParams.get("wta_deep_link"),NA=e=>IA(e)&&!(e=>e.searchParams.has("_branch_match_id")||e.searchParams.has("_branch_referrer")||e.searchParams.has("link_click_id"))(e);function kA(e){const t=function(e){const t="https://open.spotify.com/",n="spotify://";return e.startsWith(n)?e.replace(n,t):e.startsWith("spotify:")?(e.replaceAll(":","/"),e.replace("spotify/",t)):e}(e),n=(0,X.o_h)(t,{parseUnknown:!0});if(!n)return null;const a=function(e){try{return new URL(e).search}catch{return""}}(t),r=new URLSearchParams(a),i=new URL(n.toURL());return r.forEach(((e,t)=>{i.searchParams.set(t,e)})),{url:i,uri:n}}async function LA(e,t){const{uri:n,url:a}=t,r=a.searchParams.get("pt"),i=a.searchParams.get("prid"),s=n.toString();if(r){const t=e.resolve(wA.Ki);e.resolve(_A.O).claimPermissions(s,r),await t.resync(s)}i&&await async function(e,t,n){await e.build().withHost(Ko.p1).withMethod("POST").withPath(`/shared?playlistId=${t}&sharedEntityUri=${n}`).withEndpointIdentifier("/shared").withoutMarket().withResponseType("text").send()}(Qo.n.getInstance(),s,i)}var TA=o(333);function RA(e){return function(t){var n=t.dispatch,a=t.getState;return function(t){return function(r){return"function"==typeof r?r(n,a,e):t(r)}}}}var PA=RA();PA.withExtraArgument=RA;const MA=PA;var OA=o(87256),DA=o(31829),HA=o(21810);const zA=(e,t,n)=>a=>r=>async i=>{const s=r(i);switch(i.type){case Du.QN.ADS_ENABLED:{const r={create:e=>{a.dispatch((0,DA.PS)(e))},canShow:()=>{const e=n.getState();return!("/"===t.location.pathname)&&!(0,Hc.A3)(e)&&!(0,HA.Qv)(e)},isActive:()=>a.getState().ads.billboard.isOpen,minimize:()=>{a.dispatch((0,DA.lb)())},destroy:()=>(a.dispatch((0,DA.c3)()),Promise.resolve())};await e.enable(r);break}case Du.QN.ADS_DISABLED:await e.disable();break;case DA.QN.MINIMIZE_BILLBOARD_AD_VIEW:if(a.getState().ads.sponsoredPlaylist.isVisible)return a.dispatch((0,DA.c3)()),Promise.resolve();e.minimize();break;case DA.QN.CLICK_BILLBOARD_AD_VIEW:e.adClick();break;case DA.QN.IMAGE_LOADED_BILLBOARD_AD_VIEW:e.onRender();break;case DA.QN.ERROR_BILLBOARD_AD_VIEW:e.onError();break;case DA.QN.FINISH_BILLBOARD_AD_VIEW:e.onFinish()}return s};var VA=o(33416);const BA=e=>e instanceof Error?e:"string"==typeof e?new Error(e):new Error("An unknown error occurred"),UA=e=>t=>n=>async a=>{const{embeddedAdManager:r,adEventLogger:i,embeddedAdErrorLogger:s}=e,o=n(a),{canShowAd:c,ad:l,isOpen:u}=t.getState()?.ads.embeddedAd??{},d=!!l;switch(a.type){case Du.QN.ADS_ENABLED:await r.enable((e=>t.dispatch((0,VA.SL)(e))),(e=>(e=>{i.log("errored",l,{event_reason:`Error enabling slot ${e.message}`}),s.log("error",l,{error_message:`Error enabling slot ${e.message}`})})(BA(e))));break;case Du.QN.ADS_DISABLED:r.disable();break;case VA.bp.TRY_FETCH:if(!d&&c)try{await r.fetchSlot()}catch(e){t.dispatch((0,VA.T)(`Failed to fetch: ${BA(e).message}`))}break;case VA.bp.FETCH_SUCCESS:c&&t.dispatch((0,VA.Nz)());break;case VA.bp.CAN_SHOW_EMBEDDED_AD_VIEW:!0!==a.payload||u||t.dispatch((0,VA.Nz)());break;case VA.bp.TRIGGER_SLOT:if(d&&c)try{await r.triggerSlot()}catch(e){t.dispatch((0,VA.T)(`Failed to trigger slot: ${BA(e).message}`))}break;case VA.bp.SLOT_INTERACTION_ERROR:i.log("errored",l,{event_reason:a.payload.errorMessage}),s.log("error",l,{error_message:a.payload.errorMessage})}return o};var FA=o(72753);function qA(e){return t=>t=>async n=>{const a=t(n);switch(n.type){case Du.QN.ADS_ENABLED:break;case Du.QN.ADS_DISABLED:case FA.Ws:e.disableLeaderboard();break;case FA.KK:e.setLeaderboardElement(n.element),e.enableLeaderboard();break;case FA.a4:e.onNavigationChanged()}return a}}const WA="SET_AUDIO_AD_INFO";var GA=o(52011),$A=o(96885);function QA(e,t){return t?{enableAudioIfNotAlreadyEnabled(){if(!t.getEnabled())return t.enable((t=>e.dispatch({type:WA,info:t})))},disableAudioIfNotAlreadyDisabled(){if(t.getEnabled())return t.disable()}}:{}}function KA(e,t,n){return t.getEvents().addListener($A._.VOLUME,(({data:{volume:e,isLocal:t}})=>{t&&GA.adsCoreConnector.logAudioVolume(e)})),t=>{const{enableAudioIfNotAlreadyEnabled:a,disableAudioIfNotAlreadyDisabled:r}=QA(t,e);return t=>async i=>{const s=t(i);switch(i.type){case Du.QN.ADS_ENABLED:a?.();break;case Du.QN.ADS_DISABLED:r?.();break;case Du.QN.LOG_NOW_PLAYING_AD_CLICK:(0,HA.qc)(n.getState())&&e.logClick(i.eventReason,i.eventSource)}return s}}}var ZA=o(93597),YA=o(96602),JA=o(19253);const XA=e=>t=>n=>async a=>{const r=n(a),i=t.getState();switch(a.type){case YA.QN.HPTO_CONTAINER_LOAD:e.subscribeToPreview((e=>{t.dispatch((0,YA.DZ)(e)),t.dispatch((0,YA.zi)())})),e.onRefresh((async()=>{const n=await e.fetchTemplate();t.dispatch((0,YA.bK)(n)),t.dispatch((0,YA.Yg)())}));break;case ZA.R:t.dispatch((0,YA.bK)(a.template)),t.dispatch((0,YA.Yg)());break;case YA.QN.HPTO_CONTAINER_MOUNTED:{const n=await e.fetchTemplate();t.dispatch((0,YA.bK)(n)),t.dispatch((0,YA.Yg)());break}case YA.QN.FETCH_CREATIVE:if(i.ads.hpto.preview)break;if(i.ads.hpto.creativeFetchingState===JA.C.FETCHING)break;if(!i.ads.hpto.template)break;if(!i.ads.hpto.hptoContainerMounted)break;if(i.ads.root.isPremium&&i.ads.root.isHptoHidden)break;try{t.dispatch((0,YA.QL)()),await e.fetchCreative(i.ads.hpto.template).then((e=>{t.dispatch((0,YA.Q5)(e))}))}catch(e){console.error(e),t.dispatch((0,YA.Fi)())}break;case YA.t3:e.viewRendered(a.element);break;case YA.QN.HPTO_COMPONENT_NEW_AD_RENDERED:e.logViewed();break;case YA.QN.HPTO_COMPONENT_UNMOUNTED:e.viewDestroyed();break;case Du.QN.ADS_POST_HIDE_HPTO:e.logEvent("event_collapsed");break;case YA.Q6:e.logEvent(a.event,a.context);break;case YA.$4:e.logErrorEvent(a.error);break;case YA.QN.DEBUG_FORCE_REFRESH_HPTO:{const n=await e.fetchTemplate();t.dispatch((0,YA.bK)(n)),t.dispatch((0,YA.Yg)());break}}return r};var eE=o(57674);function tE(e){return t=>n=>async a=>{const r=n(a);switch(a.type){case Du.QN.ADS_ENABLED:e.enable((e=>{t.dispatch((0,eE.Lc)(e))}));break;case Du.QN.ADS_DISABLED:e.disable();break;case eE.Uy:try{const n=await e.requestSponsoredPlaylists();t.dispatch((0,eE.lj)(n))}catch(e){t.dispatch((0,eE.Ei)(e instanceof Error?e:new Error("Unknown error object")))}break;case eE.nk:try{const n=a.playlistUri,r=await e.requestSponsoredPlaylistAd(n);t.dispatch((0,eE.DD)(n,r))}catch(e){t.dispatch((0,eE.wz)(e instanceof Error?e:new Error("Unknown error object")))}break;case eE.zB:e.logEvent(a.message);break;case eE.zc:t.dispatch((0,eE.Lc)(null))}return r}}function nE(e){if(!e)return;const t=e.getElementsByTagName("video"),n=function(e,t){for(const n of e)if(t(n))return n}(t,(e=>"none"!==getComputedStyle(e).display));if(n)return n;const a=t?.[0];return a?(r=a,"none"===getComputedStyle(r).display&&(r.style.display="inline"),a):void 0;var r}const aE=(e,t)=>{if(!t)return;if(!(null===e?.ads?.vto?.info||t.isPaused)){const e=document.getElementsByClassName("VideoPlayer__container")[0];nE(e)?.play()}};var rE=o(63359),iE=o(36504);const sE=(e,t)=>{e.getState().ads.vto.isMinimized||(e.dispatch((0,Bg.Oc)()),t.logEvent(rE.ee.COLLAPSED))};function oE(e,t,n){return n?{enableVideoTakeoverIfNotAlreadyEnabled(){if(n.getEnabled())return;const a={onCreated(){e.dispatch((0,Bg.Pu)())},onInfo(t){e.dispatch((0,Bg.gW)(t))},onFirstReady(){aE(e.getState(),t.getState())},onStarted(){},onEnded:()=>{e.dispatch((0,Bg.gW)(null)),e.dispatch((0,Bg.W_)()),e.dispatch((0,iE.R)(H.Kz.none))}};return n.enable(a)},disableVideoTakeoverIfNotAlreadyDisabled(){if(n.getEnabled())return n.disable()}}:{}}const cE=(e,t)=>n=>{const{enableVideoTakeoverIfNotAlreadyEnabled:a,disableVideoTakeoverIfNotAlreadyDisabled:r}=oE(n,t,e);return i=>async s=>{const o=i(s);switch(s.type){case Du.QN.ADS_ENABLED:await(a?.());break;case Du.QN.ADS_DISABLED:await(r?.());break;case Bg.QN.VTO_LOG_EVENT:e.logEvent(s.event,s.eventReason,s.eventSource),s.event===rE.ee.CLICKED&&sE(n,e);break;case Du.QN.LOG_NOW_PLAYING_AD_CLICK:(0,HA.Tv)(t.getState())&&(e.logEvent(rE.ee.CLICKED,s.eventReason,s.eventSource),sE(n,e));break;case Bg.QN.VTO_NAVIGATION_CHANGE:sE(n,e);break;case Bg.QN.MAXIMIZE_VIDEO_AD_VIEW:case Bg.QN.MINIMIZE_VIDEO_AD_VIEW:aE(n.getState(),t.getState())}return o}},lE=["/","/premium","/site/:id/:path?","/presents/:id/:path?"],uE=e=>0===e.length?e=>!1:t=>e.some((e=>(0,Z.B6)(e,t))),dE="ui.hide_hpto";class hE{constructor(e,t){this.adsCoreConnector=e,this.prefs=t}requestPreviewAd(e){return this.adsCoreConnector.getPreviewAd(e)}subscribeToAdsProductState(e){return this.adsCoreConnector.subscribeToProductState("ads",e)}subscribeToPremiumState(e){return this.adsCoreConnector.subscribeToProductState("catalogue",e)}fakeSubscribe(){}subscribeToHpto(e){const t=dE;return this.prefs.sub({key:t},(({entries:n})=>e({[t]:!!n[t].bool})))}async hideHpto(){const e=dE;await this.prefs.set({entries:{[e]:{bool:!0}}})}}class pE{requestPreviewAd(){return Promise.resolve({})}subscribeToAdsProductState(){return{cancel:()=>{}}}subscribeToPremiumState(){return{cancel:()=>{}}}subscribeToHpto(){return{cancel:()=>{}}}async hideHpto(){}fakeSubscribe(e,t){e(t)}}const mE={subscription:void 0};function fE(e){const t=e?.item??void 0;return(0,M.p)(t)?"audio"===t.mediaType||"mixed"===t.mediaType:!!(0,B.N)(t)&&t.isPodcastAd}const gE=({store:e,adManagers:t,isDesktop:n,playerAPI:a})=>({adsEnabled:r=e.getState().ads.root.adsEnabled,playerState:i=a.getState(),isPodcastContent:s=fE(i)}={})=>{r!==e.getState().ads.root.adsEnabled&&e.dispatch((r?Du.s3:Du.Nb)());const{enableVideoTakeoverIfNotAlreadyEnabled:o,disableVideoTakeoverIfNotAlreadyDisabled:c}=oE(e,a,t?.vto.manager),{enableAudioIfNotAlreadyEnabled:l,disableAudioIfNotAlreadyDisabled:u}=QA(e,t?.audio);return Promise.all(n&&(s||r)?[o?.(),l?.()]:[c?.(),u?.()])};var bE=o(63396),vE=o(53989);function yE(e,t){e&&t.dispatch((0,VA.Xo)())}const xE=({history:e,isBlockedPath:t,rootApi:n,adManagers:a,isDesktop:r,playerAPI:i})=>s=>{const{handleAdsProductState:o,activateAdsProductStateSubscription:c}=function({rootApi:e,store:t,adManagers:n,isDesktop:a,playerAPI:r,toggleAdManagers:i=gE({store:t,adManagers:n,isDesktop:a,playerAPI:r})}){async function s({playerState:e=r.getState(),isPodcastContent:t=fE(e)}={}){return await i({playerState:e,isPodcastContent:t}),function(...[{ads:n}]){return i({adsEnabled:"1"===n,playerState:e,isPodcastContent:t})}}let o=fE(r.getState());return{handleAdsProductState:s,activateAdsProductStateSubscription:async function(t){const n=fE(t);return null===t||o!==n?(o=n,mE.subscription?.cancel(),mE.subscription=e.subscribeToAdsProductState(await s({playerState:t,isPodcastContent:n}))):mE.subscription}}}({rootApi:n,store:s,adManagers:a,isDesktop:r,playerAPI:i});return i.getEvents().addListener(z.gd.UPDATE,(async({data:e})=>{await c(e)})),a=>async r=>{switch(r.type){case vE.xM:await c(null);break;case bE.O:n.fakeSubscribe(await o(),r.data)}const l=a(r),u=s.getState();let d=!1;if(u?.session?.productState&&(d="1"===u?.session?.productState["on-demand-trial-in-progress"]),!u.ads.root.adsEnabled)return l;const h=u.platform.isDesktop,p=h&&u.ads.billboard?.isOpen,m=u.ads.sponsoredPlaylist.isVisible,f=u.ads.embeddedAd?.isOpen,g=u.ads.leaderboard.isEnabled,b=(0,D.c)(u)===H.Kz.cinemaLegacy,v=u.ui.videoPlayer.uiFlags.npv;switch(t(e.location.pathname)||(0,HA.Qv)(i.getState())?(p&&s.dispatch((0,DA.ZQ)()),g&&s.dispatch((0,FA.Vp)())):!h||g||p||m||b||f||d||s.dispatch((0,FA.yU)()),!h||p||m||b||u.ads.embeddedAd?.canShowAd||!v||s.dispatch((0,VA.qx)(!0)),v||yE(Boolean(u.ads.embeddedAd?.isOpen),s),r.type){case H.kX.SET_VIDEO_UI_FLAG:{const{key:e,value:t}=r;e===H.nP.cinemaLegacy&&t&&s.dispatch((0,FA.Vp)()),e===H.nP.cinema&&(t&&u.ads.embeddedAd?.canShowAd?s.dispatch((0,VA.qx)(!1)):t||u.ads.embeddedAd?.canShowAd||s.dispatch((0,VA.qx)(!0))),e===H.nP.npv&&(t&&!u.ads.embeddedAd?.canShowAd?s.dispatch((0,VA.qx)(!0)):!t&&u.ads.embeddedAd?.canShowAd&&s.dispatch((0,VA.qx)(!1)));break}case DA.QN.SHOW_BILLBOARD_AD_VIEW:s.dispatch((0,FA.Vp)()),s.dispatch((0,VA.qx)(!1)),yE(Boolean(u.ads.embeddedAd?.isOpen),s);break;case DA.QN.FINISH_BILLBOARD_AD_VIEW:m||u.ads.embeddedAd?.canShowAd||s.dispatch((0,VA.qx)(!0));break;case eE.Xv:s.dispatch((0,FA.Vp)()),s.dispatch((0,DA.ZQ)()),u.ads.embeddedAd?.canShowAd&&(s.dispatch((0,VA.qx)(!1)),yE(Boolean(u.ads.embeddedAd?.isOpen),s));break;case VA.bp.SHOW_EMBEDDED_AD_VIEW:s.dispatch((0,FA.Vp)());break;case YA.QN.HPTO_PREVIEW_HOME_NAVIGATION:"/"===e.location.pathname||e.push("/");break}return l}};var wE=o(30546);let _E,AE;const EE=({rootApi:e})=>t=>n=>async a=>{const r=n(a);switch(a.type){case vE.xM:(0,Hb.My)()===za.m.Desktop&&(0,wE.z)({_debugForceRefreshHpto:()=>t.dispatch((0,YA.BH)())}),_E||(_E=e.subscribeToPremiumState((({catalogue:e})=>{const n="premium"===e;t.dispatch((0,Du.CW)(n))}))),AE||(AE=e.subscribeToHpto((e=>t.dispatch((0,Du.yx)(e["ui.hide_hpto"])))));break;case Du.QN.ADS_POST_HIDE_HPTO:e.hideHpto();break;case bE.O:e.fakeSubscribe((async({catalogue:e})=>{const n="premium"===e;t.dispatch((0,Du.CW)(n)),t.dispatch((0,Du.yx)(!1))}),a.data);break;case Du.QN.TRIGGER_PREVIEW_AD:e.requestPreviewAd(a.adUriHexId)}return r};var jE=o(31468);const SE=(e,t,n,a,r,i)=>{const s=e?new hE(GA.adsCoreConnector,(0,OA.dn)((0,jE.X)())):new pE,o=e?lE:[],{root:c=EE,sponsoredPlaylist:l=tE,orchestrator:u=xE,leaderboard:d=qA,billboard:h=zA,hpto:p=XA,audio:m=KA,videoTakeover:f=cE,embeddedAd:g=UA}=i??{};return[c({rootApi:s}),l(n.sponsoredPlaylist),u({history:t,isBlockedPath:uE(o),rootApi:s,adManagers:n,isDesktop:e,playerAPI:r}),...e?[d(n.leaderboard),h(n.billboard,t,r),p(n.hpto),m(n.audio,a,r),f(n.vto.manager,r),...n.embeddedAd?[g(n.embeddedAd)]:[]]:[]]},CE={isOpen:!1,imageLoaded:!1,isMinimized:!1,data:{}},IE=(e=CE,t)=>{switch(t.type){case DA.QN.SHOW_BILLBOARD_AD_VIEW:return{...e,isOpen:!0,data:t?.data};case DA.QN.HIDE_BILLBOARD_AD_VIEW:return{...e,isOpen:!1,isMinimized:!1,imageLoaded:!1};case DA.QN.IMAGE_LOADED_BILLBOARD_AD_VIEW:return{...e,imageLoaded:!0};case DA.QN.MANAGER_MINIMIZE_BILLBOARD_AD_VIEW:case DA.QN.MINIMIZE_BILLBOARD_AD_VIEW:return{...e,isMinimized:!0};default:return e}},NE={isOpen:!1,ad:void 0,errorMessage:void 0,canShowAd:!1,lastTimeInView:void 0},kE=(e=NE,t)=>{switch(t.type){case VA.bp.CAN_SHOW_EMBEDDED_AD_VIEW:return{...e,canShowAd:t?.payload.canShowAd};case VA.bp.SHOW_EMBEDDED_AD_VIEW:return{...e,isOpen:!0};case VA.bp.DISCARD_EMBEDDED_AD_VIEW:return{...e,isOpen:!1,ad:void 0,lastTimeInView:Date.now()};case VA.bp.FETCH_SUCCESS:return{...e,ad:t?.payload.ad};case VA.bp.CLEAR_STORE:return NE;case VA.bp.SLOT_INTERACTION_ERROR:return{...e,errorMessage:t?.payload.errorMessage,ad:void 0};default:return e}},LE={isEnabled:!1};function TE(e=LE,t){switch(t.type){case FA.TN:return{...e,isEnabled:!0};case FA.Ws:return{...e,isEnabled:!1};default:return e}}const RE={info:null},PE=(e=RE,t)=>t.type===WA?{...e,info:t.info}:e,ME={hptoEnabled:!1,template:null,creative:null,preview:null,creativeFetchingState:JA.C.NOT_FETCHING,hptoContainerMounted:!1,hptoIsStable:!0},OE=(e=ME,t)=>{switch(t.type){case Du.QN.ADS_ENABLED:return{...e,hptoEnabled:!0};case ZA.R:case YA.QN.HPTO_CONTAINER_MOUNTED:return{...e,hptoContainerMounted:!0};case YA.QN.HPTO_COMPONENT_UNMOUNTED:return{...e,preview:null,creativeFetchingState:JA.C.NOT_FETCHING,creative:t.data.clearCreative?null:e.creative};case YA.QN.HPTO_CONTAINER_UNMOUNTED:return{...e,hptoContainerMounted:!1};case YA.QN.GOT_TEMPLATE:return{...e,template:t.data};case YA.QN.SET_HPTO_PREVIEW:return{...e,hptoIsStable:!0,preview:t.data};case YA.QN.GOT_CREATIVE:return{...e,creative:t.data,creativeFetchingState:JA.C.FETCHED,hptoIsStable:!0};case YA.QN.FETCHING_CREATIVE:return{...e,creativeFetchingState:JA.C.FETCHING,creative:null};case YA.QN.CREATIVE_FETCH_FAILED:return{...e,creativeFetchingState:JA.C.FAILED,hptoIsStable:!1};default:return e}},DE={sponsoredPlaylist:new Map,isVisible:!1,previewAd:null};function HE(e=DE,t){switch(t.type){case eE.Um:return function(e,t){return{...e,sponsoredPlaylist:e.sponsoredPlaylist.set("allSponsorships",t.sponsorships)}}(e,t);case eE.Rl:return function(e,t){return{...e,sponsoredPlaylist:e.sponsoredPlaylist.set(t.playlistUri,t.ad)}}(e,t);case eE.Xv:return{...e,isVisible:!0};case eE.zc:return{...e,isVisible:!1};case eE.Uh:return{...e,previewAd:t.previewAd};default:return e}}const zE={isMinimized:!1,isHidden:!0,info:null},VE=(e=zE,t)=>{switch(t.type){case Bg.QN.MINIMIZE_VIDEO_AD_VIEW:return{...e,isMinimized:!0};case Bg.QN.MAXIMIZE_VIDEO_AD_VIEW:return{...e,isMinimized:!1};case Bg.QN.HIDE_VIDEO_AD_VIEW:return{...e,isHidden:!0};case Bg.QN.SHOW_VIDEO_AD_VIEW:return{...e,isHidden:!1};case Bg.QN.VTO_SET_INFO:return{...e,info:t.info};default:return e}};var BE=o(5545),UE=o(61649);const FE=(0,BE.vy)({adId:null,liked:!1,disliked:!1,feedback:null},(e=>{e.addCase(UE.CJ.LIKE_AD,((e,t)=>{UE.F$.match(t)&&(e.adId=t.payload.adId,e.liked=!0,e.disliked=!1,t.payload.reason&&(e.feedback=t.payload.reason))})).addCase(UE.CJ.DISLIKE_AD,((e,t)=>{UE.NI.match(t)&&(e.adId=t.payload.adId,e.disliked=!0,e.liked=!1,t.payload.reason&&(e.feedback=t.payload.reason))})).addCase(UE.CJ.CANCEL_LIKE_AD,((e,t)=>{UE.D$.match(t)&&(e.liked=!1,e.feedback=null)})).addCase(UE.CJ.CANCEL_DISLIKE_AD,((e,t)=>{UE.vA.match(t)&&(e.disliked=!1,e.feedback=null)}))})),qE={adsEnabled:!1,isPremium:!1,isHptoHidden:!0},WE=(e=qE,t)=>{switch(t.type){case Du.QN.ADS_ENABLED:return{...e,adsEnabled:!0};case Du.QN.ADS_DISABLED:return{...e,adsEnabled:!1};case Du.QN.ADS_PREMIUM:return{...e,isPremium:!!t.isPremium};case Du.QN.ADS_HPTO_HIDDEN:return{...e,isHptoHidden:!!t.isHptoHidden};default:return e}};var GE=o(35124);const $E={isOpen:!1},QE=(e=$E,t)=>{switch(t.type){case GE.QN.SHOW_REPORT_ISSUE_MODAL:return{...e,isOpen:!0};case GE.QN.HIDE_REPORT_ISSUE_MODAL:return{...e,isOpen:!1};default:return e}};var KE=o(67735);const ZE={env:KE.x,message:null,showPreviewTool:!1},YE=(e=ZE,t)=>{switch(t.type){case KE.Q.SHOW_IN_APP_MESSAGE:return{...e,message:t.message};case KE.Q.DISMISS_IN_APP_MESSAGE:return{...e,message:null};case KE.Q.SET_IN_APP_MESSAGING_ENV:return{...e,env:t.env};case KE.Q.SHOW_PREVIEW_TOOL:return{...e,showPreviewTool:t.show};default:return e}};var JE=o(36866);const XE=e=>t=>n=>async a=>{const r=n(a);if(a.type===JE.QN.GET_AGE_RESTRICTION_MODAL)try{const n=await e.getDialog(a.uri);t.dispatch((0,JE.eK)(n))}catch{}return r};function ej(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function tj(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function nj(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function aj(e,t){tj(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function rj(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function ij(e,t){return e<<32-t|e>>>t}function sj(e,t){return e<<t|e>>>32-t>>>0}const oj=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function cj(e){for(let n=0;n<e.length;n++)e[n]=(t=e[n])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function lj(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),tj(e),e}class uj{clone(){return this._cloneInto()}}function dj(e){const t=t=>e().update(lj(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}class hj extends uj{update(e){return nj(this),this.iHash.update(e),this}digestInto(e){nj(this),tj(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:a,destroyed:r,blockLen:i,outputLen:s}=this;return e.finished=a,e.destroyed=r,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");ej(e.outputLen),ej(e.blockLen)}(e);const n=lj(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,r=new Uint8Array(a);r.set(n.length>a?e.create().update(n).digest():n);for(let e=0;e<r.length;e++)r[e]^=54;this.iHash.update(r),this.oHash=e.create();for(let e=0;e<r.length;e++)r[e]^=106;this.oHash.update(r),r.fill(0)}}const pj=(e,t,n)=>new hj(e,t).update(n).digest();function mj(e,t,n){return e&t^~e&n}function fj(e,t,n){return e&t^e&n^t&n}pj.create=(e,t)=>new hj(e,t);class gj extends uj{update(e){nj(this);const{view:t,buffer:n,blockLen:a}=this,r=(e=lj(e)).length;for(let i=0;i<r;){const s=Math.min(a-this.pos,r-i);if(s!==a)n.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===a&&(this.process(t,0),this.pos=0);else{const t=rj(e);for(;a<=r-i;i+=a)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){nj(this),aj(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:a,isLE:r}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>a-i&&(this.process(n,0),i=0);for(let e=i;e<a;e++)t[e]=0;!function(e,t,n,a){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,a);const r=BigInt(32),i=BigInt(4294967295),s=Number(n>>r&i),o=Number(n&i),c=a?4:0,l=a?0:4;e.setUint32(t+c,s,a),e.setUint32(t+l,o,a)}(n,a-8,BigInt(8*this.length),r),this.process(n,0);const s=rj(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,l[e],r)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:a,finished:r,destroyed:i,pos:s}=this;return e.length=a,e.pos=s,e.finished=r,e.destroyed=i,a%t&&e.buffer.set(n),e}constructor(e,t,n,a){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=rj(this.buffer)}}const bj=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),vj=new Uint32Array(80);class yj extends gj{get(){const{A:e,B:t,C:n,D:a,E:r}=this;return[e,t,n,a,r]}set(e,t,n,a,r){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|a,this.E=0|r}process(e,t){for(let n=0;n<16;n++,t+=4)vj[n]=e.getUint32(t,!1);for(let e=16;e<80;e++)vj[e]=sj(vj[e-3]^vj[e-8]^vj[e-14]^vj[e-16],1);let{A:n,B:a,C:r,D:i,E:s}=this;for(let e=0;e<80;e++){let t,o;e<20?(t=mj(a,r,i),o=1518500249):e<40?(t=a^r^i,o=1859775393):e<60?(t=fj(a,r,i),o=2400959708):(t=a^r^i,o=3395469782);const c=sj(n,5)+t+s+o+vj[e]|0;s=i,i=r,r=sj(a,30),a=n,n=c}n=n+this.A|0,a=a+this.B|0,r=r+this.C|0,i=i+this.D|0,s=s+this.E|0,this.set(n,a,r,i,s)}roundClean(){vj.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}constructor(){super(64,20,8,!1),this.A=0|bj[0],this.B=0|bj[1],this.C=0|bj[2],this.D=0|bj[3],this.E=0|bj[4]}}const xj=dj((()=>new yj)),wj=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_j=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Aj=new Uint32Array(64);class Ej extends gj{get(){const{A:e,B:t,C:n,D:a,E:r,F:i,G:s,H:o}=this;return[e,t,n,a,r,i,s,o]}set(e,t,n,a,r,i,s,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|a,this.E=0|r,this.F=0|i,this.G=0|s,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)Aj[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Aj[e-15],n=Aj[e-2],a=ij(t,7)^ij(t,18)^t>>>3,r=ij(n,17)^ij(n,19)^n>>>10;Aj[e]=r+Aj[e-7]+a+Aj[e-16]|0}let{A:n,B:a,C:r,D:i,E:s,F:o,G:c,H:l}=this;for(let e=0;e<64;e++){const t=l+(ij(s,6)^ij(s,11)^ij(s,25))+mj(s,o,c)+wj[e]+Aj[e]|0,u=(ij(n,2)^ij(n,13)^ij(n,22))+fj(n,a,r)|0;l=c,c=o,o=s,s=i+t|0,i=r,r=a,a=n,n=t+u|0}n=n+this.A|0,a=a+this.B|0,r=r+this.C|0,i=i+this.D|0,s=s+this.E|0,o=o+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,a,r,i,s,o,c,l)}roundClean(){Aj.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}constructor(){super(64,32,8,!1),this.A=0|_j[0],this.B=0|_j[1],this.C=0|_j[2],this.D=0|_j[3],this.E=0|_j[4],this.F=0|_j[5],this.G=0|_j[6],this.H=0|_j[7]}}class jj extends Ej{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Sj=dj((()=>new Ej)),Cj=dj((()=>new jj)),Ij=BigInt(2**32-1),Nj=BigInt(32);function kj(e,t=!1){return t?{h:Number(e&Ij),l:Number(e>>Nj&Ij)}:{h:0|Number(e>>Nj&Ij),l:0|Number(e&Ij)}}function Lj(e,t=!1){let n=new Uint32Array(e.length),a=new Uint32Array(e.length);for(let r=0;r<e.length;r++){const{h:i,l:s}=kj(e[r],t);[n[r],a[r]]=[i,s]}return[n,a]}const Tj=(e,t,n)=>e<<n|t>>>32-n,Rj=(e,t,n)=>t<<n|e>>>32-n,Pj=(e,t,n)=>t<<n-32|e>>>64-n,Mj=(e,t,n)=>e<<n-32|t>>>64-n;const Oj={fromBig:kj,split:Lj,toBig:(e,t)=>BigInt(e>>>0)<<Nj|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:Tj,rotlSL:Rj,rotlBH:Pj,rotlBL:Mj,add:function(e,t,n,a){const r=(t>>>0)+(a>>>0);return{h:e+n+(r/2**32|0)|0,l:0|r}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,a)=>t+n+a+(e/2**32|0)|0,add4L:(e,t,n,a)=>(e>>>0)+(t>>>0)+(n>>>0)+(a>>>0),add4H:(e,t,n,a,r)=>t+n+a+r+(e/2**32|0)|0,add5H:(e,t,n,a,r,i)=>t+n+a+r+i+(e/2**32|0)|0,add5L:(e,t,n,a,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(a>>>0)+(r>>>0)},[Dj,Hj]=(()=>Oj.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),zj=new Uint32Array(80),Vj=new Uint32Array(80);class Bj extends gj{get(){const{Ah:e,Al:t,Bh:n,Bl:a,Ch:r,Cl:i,Dh:s,Dl:o,Eh:c,El:l,Fh:u,Fl:d,Gh:h,Gl:p,Hh:m,Hl:f}=this;return[e,t,n,a,r,i,s,o,c,l,u,d,h,p,m,f]}set(e,t,n,a,r,i,s,o,c,l,u,d,h,p,m,f){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|a,this.Ch=0|r,this.Cl=0|i,this.Dh=0|s,this.Dl=0|o,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|p,this.Hh=0|m,this.Hl=0|f}process(e,t){for(let n=0;n<16;n++,t+=4)zj[n]=e.getUint32(t),Vj[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|zj[e-15],n=0|Vj[e-15],a=Oj.rotrSH(t,n,1)^Oj.rotrSH(t,n,8)^Oj.shrSH(t,n,7),r=Oj.rotrSL(t,n,1)^Oj.rotrSL(t,n,8)^Oj.shrSL(t,n,7),i=0|zj[e-2],s=0|Vj[e-2],o=Oj.rotrSH(i,s,19)^Oj.rotrBH(i,s,61)^Oj.shrSH(i,s,6),c=Oj.rotrSL(i,s,19)^Oj.rotrBL(i,s,61)^Oj.shrSL(i,s,6),l=Oj.add4L(r,c,Vj[e-7],Vj[e-16]),u=Oj.add4H(l,a,o,zj[e-7],zj[e-16]);zj[e]=0|u,Vj[e]=0|l}let{Ah:n,Al:a,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:l,Eh:u,El:d,Fh:h,Fl:p,Gh:m,Gl:f,Hh:g,Hl:b}=this;for(let e=0;e<80;e++){const t=Oj.rotrSH(u,d,14)^Oj.rotrSH(u,d,18)^Oj.rotrBH(u,d,41),v=Oj.rotrSL(u,d,14)^Oj.rotrSL(u,d,18)^Oj.rotrBL(u,d,41),y=u&h^~u&m,x=d&p^~d&f,w=Oj.add5L(b,v,x,Hj[e],Vj[e]),_=Oj.add5H(w,g,t,y,Dj[e],zj[e]),A=0|w,E=Oj.rotrSH(n,a,28)^Oj.rotrBH(n,a,34)^Oj.rotrBH(n,a,39),j=Oj.rotrSL(n,a,28)^Oj.rotrBL(n,a,34)^Oj.rotrBL(n,a,39),S=n&r^n&s^r&s,C=a&i^a&o^i&o;g=0|m,b=0|f,m=0|h,f=0|p,h=0|u,p=0|d,({h:u,l:d}=Oj.add(0|c,0|l,0|_,0|A)),c=0|s,l=0|o,s=0|r,o=0|i,r=0|n,i=0|a;const I=Oj.add3L(A,j,C);n=Oj.add3H(I,_,E,S),a=0|I}({h:n,l:a}=Oj.add(0|this.Ah,0|this.Al,0|n,0|a)),({h:r,l:i}=Oj.add(0|this.Bh,0|this.Bl,0|r,0|i)),({h:s,l:o}=Oj.add(0|this.Ch,0|this.Cl,0|s,0|o)),({h:c,l}=Oj.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:d}=Oj.add(0|this.Eh,0|this.El,0|u,0|d)),({h,l:p}=Oj.add(0|this.Fh,0|this.Fl,0|h,0|p)),({h:m,l:f}=Oj.add(0|this.Gh,0|this.Gl,0|m,0|f)),({h:g,l:b}=Oj.add(0|this.Hh,0|this.Hl,0|g,0|b)),this.set(n,a,r,i,s,o,c,l,u,d,h,p,m,f,g,b)}roundClean(){zj.fill(0),Vj.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}}class Uj extends Bj{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Fj=dj((()=>new Bj)),qj=dj((()=>new Uj)),Wj=[],Gj=[],$j=[],Qj=BigInt(0),Kj=BigInt(1),Zj=BigInt(2),Yj=BigInt(7),Jj=BigInt(256),Xj=BigInt(113);for(let e=0,t=Kj,n=1,a=0;e<24;e++){[n,a]=[a,(2*n+3*a)%5],Wj.push(2*(5*a+n)),Gj.push((e+1)*(e+2)/2%64);let r=Qj;for(let e=0;e<7;e++)t=(t<<Kj^(t>>Yj)*Xj)%Jj,t&Zj&&(r^=Kj<<(Kj<<BigInt(e))-Kj);$j.push(r)}const[eS,tS]=Lj($j,!0),nS=(e,t,n)=>n>32?Pj(e,t,n):Tj(e,t,n),aS=(e,t,n)=>n>32?Mj(e,t,n):Rj(e,t,n);class rS extends uj{keccak(){oj||cj(this.state32),function(e,t=24){const n=new Uint32Array(10);for(let a=24-t;a<24;a++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const a=(t+8)%10,r=(t+2)%10,i=n[r],s=n[r+1],o=nS(i,s,1)^n[a],c=aS(i,s,1)^n[a+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],r=e[3];for(let n=0;n<24;n++){const a=Gj[n],i=nS(t,r,a),s=aS(t,r,a),o=Wj[n];t=e[o],r=e[o+1],e[o]=i,e[o+1]=s}for(let t=0;t<50;t+=10){for(let a=0;a<10;a++)n[a]=e[t+a];for(let a=0;a<10;a++)e[t+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=eS[a],e[1]^=tS[a]}n.fill(0)}(this.state32,this.rounds),oj||cj(this.state32),this.posOut=0,this.pos=0}update(e){nj(this);const{blockLen:t,state:n}=this,a=(e=lj(e)).length;for(let r=0;r<a;){const i=Math.min(t-this.pos,a-r);for(let t=0;t<i;t++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:a}=this;e[n]^=t,128&t&&n===a-1&&this.keccak(),e[a-1]^=128,this.keccak()}writeInto(e){nj(this,!1),tj(e),this.finish();const t=this.state,{blockLen:n}=this;for(let a=0,r=e.length;a<r;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,r-a);e.set(t.subarray(this.posOut,this.posOut+i),a),this.posOut+=i,a+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ej(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(aj(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:a,rounds:r,enableXOF:i}=this;return e||(e=new rS(t,n,a,i,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=n,e.outputLen=a,e.enableXOF=i,e.destroyed=this.destroyed,e}constructor(e,t,n,a=!1,r=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=a,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ej(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}}const iS=(e,t,n)=>dj((()=>new rS(t,e,n))),sS=iS(6,144,28),oS=iS(6,136,32),cS=iS(6,104,48),lS=iS(6,72,64),uS=(()=>{if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"__GLOBALTHIS__",{get(){return this},configurable:!0});try{if("undefined"!=typeof __GLOBALTHIS__)return __GLOBALTHIS__}finally{delete Object.prototype.__GLOBALTHIS__}return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0})(),dS={SHA1:xj,SHA224:Cj,SHA256:Sj,SHA384:qj,SHA512:Fj,"SHA3-224":sS,"SHA3-256":oS,"SHA3-384":cS,"SHA3-512":lS},hS=e=>{switch(!0){case/^(?:SHA-?1|SSL3-SHA1)$/i.test(e):return"SHA1";case/^SHA(?:2?-)?224$/i.test(e):return"SHA224";case/^SHA(?:2?-)?256$/i.test(e):return"SHA256";case/^SHA(?:2?-)?384$/i.test(e):return"SHA384";case/^SHA(?:2?-)?512$/i.test(e):return"SHA512";case/^SHA3-224$/i.test(e):return"SHA3-224";case/^SHA3-256$/i.test(e):return"SHA3-256";case/^SHA3-384$/i.test(e):return"SHA3-384";case/^SHA3-512$/i.test(e):return"SHA3-512";default:throw new TypeError(`Unknown hash algorithm: ${e}`)}},pS="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",mS=e=>{let t=(e=e.replace(/ /g,"")).length;for(;"="===e[t-1];)--t;e=(t<e.length?e.substring(0,t):e).toUpperCase();const n=new ArrayBuffer(5*e.length/8|0),a=new Uint8Array(n);let r=0,i=0,s=0;for(let t=0;t<e.length;t++){const n=pS.indexOf(e[t]);if(-1===n)throw new TypeError(`Invalid character found: ${e[t]}`);i=i<<5|n,r+=5,r>=8&&(r-=8,a[s++]=i>>>r)}return a},fS=e=>{let t=0,n=0,a="";for(let r=0;r<e.length;r++)for(n=n<<8|e[r],t+=8;t>=5;)a+=pS[n>>>t-5&31],t-=5;return t>0&&(a+=pS[n<<5-t&31]),a},gS=e=>{e=e.replace(/ /g,"");const t=new ArrayBuffer(e.length/2),n=new Uint8Array(t);for(let t=0;t<e.length;t+=2)n[t/2]=parseInt(e.substring(t,t+2),16);return n},bS=e=>{let t="";for(let n=0;n<e.length;n++){const a=e[n].toString(16);1===a.length&&(t+="0"),t+=a}return t.toUpperCase()},vS=e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=255&e.charCodeAt(t);return n},yS=e=>{let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},xS=uS.TextEncoder?new uS.TextEncoder:null,wS=uS.TextDecoder?new uS.TextDecoder:null,_S=e=>{if(!xS)throw new Error("Encoding API not available");return xS.encode(e)},AS=e=>{if(!wS)throw new Error("Encoding API not available");return wS.decode(e)};class ES{static fromLatin1(e){return new ES({buffer:vS(e).buffer})}static fromUTF8(e){return new ES({buffer:_S(e).buffer})}static fromBase32(e){return new ES({buffer:mS(e).buffer})}static fromHex(e){return new ES({buffer:gS(e).buffer})}get buffer(){return this.bytes.buffer}get latin1(){return Object.defineProperty(this,"latin1",{enumerable:!0,writable:!1,configurable:!1,value:yS(this.bytes)}),this.latin1}get utf8(){return Object.defineProperty(this,"utf8",{enumerable:!0,writable:!1,configurable:!1,value:AS(this.bytes)}),this.utf8}get base32(){return Object.defineProperty(this,"base32",{enumerable:!0,writable:!1,configurable:!1,value:fS(this.bytes)}),this.base32}get hex(){return Object.defineProperty(this,"hex",{enumerable:!0,writable:!1,configurable:!1,value:bS(this.bytes)}),this.hex}constructor({buffer:e,size:t=20}={}){this.bytes=void 0===e?(e=>{if(uS.crypto?.getRandomValues)return uS.crypto.getRandomValues(new Uint8Array(e));throw new Error("Cryptography API not available")})(t):new Uint8Array(e),Object.defineProperty(this,"bytes",{enumerable:!0,writable:!1,configurable:!1,value:this.bytes})}}class jS{static get defaults(){return{issuer:"",label:"OTPAuth",issuerInLabel:!0,algorithm:"SHA1",digits:6,counter:0,window:1}}static generate({secret:e,algorithm:t=jS.defaults.algorithm,digits:n=jS.defaults.digits,counter:a=jS.defaults.counter}){const r=((e,t,n)=>{if(pj){const a=dS[e]??dS[hS(e)];return pj(a,t,n)}throw new Error("Missing HMAC function")})(t,e.bytes,(e=>{const t=new ArrayBuffer(8),n=new Uint8Array(t);let a=e;for(let e=7;e>=0&&0!==a;e--)n[e]=255&a,a-=n[e],a/=256;return n})(a)),i=15&r[r.byteLength-1];return(((127&r[i])<<24|(255&r[i+1])<<16|(255&r[i+2])<<8|255&r[i+3])%10**n).toString().padStart(n,"0")}generate({counter:e=this.counter++}={}){return jS.generate({secret:this.secret,algorithm:this.algorithm,digits:this.digits,counter:e})}static validate({token:e,secret:t,algorithm:n,digits:a=jS.defaults.digits,counter:r=jS.defaults.counter,window:i=jS.defaults.window}){if(e.length!==a)return null;let s=null;const o=i=>{const o=jS.generate({secret:t,algorithm:n,digits:a,counter:i});((e,t)=>{{if(e.length!==t.length)throw new TypeError("Input strings must have the same length");let n=-1,a=0;for(;++n<e.length;)a|=e.charCodeAt(n)^t.charCodeAt(n);return 0===a}})(e,o)&&(s=i-r)};o(r);for(let e=1;e<=i&&null===s&&(o(r-e),null===s)&&(o(r+e),null===s);++e);return s}validate({token:e,counter:t=this.counter,window:n}){return jS.validate({token:e,secret:this.secret,algorithm:this.algorithm,digits:this.digits,counter:t,window:n})}toString(){const e=encodeURIComponent;return"otpauth://hotp/"+(this.issuer.length>0?this.issuerInLabel?`${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&`:`${e(this.label)}?issuer=${e(this.issuer)}&`:`${e(this.label)}?`)+`secret=${e(this.secret.base32)}&`+`algorithm=${e(this.algorithm)}&`+`digits=${e(this.digits)}&`+`counter=${e(this.counter)}`}constructor({issuer:e=jS.defaults.issuer,label:t=jS.defaults.label,issuerInLabel:n=jS.defaults.issuerInLabel,secret:a=new ES,algorithm:r=jS.defaults.algorithm,digits:i=jS.defaults.digits,counter:s=jS.defaults.counter}={}){this.issuer=e,this.label=t,this.issuerInLabel=n,this.secret="string"==typeof a?ES.fromBase32(a):a,this.algorithm=hS(r),this.digits=i,this.counter=s}}class SS{static get defaults(){return{issuer:"",label:"OTPAuth",issuerInLabel:!0,algorithm:"SHA1",digits:6,period:30,window:1}}static counter({period:e=SS.defaults.period,timestamp:t=Date.now()}={}){return Math.floor(t/1e3/e)}counter({timestamp:e=Date.now()}={}){return SS.counter({period:this.period,timestamp:e})}static remaining({period:e=SS.defaults.period,timestamp:t=Date.now()}={}){return 1e3*e-t%(1e3*e)}remaining({timestamp:e=Date.now()}={}){return SS.remaining({period:this.period,timestamp:e})}static generate({secret:e,algorithm:t,digits:n,period:a=SS.defaults.period,timestamp:r=Date.now()}){return jS.generate({secret:e,algorithm:t,digits:n,counter:SS.counter({period:a,timestamp:r})})}generate({timestamp:e=Date.now()}={}){return SS.generate({secret:this.secret,algorithm:this.algorithm,digits:this.digits,period:this.period,timestamp:e})}static validate({token:e,secret:t,algorithm:n,digits:a,period:r=SS.defaults.period,timestamp:i=Date.now(),window:s}){return jS.validate({token:e,secret:t,algorithm:n,digits:a,counter:SS.counter({period:r,timestamp:i}),window:s})}validate({token:e,timestamp:t,window:n}){return SS.validate({token:e,secret:this.secret,algorithm:this.algorithm,digits:this.digits,period:this.period,timestamp:t,window:n})}toString(){const e=encodeURIComponent;return"otpauth://totp/"+(this.issuer.length>0?this.issuerInLabel?`${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&`:`${e(this.label)}?issuer=${e(this.issuer)}&`:`${e(this.label)}?`)+`secret=${e(this.secret.base32)}&`+`algorithm=${e(this.algorithm)}&`+`digits=${e(this.digits)}&`+`period=${e(this.period)}`}constructor({issuer:e=SS.defaults.issuer,label:t=SS.defaults.label,issuerInLabel:n=SS.defaults.issuerInLabel,secret:a=new ES,algorithm:r=SS.defaults.algorithm,digits:i=SS.defaults.digits,period:s=SS.defaults.period}={}){this.issuer=e,this.label=t,this.issuerInLabel=n,this.secret="string"==typeof a?ES.fromBase32(a):a,this.algorithm=hS(r),this.digits=i,this.period=s}}var CS=o(84686).hp;const IS=function(e){const t=e.map(((e,t)=>e^t%33+9)),n=CS.from(t.join(""),"utf8").toString("hex");return ES.fromHex(n)}([12,56,76,33,88,44,88,33,78,78,11,66,22,22,55,69,54]);new SS({period:30,digits:6,algorithm:"SHA1",secret:IS});const NS=e=>t=>n=>{const a=t(n);switch(n.type){case vE.xM:Bt((()=>e.dispatch({type:vE.tQ})));break;case vE.tQ:(r=Qo.n.getInstance(),r.build().withHost(Ko.Go).withHostIdentifier("https://open.spotify.com").withPath("/logout").withoutMarket().withoutAuthorization().withEndpointIdentifier("/logout").send()).then((()=>{e.dispatch((0,Xs.oM)()),window.location.assign("/")}),((e,t=!1)=>n=>(console.error(n),e&&e(n),t?Promise.reject(n):Promise.resolve(void 0)))())}var r;return a};var kS=o(55569),LS=o.n(kS);var TS=o(20906),RS=o(55039);const PS="urn:x-cast:com.spotify.chromecast.secure.v1";let MS=!1;const OS=()=>window.cast?.framework.CastContext.getInstance(),DS=e=>LS()(e),HS=(e,t)=>{e.send({name:"CastTransfer",environments:["device","browser"],data:t})},zS=(e,t,n)=>{if(!window.cast){window.__onGCastApiAvailable=a=>{a&&!MS&&(((e,t,n)=>{const a=OS();a&&(a.setOptions({receiverApplicationId:"CC32E753",autoJoinPolicy:"page_scoped",androidReceiverCompatible:n}),e.dispatch(TS.dK(a.getCastState())),a.addEventListener(window.cast?.framework.CastContextEventType.CAST_STATE_CHANGED,(({castState:t})=>e.dispatch(TS.dK(t)))),a.addEventListener(window.cast?.framework.CastContextEventType.SESSION_STATE_CHANGED,(({sessionState:n,session:a})=>{if(n===window.cast?.framework.SessionState.SESSION_STARTING)HS(t,{step:"transfer_requested"});else if(n===window.cast?.framework.SessionState.SESSION_STARTED){let n=null;a?.getCastDevice()?.friendlyName&&(n=DS(a.getCastDevice().friendlyName)),e.dispatch(TS.$e(n)),HS(t,{step:"receiver_app_started"})}})))})(e,t,n),MS=!0)};const a=document.createElement("script");a.async=!0,a.src="//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.body.appendChild(a)}},VS=async(e,t,n,a)=>{const r=await t.request("https://spclient.wg.spotify.com/device-auth/v1/refresh",{method:"POST",authorize:!0,payload:JSON.stringify({clientId:"d7df0887fb71494ea994202cb473eae7",deviceId:e})});if(null===r.body)throw new Error("Invalid response from device-auth!");((e,t,n)=>{const a={tokenType:"accesstoken",blob:t.accessToken};e.sendMessage(PS,{type:"addUser",payload:a}),HS(n,{step:"message_from_sender"})})(n,JSON.parse(r.body),a)},BS=(e,t,n)=>{const a=OS().getCurrentSession();if(null===a)return;a.addMessageListener(PS,((r,i)=>{const s=JSON.parse(i);HS(n,{step:"message_from_receiver"});try{if("getInfoResponse"===s.type){const t=s.payload;VS(t.deviceID,e,a,n)}else if("addUserResponse"===s.type){const e=s.payload;t.dispatch((0,Ki.VR)(e.deviceId))}else if(s.type.endsWith("Error"))throw new Error(s.payload.status)}catch(e){console.error("Failed to transfer playback to Cast device!",e)}})),((e,t)=>{const n=e.getCastDevice(),a={remoteName:n.friendlyName,deviceID:DS(n.friendlyName),deviceAPI_isGroup:n.capabilities.includes(chrome?.cast?.Capability.MULTIZONE_GROUP)};e.sendMessage(PS,{type:"getInfo",payload:a}),HS(t,{step:"message_from_sender"})})(a,n)};function US(e,t,n){return a=>r=>i=>{switch(i.type){case vE.xM:zS(a,t,n);break;case TS.gK.TOGGLE_CAST:(()=>{const e=OS();e&&e.requestSession()})();break;case TS.gK.CAST_STATE_CHANGED:((e,t,n,{castState:a})=>{a===window.cast?.framework.CastState.CONNECTED&&BS(e,t,n)})(e,a,t,i);break;case Ki.gK.DEVICE_INFO_CHANGED:((e,t,{deviceInfo:n})=>{if(n&&n.is_active&&(0,RS.Mp)(n.type)){const a=OS()?.getCastState()===window.cast?.framework.CastState.CONNECTED,r=e.getState().playback?.connectingCastDeviceId;a&&n.id===r&&(HS(t,{step:"transfer_finished"}),e.dispatch(TS.iY()))}})(a,t,i)}return r(i)}}var FS=o(48370);var qS=o(31371),WS=o(98870),GS=o(39539);const $S=e=>t=>n=>async a=>{const r=n(a);switch(a.type){case qS.QN.CHECK_DUPLICATE_TRACKS:{const{playlistUri:n,uris:r,position:s={after:"end"}}=a;try{const{name:a}=await e.getMetadata(n),o=await e.getContents(n);let c=[...r];if((0,X._Tv)(r[0])){const e=(0,GS.lY)(Qo.n.getInstance()),{trackUris:t}=await(0,WS.s)(r[0],0,e);c=t}const l=o.items.map((e=>e?.uri)),{duplicates:u,newUris:d}=(i=l,c.reduce(((e,t)=>{const n=i.includes(t);return{duplicates:n?[...e.duplicates,t]:e.duplicates,newUris:n?e.newUris:[...e.newUris,t]}}),{duplicates:[],newUris:[]}));0===u.length?e.add(n,c,s):1===c.length?t.dispatch((0,qS.xM)({playlistName:a,playlistUri:n,uri:c[0],position:s})):t.dispatch((0,qS.xM)({playlistName:a,playlistUri:n,uris:c,newUris:d,position:s}))}catch(t){e.add(n,r,s),window.console.error(t)}break}}var i;return r},QS=(e,t=!0)=>n=>a=>r=>{const i=a(r),{type:s}=r;if(t&&s===js.g.LOG_INTERACTION){const{session:t}=n.getState(),{isAnonymous:a}=t,i=a?Ui(r.logData):Bi(r.logData);e.send(i)}return i},KS=()=>e=>t=>{const n=e(t);if(t.type===js.g.LOG_INTERACTION){const{logData:e}=t;(0,re.$)(e.action_type,e.action_intent,e.item_id)}return n};var ZS=o(66261),YS=o(41350),JS=o(1707);const XS="playback";let eC=null;var tC=o(44849);let nC=null,aC=!1;let rC,iC=[],sC=[];const oC=e=>{try{(0,tC.fE)({metric_type:YS.MetricTypes.COUNTER,what:"harmony-error",value:1,tags:{type:e}})}catch(e){}},cC=(e,t)=>(rC=function(){if(null===eC)throw new Error("Missing `instance`. Have you called `createHarmony` yet?");return eC}(),rC.on(ZS.bi.LOCAL_PLAYER_ENABLED,(()=>{const e=(()=>{try{const e=localStorage.getItem(XS);if(null===e)return null;const{volume:t}=JSON.parse(e);return t||null}catch(e){return null}})();null!==e&&rC.setVolume(e,"@local");try{Vx("playback_load_end");const e=Bx("playback_load_start","playback_load_end","time_to_playback_ready"),[{duration:t}={duration:void 0}]=e;t&&(0,tC.fE)({metric_type:YS.MetricTypes.TIMER,what:"playback-ready",value:YS.Time.fromMillis(t).asNanos()}).catch((()=>({})))}catch(e){}})),rC.on(ZS.bi.AUTHENTICATION_ERROR,(()=>{oC(ZS.bi.AUTHENTICATION_ERROR)})),rC.on(ZS.bi.UNRECOVERABLE_FAILURE,(({data:t})=>{const n=t.error.message||"";if(navigator.userAgent.indexOf("Edge")>-1)e.dispatch(Ki.tS()),(0,Nn.UD)(t.error),oC(Ki.gK.CDM_ERROR);else if(t.source===ZS.O4.PLAYBACK){const a=t.name||t.error?.name||t.error?.code||"unknown";e.dispatch(Ki.CZ(a,t.source,n))}oC(ZS.bi.UNRECOVERABLE_FAILURE)})),rC.on(ZS.bi.ERROR,(({data:t})=>{if(t.error.code===ZS.Hv.EME_LICENSE_REQUEST_WIDEVINE_ERROR&&e.dispatch(l.rN()),t.error.code===ZS.Hv.MEDIA_DECODING_ERROR&&!aC){const n="media_decoding_error",a=t.source,r=t.error.message||"";e.dispatch(Ki.CZ(n,a,r))}const n=t.name||t.error?.name||t.error?.code||"unknown";oC(n)})),rC.on(ZS.bi.PLAYER_INITIALIZATION_DONE,(()=>{t.triggerActions(),e.dispatch((0,JS.H2)())})),rC.on(ZS.bi.PLAYER_INITIALIZATION_FAILED,(({data:t})=>{if(!navigator.webdriver&&(oC(Ki.gK.CDM_ERROR),t.error)){if(t.error.message&&t.error.message.indexOf("0x80004005")>=0)return;e.dispatch(Ki.tS()),(0,Nn.UD)(t.error)}})),rC.on(ZS.bi.MAX_SUBSCRIPTIONS_REACHED,(({data:t})=>{e.dispatch(Ki.fj(t.source??"unknown")),oC(ZS.bi.MAX_SUBSCRIPTIONS_REACHED)})),rC.on(ZS.bi.PRODUCT_STATE_CHANGED,(()=>{})),rC.on(ZS.bi.STATE_CHANGED,(e=>{if(e.data.state&&e.data.state.context&&e.data.state.context.uri&&(e.data.state.context.uri=e.data.state.context.uri.replace(/:user:([^:]+):playlist:/g,":playlist:")),0===iC.length)try{Vx("playback_load_update"),iC=Bx("playback_load_start","playback_load_update","time_to_playback_fetched");const[{duration:e}={duration:void 0}]=iC;e&&(0,tC.fE)({metric_type:YS.MetricTypes.TIMER,what:"playback-fetched",value:YS.Time.fromMillis(e).asNanos()}).catch((()=>({})))}catch(e){}!e.data.state?.paused&&sC.length})),rC.on(ZS.bi.LAST_ACTIVE_DEVICE_INFO_CHANGED,(t=>{const n=t.data.deviceInfo;n&&e.dispatch(Ki.rD(n))})),rC.on(ZS.bi.PROGRESS,(()=>{aC=!0})),rC),lC=(e,t)=>{const n=e.getState(),{isAnonymous:a}=(0,co.Ht)(n);return a?null:cC(e,t)};var uC=o(81009),dC=o(16949),hC=o(74610);const pC="STORE_SEARCH",mC="SEARCH_HISTORY_CLEAR_DATA";var fC=o(37896);const gC=()=>e=>t=>{if(t.type===mC)localStorage.removeItem(fC.C);return e(t)},bC="REQUEST_SEO_EXPERIMENT_DATA",vC="SET_SEO_EXPERIMENT_DATA",yC="SET_SEO_EXPERIMENT_ERROR";const xC=()=>e=>t=>async n=>{const a=t(n);if(n.type===bC)try{const t=await(i=Qo.n.getInstance(),s=`/${(0,X.o_h)(n.uri).toURLPath()}`,i.build().withHost(Ko.Go).withHostIdentifier("https://open.spotify.com").withPath("/seo").withQueryParameters({entityURL:s}).withoutMarket().withoutAuthorization().withEndpointIdentifier("/seo").send());e.dispatch((r=t?.body,{type:vC,data:r}))}catch(t){e.dispatch({type:yC})}var r,i,s;return a},wC=e=>()=>t=>n=>{const a=t(n);if(n.type===vE.tQ)e(n);return a};function _C(e){return t=>n=>a=>{const r=n(a);switch(a.type){case vE.tQ:{e.finalFlush(),t.dispatch((0,Ki.MW)()),t.dispatch({type:mC});const n=document.getElementById("session");n&&n.remove();break}}return r}}const AC=()=>e=>t=>{const n=e(t);switch(t.type){case l.gK.ENTER_FULLSCREEN:document.documentElement.classList.add("fullscreen");break;case l.gK.LEAVE_FULLSCREEN:document.documentElement.classList.remove("fullscreen")}return n};var EC=o(59486);const jC={isOpen:!1},SC=(e=jC,t)=>{switch(t.type){case EC.QN.SHOW_ABOUT_RECS_MODAL:return{...e,isOpen:!0};case EC.QN.HIDE_ABOUT_RECS_MODAL:return{...e,isOpen:!1};default:return e}};var CC=o(8990);const IC={isOpen:!1},NC=(e=IC,t)=>{switch(t.type){case CC.QN.SHOW_ABOUT_SPOTIFY_MODAL:return{...e,isOpen:!0};case CC.QN.HIDE_ABOUT_SPOTIFY_MODAL:return{...e,isOpen:!1};default:return e}},kC={isOpen:!1,uri:"",dialog:void 0},LC=(e=kC,t)=>{switch(t.type){case JE.QN.SHOW_AGE_RESTRICTION_MODAL:return{...e,isOpen:!0,dialog:t.dialog};case JE.QN.GET_AGE_RESTRICTION_MODAL:return{...e,uri:t.uri};case JE.QN.HIDE_AGE_RESTRICTION_MODAL:return{...e,isOpen:!1};default:return e}},TC={isOpen:!1,playlistUri:void 0,uri:void 0,uris:void 0,position:void 0,playlistName:void 0,newUris:void 0},RC=(e=TC,t)=>{switch(t.type){case qS.QN.SHOW_DUPLICATE_TRACKS_DIALOG:return{...e,isOpen:!0,playlistUri:t.playlistUri,uri:t.uri,uris:t.uris,position:t.position,playlistName:t.playlistName,newUris:t.newUris};case qS.QN.HIDE_DUPLICATE_TRACKS_DIALOG:return{...e,isOpen:!1};default:return e}},PC={ads:!1},MC=(e,t)=>(t.type,e||PC);var OC=o(37358);const DC={isOpen:!1},HC=(e=DC,t)=>{switch(t.type){case OC.QN.SHOW_LICENSES_MODAL:return{...e,isOpen:!0};case OC.QN.HIDE_LICENSES_MODAL:return{...e,isOpen:!1};default:return e}},zC=e=>{const t=(0,Hb.My)();return{isBrowser:t===za.m.Web,isPWA:t===za.m.PWA,isDesktop:t===za.m.Desktop,shouldCalloutPWA:(0,Hb.wD)(),isDeveloperMode:e.isDeveloperMode,isVideoSupported:e.isVideoSupported,isWebPSupported:e.isWebPSupported}},VC=e=>(t=zC(e),n)=>n.type===s?zC(e):t;const BC={device:null,castState:o(77362).xP.NO_DEVICES_AVAILABLE,connectingCastDeviceId:null},UC=(e,t)=>{const n=t.deviceInfo;return n&&isNaN(n.volume)&&(n.volume=0),{...e,device:n}},FC=(e,t)=>({...e,castState:t.castState}),qC=(e,t)=>({...e,connectingCastDeviceId:t.deviceId}),WC=e=>({...e,connectingCastDeviceId:null}),GC=e=>(localStorage.removeItem(XS),{...e}),$C=(()=>{const e={[Ki.gK.DEVICE_INFO_CHANGED]:UC,[Ki.gK.PLAYBACK_CLEAR_DATA]:GC,[TS.gK.CAST_STATE_CHANGED]:FC,[TS.gK.SET_CONNECTING_CAST_DEVICE_ID]:qC,[TS.gK.RESET_CONNECTING_CAST_DEVICE_ID]:WC};return(t,n)=>{let a=null;return n.type in e&&(a=e[n.type](a||t,n)),a||t||BC}})(),QC="searchHistory",KC={contexts:(()=>{const e=localStorage.getItem(QC);return e?JSON.parse(e).filter((e=>"uri"in e)):[]})()},ZC=(e=KC,t)=>{switch(t.type){case pC:{const n=t.uri?((e,t,n,a)=>[{uri:e,name:t,image:n}].concat(a.filter((t=>t.uri!==e))).splice(0,4))(t.uri,t.name,t.image,e.contexts):e.contexts;try{localStorage.setItem(QC,JSON.stringify(n))}catch(e){}return{...e,contexts:n}}case mC:return localStorage.removeItem(QC),{...e,contexts:[]};default:return e}},YC={},JC=(e=YC,t)=>{switch(t.type){case bC:return{...e,uri:t.uri};case vC:return{...e,...t.data};default:return e}},XC={isAnonymous:!0,accessToken:"",accessTokenExpirationTimestampMs:0,tokenType:"",user:null,locale:av.h.en,productState:null,market:"",valid:!1,overrides:null};function eI(e=XC,t){switch(t.type){case bE.J:return{...e,user:t.data};case bE.O:return{...e,productState:t.data};case vE.ro:return{...e,accessToken:t.authData.accessToken,accessTokenExpirationTimestampMs:t.authData.accessTokenExpirationTimestampMs,tokenType:t.authData.tokenType,isAnonymous:t.authData.isAnonymous,valid:!0};case vE.Zz:return e.user?{...e,user:{...e.user,display_name:t.name}}:e;case vE.L0:return e.user?{...e,user:{...e.user,images:t.images}}:e;case vE.Vx:return{...e,overrides:{...e.overrides,country:t.country}};case vE.dD:return{...e,overrides:{...e.overrides,locale:t.locale}};default:return e}}const tI=e=>!(e.type===JS.l_.PLAY||e.type===JS.l_.PLAYING),nI=e=>!(e.type===JS.l_.PLAY||e.type===JS.l_.USER_INVESTMENT),aI=e=>t=>n=>a=>{const r=n(a);switch(a.type){case JS.Jf:{const{storeAction:t,actionIntent:n}=a;e.storeAction((e=>((e,t)=>{const{type:n}=t;switch(n){case JS.l_.PLAY:return[t];case JS.l_.PLAYING:return[...e.filter(tI),t];case JS.l_.USER_INVESTMENT:return[...e.filter(nI),t];default:return[t]}})(e,{storeAction:t,type:n})));break}case JS.f6:{const n=e.pullAction()||null;t.dispatch({type:"PLAY_AT_FIRST_TAP_HAD_DEFERRED_ACTIONS",had:!!n&&n.length>0}),n&&n.forEach((({storeAction:e})=>{t.dispatch(e)}));break}}return r},rI=TA.Zz,iI=(e,t)=>{const{session:n,features:a}=e,{actionStoreApi:r,adManagers:i,ageRestrictionApi:s,deferredAction:o,eventSender:c,followApi:u,history:d,libraryApi:h,offlineApi:p,platform:m,playbackApi:f,playerApi:g,playlistApi:b,rootlistApi:v,serviceWorkerMessenger:y,socialConnectApi:x,transport:w}=t,_=Ux(m),A=[];_?A.push((e=>()=>t=>n=>{const a=t(n);return n.type===vE.tQ&&e.finalFlush().finally(FS.r),a})(c)):(n?.isAnonymous||A.push((e=>t=>n=>a=>{const r=n(a),i=t.getState(),s=i.session;if(a.type in Ki.gK){const{hasOccurred:e,isOpen:n}=t.getState().ui.playbackNotSupportedErrorDialog;if(e&&!n)return t.dispatch(l.rN()),r}switch(a.type){case vE.xM:!nC&&s.accessToken&&(nC=lC(t,e),t.getState().features&&t.getState().features.mwp&&window.addEventListener("focus",(()=>{nC&&nC._controller&&!nC._controller._state?nC=lC(t,e):nC?.getCurrentState().then((n=>{n||(nC=lC(t,e))}))})));break;case Ki.gK.SET_ACTIVE_DEVICE:i.playback.device&&i.playback.device.id===a.id||nC?.transfer(a.id)}return r})(r)),A.push(NS),A.push(US(w,c,m.enableCastConnect)));const E="boolean"!=typeof a?.isInteractionLoggerEnabled||a.isInteractionLoggerEnabled;return[(0,Ji.oU)(g,h,v,u,r),(S=p,e=>(S.getEvents().addListener(dC.I.ERROR,(t=>{t.data.code===hC.O4.DEVICE_LIMIT_REACHED&&e.dispatch((0,l.j4)())})),e=>async t=>{e(t)})),(j=d.push,e=>t=>n=>{const{pathname:a,search:r,hash:i}=window.location,{dispatch:s}=e,o=e.getState(),c=new RegExp(ne),{OPEN_SIGNUP_PROMPT_DIALOG:u,CLOSE_SIGNUP_PROMPT_DIALOG:d,UPDATE_UI_HISTORY_STATE:h}=l.gK;switch(n.type){case u:j({pathname:a,search:r,state:{},hash:ne});break;case d:j({pathname:a,search:r,state:{},hash:""});break;case h:(0,te.GP)(o)&&!c.test(i)&&s((0,l.BU)())}return t(n)}),aI(o),...A,...SE(_,d,i,f,g),wC(y),XE(s),$S(b),_C(c),AC,(0,uC.f0)(d,g,x),gC,QS(c,E),KS,xC(),MA];var j,S};function sI(e,t){const{platform:n}=t,a=iI(e,t);return(0,TA.y$)((e=>{return(0,TA.HY)({playback:$C,session:eI,ui:(0,_i.JQ)(e),searchHistory:ZC,features:MC,duplicateTracks:RC,ageRestriction:LC,platform:VC(e),ads:(t=e.container,(0,TA.HY)({sponsoredPlaylist:HE,leaderboard:TE,root:WE,adFeedback:FE,...t===za.m.Desktop?{billboard:IE,hpto:OE,vto:VE,audio:PE,embeddedAd:kE}:{}})),inAppMessaging:YE,aboutRecs:SC,seoExperiment:JC,...e.container===za.m.Desktop&&{aboutSpotify:NC,licenses:HC,reportIssue:QE}});var t})(n),e,rI((0,TA.Tw)(...a)))}class oI{constructor(e){this.spotifyTransport=e}async getDialog(e){const t=await((e,t)=>e.build().withMethod("GET").withHost(Ko.d).withPath(`/dialog/${t}`).withEndpointIdentifier("/dialog/${uri}").withoutMarket().send())(this.spotifyTransport,e),{r:n,g:a,b:r}=this.getColorRGB(t.body.color);return{backgroundColor:`rgb(${n}, ${a}, ${r})`,providerUrl:t.body.provider_url}}getColorRGB(e){return{r:e>>>16&255,g:e>>>8&255,b:e>>>0&255}}}var cI=o(20522);const lI=(e,t)=>{let n=[];return{storeAction:a=>{n=a(n),e.setItem(t,JSON.stringify(n))},pullAction:()=>{const a=e.getItem(t);if(e.removeItem(t),n=[],a)try{return JSON.parse(a)}catch(e){return null}return null}}};var uI=o(34198),dI=o(13614),hI=o(12255);var pI=o(19150),mI=o(52230),fI=o(92370),gI=o(82074),bI=o(26096),vI=o(78988);const yI=e=>{const t=e.pathname.split("/"),n=t.pop(),a=t.pop();if(a&&n)return(0,X.o_h)(`spotify:${a}:${n}`)?.toURI()};var xI,wI,_I,AI,EI,jI=-1,SI=function(e){addEventListener("pageshow",(function(t){t.persisted&&(jI=t.timeStamp,e(t))}),!0)},CI=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},II=function(){var e=CI();return e&&e.activationStart||0},NI=function(e,t){var n=CI(),a="navigate";return jI>=0?a="back-forward-cache":n&&(document.prerendering||II()>0?a="prerender":document.wasDiscarded?a="restore":n.type&&(a=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:a}},kI=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var a=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return a.observe(Object.assign({type:e,buffered:!0},n||{})),a}}catch(e){}},LI=function(e,t,n,a){var r,i;return function(s){t.value>=0&&(s||a)&&((i=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},TI=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},RI=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},PI=function(e){var t=!1;return function(){t||(e(),t=!0)}},MI=-1,OI=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},DI=function(e){"hidden"===document.visibilityState&&MI>-1&&(MI="visibilitychange"===e.type?e.timeStamp:0,zI())},HI=function(){addEventListener("visibilitychange",DI,!0),addEventListener("prerenderingchange",DI,!0)},zI=function(){removeEventListener("visibilitychange",DI,!0),removeEventListener("prerenderingchange",DI,!0)},VI=function(){return MI<0&&(MI=OI(),HI(),SI((function(){setTimeout((function(){MI=OI(),HI()}),0)}))),{get firstHiddenTime(){return MI}}},BI=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},UI=[1800,3e3],FI=function(e,t){t=t||{},BI((function(){var n,a=VI(),r=NI("FCP"),i=kI("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(i.disconnect(),e.startTime<a.firstHiddenTime&&(r.value=Math.max(e.startTime-II(),0),r.entries.push(e),n(!0)))}))}));i&&(n=LI(e,r,UI,t.reportAllChanges),SI((function(a){r=NI("FCP"),n=LI(e,r,UI,t.reportAllChanges),TI((function(){r.value=performance.now()-a.timeStamp,n(!0)}))})))}))},qI=[.1,.25],WI=0,GI=1/0,$I=0,QI=function(e){e.forEach((function(e){e.interactionId&&(GI=Math.min(GI,e.interactionId),$I=Math.max($I,e.interactionId),WI=$I?($I-GI)/7+1:0)}))},KI=function(){return xI?WI:performance.interactionCount||0},ZI=[],YI=new Map,JI=0,XI=[],eN=function(e){if(XI.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=ZI[ZI.length-1],n=YI.get(e.interactionId);if(n||ZI.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var a={id:e.interactionId,latency:e.duration,entries:[e]};YI.set(a.id,a),ZI.push(a)}ZI.sort((function(e,t){return t.latency-e.latency})),ZI.length>10&&ZI.splice(10).forEach((function(e){return YI.delete(e.id)}))}}},tN=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=PI(e),"hidden"===document.visibilityState?e():(n=t(e),RI(e)),n},nN=[200,500],aN=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},BI((function(){var n;"interactionCount"in performance||xI||(xI=kI("event",QI,{type:"event",buffered:!0,durationThreshold:0}));var a,r=NI("INP"),i=function(e){tN((function(){e.forEach(eN);var t=function(){var e=Math.min(ZI.length-1,Math.floor((KI()-JI)/50));return ZI[e]}();t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,a())}))},s=kI("event",i,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});a=LI(e,r,nN,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),RI((function(){i(s.takeRecords()),a(!0)})),SI((function(){JI=KI(),ZI.length=0,YI.clear(),r=NI("INP"),a=LI(e,r,nN,t.reportAllChanges)})))})))},rN=[2500,4e3],iN={},sN=[800,1800],oN=function e(t){document.prerendering?BI((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},cN=function(e,t){t=t||{};var n=NI("TTFB"),a=LI(e,n,sN,t.reportAllChanges);oN((function(){var r=CI();r&&(n.value=Math.max(r.responseStart-II(),0),n.entries=[r],a(!0),SI((function(){n=NI("TTFB",0),(a=LI(e,n,sN,t.reportAllChanges))(!0)})))}))},lN={passive:!0,capture:!0},uN=new Date,dN=function(e,t){wI||(wI=t,_I=e,AI=new Date,mN(removeEventListener),hN())},hN=function(){if(_I>=0&&_I<AI-uN){var e={entryType:"first-input",name:wI.type,target:wI.target,cancelable:wI.cancelable,startTime:wI.timeStamp,processingStart:wI.timeStamp+_I};EI.forEach((function(t){t(e)})),EI=[]}},pN=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){dN(e,t),r()},a=function(){r()},r=function(){removeEventListener("pointerup",n,lN),removeEventListener("pointercancel",a,lN)};addEventListener("pointerup",n,lN),addEventListener("pointercancel",a,lN)}(t,e):dN(t,e)}},mN=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,pN,lN)}))},fN=[100,300];const gN=[{regExp:/^\/$/,pageIdentifier:"/home"},{regExp:/^\/genre/,pageIdentifier:"/genre"},{regExp:/^\/view/,pageIdentifier:"/view"},{regExp:/^\/browse/,pageIdentifier:"/browse"},{regExp:/^\/search/,pageIdentifier:"/search"},{regExp:/^\/upsell/,pageIdentifier:"/upsell"},{regExp:/^\/collection/,pageIdentifier:"/collection"},{regExp:/^\/artist/,pageIdentifier:"/artist"},{regExp:/^\/playlist/,pageIdentifier:"/playlist"},{regExp:/^\/album/,pageIdentifier:"/album"},{regExp:/^\/episode/,pageIdentifier:"/episode"},{regExp:/^\/show/,pageIdentifier:"/show"},{regExp:/^\/user/,pageIdentifier:"/user"},{regExp:/^\/track/,pageIdentifier:"/track"},{regExp:/^\/concerts/,pageIdentifier:"/concerts"},{regExp:/^\/concert\//,pageIdentifier:"/concert"},{regExp:/^\/made-for-you/,pageIdentifier:"/made-for-you"},{regExp:/^\/prerelease/,pageIdentifier:"/prerelease"}],bN=(e="")=>{const t=gN.find((({regExp:t})=>t.test(e)));return t?.pageIdentifier??"unknown"};function vN(e){YS.BrowserMetrics.getPageLoadTime().then((e=>{(0,tC.fE)({metric_type:YS.MetricTypes.TIMER,what:"time-to-page-load-nanoseconds",value:(0,YS.asNanoseconds)(YS.Time.fromMillis(e).asNanos()),tags:{route:bN(window.location.pathname)}})})).catch((()=>{})),YS.BrowserMetrics.getTimeToFirstPaint().then((e=>{(0,tC.fE)({metric_type:YS.MetricTypes.TIMER,what:"time-to-first-paint-nanoseconds",value:(0,YS.asNanoseconds)(YS.Time.fromMillis(e).asNanos()),tags:{route:bN(window.location.pathname)}})})).catch((()=>{})),YS.BrowserMetrics.getTimeToFirstContentfulPaint().then((e=>{(0,tC.fE)({metric_type:YS.MetricTypes.TIMER,what:"time-to-first-contentful-paint-nanoseconds",value:(0,YS.asNanoseconds)(YS.Time.fromMillis(e).asNanos()),tags:{route:bN(window.location.pathname)}})})).catch((()=>{}));const t=t=>{const n=bN(window.location.pathname);if((0,tC.fE)(YS.BrowserMetrics.getWebVitalsMetric({...t,label:t.name},{route:n})),e){const a=e.makeTimeMeasurementBuilder("web_vitals");a.addPoint({identifier:t.name,durationInMicroseconds:Math.round(1e3*t.value)}).addDimension("page-identifier",n),e.send(a.build())}};var n,a;n=t,a=a||{},BI((function(){var e,t=VI(),r=NI("FID"),i=function(n){n.startTime<t.firstHiddenTime&&(r.value=n.processingStart-n.startTime,r.entries.push(n),e(!0))},s=function(e){e.forEach(i)},o=kI("first-input",s);e=LI(n,r,fN,a.reportAllChanges),o&&(RI(PI((function(){s(o.takeRecords()),o.disconnect()}))),SI((function(){var t;r=NI("FID"),e=LI(n,r,fN,a.reportAllChanges),EI=[],_I=-1,wI=null,mN(addEventListener),t=i,EI.push(t),hN()})))})),function(e,t){t=t||{},FI(PI((function(){var n,a=NI("CLS",0),r=0,i=[],s=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=i[0],n=i[i.length-1];r&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(r+=e.value,i.push(e)):(r=e.value,i=[e])}})),r>a.value&&(a.value=r,a.entries=i,n())},o=kI("layout-shift",s);o&&(n=LI(e,a,qI,t.reportAllChanges),RI((function(){s(o.takeRecords()),n(!0)})),SI((function(){r=0,a=NI("CLS",0),n=LI(e,a,qI,t.reportAllChanges),TI((function(){return n()}))})),setTimeout(n,0))})))}(t),function(e,t){t=t||{},BI((function(){var n,a=VI(),r=NI("LCP"),i=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<a.firstHiddenTime&&(r.value=Math.max(e.startTime-II(),0),r.entries=[e],n())}))},s=kI("largest-contentful-paint",i);if(s){n=LI(e,r,rN,t.reportAllChanges);var o=PI((function(){iN[r.id]||(i(s.takeRecords()),s.disconnect(),iN[r.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return tN(o)}),{once:!0,capture:!0})})),RI(o),SI((function(a){r=NI("LCP"),n=LI(e,r,rN,t.reportAllChanges),TI((function(){r.value=performance.now()-a.timeStamp,iN[r.id]=!0,n(!0)}))}))}}))}(t),aN(t),FI(t),cN(t)}o(99173);async function yN(e,t,n){const a=(0,Nn.sV)();if(null===e||null===t)return null===e&&a.setUser({id:"anonymous",username:"anonymous"}),void(null===t&&a.setTag("product","logged_out"));const r=(0,Hb.My)(),i=await vI.V.hash(e.username);switch(r){case za.m.Desktop:a.setUser({id:i});break;case za.m.Web:case za.m.PWA:{const e=(0,Ba.x)(Ua.I4);e?.correlationId&&a.setUser({id:e.correlationId})}}var s;a.setTag("product",t.product),n.dispatch((s={country:t.country,uri:e.uri,id:e.username,display_name:e.displayName||void 0,images:e.images.map((({url:e,width:t,height:n})=>({url:e,width:t||null,height:n||null}))),product:t.product,policies:{opt_in_trial_premium_only_market:"1"===t["opt-in-trial-premium-only-market"]},type:"user",avatarBackgroundColor:e.avatarBackgroundColor},{type:bE.J,data:s})),n.dispatch(function(e){return{type:bE.O,data:e}}(t))}function xN(){if(gA()){const e="xpui-snapshot_2025-05-08_1746701037144_126b0d8";(0,Nn.ig)("https://de32132fc06e4b28965ecf25332c3a25@o22381.ingest.sentry.io/114855",e,function(){const{error:e,transaction:t}={error:.001,transaction:0};return{sampleRate:e,tracesSampleRate:t,debug:!1,beforeSendTransaction:bA}}(),(0,Hb.My)(),function(){const e=[];return e.push(Wx()),e.push(mA({useEffect:f.useEffect,useLocation:ae.zy,useNavigationType:ae.wQ,createRoutesFromChildren:ae.AV,matchRoutes:Z.ue})),e}())}}Vx("playback_load_start"),(0,n.Cd)(),async function(){xN();const u=await async function(){const e=(0,Hb.My)();{const{createPlatformDesktop:t}=await Promise.resolve().then(o.bind(o,87756));return t(e)}}(),d=u.getFeatureFlags(),h=u.getRegistry(),p=u.getSession(),f=u.getHistory(),g=u.getSEOExperiments(),b=h.resolve(Vb.u);Fa.M.setup(),(0,Dx.O)(u.container,u.operatingSystem);const v=u.getEventSender();b.getEvents().addListener("message",(e=>{e.data.type===Pd.W.NAVIGATION?async function(e,t){if(!t)return;const n=kA(t);if(!n)return;const{url:a}=n;if(NA(a)){const t=e.resolve(xA.KM);CA(n,t)}await LA(e,n);const r=`${a.pathname}${a.search}`;e.resolve(xA.Fi).push(r,{referrer:"deeplink"})}(h,e.data.data):e.data.type===Pd.W.LOG_DEEP_LINK&&function(e,t){if(!t)return;const n=kA(t);if(!n)return;const{url:a}=n;if(NA(a)){const t=e.resolve(xA.KM);CA(n,t)}}(h,e.data.data)})),(0,hI.X)()&&!d.mwp&&(window.location.href="https://www.spotify.com");const{gtmId:y,market:x,locale:w,userCountry:_}=(0,Ba.x)(Ua.I4),A=Ux(u),E=u.getTransport(),j=await u.getServiceWorkerMessenger(),C=Spicetify.Platform.ReduxStore=h.resolve(Hx.JD),I=h.resolve(zx.t),k=h.resolve(uI.Ho),L=h.resolve(dI.v),T=h.resolve(pI.B),R=h.resolve(mI.H),P=h.resolve(wA.Ki),M=h.resolve(fI.Yi),O=h.resolve(gI.j),D=h.resolve(cI.T),H=h.resolve(vA.B),z=sI({session:p,features:d,seoExperiment:g},{platform:u,history:f,playbackApi:T,playerApi:R,rootlistApi:M,playlistApi:P,followApi:I,libraryApi:k,actionStoreApi:C,serviceWorkerMessenger:j,offlineApi:L,transport:E,eventSender:v,adManagers:u.getAdManagers(),deferredAction:lI(sessionStorage,"ANONYMOUS_DEFERRED_ACTION_KEY"),ageRestrictionApi:new oI(Qo.n.getInstance()),socialConnectApi:O});E.on(r.TransportEvent.ACCESS_TOKEN,(async()=>{const e=await D.getToken({preferCached:!0});null!==e&&(Qo.n.setSession(e),z.dispatch((0,Xs.a7)(e)))}));let V=!1;E.on(r.TransportEvent.RECONNECTING,(()=>{V=!0})),E.on(r.TransportEvent.RECONNECTED,(()=>{V=!1})),E.on(r.TransportEvent.AUTHENTICATION_FAILED,(async()=>{if(!V&&!A){const e=await D.getToken({preferCached:!0});null!==e&&e.isAnonymous||z.dispatch((0,Xs.wH)())}})),(0,tC.q6)("desktop-web-player",E),vN(H),A||(()=>{const e=new URL(window.location.href);return IA(e)||((t=e).searchParams.has("utm_source")||t.searchParams.has("utm_medium")||t.searchParams.has("utm_campaign"))&&!(e=>"/"===e.pathname&&"pwa_install"===e.searchParams.get("utm_source"))(e)||!(e=>"/"===e.pathname||"/__noul__"===e.pathname||/\/intl-[A-Za-z][A-Za-z]$/.test(e.pathname))(e);var t})()&&(((e,t)=>{const n=new URL(window.location.href),a=n.searchParams.get("dlsi")||SA(),r={link:window.location.href,entity_uri:yI(n),source:window.navigator.userAgent,deeplink_session_id:a};t?e.send({name:"DeeplinkOpenNonAuth",environments:["browsernonauth","devicenonauth"],data:r}):e.send((0,AA.N)(r))})(v,p.isAnonymous),f.location.state={..."object"==typeof f.location.state?f.location.state:{},referrer:"deeplink"},R.setReferrer("deeplink"));const B=i.Ru.getLocaleForTranslation();if(z.dispatch((0,Xs.Hh)()),z.dispatch((0,c.zA)(B)),A){document.documentElement.setAttribute("lang",B)}(e=>{const t=window.matchMedia("(display-mode: standalone)");t.addEventListener?t.addEventListener("change",(t=>e(t.matches))):t.addListener((t=>e(t.matches)))})((()=>{z.dispatch({type:s})})),function(e,t){const n=[];let a=0;n.push(e.location),e.listen(((e,r)=>{r===Px&&(a+=1,n.splice(a),n.push(e)),r===Rx&&(a=n.findIndex((t=>t.key===e.key))),r===Mx&&n.splice(a,1,e),t(Ox(a,n))})),t(Ox(a,n))}(f,(e=>{z.dispatch((0,l.hp)(e))})),await yN(u.initialUser,u.initialProductState,z);const U=(0,yA.e)(!0);(0,bI.lM)(),(0,e.H)(U).render((0,S.jsx)(t.Gu,{configuration:null,children:(0,S.jsx)(m.s,{onError:e=>(0,Nn.Jy)(e,"App"),Fallback:N,children:(0,S.jsx)(Tx,{store:z,platform:u})})})),!A&&y&&(0,a.track)({dataLayerPushInitial:!0,googleTagManagerId:y,language:w?.locale,market:x,loggedIn:!p.isAnonymous,oneTrust:"1"===((0,Ht.v8)("client-web_one-trust")??"1"),userCountry:_}),(0,Dx.W)(u.operatingSystem)&&z.dispatch((0,l.Kk)()),(0,n.Lj)("UI init phase is done for logged-in experience"),p.isAnonymous||v.send({name:"WindowSize",environments:["desktop","browser"],data:{width:window.outerWidth,height:window.outerHeight,mode:0,duration:0}},{flush:!1})}().catch((n=>{(0,Nn.OV)(n),console.error(n);const a=(0,yA.e)(!0);(0,e.H)(a).render((0,S.jsx)(t.Gu,{configuration:null,children:(0,S.jsx)(N,{})}))}))})(),c=o.O(c)})();
//# sourceMappingURL=xpui-snapshot.js.map